function D0(l,n){for(var o=0;o<n.length;o++){const c=n[o];if(typeof c!="string"&&!Array.isArray(c)){for(const g in c)if(g!=="default"&&!(g in l)){const f=Object.getOwnPropertyDescriptor(c,g);f&&Object.defineProperty(l,g,f.get?f:{enumerable:!0,get:()=>c[g]})}}}return Object.freeze(Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const g of document.querySelectorAll('link[rel="modulepreload"]'))c(g);new MutationObserver(g=>{for(const f of g)if(f.type==="childList")for(const x of f.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&c(x)}).observe(document,{childList:!0,subtree:!0});function o(g){const f={};return g.integrity&&(f.integrity=g.integrity),g.referrerPolicy&&(f.referrerPolicy=g.referrerPolicy),g.crossOrigin==="use-credentials"?f.credentials="include":g.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function c(g){if(g.ep)return;g.ep=!0;const f=o(g);fetch(g.href,f)}})();var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function du(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}function _a(l){if(Object.prototype.hasOwnProperty.call(l,"__esModule"))return l;var n=l.default;if(typeof n=="function"){var o=function c(){return this instanceof c?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};o.prototype=n.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(l).forEach(function(c){var g=Object.getOwnPropertyDescriptor(l,c);Object.defineProperty(o,c,g.get?g:{enumerable:!0,get:function(){return l[c]}})}),o}var Fc={exports:{}},ca={},Uc={exports:{}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Of;function dp(){if(Of)return nt;Of=1;var l=Symbol.for("react.element"),n=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),c=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),x=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),E=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),N=Symbol.iterator;function D(X){return X===null||typeof X!="object"?null:(X=N&&X[N]||X["@@iterator"],typeof X=="function"?X:null)}var P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,F={};function j(X,ae,Ke){this.props=X,this.context=ae,this.refs=F,this.updater=Ke||P}j.prototype.isReactComponent={},j.prototype.setState=function(X,ae){if(typeof X!="object"&&typeof X!="function"&&X!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,ae,"setState")},j.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")};function K(){}K.prototype=j.prototype;function J(X,ae,Ke){this.props=X,this.context=ae,this.refs=F,this.updater=Ke||P}var V=J.prototype=new K;V.constructor=J,U(V,j.prototype),V.isPureReactComponent=!0;var oe=Array.isArray,_e=Object.prototype.hasOwnProperty,xe={current:null},se={key:!0,ref:!0,__self:!0,__source:!0};function he(X,ae,Ke){var Fe,ot={},we=null,xt=null;if(ae!=null)for(Fe in ae.ref!==void 0&&(xt=ae.ref),ae.key!==void 0&&(we=""+ae.key),ae)_e.call(ae,Fe)&&!se.hasOwnProperty(Fe)&&(ot[Fe]=ae[Fe]);var Xe=arguments.length-2;if(Xe===1)ot.children=Ke;else if(1<Xe){for(var wt=Array(Xe),nr=0;nr<Xe;nr++)wt[nr]=arguments[nr+2];ot.children=wt}if(X&&X.defaultProps)for(Fe in Xe=X.defaultProps,Xe)ot[Fe]===void 0&&(ot[Fe]=Xe[Fe]);return{$$typeof:l,type:X,key:we,ref:xt,props:ot,_owner:xe.current}}function ne(X,ae){return{$$typeof:l,type:X.type,key:ae,ref:X.ref,props:X.props,_owner:X._owner}}function Me(X){return typeof X=="object"&&X!==null&&X.$$typeof===l}function He(X){var ae={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,function(Ke){return ae[Ke]})}var ve=/\/+/g;function $e(X,ae){return typeof X=="object"&&X!==null&&X.key!=null?He(""+X.key):ae.toString(36)}function ct(X,ae,Ke,Fe,ot){var we=typeof X;(we==="undefined"||we==="boolean")&&(X=null);var xt=!1;if(X===null)xt=!0;else switch(we){case"string":case"number":xt=!0;break;case"object":switch(X.$$typeof){case l:case n:xt=!0}}if(xt)return xt=X,ot=ot(xt),X=Fe===""?"."+$e(xt,0):Fe,oe(ot)?(Ke="",X!=null&&(Ke=X.replace(ve,"$&/")+"/"),ct(ot,ae,Ke,"",function(nr){return nr})):ot!=null&&(Me(ot)&&(ot=ne(ot,Ke+(!ot.key||xt&&xt.key===ot.key?"":(""+ot.key).replace(ve,"$&/")+"/")+X)),ae.push(ot)),1;if(xt=0,Fe=Fe===""?".":Fe+":",oe(X))for(var Xe=0;Xe<X.length;Xe++){we=X[Xe];var wt=Fe+$e(we,Xe);xt+=ct(we,ae,Ke,wt,ot)}else if(wt=D(X),typeof wt=="function")for(X=wt.call(X),Xe=0;!(we=X.next()).done;)we=we.value,wt=Fe+$e(we,Xe++),xt+=ct(we,ae,Ke,wt,ot);else if(we==="object")throw ae=String(X),Error("Objects are not valid as a React child (found: "+(ae==="[object Object]"?"object with keys {"+Object.keys(X).join(", ")+"}":ae)+"). If you meant to render a collection of children, use an array instead.");return xt}function ie(X,ae,Ke){if(X==null)return X;var Fe=[],ot=0;return ct(X,Fe,"","",function(we){return ae.call(Ke,we,ot++)}),Fe}function dt(X){if(X._status===-1){var ae=X._result;ae=ae(),ae.then(function(Ke){(X._status===0||X._status===-1)&&(X._status=1,X._result=Ke)},function(Ke){(X._status===0||X._status===-1)&&(X._status=2,X._result=Ke)}),X._status===-1&&(X._status=0,X._result=ae)}if(X._status===1)return X._result.default;throw X._result}var Oe={current:null},Ee={transition:null},Le={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:Ee,ReactCurrentOwner:xe};function Ce(){throw Error("act(...) is not supported in production builds of React.")}return nt.Children={map:ie,forEach:function(X,ae,Ke){ie(X,function(){ae.apply(this,arguments)},Ke)},count:function(X){var ae=0;return ie(X,function(){ae++}),ae},toArray:function(X){return ie(X,function(ae){return ae})||[]},only:function(X){if(!Me(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},nt.Component=j,nt.Fragment=o,nt.Profiler=g,nt.PureComponent=J,nt.StrictMode=c,nt.Suspense=A,nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Le,nt.act=Ce,nt.cloneElement=function(X,ae,Ke){if(X==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var Fe=U({},X.props),ot=X.key,we=X.ref,xt=X._owner;if(ae!=null){if(ae.ref!==void 0&&(we=ae.ref,xt=xe.current),ae.key!==void 0&&(ot=""+ae.key),X.type&&X.type.defaultProps)var Xe=X.type.defaultProps;for(wt in ae)_e.call(ae,wt)&&!se.hasOwnProperty(wt)&&(Fe[wt]=ae[wt]===void 0&&Xe!==void 0?Xe[wt]:ae[wt])}var wt=arguments.length-2;if(wt===1)Fe.children=Ke;else if(1<wt){Xe=Array(wt);for(var nr=0;nr<wt;nr++)Xe[nr]=arguments[nr+2];Fe.children=Xe}return{$$typeof:l,type:X.type,key:ot,ref:we,props:Fe,_owner:xt}},nt.createContext=function(X){return X={$$typeof:x,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},X.Provider={$$typeof:f,_context:X},X.Consumer=X},nt.createElement=he,nt.createFactory=function(X){var ae=he.bind(null,X);return ae.type=X,ae},nt.createRef=function(){return{current:null}},nt.forwardRef=function(X){return{$$typeof:C,render:X}},nt.isValidElement=Me,nt.lazy=function(X){return{$$typeof:S,_payload:{_status:-1,_result:X},_init:dt}},nt.memo=function(X,ae){return{$$typeof:E,type:X,compare:ae===void 0?null:ae}},nt.startTransition=function(X){var ae=Ee.transition;Ee.transition={};try{X()}finally{Ee.transition=ae}},nt.unstable_act=Ce,nt.useCallback=function(X,ae){return Oe.current.useCallback(X,ae)},nt.useContext=function(X){return Oe.current.useContext(X)},nt.useDebugValue=function(){},nt.useDeferredValue=function(X){return Oe.current.useDeferredValue(X)},nt.useEffect=function(X,ae){return Oe.current.useEffect(X,ae)},nt.useId=function(){return Oe.current.useId()},nt.useImperativeHandle=function(X,ae,Ke){return Oe.current.useImperativeHandle(X,ae,Ke)},nt.useInsertionEffect=function(X,ae){return Oe.current.useInsertionEffect(X,ae)},nt.useLayoutEffect=function(X,ae){return Oe.current.useLayoutEffect(X,ae)},nt.useMemo=function(X,ae){return Oe.current.useMemo(X,ae)},nt.useReducer=function(X,ae,Ke){return Oe.current.useReducer(X,ae,Ke)},nt.useRef=function(X){return Oe.current.useRef(X)},nt.useState=function(X){return Oe.current.useState(X)},nt.useSyncExternalStore=function(X,ae,Ke){return Oe.current.useSyncExternalStore(X,ae,Ke)},nt.useTransition=function(){return Oe.current.useTransition()},nt.version="18.3.1",nt}var kf;function _d(){return kf||(kf=1,Uc.exports=dp()),Uc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Df;function hp(){if(Df)return ca;Df=1;var l=_d(),n=Symbol.for("react.element"),o=Symbol.for("react.fragment"),c=Object.prototype.hasOwnProperty,g=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,f={key:!0,ref:!0,__self:!0,__source:!0};function x(C,A,E){var S,N={},D=null,P=null;E!==void 0&&(D=""+E),A.key!==void 0&&(D=""+A.key),A.ref!==void 0&&(P=A.ref);for(S in A)c.call(A,S)&&!f.hasOwnProperty(S)&&(N[S]=A[S]);if(C&&C.defaultProps)for(S in A=C.defaultProps,A)N[S]===void 0&&(N[S]=A[S]);return{$$typeof:n,type:C,key:D,ref:P,props:N,_owner:g.current}}return ca.Fragment=o,ca.jsx=x,ca.jsxs=x,ca}var Pf;function fp(){return Pf||(Pf=1,Fc.exports=hp()),Fc.exports}var R=fp(),Z=_d();const gp=du(Z);var Ml={},Vc={exports:{}},Xr={},Wc={exports:{}},Hc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mf;function pp(){return Mf||(Mf=1,(function(l){function n(Ee,Le){var Ce=Ee.length;Ee.push(Le);e:for(;0<Ce;){var X=Ce-1>>>1,ae=Ee[X];if(0<g(ae,Le))Ee[X]=Le,Ee[Ce]=ae,Ce=X;else break e}}function o(Ee){return Ee.length===0?null:Ee[0]}function c(Ee){if(Ee.length===0)return null;var Le=Ee[0],Ce=Ee.pop();if(Ce!==Le){Ee[0]=Ce;e:for(var X=0,ae=Ee.length,Ke=ae>>>1;X<Ke;){var Fe=2*(X+1)-1,ot=Ee[Fe],we=Fe+1,xt=Ee[we];if(0>g(ot,Ce))we<ae&&0>g(xt,ot)?(Ee[X]=xt,Ee[we]=Ce,X=we):(Ee[X]=ot,Ee[Fe]=Ce,X=Fe);else if(we<ae&&0>g(xt,Ce))Ee[X]=xt,Ee[we]=Ce,X=we;else break e}}return Le}function g(Ee,Le){var Ce=Ee.sortIndex-Le.sortIndex;return Ce!==0?Ce:Ee.id-Le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;l.unstable_now=function(){return f.now()}}else{var x=Date,C=x.now();l.unstable_now=function(){return x.now()-C}}var A=[],E=[],S=1,N=null,D=3,P=!1,U=!1,F=!1,j=typeof setTimeout=="function"?setTimeout:null,K=typeof clearTimeout=="function"?clearTimeout:null,J=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Ee){for(var Le=o(E);Le!==null;){if(Le.callback===null)c(E);else if(Le.startTime<=Ee)c(E),Le.sortIndex=Le.expirationTime,n(A,Le);else break;Le=o(E)}}function oe(Ee){if(F=!1,V(Ee),!U)if(o(A)!==null)U=!0,dt(_e);else{var Le=o(E);Le!==null&&Oe(oe,Le.startTime-Ee)}}function _e(Ee,Le){U=!1,F&&(F=!1,K(he),he=-1),P=!0;var Ce=D;try{for(V(Le),N=o(A);N!==null&&(!(N.expirationTime>Le)||Ee&&!He());){var X=N.callback;if(typeof X=="function"){N.callback=null,D=N.priorityLevel;var ae=X(N.expirationTime<=Le);Le=l.unstable_now(),typeof ae=="function"?N.callback=ae:N===o(A)&&c(A),V(Le)}else c(A);N=o(A)}if(N!==null)var Ke=!0;else{var Fe=o(E);Fe!==null&&Oe(oe,Fe.startTime-Le),Ke=!1}return Ke}finally{N=null,D=Ce,P=!1}}var xe=!1,se=null,he=-1,ne=5,Me=-1;function He(){return!(l.unstable_now()-Me<ne)}function ve(){if(se!==null){var Ee=l.unstable_now();Me=Ee;var Le=!0;try{Le=se(!0,Ee)}finally{Le?$e():(xe=!1,se=null)}}else xe=!1}var $e;if(typeof J=="function")$e=function(){J(ve)};else if(typeof MessageChannel<"u"){var ct=new MessageChannel,ie=ct.port2;ct.port1.onmessage=ve,$e=function(){ie.postMessage(null)}}else $e=function(){j(ve,0)};function dt(Ee){se=Ee,xe||(xe=!0,$e())}function Oe(Ee,Le){he=j(function(){Ee(l.unstable_now())},Le)}l.unstable_IdlePriority=5,l.unstable_ImmediatePriority=1,l.unstable_LowPriority=4,l.unstable_NormalPriority=3,l.unstable_Profiling=null,l.unstable_UserBlockingPriority=2,l.unstable_cancelCallback=function(Ee){Ee.callback=null},l.unstable_continueExecution=function(){U||P||(U=!0,dt(_e))},l.unstable_forceFrameRate=function(Ee){0>Ee||125<Ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<Ee?Math.floor(1e3/Ee):5},l.unstable_getCurrentPriorityLevel=function(){return D},l.unstable_getFirstCallbackNode=function(){return o(A)},l.unstable_next=function(Ee){switch(D){case 1:case 2:case 3:var Le=3;break;default:Le=D}var Ce=D;D=Le;try{return Ee()}finally{D=Ce}},l.unstable_pauseExecution=function(){},l.unstable_requestPaint=function(){},l.unstable_runWithPriority=function(Ee,Le){switch(Ee){case 1:case 2:case 3:case 4:case 5:break;default:Ee=3}var Ce=D;D=Ee;try{return Le()}finally{D=Ce}},l.unstable_scheduleCallback=function(Ee,Le,Ce){var X=l.unstable_now();switch(typeof Ce=="object"&&Ce!==null?(Ce=Ce.delay,Ce=typeof Ce=="number"&&0<Ce?X+Ce:X):Ce=X,Ee){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=Ce+ae,Ee={id:S++,callback:Le,priorityLevel:Ee,startTime:Ce,expirationTime:ae,sortIndex:-1},Ce>X?(Ee.sortIndex=Ce,n(E,Ee),o(A)===null&&Ee===o(E)&&(F?(K(he),he=-1):F=!0,Oe(oe,Ce-X))):(Ee.sortIndex=ae,n(A,Ee),U||P||(U=!0,dt(_e))),Ee},l.unstable_shouldYield=He,l.unstable_wrapCallback=function(Ee){var Le=D;return function(){var Ce=D;D=Le;try{return Ee.apply(this,arguments)}finally{D=Ce}}}})(Hc)),Hc}var Lf;function mp(){return Lf||(Lf=1,Wc.exports=pp()),Wc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bf;function xp(){if(Bf)return Xr;Bf=1;var l=_d(),n=mp();function o(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,h=1;h<arguments.length;h++)s+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var c=new Set,g={};function f(t,s){x(t,s),x(t+"Capture",s)}function x(t,s){for(g[t]=s,t=0;t<s.length;t++)c.add(s[t])}var C=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),A=Object.prototype.hasOwnProperty,E=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,S={},N={};function D(t){return A.call(N,t)?!0:A.call(S,t)?!1:E.test(t)?N[t]=!0:(S[t]=!0,!1)}function P(t,s,h,m){if(h!==null&&h.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return m?!1:h!==null?!h.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function U(t,s,h,m){if(s===null||typeof s>"u"||P(t,s,h,m))return!0;if(m)return!1;if(h!==null)switch(h.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function F(t,s,h,m,v,_,O){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=m,this.attributeNamespace=v,this.mustUseProperty=h,this.propertyName=t,this.type=s,this.sanitizeURL=_,this.removeEmptyString=O}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){j[t]=new F(t,0,!1,t,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];j[s]=new F(s,1,!1,t[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(t){j[t]=new F(t,2,!1,t.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){j[t]=new F(t,2,!1,t,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){j[t]=new F(t,3,!1,t.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(t){j[t]=new F(t,3,!0,t,null,!1,!1)}),["capture","download"].forEach(function(t){j[t]=new F(t,4,!1,t,null,!1,!1)}),["cols","rows","size","span"].forEach(function(t){j[t]=new F(t,6,!1,t,null,!1,!1)}),["rowSpan","start"].forEach(function(t){j[t]=new F(t,5,!1,t.toLowerCase(),null,!1,!1)});var K=/[\-:]([a-z])/g;function J(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(K,J);j[s]=new F(s,1,!1,t,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(K,J);j[s]=new F(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(K,J);j[s]=new F(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(t){j[t]=new F(t,1,!1,t.toLowerCase(),null,!1,!1)}),j.xlinkHref=new F("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(t){j[t]=new F(t,1,!1,t.toLowerCase(),null,!0,!0)});function V(t,s,h,m){var v=j.hasOwnProperty(s)?j[s]:null;(v!==null?v.type!==0:m||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(U(s,h,v,m)&&(h=null),m||v===null?D(s)&&(h===null?t.removeAttribute(s):t.setAttribute(s,""+h)):v.mustUseProperty?t[v.propertyName]=h===null?v.type===3?!1:"":h:(s=v.attributeName,m=v.attributeNamespace,h===null?t.removeAttribute(s):(v=v.type,h=v===3||v===4&&h===!0?"":""+h,m?t.setAttributeNS(m,s,h):t.setAttribute(s,h))))}var oe=l.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_e=Symbol.for("react.element"),xe=Symbol.for("react.portal"),se=Symbol.for("react.fragment"),he=Symbol.for("react.strict_mode"),ne=Symbol.for("react.profiler"),Me=Symbol.for("react.provider"),He=Symbol.for("react.context"),ve=Symbol.for("react.forward_ref"),$e=Symbol.for("react.suspense"),ct=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),dt=Symbol.for("react.lazy"),Oe=Symbol.for("react.offscreen"),Ee=Symbol.iterator;function Le(t){return t===null||typeof t!="object"?null:(t=Ee&&t[Ee]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,X;function ae(t){if(X===void 0)try{throw Error()}catch(h){var s=h.stack.trim().match(/\n( *(at )?)/);X=s&&s[1]||""}return`
`+X+t}var Ke=!1;function Fe(t,s){if(!t||Ke)return"";Ke=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(re){var m=re}Reflect.construct(t,[],s)}else{try{s.call()}catch(re){m=re}t.call(s.prototype)}else{try{throw Error()}catch(re){m=re}t()}}catch(re){if(re&&m&&typeof re.stack=="string"){for(var v=re.stack.split(`
`),_=m.stack.split(`
`),O=v.length-1,B=_.length-1;1<=O&&0<=B&&v[O]!==_[B];)B--;for(;1<=O&&0<=B;O--,B--)if(v[O]!==_[B]){if(O!==1||B!==1)do if(O--,B--,0>B||v[O]!==_[B]){var H=`
`+v[O].replace(" at new "," at ");return t.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",t.displayName)),H}while(1<=O&&0<=B);break}}}finally{Ke=!1,Error.prepareStackTrace=h}return(t=t?t.displayName||t.name:"")?ae(t):""}function ot(t){switch(t.tag){case 5:return ae(t.type);case 16:return ae("Lazy");case 13:return ae("Suspense");case 19:return ae("SuspenseList");case 0:case 2:case 15:return t=Fe(t.type,!1),t;case 11:return t=Fe(t.type.render,!1),t;case 1:return t=Fe(t.type,!0),t;default:return""}}function we(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case se:return"Fragment";case xe:return"Portal";case ne:return"Profiler";case he:return"StrictMode";case $e:return"Suspense";case ct:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case He:return(t.displayName||"Context")+".Consumer";case Me:return(t._context.displayName||"Context")+".Provider";case ve:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ie:return s=t.displayName||null,s!==null?s:we(t.type)||"Memo";case dt:s=t._payload,t=t._init;try{return we(t(s))}catch{}}return null}function xt(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(s);case 8:return s===he?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Xe(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wt(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function nr(t){var s=wt(t)?"checked":"value",h=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),m=""+t[s];if(!t.hasOwnProperty(s)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var v=h.get,_=h.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return v.call(this)},set:function(O){m=""+O,_.call(this,O)}}),Object.defineProperty(t,s,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(O){m=""+O},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function ir(t){t._valueTracker||(t._valueTracker=nr(t))}function Yi(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var h=s.getValue(),m="";return t&&(m=wt(t)?t.checked?"true":"false":t.value),t=m,t!==h?(s.setValue(t),!0):!1}function at(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Fn(t,s){var h=s.checked;return Ce({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??t._wrapperState.initialChecked})}function Zr(t,s){var h=s.defaultValue==null?"":s.defaultValue,m=s.checked!=null?s.checked:s.defaultChecked;h=Xe(s.value!=null?s.value:h),t._wrapperState={initialChecked:m,initialValue:h,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function wi(t,s){s=s.checked,s!=null&&V(t,"checked",s,!1)}function Xt(t,s){wi(t,s);var h=Xe(s.value),m=s.type;if(h!=null)m==="number"?(h===0&&t.value===""||t.value!=h)&&(t.value=""+h):t.value!==""+h&&(t.value=""+h);else if(m==="submit"||m==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?it(t,s.type,h):s.hasOwnProperty("defaultValue")&&it(t,s.type,Xe(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function Et(t,s,h){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var m=s.type;if(!(m!=="submit"&&m!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,h||s===t.value||(t.value=s),t.defaultValue=s}h=t.name,h!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,h!==""&&(t.name=h)}function it(t,s,h){(s!=="number"||at(t.ownerDocument)!==t)&&(h==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+h&&(t.defaultValue=""+h))}var Un=Array.isArray;function Ie(t,s,h,m){if(t=t.options,s){s={};for(var v=0;v<h.length;v++)s["$"+h[v]]=!0;for(h=0;h<t.length;h++)v=s.hasOwnProperty("$"+t[h].value),t[h].selected!==v&&(t[h].selected=v),v&&m&&(t[h].defaultSelected=!0)}else{for(h=""+Xe(h),s=null,v=0;v<t.length;v++){if(t[v].value===h){t[v].selected=!0,m&&(t[v].defaultSelected=!0);return}s!==null||t[v].disabled||(s=t[v])}s!==null&&(s.selected=!0)}}function yi(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(o(91));return Ce({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Co(t,s){var h=s.value;if(h==null){if(h=s.children,s=s.defaultValue,h!=null){if(s!=null)throw Error(o(92));if(Un(h)){if(1<h.length)throw Error(o(93));h=h[0]}s=h}s==null&&(s=""),h=s}t._wrapperState={initialValue:Xe(h)}}function hn(t,s){var h=Xe(s.value),m=Xe(s.defaultValue);h!=null&&(h=""+h,h!==t.value&&(t.value=h),s.defaultValue==null&&t.defaultValue!==h&&(t.defaultValue=h)),m!=null&&(t.defaultValue=""+m)}function Os(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function jr(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ks(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?jr(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Qr,hr=(function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,h,m,v){MSApp.execUnsafeLocalFunction(function(){return t(s,h,m,v)})}:t})(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Qr=Qr||document.createElement("div"),Qr.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Qr.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function vi(t,s){if(s){var h=t.firstChild;if(h&&h===t.lastChild&&h.nodeType===3){h.nodeValue=s;return}}t.textContent=s}var Vn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wu=["Webkit","ms","Moz","O"];Object.keys(Vn).forEach(function(t){wu.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Vn[s]=Vn[t]})});function jt(t,s,h){return s==null||typeof s=="boolean"||s===""?"":h||typeof s!="number"||s===0||Vn.hasOwnProperty(t)&&Vn[t]?(""+s).trim():s+"px"}function ye(t,s){t=t.style;for(var h in s)if(s.hasOwnProperty(h)){var m=h.indexOf("--")===0,v=jt(h,s[h],m);h==="float"&&(h="cssFloat"),m?t.setProperty(h,v):t[h]=v}}var Kt=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function pt(t,s){if(s){if(Kt[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(o(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(o(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(o(61))}if(s.style!=null&&typeof s.style!="object")throw Error(o(62))}}function St(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zn=null;function Zi(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ds=null,rt=null,Fr=null;function Ao(t){if(t=qo(t)){if(typeof Ds!="function")throw Error(o(280));var s=t.stateNode;s&&(s=qa(s),Ds(t.stateNode,t.type,s))}}function bo(t){rt?Fr?Fr.push(t):Fr=[t]:rt=t}function Ur(){if(rt){var t=rt,s=Fr;if(Fr=rt=null,Ao(t),s)for(t=0;t<s.length;t++)Ao(s[t])}}function Ps(t,s){return t(s)}function sr(){}var Wn=!1;function Qi(t,s,h){if(Wn)return t(s,h);Wn=!0;try{return Ps(t,s,h)}finally{Wn=!1,(rt!==null||Fr!==null)&&(sr(),Ur())}}function Sr(t,s){var h=t.stateNode;if(h===null)return null;var m=qa(h);if(m===null)return null;h=m[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(t=t.type,m=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!m;break e;default:t=!1}if(t)return null;if(h&&typeof h!="function")throw Error(o(231,s,typeof h));return h}var So=!1;if(C)try{var Jr={};Object.defineProperty(Jr,"passive",{get:function(){So=!0}}),window.addEventListener("test",Jr,Jr),window.removeEventListener("test",Jr,Jr)}catch{So=!1}function Io(t,s,h,m,v,_,O,B,H){var re=Array.prototype.slice.call(arguments,3);try{s.apply(h,re)}catch(de){this.onError(de)}}var Jt=!1,fn=null,wr=!1,be=null,Ei={onError:function(t){Jt=!0,fn=t}};function To(t,s,h,m,v,_,O,B,H){Jt=!1,fn=null,Io.apply(Ei,arguments)}function Ir(t,s,h,m,v,_,O,B,H){if(To.apply(this,arguments),Jt){if(Jt){var re=fn;Jt=!1,fn=null}else throw Error(o(198));wr||(wr=!0,be=re)}}function Vr(t){var s=t,h=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,(s.flags&4098)!==0&&(h=s.return),t=s.return;while(t)}return s.tag===3?h:null}function Ji(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function es(t){if(Vr(t)!==t)throw Error(o(188))}function gn(t){var s=t.alternate;if(!s){if(s=Vr(t),s===null)throw Error(o(188));return s!==t?null:t}for(var h=t,m=s;;){var v=h.return;if(v===null)break;var _=v.alternate;if(_===null){if(m=v.return,m!==null){h=m;continue}break}if(v.child===_.child){for(_=v.child;_;){if(_===h)return es(v),t;if(_===m)return es(v),s;_=_.sibling}throw Error(o(188))}if(h.return!==m.return)h=v,m=_;else{for(var O=!1,B=v.child;B;){if(B===h){O=!0,h=v,m=_;break}if(B===m){O=!0,m=v,h=_;break}B=B.sibling}if(!O){for(B=_.child;B;){if(B===h){O=!0,h=_,m=v;break}if(B===m){O=!0,m=_,h=v;break}B=B.sibling}if(!O)throw Error(o(189))}}if(h.alternate!==m)throw Error(o(190))}if(h.tag!==3)throw Error(o(188));return h.stateNode.current===h?t:s}function Ta(t){return t=gn(t),t!==null?Na(t):null}function Na(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=Na(t);if(s!==null)return s;t=t.sibling}return null}var en=n.unstable_scheduleCallback,fr=n.unstable_cancelCallback,It=n.unstable_shouldYield,Ra=n.unstable_requestPaint,yt=n.unstable_now,No=n.unstable_getCurrentPriorityLevel,le=n.unstable_ImmediatePriority,Oa=n.unstable_UserBlockingPriority,At=n.unstable_NormalPriority,_i=n.unstable_LowPriority,ka=n.unstable_IdlePriority,ut=null,Je=null;function st(t){if(Je&&typeof Je.onCommitFiberRoot=="function")try{Je.onCommitFiberRoot(ut,t,void 0,(t.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:qt,Ro=Math.log,Oo=Math.LN2;function qt(t){return t>>>=0,t===0?32:31-(Ro(t)/Oo|0)|0}var tn=64,Ms=4194304;function bt(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function rn(t,s){var h=t.pendingLanes;if(h===0)return 0;var m=0,v=t.suspendedLanes,_=t.pingedLanes,O=h&268435455;if(O!==0){var B=O&~v;B!==0?m=bt(B):(_&=O,_!==0&&(m=bt(_)))}else O=h&~v,O!==0?m=bt(O):_!==0&&(m=bt(_));if(m===0)return 0;if(s!==0&&s!==m&&(s&v)===0&&(v=m&-m,_=s&-s,v>=_||v===16&&(_&4194240)!==0))return s;if((m&4)!==0&&(m|=h&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=m;0<s;)h=31-Mr(s),v=1<<h,m|=t[h],s&=~v;return m}function yu(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ci(t,s){for(var h=t.suspendedLanes,m=t.pingedLanes,v=t.expirationTimes,_=t.pendingLanes;0<_;){var O=31-Mr(_),B=1<<O,H=v[O];H===-1?((B&h)===0||(B&m)!==0)&&(v[O]=yu(B,s)):H<=s&&(t.expiredLanes|=B),_&=~B}}function vt(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function or(){var t=tn;return tn<<=1,(tn&4194240)===0&&(tn=64),t}function q(t){for(var s=[],h=0;31>h;h++)s.push(t);return s}function M(t,s,h){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Mr(s),t[s]=h}function Be(t,s){var h=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var m=t.eventTimes;for(t=t.expirationTimes;0<h;){var v=31-Mr(h),_=1<<v;s[v]=0,m[v]=-1,t[v]=-1,h&=~_}}function Ht(t,s){var h=t.entangledLanes|=s;for(t=t.entanglements;h;){var m=31-Mr(h),v=1<<m;v&s|t[m]&s&&(t[m]|=s),h&=~v}}var et=0;function Da(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var Ls,Tr,je,Tt,ko,Do=!1,Ai=[],nn=null,pn=null,Hn=null,Mt=new Map,Sn=new Map,yr=[],ze="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pa(t,s){switch(t){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":pn=null;break;case"mouseover":case"mouseout":Hn=null;break;case"pointerover":case"pointerout":Mt.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sn.delete(s.pointerId)}}function Ye(t,s,h,m,v,_){return t===null||t.nativeEvent!==_?(t={blockedOn:s,domEventName:h,eventSystemFlags:m,nativeEvent:_,targetContainers:[v]},s!==null&&(s=qo(s),s!==null&&Tr(s)),t):(t.eventSystemFlags|=m,s=t.targetContainers,v!==null&&s.indexOf(v)===-1&&s.push(v),t)}function ar(t,s,h,m,v){switch(s){case"focusin":return nn=Ye(nn,t,s,h,m,v),!0;case"dragenter":return pn=Ye(pn,t,s,h,m,v),!0;case"mouseover":return Hn=Ye(Hn,t,s,h,m,v),!0;case"pointerover":var _=v.pointerId;return Mt.set(_,Ye(Mt.get(_)||null,t,s,h,m,v)),!0;case"gotpointercapture":return _=v.pointerId,Sn.set(_,Ye(Sn.get(_)||null,t,s,h,m,v)),!0}return!1}function Ma(t){var s=cs(t.target);if(s!==null){var h=Vr(s);if(h!==null){if(s=h.tag,s===13){if(s=Ji(h),s!==null){t.blockedOn=s,ko(t.priority,function(){je(h)});return}}else if(s===3&&h.stateNode.current.memoizedState.isDehydrated){t.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}t.blockedOn=null}function bi(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var h=Bs(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(h===null){h=t.nativeEvent;var m=new h.constructor(h.type,h);Zn=m,h.target.dispatchEvent(m),Zn=null}else return s=qo(h),s!==null&&Tr(s),t.blockedOn=h,!1;s.shift()}return!0}function Po(t,s,h){bi(t)&&h.delete(s)}function Qn(){Do=!1,nn!==null&&bi(nn)&&(nn=null),pn!==null&&bi(pn)&&(pn=null),Hn!==null&&bi(Hn)&&(Hn=null),Mt.forEach(Po),Sn.forEach(Po)}function ts(t,s){t.blockedOn===s&&(t.blockedOn=null,Do||(Do=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Qn)))}function In(t){function s(v){return ts(v,t)}if(0<Ai.length){ts(Ai[0],t);for(var h=1;h<Ai.length;h++){var m=Ai[h];m.blockedOn===t&&(m.blockedOn=null)}}for(nn!==null&&ts(nn,t),pn!==null&&ts(pn,t),Hn!==null&&ts(Hn,t),Mt.forEach(s),Sn.forEach(s),h=0;h<yr.length;h++)m=yr[h],m.blockedOn===t&&(m.blockedOn=null);for(;0<yr.length&&(h=yr[0],h.blockedOn===null);)Ma(h),h.blockedOn===null&&yr.shift()}var mn=oe.ReactCurrentBatchConfig,zn=!0;function La(t,s,h,m){var v=et,_=mn.transition;mn.transition=null;try{et=1,Jn(t,s,h,m)}finally{et=v,mn.transition=_}}function rs(t,s,h,m){var v=et,_=mn.transition;mn.transition=null;try{et=4,Jn(t,s,h,m)}finally{et=v,mn.transition=_}}function Jn(t,s,h,m){if(zn){var v=Bs(t,s,h,m);if(v===null)Nu(t,s,m,lr,h),Pa(t,m);else if(ar(v,t,s,h,m))m.stopPropagation();else if(Pa(t,m),s&4&&-1<ze.indexOf(t)){for(;v!==null;){var _=qo(v);if(_!==null&&Ls(_),_=Bs(t,s,h,m),_===null&&Nu(t,s,m,lr,h),_===v)break;v=_}v!==null&&m.stopPropagation()}else Nu(t,s,m,null,h)}}var lr=null;function Bs(t,s,h,m){if(lr=null,t=Zi(m),t=cs(t),t!==null)if(s=Vr(t),s===null)t=null;else if(h=s.tag,h===13){if(t=Ji(s),t!==null)return t;t=null}else if(h===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return lr=t,null}function Mo(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(No()){case le:return 1;case Oa:return 4;case At:case _i:return 16;case ka:return 536870912;default:return 16}default:return 16}}var Tn=null,Lo=null,js=null;function Ba(){if(js)return js;var t,s=Lo,h=s.length,m,v="value"in Tn?Tn.value:Tn.textContent,_=v.length;for(t=0;t<h&&s[t]===v[t];t++);var O=h-t;for(m=1;m<=O&&s[h-m]===v[_-m];m++);return js=v.slice(t,1<m?1-m:void 0)}function ht(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function ns(){return!0}function is(){return!1}function zt(t){function s(h,m,v,_,O){this._reactName=h,this._targetInst=v,this.type=m,this.nativeEvent=_,this.target=O,this.currentTarget=null;for(var B in t)t.hasOwnProperty(B)&&(h=t[B],this[B]=h?h(_):_[B]);return this.isDefaultPrevented=(_.defaultPrevented!=null?_.defaultPrevented:_.returnValue===!1)?ns:is,this.isPropagationStopped=is,this}return Ce(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=ns)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=ns)},persist:function(){},isPersistent:ns}),s}var Si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},te=zt(Si),Qe=Ce({},Si,{view:0,detail:0}),ur=zt(Qe),Ii,Fs,ss,Us=Ce({},Qe,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:os,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ss&&(ss&&t.type==="mousemove"?(Ii=t.screenX-ss.screenX,Fs=t.screenY-ss.screenY):Fs=Ii=0,ss=t),Ii)},movementY:function(t){return"movementY"in t?t.movementY:Fs}}),ja=zt(Us),Bo=Ce({},Us,{dataTransfer:0}),Yt=zt(Bo),jo=Ce({},Qe,{relatedTarget:0}),Nt=zt(jo),Vs=Ce({},Si,{animationName:0,elapsedTime:0,pseudoElement:0}),ei=zt(Vs),_t=Ce({},Si,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ue=zt(_t),vu=Ce({},Si,{data:0}),Ct=zt(vu),ti={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ti={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xn(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=Eu[t])?!!s[t]:!1}function os(){return xn}var Fa=Ce({},Qe,{key:function(t){if(t.key){var s=ti[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=ht(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ti[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:os,charCode:function(t){return t.type==="keypress"?ht(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ht(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Fo=zt(Fa),Ua=Ce({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uo=zt(Ua),_u=Ce({},Qe,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:os}),Ni=zt(_u),Vo=Ce({},Si,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=zt(Vo),as=Ce({},Us,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Au=zt(as),Gn=[9,13,27,32],Ri=C&&"CompositionEvent"in window,gr=null;C&&"documentMode"in document&&(gr=document.documentMode);var Va=C&&"TextEvent"in window&&!gr,sn=C&&(!Ri||gr&&8<gr&&11>=gr),Wa=" ",Ws=!1;function Ha(t,s){switch(t){case"keyup":return Gn.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wo(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var vr=!1;function bu(t,s){switch(t){case"compositionend":return Wo(s);case"keypress":return s.which!==32?null:(Ws=!0,Wa);case"textInput":return t=s.data,t===Wa&&Ws?null:t;default:return null}}function Ho(t,s){if(vr)return t==="compositionend"||!Ri&&Ha(t,s)?(t=Ba(),js=Lo=Tn=null,vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return sn&&s.locale!=="ko"?null:s.data;default:return null}}var ls={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function lt(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!ls[t.type]:s==="textarea"}function us(t,s,h,m){bo(m),s=$a(s,"onChange"),0<s.length&&(h=new te("onChange","change",null,h,m),t.push({event:h,listeners:s}))}var I=null,e=null;function r(t){$d(t,0)}function i(t){var s=Gs(t);if(Yi(s))return t}function a(t,s){if(t==="change")return s}var u=!1;if(C){var d;if(C){var p="oninput"in document;if(!p){var w=document.createElement("div");w.setAttribute("oninput","return;"),p=typeof w.oninput=="function"}d=p}else d=!1;u=d&&(!document.documentMode||9<document.documentMode)}function y(){I&&(I.detachEvent("onpropertychange",b),e=I=null)}function b(t){if(t.propertyName==="value"&&i(e)){var s=[];us(s,e,t,Zi(t)),Qi(r,s)}}function T(t,s,h){t==="focusin"?(y(),I=s,e=h,I.attachEvent("onpropertychange",b)):t==="focusout"&&y()}function k(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return i(e)}function L(t,s){if(t==="click")return i(s)}function W(t,s){if(t==="input"||t==="change")return i(s)}function z(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var $=typeof Object.is=="function"?Object.is:z;function ee(t,s){if($(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var h=Object.keys(t),m=Object.keys(s);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var v=h[m];if(!A.call(s,v)||!$(t[v],s[v]))return!1}return!0}function ge(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pe(t,s){var h=ge(t);t=0;for(var m;h;){if(h.nodeType===3){if(m=t+h.textContent.length,t<=s&&m>=s)return{node:h,offset:s-t};t=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=ge(h)}}function ce(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?ce(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function tt(){for(var t=window,s=at();s instanceof t.HTMLIFrameElement;){try{var h=typeof s.contentWindow.location.href=="string"}catch{h=!1}if(h)t=s.contentWindow;else break;s=at(t.document)}return s}function Ze(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function Nr(t){var s=tt(),h=t.focusedElem,m=t.selectionRange;if(s!==h&&h&&h.ownerDocument&&ce(h.ownerDocument.documentElement,h)){if(m!==null&&Ze(h)){if(s=m.start,t=m.end,t===void 0&&(t=s),"selectionStart"in h)h.selectionStart=s,h.selectionEnd=Math.min(t,h.value.length);else if(t=(s=h.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var v=h.textContent.length,_=Math.min(m.start,v);m=m.end===void 0?_:Math.min(m.end,v),!t.extend&&_>m&&(v=m,m=_,_=v),v=pe(h,_);var O=pe(h,m);v&&O&&(t.rangeCount!==1||t.anchorNode!==v.node||t.anchorOffset!==v.offset||t.focusNode!==O.node||t.focusOffset!==O.offset)&&(s=s.createRange(),s.setStart(v.node,v.offset),t.removeAllRanges(),_>m?(t.addRange(s),t.extend(O.node,O.offset)):(s.setEnd(O.node,O.offset),t.addRange(s)))}}for(s=[],t=h;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<s.length;h++)t=s[h],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var on=C&&"documentMode"in document&&11>=document.documentMode,Zt=null,mt=null,Ft=null,Er=!1;function ri(t,s,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Er||Zt==null||Zt!==at(m)||(m=Zt,"selectionStart"in m&&Ze(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ft&&ee(Ft,m)||(Ft=m,m=$a(mt,"onSelect"),0<m.length&&(s=new te("onSelect","select",null,s,h),t.push({event:s,listeners:m}),s.target=Zt)))}function Nn(t,s){var h={};return h[t.toLowerCase()]=s.toLowerCase(),h["Webkit"+t]="webkit"+s,h["Moz"+t]="moz"+s,h}var Oi={animationend:Nn("Animation","AnimationEnd"),animationiteration:Nn("Animation","AnimationIteration"),animationstart:Nn("Animation","AnimationStart"),transitionend:Nn("Transition","TransitionEnd")},zo={},jd={};C&&(jd=document.createElement("div").style,"AnimationEvent"in window||(delete Oi.animationend.animation,delete Oi.animationiteration.animation,delete Oi.animationstart.animation),"TransitionEvent"in window||delete Oi.transitionend.transition);function za(t){if(zo[t])return zo[t];if(!Oi[t])return t;var s=Oi[t],h;for(h in s)if(s.hasOwnProperty(h)&&h in jd)return zo[t]=s[h];return t}var Fd=za("animationend"),Ud=za("animationiteration"),Vd=za("animationstart"),Wd=za("transitionend"),Hd=new Map,zd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,s){Hd.set(t,s),f(s,[t])}for(var Su=0;Su<zd.length;Su++){var Iu=zd[Su],vg=Iu.toLowerCase(),Eg=Iu[0].toUpperCase()+Iu.slice(1);ki(vg,"on"+Eg)}ki(Fd,"onAnimationEnd"),ki(Ud,"onAnimationIteration"),ki(Vd,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(Wd,"onTransitionEnd"),x("onMouseEnter",["mouseout","mouseover"]),x("onMouseLeave",["mouseout","mouseover"]),x("onPointerEnter",["pointerout","pointerover"]),x("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Go="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_g=new Set("cancel close invalid load scroll toggle".split(" ").concat(Go));function Gd(t,s,h){var m=t.type||"unknown-event";t.currentTarget=h,Ir(m,s,void 0,t),t.currentTarget=null}function $d(t,s){s=(s&4)!==0;for(var h=0;h<t.length;h++){var m=t[h],v=m.event;m=m.listeners;e:{var _=void 0;if(s)for(var O=m.length-1;0<=O;O--){var B=m[O],H=B.instance,re=B.currentTarget;if(B=B.listener,H!==_&&v.isPropagationStopped())break e;Gd(v,B,re),_=H}else for(O=0;O<m.length;O++){if(B=m[O],H=B.instance,re=B.currentTarget,B=B.listener,H!==_&&v.isPropagationStopped())break e;Gd(v,B,re),_=H}}}if(wr)throw t=be,wr=!1,be=null,t}function kt(t,s){var h=s[Mu];h===void 0&&(h=s[Mu]=new Set);var m=t+"__bubble";h.has(m)||(Xd(s,t,2,!1),h.add(m))}function Tu(t,s,h){var m=0;s&&(m|=4),Xd(h,t,m,s)}var Ga="_reactListening"+Math.random().toString(36).slice(2);function $o(t){if(!t[Ga]){t[Ga]=!0,c.forEach(function(h){h!=="selectionchange"&&(_g.has(h)||Tu(h,!1,t),Tu(h,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Ga]||(s[Ga]=!0,Tu("selectionchange",!1,s))}}function Xd(t,s,h,m){switch(Mo(s)){case 1:var v=La;break;case 4:v=rs;break;default:v=Jn}h=v.bind(null,s,h,t),v=void 0,!So||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(v=!0),m?v!==void 0?t.addEventListener(s,h,{capture:!0,passive:v}):t.addEventListener(s,h,!0):v!==void 0?t.addEventListener(s,h,{passive:v}):t.addEventListener(s,h,!1)}function Nu(t,s,h,m,v){var _=m;if((s&1)===0&&(s&2)===0&&m!==null)e:for(;;){if(m===null)return;var O=m.tag;if(O===3||O===4){var B=m.stateNode.containerInfo;if(B===v||B.nodeType===8&&B.parentNode===v)break;if(O===4)for(O=m.return;O!==null;){var H=O.tag;if((H===3||H===4)&&(H=O.stateNode.containerInfo,H===v||H.nodeType===8&&H.parentNode===v))return;O=O.return}for(;B!==null;){if(O=cs(B),O===null)return;if(H=O.tag,H===5||H===6){m=_=O;continue e}B=B.parentNode}}m=m.return}Qi(function(){var re=_,de=Zi(h),fe=[];e:{var ue=Hd.get(t);if(ue!==void 0){var Se=te,Re=t;switch(t){case"keypress":if(ht(h)===0)break e;case"keydown":case"keyup":Se=Fo;break;case"focusin":Re="focus",Se=Nt;break;case"focusout":Re="blur",Se=Nt;break;case"beforeblur":case"afterblur":Se=Nt;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Se=ja;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Se=Yt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Se=Ni;break;case Fd:case Ud:case Vd:Se=ei;break;case Wd:Se=Cu;break;case"scroll":Se=ur;break;case"wheel":Se=Au;break;case"copy":case"cut":case"paste":Se=Ue;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Se=Uo}var ke=(s&4)!==0,Qt=!ke&&t==="scroll",Y=ke?ue!==null?ue+"Capture":null:ue;ke=[];for(var G=re,Q;G!==null;){Q=G;var me=Q.stateNode;if(Q.tag===5&&me!==null&&(Q=me,Y!==null&&(me=Sr(G,Y),me!=null&&ke.push(Xo(G,me,Q)))),Qt)break;G=G.return}0<ke.length&&(ue=new Se(ue,Re,null,h,de),fe.push({event:ue,listeners:ke}))}}if((s&7)===0){e:{if(ue=t==="mouseover"||t==="pointerover",Se=t==="mouseout"||t==="pointerout",ue&&h!==Zn&&(Re=h.relatedTarget||h.fromElement)&&(cs(Re)||Re[ni]))break e;if((Se||ue)&&(ue=de.window===de?de:(ue=de.ownerDocument)?ue.defaultView||ue.parentWindow:window,Se?(Re=h.relatedTarget||h.toElement,Se=re,Re=Re?cs(Re):null,Re!==null&&(Qt=Vr(Re),Re!==Qt||Re.tag!==5&&Re.tag!==6)&&(Re=null)):(Se=null,Re=re),Se!==Re)){if(ke=ja,me="onMouseLeave",Y="onMouseEnter",G="mouse",(t==="pointerout"||t==="pointerover")&&(ke=Uo,me="onPointerLeave",Y="onPointerEnter",G="pointer"),Qt=Se==null?ue:Gs(Se),Q=Re==null?ue:Gs(Re),ue=new ke(me,G+"leave",Se,h,de),ue.target=Qt,ue.relatedTarget=Q,me=null,cs(de)===re&&(ke=new ke(Y,G+"enter",Re,h,de),ke.target=Q,ke.relatedTarget=Qt,me=ke),Qt=me,Se&&Re)t:{for(ke=Se,Y=Re,G=0,Q=ke;Q;Q=Hs(Q))G++;for(Q=0,me=Y;me;me=Hs(me))Q++;for(;0<G-Q;)ke=Hs(ke),G--;for(;0<Q-G;)Y=Hs(Y),Q--;for(;G--;){if(ke===Y||Y!==null&&ke===Y.alternate)break t;ke=Hs(ke),Y=Hs(Y)}ke=null}else ke=null;Se!==null&&Kd(fe,ue,Se,ke,!1),Re!==null&&Qt!==null&&Kd(fe,Qt,Re,ke,!0)}}e:{if(ue=re?Gs(re):window,Se=ue.nodeName&&ue.nodeName.toLowerCase(),Se==="select"||Se==="input"&&ue.type==="file")var De=a;else if(lt(ue))if(u)De=W;else{De=k;var Ve=T}else(Se=ue.nodeName)&&Se.toLowerCase()==="input"&&(ue.type==="checkbox"||ue.type==="radio")&&(De=L);if(De&&(De=De(t,re))){us(fe,De,h,de);break e}Ve&&Ve(t,ue,re),t==="focusout"&&(Ve=ue._wrapperState)&&Ve.controlled&&ue.type==="number"&&it(ue,"number",ue.value)}switch(Ve=re?Gs(re):window,t){case"focusin":(lt(Ve)||Ve.contentEditable==="true")&&(Zt=Ve,mt=re,Ft=null);break;case"focusout":Ft=mt=Zt=null;break;case"mousedown":Er=!0;break;case"contextmenu":case"mouseup":case"dragend":Er=!1,ri(fe,h,de);break;case"selectionchange":if(on)break;case"keydown":case"keyup":ri(fe,h,de)}var We;if(Ri)e:{switch(t){case"compositionstart":var qe="onCompositionStart";break e;case"compositionend":qe="onCompositionEnd";break e;case"compositionupdate":qe="onCompositionUpdate";break e}qe=void 0}else vr?Ha(t,h)&&(qe="onCompositionEnd"):t==="keydown"&&h.keyCode===229&&(qe="onCompositionStart");qe&&(sn&&h.locale!=="ko"&&(vr||qe!=="onCompositionStart"?qe==="onCompositionEnd"&&vr&&(We=Ba()):(Tn=de,Lo="value"in Tn?Tn.value:Tn.textContent,vr=!0)),Ve=$a(re,qe),0<Ve.length&&(qe=new Ct(qe,t,null,h,de),fe.push({event:qe,listeners:Ve}),We?qe.data=We:(We=Wo(h),We!==null&&(qe.data=We)))),(We=Va?bu(t,h):Ho(t,h))&&(re=$a(re,"onBeforeInput"),0<re.length&&(de=new Ct("onBeforeInput","beforeinput",null,h,de),fe.push({event:de,listeners:re}),de.data=We))}$d(fe,s)})}function Xo(t,s,h){return{instance:t,listener:s,currentTarget:h}}function $a(t,s){for(var h=s+"Capture",m=[];t!==null;){var v=t,_=v.stateNode;v.tag===5&&_!==null&&(v=_,_=Sr(t,h),_!=null&&m.unshift(Xo(t,_,v)),_=Sr(t,s),_!=null&&m.push(Xo(t,_,v))),t=t.return}return m}function Hs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Kd(t,s,h,m,v){for(var _=s._reactName,O=[];h!==null&&h!==m;){var B=h,H=B.alternate,re=B.stateNode;if(H!==null&&H===m)break;B.tag===5&&re!==null&&(B=re,v?(H=Sr(h,_),H!=null&&O.unshift(Xo(h,H,B))):v||(H=Sr(h,_),H!=null&&O.push(Xo(h,H,B)))),h=h.return}O.length!==0&&t.push({event:s,listeners:O})}var Cg=/\r\n?/g,Ag=/\u0000|\uFFFD/g;function qd(t){return(typeof t=="string"?t:""+t).replace(Cg,`
`).replace(Ag,"")}function Xa(t,s,h){if(s=qd(s),qd(t)!==s&&h)throw Error(o(425))}function Ka(){}var Ru=null,Ou=null;function ku(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Du=typeof setTimeout=="function"?setTimeout:void 0,bg=typeof clearTimeout=="function"?clearTimeout:void 0,Yd=typeof Promise=="function"?Promise:void 0,Sg=typeof queueMicrotask=="function"?queueMicrotask:typeof Yd<"u"?function(t){return Yd.resolve(null).then(t).catch(Ig)}:Du;function Ig(t){setTimeout(function(){throw t})}function Pu(t,s){var h=s,m=0;do{var v=h.nextSibling;if(t.removeChild(h),v&&v.nodeType===8)if(h=v.data,h==="/$"){if(m===0){t.removeChild(v),In(s);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=v}while(h);In(s)}function Di(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Zd(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var h=t.data;if(h==="$"||h==="$!"||h==="$?"){if(s===0)return t;s--}else h==="/$"&&s++}t=t.previousSibling}return null}var zs=Math.random().toString(36).slice(2),$n="__reactFiber$"+zs,Ko="__reactProps$"+zs,ni="__reactContainer$"+zs,Mu="__reactEvents$"+zs,Tg="__reactListeners$"+zs,Ng="__reactHandles$"+zs;function cs(t){var s=t[$n];if(s)return s;for(var h=t.parentNode;h;){if(s=h[ni]||h[$n]){if(h=s.alternate,s.child!==null||h!==null&&h.child!==null)for(t=Zd(t);t!==null;){if(h=t[$n])return h;t=Zd(t)}return s}t=h,h=t.parentNode}return null}function qo(t){return t=t[$n]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Gs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(o(33))}function qa(t){return t[Ko]||null}var Lu=[],$s=-1;function Pi(t){return{current:t}}function Dt(t){0>$s||(t.current=Lu[$s],Lu[$s]=null,$s--)}function Rt(t,s){$s++,Lu[$s]=t.current,t.current=s}var Mi={},Rr=Pi(Mi),Wr=Pi(!1),ds=Mi;function Xs(t,s){var h=t.type.contextTypes;if(!h)return Mi;var m=t.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===s)return m.__reactInternalMemoizedMaskedChildContext;var v={},_;for(_ in h)v[_]=s[_];return m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=v),v}function Hr(t){return t=t.childContextTypes,t!=null}function Ya(){Dt(Wr),Dt(Rr)}function Qd(t,s,h){if(Rr.current!==Mi)throw Error(o(168));Rt(Rr,s),Rt(Wr,h)}function Jd(t,s,h){var m=t.stateNode;if(s=s.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var v in m)if(!(v in s))throw Error(o(108,xt(t)||"Unknown",v));return Ce({},h,m)}function Za(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Mi,ds=Rr.current,Rt(Rr,t),Rt(Wr,Wr.current),!0}function eh(t,s,h){var m=t.stateNode;if(!m)throw Error(o(169));h?(t=Jd(t,s,ds),m.__reactInternalMemoizedMergedChildContext=t,Dt(Wr),Dt(Rr),Rt(Rr,t)):Dt(Wr),Rt(Wr,h)}var ii=null,Qa=!1,Bu=!1;function th(t){ii===null?ii=[t]:ii.push(t)}function Rg(t){Qa=!0,th(t)}function Li(){if(!Bu&&ii!==null){Bu=!0;var t=0,s=et;try{var h=ii;for(et=1;t<h.length;t++){var m=h[t];do m=m(!0);while(m!==null)}ii=null,Qa=!1}catch(v){throw ii!==null&&(ii=ii.slice(t+1)),en(le,Li),v}finally{et=s,Bu=!1}}return null}var Ks=[],qs=0,Ja=null,el=0,wn=[],yn=0,hs=null,si=1,oi="";function fs(t,s){Ks[qs++]=el,Ks[qs++]=Ja,Ja=t,el=s}function rh(t,s,h){wn[yn++]=si,wn[yn++]=oi,wn[yn++]=hs,hs=t;var m=si;t=oi;var v=32-Mr(m)-1;m&=~(1<<v),h+=1;var _=32-Mr(s)+v;if(30<_){var O=v-v%5;_=(m&(1<<O)-1).toString(32),m>>=O,v-=O,si=1<<32-Mr(s)+v|h<<v|m,oi=_+t}else si=1<<_|h<<v|m,oi=t}function ju(t){t.return!==null&&(fs(t,1),rh(t,1,0))}function Fu(t){for(;t===Ja;)Ja=Ks[--qs],Ks[qs]=null,el=Ks[--qs],Ks[qs]=null;for(;t===hs;)hs=wn[--yn],wn[yn]=null,oi=wn[--yn],wn[yn]=null,si=wn[--yn],wn[yn]=null}var an=null,ln=null,Lt=!1,Rn=null;function nh(t,s){var h=Cn(5,null,null,0);h.elementType="DELETED",h.stateNode=s,h.return=t,s=t.deletions,s===null?(t.deletions=[h],t.flags|=16):s.push(h)}function ih(t,s){switch(t.tag){case 5:var h=t.type;return s=s.nodeType!==1||h.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,an=t,ln=Di(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,an=t,ln=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(h=hs!==null?{id:si,overflow:oi}:null,t.memoizedState={dehydrated:s,treeContext:h,retryLane:1073741824},h=Cn(18,null,null,0),h.stateNode=s,h.return=t,t.child=h,an=t,ln=null,!0):!1;default:return!1}}function Uu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vu(t){if(Lt){var s=ln;if(s){var h=s;if(!ih(t,s)){if(Uu(t))throw Error(o(418));s=Di(h.nextSibling);var m=an;s&&ih(t,s)?nh(m,h):(t.flags=t.flags&-4097|2,Lt=!1,an=t)}}else{if(Uu(t))throw Error(o(418));t.flags=t.flags&-4097|2,Lt=!1,an=t}}}function sh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function tl(t){if(t!==an)return!1;if(!Lt)return sh(t),Lt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!ku(t.type,t.memoizedProps)),s&&(s=ln)){if(Uu(t))throw oh(),Error(o(418));for(;s;)nh(t,s),s=Di(s.nextSibling)}if(sh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(o(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var h=t.data;if(h==="/$"){if(s===0){ln=Di(t.nextSibling);break e}s--}else h!=="$"&&h!=="$!"&&h!=="$?"||s++}t=t.nextSibling}ln=null}}else ln=an?Di(t.stateNode.nextSibling):null;return!0}function oh(){for(var t=ln;t;)t=Di(t.nextSibling)}function Ys(){ln=an=null,Lt=!1}function Wu(t){Rn===null?Rn=[t]:Rn.push(t)}var Og=oe.ReactCurrentBatchConfig;function Yo(t,s,h){if(t=h.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(o(309));var m=h.stateNode}if(!m)throw Error(o(147,t));var v=m,_=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===_?s.ref:(s=function(O){var B=v.refs;O===null?delete B[_]:B[_]=O},s._stringRef=_,s)}if(typeof t!="string")throw Error(o(284));if(!h._owner)throw Error(o(290,t))}return t}function rl(t,s){throw t=Object.prototype.toString.call(s),Error(o(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function ah(t){var s=t._init;return s(t._payload)}function lh(t){function s(Y,G){if(t){var Q=Y.deletions;Q===null?(Y.deletions=[G],Y.flags|=16):Q.push(G)}}function h(Y,G){if(!t)return null;for(;G!==null;)s(Y,G),G=G.sibling;return null}function m(Y,G){for(Y=new Map;G!==null;)G.key!==null?Y.set(G.key,G):Y.set(G.index,G),G=G.sibling;return Y}function v(Y,G){return Y=zi(Y,G),Y.index=0,Y.sibling=null,Y}function _(Y,G,Q){return Y.index=Q,t?(Q=Y.alternate,Q!==null?(Q=Q.index,Q<G?(Y.flags|=2,G):Q):(Y.flags|=2,G)):(Y.flags|=1048576,G)}function O(Y){return t&&Y.alternate===null&&(Y.flags|=2),Y}function B(Y,G,Q,me){return G===null||G.tag!==6?(G=Dc(Q,Y.mode,me),G.return=Y,G):(G=v(G,Q),G.return=Y,G)}function H(Y,G,Q,me){var De=Q.type;return De===se?de(Y,G,Q.props.children,me,Q.key):G!==null&&(G.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===dt&&ah(De)===G.type)?(me=v(G,Q.props),me.ref=Yo(Y,G,Q),me.return=Y,me):(me=Sl(Q.type,Q.key,Q.props,null,Y.mode,me),me.ref=Yo(Y,G,Q),me.return=Y,me)}function re(Y,G,Q,me){return G===null||G.tag!==4||G.stateNode.containerInfo!==Q.containerInfo||G.stateNode.implementation!==Q.implementation?(G=Pc(Q,Y.mode,me),G.return=Y,G):(G=v(G,Q.children||[]),G.return=Y,G)}function de(Y,G,Q,me,De){return G===null||G.tag!==7?(G=Es(Q,Y.mode,me,De),G.return=Y,G):(G=v(G,Q),G.return=Y,G)}function fe(Y,G,Q){if(typeof G=="string"&&G!==""||typeof G=="number")return G=Dc(""+G,Y.mode,Q),G.return=Y,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case _e:return Q=Sl(G.type,G.key,G.props,null,Y.mode,Q),Q.ref=Yo(Y,null,G),Q.return=Y,Q;case xe:return G=Pc(G,Y.mode,Q),G.return=Y,G;case dt:var me=G._init;return fe(Y,me(G._payload),Q)}if(Un(G)||Le(G))return G=Es(G,Y.mode,Q,null),G.return=Y,G;rl(Y,G)}return null}function ue(Y,G,Q,me){var De=G!==null?G.key:null;if(typeof Q=="string"&&Q!==""||typeof Q=="number")return De!==null?null:B(Y,G,""+Q,me);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _e:return Q.key===De?H(Y,G,Q,me):null;case xe:return Q.key===De?re(Y,G,Q,me):null;case dt:return De=Q._init,ue(Y,G,De(Q._payload),me)}if(Un(Q)||Le(Q))return De!==null?null:de(Y,G,Q,me,null);rl(Y,Q)}return null}function Se(Y,G,Q,me,De){if(typeof me=="string"&&me!==""||typeof me=="number")return Y=Y.get(Q)||null,B(G,Y,""+me,De);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case _e:return Y=Y.get(me.key===null?Q:me.key)||null,H(G,Y,me,De);case xe:return Y=Y.get(me.key===null?Q:me.key)||null,re(G,Y,me,De);case dt:var Ve=me._init;return Se(Y,G,Q,Ve(me._payload),De)}if(Un(me)||Le(me))return Y=Y.get(Q)||null,de(G,Y,me,De,null);rl(G,me)}return null}function Re(Y,G,Q,me){for(var De=null,Ve=null,We=G,qe=G=0,xr=null;We!==null&&qe<Q.length;qe++){We.index>qe?(xr=We,We=null):xr=We.sibling;var gt=ue(Y,We,Q[qe],me);if(gt===null){We===null&&(We=xr);break}t&&We&&gt.alternate===null&&s(Y,We),G=_(gt,G,qe),Ve===null?De=gt:Ve.sibling=gt,Ve=gt,We=xr}if(qe===Q.length)return h(Y,We),Lt&&fs(Y,qe),De;if(We===null){for(;qe<Q.length;qe++)We=fe(Y,Q[qe],me),We!==null&&(G=_(We,G,qe),Ve===null?De=We:Ve.sibling=We,Ve=We);return Lt&&fs(Y,qe),De}for(We=m(Y,We);qe<Q.length;qe++)xr=Se(We,Y,qe,Q[qe],me),xr!==null&&(t&&xr.alternate!==null&&We.delete(xr.key===null?qe:xr.key),G=_(xr,G,qe),Ve===null?De=xr:Ve.sibling=xr,Ve=xr);return t&&We.forEach(function(Gi){return s(Y,Gi)}),Lt&&fs(Y,qe),De}function ke(Y,G,Q,me){var De=Le(Q);if(typeof De!="function")throw Error(o(150));if(Q=De.call(Q),Q==null)throw Error(o(151));for(var Ve=De=null,We=G,qe=G=0,xr=null,gt=Q.next();We!==null&&!gt.done;qe++,gt=Q.next()){We.index>qe?(xr=We,We=null):xr=We.sibling;var Gi=ue(Y,We,gt.value,me);if(Gi===null){We===null&&(We=xr);break}t&&We&&Gi.alternate===null&&s(Y,We),G=_(Gi,G,qe),Ve===null?De=Gi:Ve.sibling=Gi,Ve=Gi,We=xr}if(gt.done)return h(Y,We),Lt&&fs(Y,qe),De;if(We===null){for(;!gt.done;qe++,gt=Q.next())gt=fe(Y,gt.value,me),gt!==null&&(G=_(gt,G,qe),Ve===null?De=gt:Ve.sibling=gt,Ve=gt);return Lt&&fs(Y,qe),De}for(We=m(Y,We);!gt.done;qe++,gt=Q.next())gt=Se(We,Y,qe,gt.value,me),gt!==null&&(t&&gt.alternate!==null&&We.delete(gt.key===null?qe:gt.key),G=_(gt,G,qe),Ve===null?De=gt:Ve.sibling=gt,Ve=gt);return t&&We.forEach(function(cp){return s(Y,cp)}),Lt&&fs(Y,qe),De}function Qt(Y,G,Q,me){if(typeof Q=="object"&&Q!==null&&Q.type===se&&Q.key===null&&(Q=Q.props.children),typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case _e:e:{for(var De=Q.key,Ve=G;Ve!==null;){if(Ve.key===De){if(De=Q.type,De===se){if(Ve.tag===7){h(Y,Ve.sibling),G=v(Ve,Q.props.children),G.return=Y,Y=G;break e}}else if(Ve.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===dt&&ah(De)===Ve.type){h(Y,Ve.sibling),G=v(Ve,Q.props),G.ref=Yo(Y,Ve,Q),G.return=Y,Y=G;break e}h(Y,Ve);break}else s(Y,Ve);Ve=Ve.sibling}Q.type===se?(G=Es(Q.props.children,Y.mode,me,Q.key),G.return=Y,Y=G):(me=Sl(Q.type,Q.key,Q.props,null,Y.mode,me),me.ref=Yo(Y,G,Q),me.return=Y,Y=me)}return O(Y);case xe:e:{for(Ve=Q.key;G!==null;){if(G.key===Ve)if(G.tag===4&&G.stateNode.containerInfo===Q.containerInfo&&G.stateNode.implementation===Q.implementation){h(Y,G.sibling),G=v(G,Q.children||[]),G.return=Y,Y=G;break e}else{h(Y,G);break}else s(Y,G);G=G.sibling}G=Pc(Q,Y.mode,me),G.return=Y,Y=G}return O(Y);case dt:return Ve=Q._init,Qt(Y,G,Ve(Q._payload),me)}if(Un(Q))return Re(Y,G,Q,me);if(Le(Q))return ke(Y,G,Q,me);rl(Y,Q)}return typeof Q=="string"&&Q!==""||typeof Q=="number"?(Q=""+Q,G!==null&&G.tag===6?(h(Y,G.sibling),G=v(G,Q),G.return=Y,Y=G):(h(Y,G),G=Dc(Q,Y.mode,me),G.return=Y,Y=G),O(Y)):h(Y,G)}return Qt}var Zs=lh(!0),uh=lh(!1),nl=Pi(null),il=null,Qs=null,Hu=null;function zu(){Hu=Qs=il=null}function Gu(t){var s=nl.current;Dt(nl),t._currentValue=s}function $u(t,s,h){for(;t!==null;){var m=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,m!==null&&(m.childLanes|=s)):m!==null&&(m.childLanes&s)!==s&&(m.childLanes|=s),t===h)break;t=t.return}}function Js(t,s){il=t,Hu=Qs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&s)!==0&&(zr=!0),t.firstContext=null)}function vn(t){var s=t._currentValue;if(Hu!==t)if(t={context:t,memoizedValue:s,next:null},Qs===null){if(il===null)throw Error(o(308));Qs=t,il.dependencies={lanes:0,firstContext:t}}else Qs=Qs.next=t;return s}var gs=null;function Xu(t){gs===null?gs=[t]:gs.push(t)}function ch(t,s,h,m){var v=s.interleaved;return v===null?(h.next=h,Xu(s)):(h.next=v.next,v.next=h),s.interleaved=h,ai(t,m)}function ai(t,s){t.lanes|=s;var h=t.alternate;for(h!==null&&(h.lanes|=s),h=t,t=t.return;t!==null;)t.childLanes|=s,h=t.alternate,h!==null&&(h.childLanes|=s),h=t,t=t.return;return h.tag===3?h.stateNode:null}var Bi=!1;function Ku(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dh(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function li(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ji(t,s,h){var m=t.updateQueue;if(m===null)return null;if(m=m.shared,(ft&2)!==0){var v=m.pending;return v===null?s.next=s:(s.next=v.next,v.next=s),m.pending=s,ai(t,h)}return v=m.interleaved,v===null?(s.next=s,Xu(m)):(s.next=v.next,v.next=s),m.interleaved=s,ai(t,h)}function sl(t,s,h){if(s=s.updateQueue,s!==null&&(s=s.shared,(h&4194240)!==0)){var m=s.lanes;m&=t.pendingLanes,h|=m,s.lanes=h,Ht(t,h)}}function hh(t,s){var h=t.updateQueue,m=t.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var v=null,_=null;if(h=h.firstBaseUpdate,h!==null){do{var O={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};_===null?v=_=O:_=_.next=O,h=h.next}while(h!==null);_===null?v=_=s:_=_.next=s}else v=_=s;h={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:_,shared:m.shared,effects:m.effects},t.updateQueue=h;return}t=h.lastBaseUpdate,t===null?h.firstBaseUpdate=s:t.next=s,h.lastBaseUpdate=s}function ol(t,s,h,m){var v=t.updateQueue;Bi=!1;var _=v.firstBaseUpdate,O=v.lastBaseUpdate,B=v.shared.pending;if(B!==null){v.shared.pending=null;var H=B,re=H.next;H.next=null,O===null?_=re:O.next=re,O=H;var de=t.alternate;de!==null&&(de=de.updateQueue,B=de.lastBaseUpdate,B!==O&&(B===null?de.firstBaseUpdate=re:B.next=re,de.lastBaseUpdate=H))}if(_!==null){var fe=v.baseState;O=0,de=re=H=null,B=_;do{var ue=B.lane,Se=B.eventTime;if((m&ue)===ue){de!==null&&(de=de.next={eventTime:Se,lane:0,tag:B.tag,payload:B.payload,callback:B.callback,next:null});e:{var Re=t,ke=B;switch(ue=s,Se=h,ke.tag){case 1:if(Re=ke.payload,typeof Re=="function"){fe=Re.call(Se,fe,ue);break e}fe=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=ke.payload,ue=typeof Re=="function"?Re.call(Se,fe,ue):Re,ue==null)break e;fe=Ce({},fe,ue);break e;case 2:Bi=!0}}B.callback!==null&&B.lane!==0&&(t.flags|=64,ue=v.effects,ue===null?v.effects=[B]:ue.push(B))}else Se={eventTime:Se,lane:ue,tag:B.tag,payload:B.payload,callback:B.callback,next:null},de===null?(re=de=Se,H=fe):de=de.next=Se,O|=ue;if(B=B.next,B===null){if(B=v.shared.pending,B===null)break;ue=B,B=ue.next,ue.next=null,v.lastBaseUpdate=ue,v.shared.pending=null}}while(!0);if(de===null&&(H=fe),v.baseState=H,v.firstBaseUpdate=re,v.lastBaseUpdate=de,s=v.shared.interleaved,s!==null){v=s;do O|=v.lane,v=v.next;while(v!==s)}else _===null&&(v.shared.lanes=0);xs|=O,t.lanes=O,t.memoizedState=fe}}function fh(t,s,h){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var m=t[s],v=m.callback;if(v!==null){if(m.callback=null,m=h,typeof v!="function")throw Error(o(191,v));v.call(m)}}}var Zo={},Xn=Pi(Zo),Qo=Pi(Zo),Jo=Pi(Zo);function ps(t){if(t===Zo)throw Error(o(174));return t}function qu(t,s){switch(Rt(Jo,s),Rt(Qo,t),Rt(Xn,Zo),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:ks(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=ks(s,t)}Dt(Xn),Rt(Xn,s)}function eo(){Dt(Xn),Dt(Qo),Dt(Jo)}function gh(t){ps(Jo.current);var s=ps(Xn.current),h=ks(s,t.type);s!==h&&(Rt(Qo,t),Rt(Xn,h))}function Yu(t){Qo.current===t&&(Dt(Xn),Dt(Qo))}var Ut=Pi(0);function al(t){for(var s=t;s!==null;){if(s.tag===13){var h=s.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var Zu=[];function Qu(){for(var t=0;t<Zu.length;t++)Zu[t]._workInProgressVersionPrimary=null;Zu.length=0}var ll=oe.ReactCurrentDispatcher,Ju=oe.ReactCurrentBatchConfig,ms=0,Vt=null,cr=null,pr=null,ul=!1,ea=!1,ta=0,kg=0;function Or(){throw Error(o(321))}function ec(t,s){if(s===null)return!1;for(var h=0;h<s.length&&h<t.length;h++)if(!$(t[h],s[h]))return!1;return!0}function tc(t,s,h,m,v,_){if(ms=_,Vt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ll.current=t===null||t.memoizedState===null?Lg:Bg,t=h(m,v),ea){_=0;do{if(ea=!1,ta=0,25<=_)throw Error(o(301));_+=1,pr=cr=null,s.updateQueue=null,ll.current=jg,t=h(m,v)}while(ea)}if(ll.current=hl,s=cr!==null&&cr.next!==null,ms=0,pr=cr=Vt=null,ul=!1,s)throw Error(o(300));return t}function rc(){var t=ta!==0;return ta=0,t}function Kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pr===null?Vt.memoizedState=pr=t:pr=pr.next=t,pr}function En(){if(cr===null){var t=Vt.alternate;t=t!==null?t.memoizedState:null}else t=cr.next;var s=pr===null?Vt.memoizedState:pr.next;if(s!==null)pr=s,cr=t;else{if(t===null)throw Error(o(310));cr=t,t={memoizedState:cr.memoizedState,baseState:cr.baseState,baseQueue:cr.baseQueue,queue:cr.queue,next:null},pr===null?Vt.memoizedState=pr=t:pr=pr.next=t}return pr}function ra(t,s){return typeof s=="function"?s(t):s}function nc(t){var s=En(),h=s.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=t;var m=cr,v=m.baseQueue,_=h.pending;if(_!==null){if(v!==null){var O=v.next;v.next=_.next,_.next=O}m.baseQueue=v=_,h.pending=null}if(v!==null){_=v.next,m=m.baseState;var B=O=null,H=null,re=_;do{var de=re.lane;if((ms&de)===de)H!==null&&(H=H.next={lane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),m=re.hasEagerState?re.eagerState:t(m,re.action);else{var fe={lane:de,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null};H===null?(B=H=fe,O=m):H=H.next=fe,Vt.lanes|=de,xs|=de}re=re.next}while(re!==null&&re!==_);H===null?O=m:H.next=B,$(m,s.memoizedState)||(zr=!0),s.memoizedState=m,s.baseState=O,s.baseQueue=H,h.lastRenderedState=m}if(t=h.interleaved,t!==null){v=t;do _=v.lane,Vt.lanes|=_,xs|=_,v=v.next;while(v!==t)}else v===null&&(h.lanes=0);return[s.memoizedState,h.dispatch]}function ic(t){var s=En(),h=s.queue;if(h===null)throw Error(o(311));h.lastRenderedReducer=t;var m=h.dispatch,v=h.pending,_=s.memoizedState;if(v!==null){h.pending=null;var O=v=v.next;do _=t(_,O.action),O=O.next;while(O!==v);$(_,s.memoizedState)||(zr=!0),s.memoizedState=_,s.baseQueue===null&&(s.baseState=_),h.lastRenderedState=_}return[_,m]}function ph(){}function mh(t,s){var h=Vt,m=En(),v=s(),_=!$(m.memoizedState,v);if(_&&(m.memoizedState=v,zr=!0),m=m.queue,sc(yh.bind(null,h,m,t),[t]),m.getSnapshot!==s||_||pr!==null&&pr.memoizedState.tag&1){if(h.flags|=2048,na(9,wh.bind(null,h,m,v,s),void 0,null),mr===null)throw Error(o(349));(ms&30)!==0||xh(h,s,v)}return v}function xh(t,s,h){t.flags|=16384,t={getSnapshot:s,value:h},s=Vt.updateQueue,s===null?(s={lastEffect:null,stores:null},Vt.updateQueue=s,s.stores=[t]):(h=s.stores,h===null?s.stores=[t]:h.push(t))}function wh(t,s,h,m){s.value=h,s.getSnapshot=m,vh(s)&&Eh(t)}function yh(t,s,h){return h(function(){vh(s)&&Eh(t)})}function vh(t){var s=t.getSnapshot;t=t.value;try{var h=s();return!$(t,h)}catch{return!0}}function Eh(t){var s=ai(t,1);s!==null&&Pn(s,t,1,-1)}function _h(t){var s=Kn();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ra,lastRenderedState:t},s.queue=t,t=t.dispatch=Mg.bind(null,Vt,t),[s.memoizedState,t]}function na(t,s,h,m){return t={tag:t,create:s,destroy:h,deps:m,next:null},s=Vt.updateQueue,s===null?(s={lastEffect:null,stores:null},Vt.updateQueue=s,s.lastEffect=t.next=t):(h=s.lastEffect,h===null?s.lastEffect=t.next=t:(m=h.next,h.next=t,t.next=m,s.lastEffect=t)),t}function Ch(){return En().memoizedState}function cl(t,s,h,m){var v=Kn();Vt.flags|=t,v.memoizedState=na(1|s,h,void 0,m===void 0?null:m)}function dl(t,s,h,m){var v=En();m=m===void 0?null:m;var _=void 0;if(cr!==null){var O=cr.memoizedState;if(_=O.destroy,m!==null&&ec(m,O.deps)){v.memoizedState=na(s,h,_,m);return}}Vt.flags|=t,v.memoizedState=na(1|s,h,_,m)}function Ah(t,s){return cl(8390656,8,t,s)}function sc(t,s){return dl(2048,8,t,s)}function bh(t,s){return dl(4,2,t,s)}function Sh(t,s){return dl(4,4,t,s)}function Ih(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Th(t,s,h){return h=h!=null?h.concat([t]):null,dl(4,4,Ih.bind(null,s,t),h)}function oc(){}function Nh(t,s){var h=En();s=s===void 0?null:s;var m=h.memoizedState;return m!==null&&s!==null&&ec(s,m[1])?m[0]:(h.memoizedState=[t,s],t)}function Rh(t,s){var h=En();s=s===void 0?null:s;var m=h.memoizedState;return m!==null&&s!==null&&ec(s,m[1])?m[0]:(t=t(),h.memoizedState=[t,s],t)}function Oh(t,s,h){return(ms&21)===0?(t.baseState&&(t.baseState=!1,zr=!0),t.memoizedState=h):($(h,s)||(h=or(),Vt.lanes|=h,xs|=h,t.baseState=!0),s)}function Dg(t,s){var h=et;et=h!==0&&4>h?h:4,t(!0);var m=Ju.transition;Ju.transition={};try{t(!1),s()}finally{et=h,Ju.transition=m}}function kh(){return En().memoizedState}function Pg(t,s,h){var m=Wi(t);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},Dh(t))Ph(s,h);else if(h=ch(t,s,h,m),h!==null){var v=Br();Pn(h,t,m,v),Mh(h,s,m)}}function Mg(t,s,h){var m=Wi(t),v={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(Dh(t))Ph(s,v);else{var _=t.alternate;if(t.lanes===0&&(_===null||_.lanes===0)&&(_=s.lastRenderedReducer,_!==null))try{var O=s.lastRenderedState,B=_(O,h);if(v.hasEagerState=!0,v.eagerState=B,$(B,O)){var H=s.interleaved;H===null?(v.next=v,Xu(s)):(v.next=H.next,H.next=v),s.interleaved=v;return}}catch{}finally{}h=ch(t,s,v,m),h!==null&&(v=Br(),Pn(h,t,m,v),Mh(h,s,m))}}function Dh(t){var s=t.alternate;return t===Vt||s!==null&&s===Vt}function Ph(t,s){ea=ul=!0;var h=t.pending;h===null?s.next=s:(s.next=h.next,h.next=s),t.pending=s}function Mh(t,s,h){if((h&4194240)!==0){var m=s.lanes;m&=t.pendingLanes,h|=m,s.lanes=h,Ht(t,h)}}var hl={readContext:vn,useCallback:Or,useContext:Or,useEffect:Or,useImperativeHandle:Or,useInsertionEffect:Or,useLayoutEffect:Or,useMemo:Or,useReducer:Or,useRef:Or,useState:Or,useDebugValue:Or,useDeferredValue:Or,useTransition:Or,useMutableSource:Or,useSyncExternalStore:Or,useId:Or,unstable_isNewReconciler:!1},Lg={readContext:vn,useCallback:function(t,s){return Kn().memoizedState=[t,s===void 0?null:s],t},useContext:vn,useEffect:Ah,useImperativeHandle:function(t,s,h){return h=h!=null?h.concat([t]):null,cl(4194308,4,Ih.bind(null,s,t),h)},useLayoutEffect:function(t,s){return cl(4194308,4,t,s)},useInsertionEffect:function(t,s){return cl(4,2,t,s)},useMemo:function(t,s){var h=Kn();return s=s===void 0?null:s,t=t(),h.memoizedState=[t,s],t},useReducer:function(t,s,h){var m=Kn();return s=h!==void 0?h(s):s,m.memoizedState=m.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},m.queue=t,t=t.dispatch=Pg.bind(null,Vt,t),[m.memoizedState,t]},useRef:function(t){var s=Kn();return t={current:t},s.memoizedState=t},useState:_h,useDebugValue:oc,useDeferredValue:function(t){return Kn().memoizedState=t},useTransition:function(){var t=_h(!1),s=t[0];return t=Dg.bind(null,t[1]),Kn().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,h){var m=Vt,v=Kn();if(Lt){if(h===void 0)throw Error(o(407));h=h()}else{if(h=s(),mr===null)throw Error(o(349));(ms&30)!==0||xh(m,s,h)}v.memoizedState=h;var _={value:h,getSnapshot:s};return v.queue=_,Ah(yh.bind(null,m,_,t),[t]),m.flags|=2048,na(9,wh.bind(null,m,_,h,s),void 0,null),h},useId:function(){var t=Kn(),s=mr.identifierPrefix;if(Lt){var h=oi,m=si;h=(m&~(1<<32-Mr(m)-1)).toString(32)+h,s=":"+s+"R"+h,h=ta++,0<h&&(s+="H"+h.toString(32)),s+=":"}else h=kg++,s=":"+s+"r"+h.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},Bg={readContext:vn,useCallback:Nh,useContext:vn,useEffect:sc,useImperativeHandle:Th,useInsertionEffect:bh,useLayoutEffect:Sh,useMemo:Rh,useReducer:nc,useRef:Ch,useState:function(){return nc(ra)},useDebugValue:oc,useDeferredValue:function(t){var s=En();return Oh(s,cr.memoizedState,t)},useTransition:function(){var t=nc(ra)[0],s=En().memoizedState;return[t,s]},useMutableSource:ph,useSyncExternalStore:mh,useId:kh,unstable_isNewReconciler:!1},jg={readContext:vn,useCallback:Nh,useContext:vn,useEffect:sc,useImperativeHandle:Th,useInsertionEffect:bh,useLayoutEffect:Sh,useMemo:Rh,useReducer:ic,useRef:Ch,useState:function(){return ic(ra)},useDebugValue:oc,useDeferredValue:function(t){var s=En();return cr===null?s.memoizedState=t:Oh(s,cr.memoizedState,t)},useTransition:function(){var t=ic(ra)[0],s=En().memoizedState;return[t,s]},useMutableSource:ph,useSyncExternalStore:mh,useId:kh,unstable_isNewReconciler:!1};function On(t,s){if(t&&t.defaultProps){s=Ce({},s),t=t.defaultProps;for(var h in t)s[h]===void 0&&(s[h]=t[h]);return s}return s}function ac(t,s,h,m){s=t.memoizedState,h=h(m,s),h=h==null?s:Ce({},s,h),t.memoizedState=h,t.lanes===0&&(t.updateQueue.baseState=h)}var fl={isMounted:function(t){return(t=t._reactInternals)?Vr(t)===t:!1},enqueueSetState:function(t,s,h){t=t._reactInternals;var m=Br(),v=Wi(t),_=li(m,v);_.payload=s,h!=null&&(_.callback=h),s=ji(t,_,v),s!==null&&(Pn(s,t,v,m),sl(s,t,v))},enqueueReplaceState:function(t,s,h){t=t._reactInternals;var m=Br(),v=Wi(t),_=li(m,v);_.tag=1,_.payload=s,h!=null&&(_.callback=h),s=ji(t,_,v),s!==null&&(Pn(s,t,v,m),sl(s,t,v))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var h=Br(),m=Wi(t),v=li(h,m);v.tag=2,s!=null&&(v.callback=s),s=ji(t,v,m),s!==null&&(Pn(s,t,m,h),sl(s,t,m))}};function Lh(t,s,h,m,v,_,O){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(m,_,O):s.prototype&&s.prototype.isPureReactComponent?!ee(h,m)||!ee(v,_):!0}function Bh(t,s,h){var m=!1,v=Mi,_=s.contextType;return typeof _=="object"&&_!==null?_=vn(_):(v=Hr(s)?ds:Rr.current,m=s.contextTypes,_=(m=m!=null)?Xs(t,v):Mi),s=new s(h,_),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=fl,t.stateNode=s,s._reactInternals=t,m&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=v,t.__reactInternalMemoizedMaskedChildContext=_),s}function jh(t,s,h,m){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(h,m),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(h,m),s.state!==t&&fl.enqueueReplaceState(s,s.state,null)}function lc(t,s,h,m){var v=t.stateNode;v.props=h,v.state=t.memoizedState,v.refs={},Ku(t);var _=s.contextType;typeof _=="object"&&_!==null?v.context=vn(_):(_=Hr(s)?ds:Rr.current,v.context=Xs(t,_)),v.state=t.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(ac(t,s,_,h),v.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(s=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),s!==v.state&&fl.enqueueReplaceState(v,v.state,null),ol(t,h,v,m),v.state=t.memoizedState),typeof v.componentDidMount=="function"&&(t.flags|=4194308)}function to(t,s){try{var h="",m=s;do h+=ot(m),m=m.return;while(m);var v=h}catch(_){v=`
Error generating stack: `+_.message+`
`+_.stack}return{value:t,source:s,stack:v,digest:null}}function uc(t,s,h){return{value:t,source:null,stack:h??null,digest:s??null}}function cc(t,s){try{console.error(s.value)}catch(h){setTimeout(function(){throw h})}}var Fg=typeof WeakMap=="function"?WeakMap:Map;function Fh(t,s,h){h=li(-1,h),h.tag=3,h.payload={element:null};var m=s.value;return h.callback=function(){vl||(vl=!0,bc=m),cc(t,s)},h}function Uh(t,s,h){h=li(-1,h),h.tag=3;var m=t.type.getDerivedStateFromError;if(typeof m=="function"){var v=s.value;h.payload=function(){return m(v)},h.callback=function(){cc(t,s)}}var _=t.stateNode;return _!==null&&typeof _.componentDidCatch=="function"&&(h.callback=function(){cc(t,s),typeof m!="function"&&(Ui===null?Ui=new Set([this]):Ui.add(this));var O=s.stack;this.componentDidCatch(s.value,{componentStack:O!==null?O:""})}),h}function Vh(t,s,h){var m=t.pingCache;if(m===null){m=t.pingCache=new Fg;var v=new Set;m.set(s,v)}else v=m.get(s),v===void 0&&(v=new Set,m.set(s,v));v.has(h)||(v.add(h),t=Jg.bind(null,t,s,h),s.then(t,t))}function Wh(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function Hh(t,s,h,m,v){return(t.mode&1)===0?(t===s?t.flags|=65536:(t.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(s=li(-1,1),s.tag=2,ji(h,s,1))),h.lanes|=1),t):(t.flags|=65536,t.lanes=v,t)}var Ug=oe.ReactCurrentOwner,zr=!1;function Lr(t,s,h,m){s.child=t===null?uh(s,null,h,m):Zs(s,t.child,h,m)}function zh(t,s,h,m,v){h=h.render;var _=s.ref;return Js(s,v),m=tc(t,s,h,m,_,v),h=rc(),t!==null&&!zr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~v,ui(t,s,v)):(Lt&&h&&ju(s),s.flags|=1,Lr(t,s,m,v),s.child)}function Gh(t,s,h,m,v){if(t===null){var _=h.type;return typeof _=="function"&&!kc(_)&&_.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(s.tag=15,s.type=_,$h(t,s,_,m,v)):(t=Sl(h.type,null,m,s,s.mode,v),t.ref=s.ref,t.return=s,s.child=t)}if(_=t.child,(t.lanes&v)===0){var O=_.memoizedProps;if(h=h.compare,h=h!==null?h:ee,h(O,m)&&t.ref===s.ref)return ui(t,s,v)}return s.flags|=1,t=zi(_,m),t.ref=s.ref,t.return=s,s.child=t}function $h(t,s,h,m,v){if(t!==null){var _=t.memoizedProps;if(ee(_,m)&&t.ref===s.ref)if(zr=!1,s.pendingProps=m=_,(t.lanes&v)!==0)(t.flags&131072)!==0&&(zr=!0);else return s.lanes=t.lanes,ui(t,s,v)}return dc(t,s,h,m,v)}function Xh(t,s,h){var m=s.pendingProps,v=m.children,_=t!==null?t.memoizedState:null;if(m.mode==="hidden")if((s.mode&1)===0)s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rt(no,un),un|=h;else{if((h&1073741824)===0)return t=_!==null?_.baseLanes|h:h,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Rt(no,un),un|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=_!==null?_.baseLanes:h,Rt(no,un),un|=m}else _!==null?(m=_.baseLanes|h,s.memoizedState=null):m=h,Rt(no,un),un|=m;return Lr(t,s,v,h),s.child}function Kh(t,s){var h=s.ref;(t===null&&h!==null||t!==null&&t.ref!==h)&&(s.flags|=512,s.flags|=2097152)}function dc(t,s,h,m,v){var _=Hr(h)?ds:Rr.current;return _=Xs(s,_),Js(s,v),h=tc(t,s,h,m,_,v),m=rc(),t!==null&&!zr?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~v,ui(t,s,v)):(Lt&&m&&ju(s),s.flags|=1,Lr(t,s,h,v),s.child)}function qh(t,s,h,m,v){if(Hr(h)){var _=!0;Za(s)}else _=!1;if(Js(s,v),s.stateNode===null)pl(t,s),Bh(s,h,m),lc(s,h,m,v),m=!0;else if(t===null){var O=s.stateNode,B=s.memoizedProps;O.props=B;var H=O.context,re=h.contextType;typeof re=="object"&&re!==null?re=vn(re):(re=Hr(h)?ds:Rr.current,re=Xs(s,re));var de=h.getDerivedStateFromProps,fe=typeof de=="function"||typeof O.getSnapshotBeforeUpdate=="function";fe||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==m||H!==re)&&jh(s,O,m,re),Bi=!1;var ue=s.memoizedState;O.state=ue,ol(s,m,O,v),H=s.memoizedState,B!==m||ue!==H||Wr.current||Bi?(typeof de=="function"&&(ac(s,h,de,m),H=s.memoizedState),(B=Bi||Lh(s,h,B,m,ue,H,re))?(fe||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(s.flags|=4194308)):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=m,s.memoizedState=H),O.props=m,O.state=H,O.context=re,m=B):(typeof O.componentDidMount=="function"&&(s.flags|=4194308),m=!1)}else{O=s.stateNode,dh(t,s),B=s.memoizedProps,re=s.type===s.elementType?B:On(s.type,B),O.props=re,fe=s.pendingProps,ue=O.context,H=h.contextType,typeof H=="object"&&H!==null?H=vn(H):(H=Hr(h)?ds:Rr.current,H=Xs(s,H));var Se=h.getDerivedStateFromProps;(de=typeof Se=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(B!==fe||ue!==H)&&jh(s,O,m,H),Bi=!1,ue=s.memoizedState,O.state=ue,ol(s,m,O,v);var Re=s.memoizedState;B!==fe||ue!==Re||Wr.current||Bi?(typeof Se=="function"&&(ac(s,h,Se,m),Re=s.memoizedState),(re=Bi||Lh(s,h,re,m,ue,Re,H)||!1)?(de||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(m,Re,H),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(m,Re,H)),typeof O.componentDidUpdate=="function"&&(s.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof O.componentDidUpdate!="function"||B===t.memoizedProps&&ue===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&ue===t.memoizedState||(s.flags|=1024),s.memoizedProps=m,s.memoizedState=Re),O.props=m,O.state=Re,O.context=H,m=re):(typeof O.componentDidUpdate!="function"||B===t.memoizedProps&&ue===t.memoizedState||(s.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||B===t.memoizedProps&&ue===t.memoizedState||(s.flags|=1024),m=!1)}return hc(t,s,h,m,_,v)}function hc(t,s,h,m,v,_){Kh(t,s);var O=(s.flags&128)!==0;if(!m&&!O)return v&&eh(s,h,!1),ui(t,s,_);m=s.stateNode,Ug.current=s;var B=O&&typeof h.getDerivedStateFromError!="function"?null:m.render();return s.flags|=1,t!==null&&O?(s.child=Zs(s,t.child,null,_),s.child=Zs(s,null,B,_)):Lr(t,s,B,_),s.memoizedState=m.state,v&&eh(s,h,!0),s.child}function Yh(t){var s=t.stateNode;s.pendingContext?Qd(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Qd(t,s.context,!1),qu(t,s.containerInfo)}function Zh(t,s,h,m,v){return Ys(),Wu(v),s.flags|=256,Lr(t,s,h,m),s.child}var fc={dehydrated:null,treeContext:null,retryLane:0};function gc(t){return{baseLanes:t,cachePool:null,transitions:null}}function Qh(t,s,h){var m=s.pendingProps,v=Ut.current,_=!1,O=(s.flags&128)!==0,B;if((B=O)||(B=t!==null&&t.memoizedState===null?!1:(v&2)!==0),B?(_=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(v|=1),Rt(Ut,v&1),t===null)return Vu(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((s.mode&1)===0?s.lanes=1:t.data==="$!"?s.lanes=8:s.lanes=1073741824,null):(O=m.children,t=m.fallback,_?(m=s.mode,_=s.child,O={mode:"hidden",children:O},(m&1)===0&&_!==null?(_.childLanes=0,_.pendingProps=O):_=Il(O,m,0,null),t=Es(t,m,h,null),_.return=s,t.return=s,_.sibling=t,s.child=_,s.child.memoizedState=gc(h),s.memoizedState=fc,t):pc(s,O));if(v=t.memoizedState,v!==null&&(B=v.dehydrated,B!==null))return Vg(t,s,O,m,B,v,h);if(_){_=m.fallback,O=s.mode,v=t.child,B=v.sibling;var H={mode:"hidden",children:m.children};return(O&1)===0&&s.child!==v?(m=s.child,m.childLanes=0,m.pendingProps=H,s.deletions=null):(m=zi(v,H),m.subtreeFlags=v.subtreeFlags&14680064),B!==null?_=zi(B,_):(_=Es(_,O,h,null),_.flags|=2),_.return=s,m.return=s,m.sibling=_,s.child=m,m=_,_=s.child,O=t.child.memoizedState,O=O===null?gc(h):{baseLanes:O.baseLanes|h,cachePool:null,transitions:O.transitions},_.memoizedState=O,_.childLanes=t.childLanes&~h,s.memoizedState=fc,m}return _=t.child,t=_.sibling,m=zi(_,{mode:"visible",children:m.children}),(s.mode&1)===0&&(m.lanes=h),m.return=s,m.sibling=null,t!==null&&(h=s.deletions,h===null?(s.deletions=[t],s.flags|=16):h.push(t)),s.child=m,s.memoizedState=null,m}function pc(t,s){return s=Il({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function gl(t,s,h,m){return m!==null&&Wu(m),Zs(s,t.child,null,h),t=pc(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function Vg(t,s,h,m,v,_,O){if(h)return s.flags&256?(s.flags&=-257,m=uc(Error(o(422))),gl(t,s,O,m)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(_=m.fallback,v=s.mode,m=Il({mode:"visible",children:m.children},v,0,null),_=Es(_,v,O,null),_.flags|=2,m.return=s,_.return=s,m.sibling=_,s.child=m,(s.mode&1)!==0&&Zs(s,t.child,null,O),s.child.memoizedState=gc(O),s.memoizedState=fc,_);if((s.mode&1)===0)return gl(t,s,O,null);if(v.data==="$!"){if(m=v.nextSibling&&v.nextSibling.dataset,m)var B=m.dgst;return m=B,_=Error(o(419)),m=uc(_,m,void 0),gl(t,s,O,m)}if(B=(O&t.childLanes)!==0,zr||B){if(m=mr,m!==null){switch(O&-O){case 4:v=2;break;case 16:v=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:v=32;break;case 536870912:v=268435456;break;default:v=0}v=(v&(m.suspendedLanes|O))!==0?0:v,v!==0&&v!==_.retryLane&&(_.retryLane=v,ai(t,v),Pn(m,t,v,-1))}return Oc(),m=uc(Error(o(421))),gl(t,s,O,m)}return v.data==="$?"?(s.flags|=128,s.child=t.child,s=ep.bind(null,t),v._reactRetry=s,null):(t=_.treeContext,ln=Di(v.nextSibling),an=s,Lt=!0,Rn=null,t!==null&&(wn[yn++]=si,wn[yn++]=oi,wn[yn++]=hs,si=t.id,oi=t.overflow,hs=s),s=pc(s,m.children),s.flags|=4096,s)}function Jh(t,s,h){t.lanes|=s;var m=t.alternate;m!==null&&(m.lanes|=s),$u(t.return,s,h)}function mc(t,s,h,m,v){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:v}:(_.isBackwards=s,_.rendering=null,_.renderingStartTime=0,_.last=m,_.tail=h,_.tailMode=v)}function ef(t,s,h){var m=s.pendingProps,v=m.revealOrder,_=m.tail;if(Lr(t,s,m.children,h),m=Ut.current,(m&2)!==0)m=m&1|2,s.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jh(t,h,s);else if(t.tag===19)Jh(t,h,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}m&=1}if(Rt(Ut,m),(s.mode&1)===0)s.memoizedState=null;else switch(v){case"forwards":for(h=s.child,v=null;h!==null;)t=h.alternate,t!==null&&al(t)===null&&(v=h),h=h.sibling;h=v,h===null?(v=s.child,s.child=null):(v=h.sibling,h.sibling=null),mc(s,!1,v,h,_);break;case"backwards":for(h=null,v=s.child,s.child=null;v!==null;){if(t=v.alternate,t!==null&&al(t)===null){s.child=v;break}t=v.sibling,v.sibling=h,h=v,v=t}mc(s,!0,h,null,_);break;case"together":mc(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function pl(t,s){(s.mode&1)===0&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function ui(t,s,h){if(t!==null&&(s.dependencies=t.dependencies),xs|=s.lanes,(h&s.childLanes)===0)return null;if(t!==null&&s.child!==t.child)throw Error(o(153));if(s.child!==null){for(t=s.child,h=zi(t,t.pendingProps),s.child=h,h.return=s;t.sibling!==null;)t=t.sibling,h=h.sibling=zi(t,t.pendingProps),h.return=s;h.sibling=null}return s.child}function Wg(t,s,h){switch(s.tag){case 3:Yh(s),Ys();break;case 5:gh(s);break;case 1:Hr(s.type)&&Za(s);break;case 4:qu(s,s.stateNode.containerInfo);break;case 10:var m=s.type._context,v=s.memoizedProps.value;Rt(nl,m._currentValue),m._currentValue=v;break;case 13:if(m=s.memoizedState,m!==null)return m.dehydrated!==null?(Rt(Ut,Ut.current&1),s.flags|=128,null):(h&s.child.childLanes)!==0?Qh(t,s,h):(Rt(Ut,Ut.current&1),t=ui(t,s,h),t!==null?t.sibling:null);Rt(Ut,Ut.current&1);break;case 19:if(m=(h&s.childLanes)!==0,(t.flags&128)!==0){if(m)return ef(t,s,h);s.flags|=128}if(v=s.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Rt(Ut,Ut.current),m)break;return null;case 22:case 23:return s.lanes=0,Xh(t,s,h)}return ui(t,s,h)}var tf,xc,rf,nf;tf=function(t,s){for(var h=s.child;h!==null;){if(h.tag===5||h.tag===6)t.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===s)break;for(;h.sibling===null;){if(h.return===null||h.return===s)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},xc=function(){},rf=function(t,s,h,m){var v=t.memoizedProps;if(v!==m){t=s.stateNode,ps(Xn.current);var _=null;switch(h){case"input":v=Fn(t,v),m=Fn(t,m),_=[];break;case"select":v=Ce({},v,{value:void 0}),m=Ce({},m,{value:void 0}),_=[];break;case"textarea":v=yi(t,v),m=yi(t,m),_=[];break;default:typeof v.onClick!="function"&&typeof m.onClick=="function"&&(t.onclick=Ka)}pt(h,m);var O;h=null;for(re in v)if(!m.hasOwnProperty(re)&&v.hasOwnProperty(re)&&v[re]!=null)if(re==="style"){var B=v[re];for(O in B)B.hasOwnProperty(O)&&(h||(h={}),h[O]="")}else re!=="dangerouslySetInnerHTML"&&re!=="children"&&re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&re!=="autoFocus"&&(g.hasOwnProperty(re)?_||(_=[]):(_=_||[]).push(re,null));for(re in m){var H=m[re];if(B=v!=null?v[re]:void 0,m.hasOwnProperty(re)&&H!==B&&(H!=null||B!=null))if(re==="style")if(B){for(O in B)!B.hasOwnProperty(O)||H&&H.hasOwnProperty(O)||(h||(h={}),h[O]="");for(O in H)H.hasOwnProperty(O)&&B[O]!==H[O]&&(h||(h={}),h[O]=H[O])}else h||(_||(_=[]),_.push(re,h)),h=H;else re==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,B=B?B.__html:void 0,H!=null&&B!==H&&(_=_||[]).push(re,H)):re==="children"?typeof H!="string"&&typeof H!="number"||(_=_||[]).push(re,""+H):re!=="suppressContentEditableWarning"&&re!=="suppressHydrationWarning"&&(g.hasOwnProperty(re)?(H!=null&&re==="onScroll"&&kt("scroll",t),_||B===H||(_=[])):(_=_||[]).push(re,H))}h&&(_=_||[]).push("style",h);var re=_;(s.updateQueue=re)&&(s.flags|=4)}},nf=function(t,s,h,m){h!==m&&(s.flags|=4)};function ia(t,s){if(!Lt)switch(t.tailMode){case"hidden":s=t.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?t.tail=null:h.sibling=null;break;case"collapsed":h=t.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:m.sibling=null}}function kr(t){var s=t.alternate!==null&&t.alternate.child===t.child,h=0,m=0;if(s)for(var v=t.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags&14680064,m|=v.flags&14680064,v.return=t,v=v.sibling;else for(v=t.child;v!==null;)h|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=t,v=v.sibling;return t.subtreeFlags|=m,t.childLanes=h,s}function Hg(t,s,h){var m=s.pendingProps;switch(Fu(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kr(s),null;case 1:return Hr(s.type)&&Ya(),kr(s),null;case 3:return m=s.stateNode,eo(),Dt(Wr),Dt(Rr),Qu(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(t===null||t.child===null)&&(tl(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,Rn!==null&&(Tc(Rn),Rn=null))),xc(t,s),kr(s),null;case 5:Yu(s);var v=ps(Jo.current);if(h=s.type,t!==null&&s.stateNode!=null)rf(t,s,h,m,v),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!m){if(s.stateNode===null)throw Error(o(166));return kr(s),null}if(t=ps(Xn.current),tl(s)){m=s.stateNode,h=s.type;var _=s.memoizedProps;switch(m[$n]=s,m[Ko]=_,t=(s.mode&1)!==0,h){case"dialog":kt("cancel",m),kt("close",m);break;case"iframe":case"object":case"embed":kt("load",m);break;case"video":case"audio":for(v=0;v<Go.length;v++)kt(Go[v],m);break;case"source":kt("error",m);break;case"img":case"image":case"link":kt("error",m),kt("load",m);break;case"details":kt("toggle",m);break;case"input":Zr(m,_),kt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!_.multiple},kt("invalid",m);break;case"textarea":Co(m,_),kt("invalid",m)}pt(h,_),v=null;for(var O in _)if(_.hasOwnProperty(O)){var B=_[O];O==="children"?typeof B=="string"?m.textContent!==B&&(_.suppressHydrationWarning!==!0&&Xa(m.textContent,B,t),v=["children",B]):typeof B=="number"&&m.textContent!==""+B&&(_.suppressHydrationWarning!==!0&&Xa(m.textContent,B,t),v=["children",""+B]):g.hasOwnProperty(O)&&B!=null&&O==="onScroll"&&kt("scroll",m)}switch(h){case"input":ir(m),Et(m,_,!0);break;case"textarea":ir(m),Os(m);break;case"select":case"option":break;default:typeof _.onClick=="function"&&(m.onclick=Ka)}m=v,s.updateQueue=m,m!==null&&(s.flags|=4)}else{O=v.nodeType===9?v:v.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jr(h)),t==="http://www.w3.org/1999/xhtml"?h==="script"?(t=O.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof m.is=="string"?t=O.createElement(h,{is:m.is}):(t=O.createElement(h),h==="select"&&(O=t,m.multiple?O.multiple=!0:m.size&&(O.size=m.size))):t=O.createElementNS(t,h),t[$n]=s,t[Ko]=m,tf(t,s,!1,!1),s.stateNode=t;e:{switch(O=St(h,m),h){case"dialog":kt("cancel",t),kt("close",t),v=m;break;case"iframe":case"object":case"embed":kt("load",t),v=m;break;case"video":case"audio":for(v=0;v<Go.length;v++)kt(Go[v],t);v=m;break;case"source":kt("error",t),v=m;break;case"img":case"image":case"link":kt("error",t),kt("load",t),v=m;break;case"details":kt("toggle",t),v=m;break;case"input":Zr(t,m),v=Fn(t,m),kt("invalid",t);break;case"option":v=m;break;case"select":t._wrapperState={wasMultiple:!!m.multiple},v=Ce({},m,{value:void 0}),kt("invalid",t);break;case"textarea":Co(t,m),v=yi(t,m),kt("invalid",t);break;default:v=m}pt(h,v),B=v;for(_ in B)if(B.hasOwnProperty(_)){var H=B[_];_==="style"?ye(t,H):_==="dangerouslySetInnerHTML"?(H=H?H.__html:void 0,H!=null&&hr(t,H)):_==="children"?typeof H=="string"?(h!=="textarea"||H!=="")&&vi(t,H):typeof H=="number"&&vi(t,""+H):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(g.hasOwnProperty(_)?H!=null&&_==="onScroll"&&kt("scroll",t):H!=null&&V(t,_,H,O))}switch(h){case"input":ir(t),Et(t,m,!1);break;case"textarea":ir(t),Os(t);break;case"option":m.value!=null&&t.setAttribute("value",""+Xe(m.value));break;case"select":t.multiple=!!m.multiple,_=m.value,_!=null?Ie(t,!!m.multiple,_,!1):m.defaultValue!=null&&Ie(t,!!m.multiple,m.defaultValue,!0);break;default:typeof v.onClick=="function"&&(t.onclick=Ka)}switch(h){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return kr(s),null;case 6:if(t&&s.stateNode!=null)nf(t,s,t.memoizedProps,m);else{if(typeof m!="string"&&s.stateNode===null)throw Error(o(166));if(h=ps(Jo.current),ps(Xn.current),tl(s)){if(m=s.stateNode,h=s.memoizedProps,m[$n]=s,(_=m.nodeValue!==h)&&(t=an,t!==null))switch(t.tag){case 3:Xa(m.nodeValue,h,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(m.nodeValue,h,(t.mode&1)!==0)}_&&(s.flags|=4)}else m=(h.nodeType===9?h:h.ownerDocument).createTextNode(m),m[$n]=s,s.stateNode=m}return kr(s),null;case 13:if(Dt(Ut),m=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Lt&&ln!==null&&(s.mode&1)!==0&&(s.flags&128)===0)oh(),Ys(),s.flags|=98560,_=!1;else if(_=tl(s),m!==null&&m.dehydrated!==null){if(t===null){if(!_)throw Error(o(318));if(_=s.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(o(317));_[$n]=s}else Ys(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;kr(s),_=!1}else Rn!==null&&(Tc(Rn),Rn=null),_=!0;if(!_)return s.flags&65536?s:null}return(s.flags&128)!==0?(s.lanes=h,s):(m=m!==null,m!==(t!==null&&t.memoizedState!==null)&&m&&(s.child.flags|=8192,(s.mode&1)!==0&&(t===null||(Ut.current&1)!==0?dr===0&&(dr=3):Oc())),s.updateQueue!==null&&(s.flags|=4),kr(s),null);case 4:return eo(),xc(t,s),t===null&&$o(s.stateNode.containerInfo),kr(s),null;case 10:return Gu(s.type._context),kr(s),null;case 17:return Hr(s.type)&&Ya(),kr(s),null;case 19:if(Dt(Ut),_=s.memoizedState,_===null)return kr(s),null;if(m=(s.flags&128)!==0,O=_.rendering,O===null)if(m)ia(_,!1);else{if(dr!==0||t!==null&&(t.flags&128)!==0)for(t=s.child;t!==null;){if(O=al(t),O!==null){for(s.flags|=128,ia(_,!1),m=O.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),s.subtreeFlags=0,m=h,h=s.child;h!==null;)_=h,t=m,_.flags&=14680066,O=_.alternate,O===null?(_.childLanes=0,_.lanes=t,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=O.childLanes,_.lanes=O.lanes,_.child=O.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=O.memoizedProps,_.memoizedState=O.memoizedState,_.updateQueue=O.updateQueue,_.type=O.type,t=O.dependencies,_.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),h=h.sibling;return Rt(Ut,Ut.current&1|2),s.child}t=t.sibling}_.tail!==null&&yt()>io&&(s.flags|=128,m=!0,ia(_,!1),s.lanes=4194304)}else{if(!m)if(t=al(O),t!==null){if(s.flags|=128,m=!0,h=t.updateQueue,h!==null&&(s.updateQueue=h,s.flags|=4),ia(_,!0),_.tail===null&&_.tailMode==="hidden"&&!O.alternate&&!Lt)return kr(s),null}else 2*yt()-_.renderingStartTime>io&&h!==1073741824&&(s.flags|=128,m=!0,ia(_,!1),s.lanes=4194304);_.isBackwards?(O.sibling=s.child,s.child=O):(h=_.last,h!==null?h.sibling=O:s.child=O,_.last=O)}return _.tail!==null?(s=_.tail,_.rendering=s,_.tail=s.sibling,_.renderingStartTime=yt(),s.sibling=null,h=Ut.current,Rt(Ut,m?h&1|2:h&1),s):(kr(s),null);case 22:case 23:return Rc(),m=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==m&&(s.flags|=8192),m&&(s.mode&1)!==0?(un&1073741824)!==0&&(kr(s),s.subtreeFlags&6&&(s.flags|=8192)):kr(s),null;case 24:return null;case 25:return null}throw Error(o(156,s.tag))}function zg(t,s){switch(Fu(s),s.tag){case 1:return Hr(s.type)&&Ya(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return eo(),Dt(Wr),Dt(Rr),Qu(),t=s.flags,(t&65536)!==0&&(t&128)===0?(s.flags=t&-65537|128,s):null;case 5:return Yu(s),null;case 13:if(Dt(Ut),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(o(340));Ys()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Dt(Ut),null;case 4:return eo(),null;case 10:return Gu(s.type._context),null;case 22:case 23:return Rc(),null;case 24:return null;default:return null}}var ml=!1,Dr=!1,Gg=typeof WeakSet=="function"?WeakSet:Set,Te=null;function ro(t,s){var h=t.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){Gt(t,s,m)}else h.current=null}function wc(t,s,h){try{h()}catch(m){Gt(t,s,m)}}var sf=!1;function $g(t,s){if(Ru=zn,t=tt(),Ze(t)){if("selectionStart"in t)var h={start:t.selectionStart,end:t.selectionEnd};else e:{h=(h=t.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var v=m.anchorOffset,_=m.focusNode;m=m.focusOffset;try{h.nodeType,_.nodeType}catch{h=null;break e}var O=0,B=-1,H=-1,re=0,de=0,fe=t,ue=null;t:for(;;){for(var Se;fe!==h||v!==0&&fe.nodeType!==3||(B=O+v),fe!==_||m!==0&&fe.nodeType!==3||(H=O+m),fe.nodeType===3&&(O+=fe.nodeValue.length),(Se=fe.firstChild)!==null;)ue=fe,fe=Se;for(;;){if(fe===t)break t;if(ue===h&&++re===v&&(B=O),ue===_&&++de===m&&(H=O),(Se=fe.nextSibling)!==null)break;fe=ue,ue=fe.parentNode}fe=Se}h=B===-1||H===-1?null:{start:B,end:H}}else h=null}h=h||{start:0,end:0}}else h=null;for(Ou={focusedElem:t,selectionRange:h},zn=!1,Te=s;Te!==null;)if(s=Te,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Te=t;else for(;Te!==null;){s=Te;try{var Re=s.alternate;if((s.flags&1024)!==0)switch(s.tag){case 0:case 11:case 15:break;case 1:if(Re!==null){var ke=Re.memoizedProps,Qt=Re.memoizedState,Y=s.stateNode,G=Y.getSnapshotBeforeUpdate(s.elementType===s.type?ke:On(s.type,ke),Qt);Y.__reactInternalSnapshotBeforeUpdate=G}break;case 3:var Q=s.stateNode.containerInfo;Q.nodeType===1?Q.textContent="":Q.nodeType===9&&Q.documentElement&&Q.removeChild(Q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(me){Gt(s,s.return,me)}if(t=s.sibling,t!==null){t.return=s.return,Te=t;break}Te=s.return}return Re=sf,sf=!1,Re}function sa(t,s,h){var m=s.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var v=m=m.next;do{if((v.tag&t)===t){var _=v.destroy;v.destroy=void 0,_!==void 0&&wc(s,h,_)}v=v.next}while(v!==m)}}function xl(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var h=s=s.next;do{if((h.tag&t)===t){var m=h.create;h.destroy=m()}h=h.next}while(h!==s)}}function yc(t){var s=t.ref;if(s!==null){var h=t.stateNode;switch(t.tag){case 5:t=h;break;default:t=h}typeof s=="function"?s(t):s.current=t}}function of(t){var s=t.alternate;s!==null&&(t.alternate=null,of(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[$n],delete s[Ko],delete s[Mu],delete s[Tg],delete s[Ng])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function af(t){return t.tag===5||t.tag===3||t.tag===4}function lf(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||af(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function vc(t,s,h){var m=t.tag;if(m===5||m===6)t=t.stateNode,s?h.nodeType===8?h.parentNode.insertBefore(t,s):h.insertBefore(t,s):(h.nodeType===8?(s=h.parentNode,s.insertBefore(t,h)):(s=h,s.appendChild(t)),h=h._reactRootContainer,h!=null||s.onclick!==null||(s.onclick=Ka));else if(m!==4&&(t=t.child,t!==null))for(vc(t,s,h),t=t.sibling;t!==null;)vc(t,s,h),t=t.sibling}function Ec(t,s,h){var m=t.tag;if(m===5||m===6)t=t.stateNode,s?h.insertBefore(t,s):h.appendChild(t);else if(m!==4&&(t=t.child,t!==null))for(Ec(t,s,h),t=t.sibling;t!==null;)Ec(t,s,h),t=t.sibling}var _r=null,kn=!1;function Fi(t,s,h){for(h=h.child;h!==null;)uf(t,s,h),h=h.sibling}function uf(t,s,h){if(Je&&typeof Je.onCommitFiberUnmount=="function")try{Je.onCommitFiberUnmount(ut,h)}catch{}switch(h.tag){case 5:Dr||ro(h,s);case 6:var m=_r,v=kn;_r=null,Fi(t,s,h),_r=m,kn=v,_r!==null&&(kn?(t=_r,h=h.stateNode,t.nodeType===8?t.parentNode.removeChild(h):t.removeChild(h)):_r.removeChild(h.stateNode));break;case 18:_r!==null&&(kn?(t=_r,h=h.stateNode,t.nodeType===8?Pu(t.parentNode,h):t.nodeType===1&&Pu(t,h),In(t)):Pu(_r,h.stateNode));break;case 4:m=_r,v=kn,_r=h.stateNode.containerInfo,kn=!0,Fi(t,s,h),_r=m,kn=v;break;case 0:case 11:case 14:case 15:if(!Dr&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){v=m=m.next;do{var _=v,O=_.destroy;_=_.tag,O!==void 0&&((_&2)!==0||(_&4)!==0)&&wc(h,s,O),v=v.next}while(v!==m)}Fi(t,s,h);break;case 1:if(!Dr&&(ro(h,s),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(B){Gt(h,s,B)}Fi(t,s,h);break;case 21:Fi(t,s,h);break;case 22:h.mode&1?(Dr=(m=Dr)||h.memoizedState!==null,Fi(t,s,h),Dr=m):Fi(t,s,h);break;default:Fi(t,s,h)}}function cf(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var h=t.stateNode;h===null&&(h=t.stateNode=new Gg),s.forEach(function(m){var v=tp.bind(null,t,m);h.has(m)||(h.add(m),m.then(v,v))})}}function Dn(t,s){var h=s.deletions;if(h!==null)for(var m=0;m<h.length;m++){var v=h[m];try{var _=t,O=s,B=O;e:for(;B!==null;){switch(B.tag){case 5:_r=B.stateNode,kn=!1;break e;case 3:_r=B.stateNode.containerInfo,kn=!0;break e;case 4:_r=B.stateNode.containerInfo,kn=!0;break e}B=B.return}if(_r===null)throw Error(o(160));uf(_,O,v),_r=null,kn=!1;var H=v.alternate;H!==null&&(H.return=null),v.return=null}catch(re){Gt(v,s,re)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)df(s,t),s=s.sibling}function df(t,s){var h=t.alternate,m=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Dn(s,t),qn(t),m&4){try{sa(3,t,t.return),xl(3,t)}catch(ke){Gt(t,t.return,ke)}try{sa(5,t,t.return)}catch(ke){Gt(t,t.return,ke)}}break;case 1:Dn(s,t),qn(t),m&512&&h!==null&&ro(h,h.return);break;case 5:if(Dn(s,t),qn(t),m&512&&h!==null&&ro(h,h.return),t.flags&32){var v=t.stateNode;try{vi(v,"")}catch(ke){Gt(t,t.return,ke)}}if(m&4&&(v=t.stateNode,v!=null)){var _=t.memoizedProps,O=h!==null?h.memoizedProps:_,B=t.type,H=t.updateQueue;if(t.updateQueue=null,H!==null)try{B==="input"&&_.type==="radio"&&_.name!=null&&wi(v,_),St(B,O);var re=St(B,_);for(O=0;O<H.length;O+=2){var de=H[O],fe=H[O+1];de==="style"?ye(v,fe):de==="dangerouslySetInnerHTML"?hr(v,fe):de==="children"?vi(v,fe):V(v,de,fe,re)}switch(B){case"input":Xt(v,_);break;case"textarea":hn(v,_);break;case"select":var ue=v._wrapperState.wasMultiple;v._wrapperState.wasMultiple=!!_.multiple;var Se=_.value;Se!=null?Ie(v,!!_.multiple,Se,!1):ue!==!!_.multiple&&(_.defaultValue!=null?Ie(v,!!_.multiple,_.defaultValue,!0):Ie(v,!!_.multiple,_.multiple?[]:"",!1))}v[Ko]=_}catch(ke){Gt(t,t.return,ke)}}break;case 6:if(Dn(s,t),qn(t),m&4){if(t.stateNode===null)throw Error(o(162));v=t.stateNode,_=t.memoizedProps;try{v.nodeValue=_}catch(ke){Gt(t,t.return,ke)}}break;case 3:if(Dn(s,t),qn(t),m&4&&h!==null&&h.memoizedState.isDehydrated)try{In(s.containerInfo)}catch(ke){Gt(t,t.return,ke)}break;case 4:Dn(s,t),qn(t);break;case 13:Dn(s,t),qn(t),v=t.child,v.flags&8192&&(_=v.memoizedState!==null,v.stateNode.isHidden=_,!_||v.alternate!==null&&v.alternate.memoizedState!==null||(Ac=yt())),m&4&&cf(t);break;case 22:if(de=h!==null&&h.memoizedState!==null,t.mode&1?(Dr=(re=Dr)||de,Dn(s,t),Dr=re):Dn(s,t),qn(t),m&8192){if(re=t.memoizedState!==null,(t.stateNode.isHidden=re)&&!de&&(t.mode&1)!==0)for(Te=t,de=t.child;de!==null;){for(fe=Te=de;Te!==null;){switch(ue=Te,Se=ue.child,ue.tag){case 0:case 11:case 14:case 15:sa(4,ue,ue.return);break;case 1:ro(ue,ue.return);var Re=ue.stateNode;if(typeof Re.componentWillUnmount=="function"){m=ue,h=ue.return;try{s=m,Re.props=s.memoizedProps,Re.state=s.memoizedState,Re.componentWillUnmount()}catch(ke){Gt(m,h,ke)}}break;case 5:ro(ue,ue.return);break;case 22:if(ue.memoizedState!==null){gf(fe);continue}}Se!==null?(Se.return=ue,Te=Se):gf(fe)}de=de.sibling}e:for(de=null,fe=t;;){if(fe.tag===5){if(de===null){de=fe;try{v=fe.stateNode,re?(_=v.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none"):(B=fe.stateNode,H=fe.memoizedProps.style,O=H!=null&&H.hasOwnProperty("display")?H.display:null,B.style.display=jt("display",O))}catch(ke){Gt(t,t.return,ke)}}}else if(fe.tag===6){if(de===null)try{fe.stateNode.nodeValue=re?"":fe.memoizedProps}catch(ke){Gt(t,t.return,ke)}}else if((fe.tag!==22&&fe.tag!==23||fe.memoizedState===null||fe===t)&&fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===t)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===t)break e;de===fe&&(de=null),fe=fe.return}de===fe&&(de=null),fe.sibling.return=fe.return,fe=fe.sibling}}break;case 19:Dn(s,t),qn(t),m&4&&cf(t);break;case 21:break;default:Dn(s,t),qn(t)}}function qn(t){var s=t.flags;if(s&2){try{e:{for(var h=t.return;h!==null;){if(af(h)){var m=h;break e}h=h.return}throw Error(o(160))}switch(m.tag){case 5:var v=m.stateNode;m.flags&32&&(vi(v,""),m.flags&=-33);var _=lf(t);Ec(t,_,v);break;case 3:case 4:var O=m.stateNode.containerInfo,B=lf(t);vc(t,B,O);break;default:throw Error(o(161))}}catch(H){Gt(t,t.return,H)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function Xg(t,s,h){Te=t,hf(t)}function hf(t,s,h){for(var m=(t.mode&1)!==0;Te!==null;){var v=Te,_=v.child;if(v.tag===22&&m){var O=v.memoizedState!==null||ml;if(!O){var B=v.alternate,H=B!==null&&B.memoizedState!==null||Dr;B=ml;var re=Dr;if(ml=O,(Dr=H)&&!re)for(Te=v;Te!==null;)O=Te,H=O.child,O.tag===22&&O.memoizedState!==null?pf(v):H!==null?(H.return=O,Te=H):pf(v);for(;_!==null;)Te=_,hf(_),_=_.sibling;Te=v,ml=B,Dr=re}ff(t)}else(v.subtreeFlags&8772)!==0&&_!==null?(_.return=v,Te=_):ff(t)}}function ff(t){for(;Te!==null;){var s=Te;if((s.flags&8772)!==0){var h=s.alternate;try{if((s.flags&8772)!==0)switch(s.tag){case 0:case 11:case 15:Dr||xl(5,s);break;case 1:var m=s.stateNode;if(s.flags&4&&!Dr)if(h===null)m.componentDidMount();else{var v=s.elementType===s.type?h.memoizedProps:On(s.type,h.memoizedProps);m.componentDidUpdate(v,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var _=s.updateQueue;_!==null&&fh(s,_,m);break;case 3:var O=s.updateQueue;if(O!==null){if(h=null,s.child!==null)switch(s.child.tag){case 5:h=s.child.stateNode;break;case 1:h=s.child.stateNode}fh(s,O,h)}break;case 5:var B=s.stateNode;if(h===null&&s.flags&4){h=B;var H=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":H.autoFocus&&h.focus();break;case"img":H.src&&(h.src=H.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var re=s.alternate;if(re!==null){var de=re.memoizedState;if(de!==null){var fe=de.dehydrated;fe!==null&&In(fe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}Dr||s.flags&512&&yc(s)}catch(ue){Gt(s,s.return,ue)}}if(s===t){Te=null;break}if(h=s.sibling,h!==null){h.return=s.return,Te=h;break}Te=s.return}}function gf(t){for(;Te!==null;){var s=Te;if(s===t){Te=null;break}var h=s.sibling;if(h!==null){h.return=s.return,Te=h;break}Te=s.return}}function pf(t){for(;Te!==null;){var s=Te;try{switch(s.tag){case 0:case 11:case 15:var h=s.return;try{xl(4,s)}catch(H){Gt(s,h,H)}break;case 1:var m=s.stateNode;if(typeof m.componentDidMount=="function"){var v=s.return;try{m.componentDidMount()}catch(H){Gt(s,v,H)}}var _=s.return;try{yc(s)}catch(H){Gt(s,_,H)}break;case 5:var O=s.return;try{yc(s)}catch(H){Gt(s,O,H)}}}catch(H){Gt(s,s.return,H)}if(s===t){Te=null;break}var B=s.sibling;if(B!==null){B.return=s.return,Te=B;break}Te=s.return}}var Kg=Math.ceil,wl=oe.ReactCurrentDispatcher,_c=oe.ReactCurrentOwner,_n=oe.ReactCurrentBatchConfig,ft=0,mr=null,er=null,Cr=0,un=0,no=Pi(0),dr=0,oa=null,xs=0,yl=0,Cc=0,aa=null,Gr=null,Ac=0,io=1/0,ci=null,vl=!1,bc=null,Ui=null,El=!1,Vi=null,_l=0,la=0,Sc=null,Cl=-1,Al=0;function Br(){return(ft&6)!==0?yt():Cl!==-1?Cl:Cl=yt()}function Wi(t){return(t.mode&1)===0?1:(ft&2)!==0&&Cr!==0?Cr&-Cr:Og.transition!==null?(Al===0&&(Al=or()),Al):(t=et,t!==0||(t=window.event,t=t===void 0?16:Mo(t.type)),t)}function Pn(t,s,h,m){if(50<la)throw la=0,Sc=null,Error(o(185));M(t,h,m),((ft&2)===0||t!==mr)&&(t===mr&&((ft&2)===0&&(yl|=h),dr===4&&Hi(t,Cr)),$r(t,m),h===1&&ft===0&&(s.mode&1)===0&&(io=yt()+500,Qa&&Li()))}function $r(t,s){var h=t.callbackNode;Ci(t,s);var m=rn(t,t===mr?Cr:0);if(m===0)h!==null&&fr(h),t.callbackNode=null,t.callbackPriority=0;else if(s=m&-m,t.callbackPriority!==s){if(h!=null&&fr(h),s===1)t.tag===0?Rg(xf.bind(null,t)):th(xf.bind(null,t)),Sg(function(){(ft&6)===0&&Li()}),h=null;else{switch(Da(m)){case 1:h=le;break;case 4:h=Oa;break;case 16:h=At;break;case 536870912:h=ka;break;default:h=At}h=bf(h,mf.bind(null,t))}t.callbackPriority=s,t.callbackNode=h}}function mf(t,s){if(Cl=-1,Al=0,(ft&6)!==0)throw Error(o(327));var h=t.callbackNode;if(so()&&t.callbackNode!==h)return null;var m=rn(t,t===mr?Cr:0);if(m===0)return null;if((m&30)!==0||(m&t.expiredLanes)!==0||s)s=bl(t,m);else{s=m;var v=ft;ft|=2;var _=yf();(mr!==t||Cr!==s)&&(ci=null,io=yt()+500,ys(t,s));do try{Zg();break}catch(B){wf(t,B)}while(!0);zu(),wl.current=_,ft=v,er!==null?s=0:(mr=null,Cr=0,s=dr)}if(s!==0){if(s===2&&(v=vt(t),v!==0&&(m=v,s=Ic(t,v))),s===1)throw h=oa,ys(t,0),Hi(t,m),$r(t,yt()),h;if(s===6)Hi(t,m);else{if(v=t.current.alternate,(m&30)===0&&!qg(v)&&(s=bl(t,m),s===2&&(_=vt(t),_!==0&&(m=_,s=Ic(t,_))),s===1))throw h=oa,ys(t,0),Hi(t,m),$r(t,yt()),h;switch(t.finishedWork=v,t.finishedLanes=m,s){case 0:case 1:throw Error(o(345));case 2:vs(t,Gr,ci);break;case 3:if(Hi(t,m),(m&130023424)===m&&(s=Ac+500-yt(),10<s)){if(rn(t,0)!==0)break;if(v=t.suspendedLanes,(v&m)!==m){Br(),t.pingedLanes|=t.suspendedLanes&v;break}t.timeoutHandle=Du(vs.bind(null,t,Gr,ci),s);break}vs(t,Gr,ci);break;case 4:if(Hi(t,m),(m&4194240)===m)break;for(s=t.eventTimes,v=-1;0<m;){var O=31-Mr(m);_=1<<O,O=s[O],O>v&&(v=O),m&=~_}if(m=v,m=yt()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*Kg(m/1960))-m,10<m){t.timeoutHandle=Du(vs.bind(null,t,Gr,ci),m);break}vs(t,Gr,ci);break;case 5:vs(t,Gr,ci);break;default:throw Error(o(329))}}}return $r(t,yt()),t.callbackNode===h?mf.bind(null,t):null}function Ic(t,s){var h=aa;return t.current.memoizedState.isDehydrated&&(ys(t,s).flags|=256),t=bl(t,s),t!==2&&(s=Gr,Gr=h,s!==null&&Tc(s)),t}function Tc(t){Gr===null?Gr=t:Gr.push.apply(Gr,t)}function qg(t){for(var s=t;;){if(s.flags&16384){var h=s.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var v=h[m],_=v.getSnapshot;v=v.value;try{if(!$(_(),v))return!1}catch{return!1}}}if(h=s.child,s.subtreeFlags&16384&&h!==null)h.return=s,s=h;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Hi(t,s){for(s&=~Cc,s&=~yl,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var h=31-Mr(s),m=1<<h;t[h]=-1,s&=~m}}function xf(t){if((ft&6)!==0)throw Error(o(327));so();var s=rn(t,0);if((s&1)===0)return $r(t,yt()),null;var h=bl(t,s);if(t.tag!==0&&h===2){var m=vt(t);m!==0&&(s=m,h=Ic(t,m))}if(h===1)throw h=oa,ys(t,0),Hi(t,s),$r(t,yt()),h;if(h===6)throw Error(o(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,vs(t,Gr,ci),$r(t,yt()),null}function Nc(t,s){var h=ft;ft|=1;try{return t(s)}finally{ft=h,ft===0&&(io=yt()+500,Qa&&Li())}}function ws(t){Vi!==null&&Vi.tag===0&&(ft&6)===0&&so();var s=ft;ft|=1;var h=_n.transition,m=et;try{if(_n.transition=null,et=1,t)return t()}finally{et=m,_n.transition=h,ft=s,(ft&6)===0&&Li()}}function Rc(){un=no.current,Dt(no)}function ys(t,s){t.finishedWork=null,t.finishedLanes=0;var h=t.timeoutHandle;if(h!==-1&&(t.timeoutHandle=-1,bg(h)),er!==null)for(h=er.return;h!==null;){var m=h;switch(Fu(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&Ya();break;case 3:eo(),Dt(Wr),Dt(Rr),Qu();break;case 5:Yu(m);break;case 4:eo();break;case 13:Dt(Ut);break;case 19:Dt(Ut);break;case 10:Gu(m.type._context);break;case 22:case 23:Rc()}h=h.return}if(mr=t,er=t=zi(t.current,null),Cr=un=s,dr=0,oa=null,Cc=yl=xs=0,Gr=aa=null,gs!==null){for(s=0;s<gs.length;s++)if(h=gs[s],m=h.interleaved,m!==null){h.interleaved=null;var v=m.next,_=h.pending;if(_!==null){var O=_.next;_.next=v,m.next=O}h.pending=m}gs=null}return t}function wf(t,s){do{var h=er;try{if(zu(),ll.current=hl,ul){for(var m=Vt.memoizedState;m!==null;){var v=m.queue;v!==null&&(v.pending=null),m=m.next}ul=!1}if(ms=0,pr=cr=Vt=null,ea=!1,ta=0,_c.current=null,h===null||h.return===null){dr=1,oa=s,er=null;break}e:{var _=t,O=h.return,B=h,H=s;if(s=Cr,B.flags|=32768,H!==null&&typeof H=="object"&&typeof H.then=="function"){var re=H,de=B,fe=de.tag;if((de.mode&1)===0&&(fe===0||fe===11||fe===15)){var ue=de.alternate;ue?(de.updateQueue=ue.updateQueue,de.memoizedState=ue.memoizedState,de.lanes=ue.lanes):(de.updateQueue=null,de.memoizedState=null)}var Se=Wh(O);if(Se!==null){Se.flags&=-257,Hh(Se,O,B,_,s),Se.mode&1&&Vh(_,re,s),s=Se,H=re;var Re=s.updateQueue;if(Re===null){var ke=new Set;ke.add(H),s.updateQueue=ke}else Re.add(H);break e}else{if((s&1)===0){Vh(_,re,s),Oc();break e}H=Error(o(426))}}else if(Lt&&B.mode&1){var Qt=Wh(O);if(Qt!==null){(Qt.flags&65536)===0&&(Qt.flags|=256),Hh(Qt,O,B,_,s),Wu(to(H,B));break e}}_=H=to(H,B),dr!==4&&(dr=2),aa===null?aa=[_]:aa.push(_),_=O;do{switch(_.tag){case 3:_.flags|=65536,s&=-s,_.lanes|=s;var Y=Fh(_,H,s);hh(_,Y);break e;case 1:B=H;var G=_.type,Q=_.stateNode;if((_.flags&128)===0&&(typeof G.getDerivedStateFromError=="function"||Q!==null&&typeof Q.componentDidCatch=="function"&&(Ui===null||!Ui.has(Q)))){_.flags|=65536,s&=-s,_.lanes|=s;var me=Uh(_,B,s);hh(_,me);break e}}_=_.return}while(_!==null)}Ef(h)}catch(De){s=De,er===h&&h!==null&&(er=h=h.return);continue}break}while(!0)}function yf(){var t=wl.current;return wl.current=hl,t===null?hl:t}function Oc(){(dr===0||dr===3||dr===2)&&(dr=4),mr===null||(xs&268435455)===0&&(yl&268435455)===0||Hi(mr,Cr)}function bl(t,s){var h=ft;ft|=2;var m=yf();(mr!==t||Cr!==s)&&(ci=null,ys(t,s));do try{Yg();break}catch(v){wf(t,v)}while(!0);if(zu(),ft=h,wl.current=m,er!==null)throw Error(o(261));return mr=null,Cr=0,dr}function Yg(){for(;er!==null;)vf(er)}function Zg(){for(;er!==null&&!It();)vf(er)}function vf(t){var s=Af(t.alternate,t,un);t.memoizedProps=t.pendingProps,s===null?Ef(t):er=s,_c.current=null}function Ef(t){var s=t;do{var h=s.alternate;if(t=s.return,(s.flags&32768)===0){if(h=Hg(h,s,un),h!==null){er=h;return}}else{if(h=zg(h,s),h!==null){h.flags&=32767,er=h;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{dr=6,er=null;return}}if(s=s.sibling,s!==null){er=s;return}er=s=t}while(s!==null);dr===0&&(dr=5)}function vs(t,s,h){var m=et,v=_n.transition;try{_n.transition=null,et=1,Qg(t,s,h,m)}finally{_n.transition=v,et=m}return null}function Qg(t,s,h,m){do so();while(Vi!==null);if((ft&6)!==0)throw Error(o(327));h=t.finishedWork;var v=t.finishedLanes;if(h===null)return null;if(t.finishedWork=null,t.finishedLanes=0,h===t.current)throw Error(o(177));t.callbackNode=null,t.callbackPriority=0;var _=h.lanes|h.childLanes;if(Be(t,_),t===mr&&(er=mr=null,Cr=0),(h.subtreeFlags&2064)===0&&(h.flags&2064)===0||El||(El=!0,bf(At,function(){return so(),null})),_=(h.flags&15990)!==0,(h.subtreeFlags&15990)!==0||_){_=_n.transition,_n.transition=null;var O=et;et=1;var B=ft;ft|=4,_c.current=null,$g(t,h),df(h,t),Nr(Ou),zn=!!Ru,Ou=Ru=null,t.current=h,Xg(h),Ra(),ft=B,et=O,_n.transition=_}else t.current=h;if(El&&(El=!1,Vi=t,_l=v),_=t.pendingLanes,_===0&&(Ui=null),st(h.stateNode),$r(t,yt()),s!==null)for(m=t.onRecoverableError,h=0;h<s.length;h++)v=s[h],m(v.value,{componentStack:v.stack,digest:v.digest});if(vl)throw vl=!1,t=bc,bc=null,t;return(_l&1)!==0&&t.tag!==0&&so(),_=t.pendingLanes,(_&1)!==0?t===Sc?la++:(la=0,Sc=t):la=0,Li(),null}function so(){if(Vi!==null){var t=Da(_l),s=_n.transition,h=et;try{if(_n.transition=null,et=16>t?16:t,Vi===null)var m=!1;else{if(t=Vi,Vi=null,_l=0,(ft&6)!==0)throw Error(o(331));var v=ft;for(ft|=4,Te=t.current;Te!==null;){var _=Te,O=_.child;if((Te.flags&16)!==0){var B=_.deletions;if(B!==null){for(var H=0;H<B.length;H++){var re=B[H];for(Te=re;Te!==null;){var de=Te;switch(de.tag){case 0:case 11:case 15:sa(8,de,_)}var fe=de.child;if(fe!==null)fe.return=de,Te=fe;else for(;Te!==null;){de=Te;var ue=de.sibling,Se=de.return;if(of(de),de===re){Te=null;break}if(ue!==null){ue.return=Se,Te=ue;break}Te=Se}}}var Re=_.alternate;if(Re!==null){var ke=Re.child;if(ke!==null){Re.child=null;do{var Qt=ke.sibling;ke.sibling=null,ke=Qt}while(ke!==null)}}Te=_}}if((_.subtreeFlags&2064)!==0&&O!==null)O.return=_,Te=O;else e:for(;Te!==null;){if(_=Te,(_.flags&2048)!==0)switch(_.tag){case 0:case 11:case 15:sa(9,_,_.return)}var Y=_.sibling;if(Y!==null){Y.return=_.return,Te=Y;break e}Te=_.return}}var G=t.current;for(Te=G;Te!==null;){O=Te;var Q=O.child;if((O.subtreeFlags&2064)!==0&&Q!==null)Q.return=O,Te=Q;else e:for(O=G;Te!==null;){if(B=Te,(B.flags&2048)!==0)try{switch(B.tag){case 0:case 11:case 15:xl(9,B)}}catch(De){Gt(B,B.return,De)}if(B===O){Te=null;break e}var me=B.sibling;if(me!==null){me.return=B.return,Te=me;break e}Te=B.return}}if(ft=v,Li(),Je&&typeof Je.onPostCommitFiberRoot=="function")try{Je.onPostCommitFiberRoot(ut,t)}catch{}m=!0}return m}finally{et=h,_n.transition=s}}return!1}function _f(t,s,h){s=to(h,s),s=Fh(t,s,1),t=ji(t,s,1),s=Br(),t!==null&&(M(t,1,s),$r(t,s))}function Gt(t,s,h){if(t.tag===3)_f(t,t,h);else for(;s!==null;){if(s.tag===3){_f(s,t,h);break}else if(s.tag===1){var m=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ui===null||!Ui.has(m))){t=to(h,t),t=Uh(s,t,1),s=ji(s,t,1),t=Br(),s!==null&&(M(s,1,t),$r(s,t));break}}s=s.return}}function Jg(t,s,h){var m=t.pingCache;m!==null&&m.delete(s),s=Br(),t.pingedLanes|=t.suspendedLanes&h,mr===t&&(Cr&h)===h&&(dr===4||dr===3&&(Cr&130023424)===Cr&&500>yt()-Ac?ys(t,0):Cc|=h),$r(t,s)}function Cf(t,s){s===0&&((t.mode&1)===0?s=1:(s=Ms,Ms<<=1,(Ms&130023424)===0&&(Ms=4194304)));var h=Br();t=ai(t,s),t!==null&&(M(t,s,h),$r(t,h))}function ep(t){var s=t.memoizedState,h=0;s!==null&&(h=s.retryLane),Cf(t,h)}function tp(t,s){var h=0;switch(t.tag){case 13:var m=t.stateNode,v=t.memoizedState;v!==null&&(h=v.retryLane);break;case 19:m=t.stateNode;break;default:throw Error(o(314))}m!==null&&m.delete(s),Cf(t,h)}var Af;Af=function(t,s,h){if(t!==null)if(t.memoizedProps!==s.pendingProps||Wr.current)zr=!0;else{if((t.lanes&h)===0&&(s.flags&128)===0)return zr=!1,Wg(t,s,h);zr=(t.flags&131072)!==0}else zr=!1,Lt&&(s.flags&1048576)!==0&&rh(s,el,s.index);switch(s.lanes=0,s.tag){case 2:var m=s.type;pl(t,s),t=s.pendingProps;var v=Xs(s,Rr.current);Js(s,h),v=tc(null,s,m,t,v,h);var _=rc();return s.flags|=1,typeof v=="object"&&v!==null&&typeof v.render=="function"&&v.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Hr(m)?(_=!0,Za(s)):_=!1,s.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,Ku(s),v.updater=fl,s.stateNode=v,v._reactInternals=s,lc(s,m,t,h),s=hc(null,s,m,!0,_,h)):(s.tag=0,Lt&&_&&ju(s),Lr(null,s,v,h),s=s.child),s;case 16:m=s.elementType;e:{switch(pl(t,s),t=s.pendingProps,v=m._init,m=v(m._payload),s.type=m,v=s.tag=np(m),t=On(m,t),v){case 0:s=dc(null,s,m,t,h);break e;case 1:s=qh(null,s,m,t,h);break e;case 11:s=zh(null,s,m,t,h);break e;case 14:s=Gh(null,s,m,On(m.type,t),h);break e}throw Error(o(306,m,""))}return s;case 0:return m=s.type,v=s.pendingProps,v=s.elementType===m?v:On(m,v),dc(t,s,m,v,h);case 1:return m=s.type,v=s.pendingProps,v=s.elementType===m?v:On(m,v),qh(t,s,m,v,h);case 3:e:{if(Yh(s),t===null)throw Error(o(387));m=s.pendingProps,_=s.memoizedState,v=_.element,dh(t,s),ol(s,m,null,h);var O=s.memoizedState;if(m=O.element,_.isDehydrated)if(_={element:m,isDehydrated:!1,cache:O.cache,pendingSuspenseBoundaries:O.pendingSuspenseBoundaries,transitions:O.transitions},s.updateQueue.baseState=_,s.memoizedState=_,s.flags&256){v=to(Error(o(423)),s),s=Zh(t,s,m,h,v);break e}else if(m!==v){v=to(Error(o(424)),s),s=Zh(t,s,m,h,v);break e}else for(ln=Di(s.stateNode.containerInfo.firstChild),an=s,Lt=!0,Rn=null,h=uh(s,null,m,h),s.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Ys(),m===v){s=ui(t,s,h);break e}Lr(t,s,m,h)}s=s.child}return s;case 5:return gh(s),t===null&&Vu(s),m=s.type,v=s.pendingProps,_=t!==null?t.memoizedProps:null,O=v.children,ku(m,v)?O=null:_!==null&&ku(m,_)&&(s.flags|=32),Kh(t,s),Lr(t,s,O,h),s.child;case 6:return t===null&&Vu(s),null;case 13:return Qh(t,s,h);case 4:return qu(s,s.stateNode.containerInfo),m=s.pendingProps,t===null?s.child=Zs(s,null,m,h):Lr(t,s,m,h),s.child;case 11:return m=s.type,v=s.pendingProps,v=s.elementType===m?v:On(m,v),zh(t,s,m,v,h);case 7:return Lr(t,s,s.pendingProps,h),s.child;case 8:return Lr(t,s,s.pendingProps.children,h),s.child;case 12:return Lr(t,s,s.pendingProps.children,h),s.child;case 10:e:{if(m=s.type._context,v=s.pendingProps,_=s.memoizedProps,O=v.value,Rt(nl,m._currentValue),m._currentValue=O,_!==null)if($(_.value,O)){if(_.children===v.children&&!Wr.current){s=ui(t,s,h);break e}}else for(_=s.child,_!==null&&(_.return=s);_!==null;){var B=_.dependencies;if(B!==null){O=_.child;for(var H=B.firstContext;H!==null;){if(H.context===m){if(_.tag===1){H=li(-1,h&-h),H.tag=2;var re=_.updateQueue;if(re!==null){re=re.shared;var de=re.pending;de===null?H.next=H:(H.next=de.next,de.next=H),re.pending=H}}_.lanes|=h,H=_.alternate,H!==null&&(H.lanes|=h),$u(_.return,h,s),B.lanes|=h;break}H=H.next}}else if(_.tag===10)O=_.type===s.type?null:_.child;else if(_.tag===18){if(O=_.return,O===null)throw Error(o(341));O.lanes|=h,B=O.alternate,B!==null&&(B.lanes|=h),$u(O,h,s),O=_.sibling}else O=_.child;if(O!==null)O.return=_;else for(O=_;O!==null;){if(O===s){O=null;break}if(_=O.sibling,_!==null){_.return=O.return,O=_;break}O=O.return}_=O}Lr(t,s,v.children,h),s=s.child}return s;case 9:return v=s.type,m=s.pendingProps.children,Js(s,h),v=vn(v),m=m(v),s.flags|=1,Lr(t,s,m,h),s.child;case 14:return m=s.type,v=On(m,s.pendingProps),v=On(m.type,v),Gh(t,s,m,v,h);case 15:return $h(t,s,s.type,s.pendingProps,h);case 17:return m=s.type,v=s.pendingProps,v=s.elementType===m?v:On(m,v),pl(t,s),s.tag=1,Hr(m)?(t=!0,Za(s)):t=!1,Js(s,h),Bh(s,m,v),lc(s,m,v,h),hc(null,s,m,!0,t,h);case 19:return ef(t,s,h);case 22:return Xh(t,s,h)}throw Error(o(156,s.tag))};function bf(t,s){return en(t,s)}function rp(t,s,h,m){this.tag=t,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(t,s,h,m){return new rp(t,s,h,m)}function kc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function np(t){if(typeof t=="function")return kc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ve)return 11;if(t===ie)return 14}return 2}function zi(t,s){var h=t.alternate;return h===null?(h=Cn(t.tag,s,t.key,t.mode),h.elementType=t.elementType,h.type=t.type,h.stateNode=t.stateNode,h.alternate=t,t.alternate=h):(h.pendingProps=s,h.type=t.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=t.flags&14680064,h.childLanes=t.childLanes,h.lanes=t.lanes,h.child=t.child,h.memoizedProps=t.memoizedProps,h.memoizedState=t.memoizedState,h.updateQueue=t.updateQueue,s=t.dependencies,h.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},h.sibling=t.sibling,h.index=t.index,h.ref=t.ref,h}function Sl(t,s,h,m,v,_){var O=2;if(m=t,typeof t=="function")kc(t)&&(O=1);else if(typeof t=="string")O=5;else e:switch(t){case se:return Es(h.children,v,_,s);case he:O=8,v|=8;break;case ne:return t=Cn(12,h,s,v|2),t.elementType=ne,t.lanes=_,t;case $e:return t=Cn(13,h,s,v),t.elementType=$e,t.lanes=_,t;case ct:return t=Cn(19,h,s,v),t.elementType=ct,t.lanes=_,t;case Oe:return Il(h,v,_,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Me:O=10;break e;case He:O=9;break e;case ve:O=11;break e;case ie:O=14;break e;case dt:O=16,m=null;break e}throw Error(o(130,t==null?t:typeof t,""))}return s=Cn(O,h,s,v),s.elementType=t,s.type=m,s.lanes=_,s}function Es(t,s,h,m){return t=Cn(7,t,m,s),t.lanes=h,t}function Il(t,s,h,m){return t=Cn(22,t,m,s),t.elementType=Oe,t.lanes=h,t.stateNode={isHidden:!1},t}function Dc(t,s,h){return t=Cn(6,t,null,s),t.lanes=h,t}function Pc(t,s,h){return s=Cn(4,t.children!==null?t.children:[],t.key,s),s.lanes=h,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function ip(t,s,h,m,v){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q(0),this.expirationTimes=q(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q(0),this.identifierPrefix=m,this.onRecoverableError=v,this.mutableSourceEagerHydrationData=null}function Mc(t,s,h,m,v,_,O,B,H){return t=new ip(t,s,h,B,H),s===1?(s=1,_===!0&&(s|=8)):s=0,_=Cn(3,null,null,s),t.current=_,_.stateNode=t,_.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ku(_),t}function sp(t,s,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:xe,key:m==null?null:""+m,children:t,containerInfo:s,implementation:h}}function Sf(t){if(!t)return Mi;t=t._reactInternals;e:{if(Vr(t)!==t||t.tag!==1)throw Error(o(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Hr(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(o(171))}if(t.tag===1){var h=t.type;if(Hr(h))return Jd(t,h,s)}return s}function If(t,s,h,m,v,_,O,B,H){return t=Mc(h,m,!0,t,v,_,O,B,H),t.context=Sf(null),h=t.current,m=Br(),v=Wi(h),_=li(m,v),_.callback=s??null,ji(h,_,v),t.current.lanes=v,M(t,v,m),$r(t,m),t}function Tl(t,s,h,m){var v=s.current,_=Br(),O=Wi(v);return h=Sf(h),s.context===null?s.context=h:s.pendingContext=h,s=li(_,O),s.payload={element:t},m=m===void 0?null:m,m!==null&&(s.callback=m),t=ji(v,s,O),t!==null&&(Pn(t,v,O,_),sl(t,v,O)),O}function Nl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tf(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var h=t.retryLane;t.retryLane=h!==0&&h<s?h:s}}function Lc(t,s){Tf(t,s),(t=t.alternate)&&Tf(t,s)}function op(){return null}var Nf=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bc(t){this._internalRoot=t}Rl.prototype.render=Bc.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(o(409));Tl(t,s,null,null)},Rl.prototype.unmount=Bc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;ws(function(){Tl(null,t,null,null)}),s[ni]=null}};function Rl(t){this._internalRoot=t}Rl.prototype.unstable_scheduleHydration=function(t){if(t){var s=Tt();t={blockedOn:null,target:t,priority:s};for(var h=0;h<yr.length&&s!==0&&s<yr[h].priority;h++);yr.splice(h,0,t),h===0&&Ma(t)}};function jc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ol(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Rf(){}function ap(t,s,h,m,v){if(v){if(typeof m=="function"){var _=m;m=function(){var re=Nl(O);_.call(re)}}var O=If(s,m,t,0,null,!1,!1,"",Rf);return t._reactRootContainer=O,t[ni]=O.current,$o(t.nodeType===8?t.parentNode:t),ws(),O}for(;v=t.lastChild;)t.removeChild(v);if(typeof m=="function"){var B=m;m=function(){var re=Nl(H);B.call(re)}}var H=Mc(t,0,!1,null,null,!1,!1,"",Rf);return t._reactRootContainer=H,t[ni]=H.current,$o(t.nodeType===8?t.parentNode:t),ws(function(){Tl(s,H,h,m)}),H}function kl(t,s,h,m,v){var _=h._reactRootContainer;if(_){var O=_;if(typeof v=="function"){var B=v;v=function(){var H=Nl(O);B.call(H)}}Tl(s,O,t,v)}else O=ap(h,s,t,v,m);return Nl(O)}Ls=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var h=bt(s.pendingLanes);h!==0&&(Ht(s,h|1),$r(s,yt()),(ft&6)===0&&(io=yt()+500,Li()))}break;case 13:ws(function(){var m=ai(t,1);if(m!==null){var v=Br();Pn(m,t,1,v)}}),Lc(t,1)}},Tr=function(t){if(t.tag===13){var s=ai(t,134217728);if(s!==null){var h=Br();Pn(s,t,134217728,h)}Lc(t,134217728)}},je=function(t){if(t.tag===13){var s=Wi(t),h=ai(t,s);if(h!==null){var m=Br();Pn(h,t,s,m)}Lc(t,s)}},Tt=function(){return et},ko=function(t,s){var h=et;try{return et=t,s()}finally{et=h}},Ds=function(t,s,h){switch(s){case"input":if(Xt(t,h),s=h.name,h.type==="radio"&&s!=null){for(h=t;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<h.length;s++){var m=h[s];if(m!==t&&m.form===t.form){var v=qa(m);if(!v)throw Error(o(90));Yi(m),Xt(m,v)}}}break;case"textarea":hn(t,h);break;case"select":s=h.value,s!=null&&Ie(t,!!h.multiple,s,!1)}},Ps=Nc,sr=ws;var lp={usingClientEntryPoint:!1,Events:[qo,Gs,qa,bo,Ur,Nc]},ua={findFiberByHostInstance:cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},up={bundleType:ua.bundleType,version:ua.version,rendererPackageName:ua.rendererPackageName,rendererConfig:ua.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oe.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ta(t),t===null?null:t.stateNode},findFiberByHostInstance:ua.findFiberByHostInstance||op,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Dl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Dl.isDisabled&&Dl.supportsFiber)try{ut=Dl.inject(up),Je=Dl}catch{}}return Xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lp,Xr.createPortal=function(t,s){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jc(s))throw Error(o(200));return sp(t,s,null,h)},Xr.createRoot=function(t,s){if(!jc(t))throw Error(o(299));var h=!1,m="",v=Nf;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(m=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),s=Mc(t,1,!1,null,null,h,!1,m,v),t[ni]=s.current,$o(t.nodeType===8?t.parentNode:t),new Bc(s)},Xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(o(188)):(t=Object.keys(t).join(","),Error(o(268,t)));return t=Ta(s),t=t===null?null:t.stateNode,t},Xr.flushSync=function(t){return ws(t)},Xr.hydrate=function(t,s,h){if(!Ol(s))throw Error(o(200));return kl(null,t,s,!0,h)},Xr.hydrateRoot=function(t,s,h){if(!jc(t))throw Error(o(405));var m=h!=null&&h.hydratedSources||null,v=!1,_="",O=Nf;if(h!=null&&(h.unstable_strictMode===!0&&(v=!0),h.identifierPrefix!==void 0&&(_=h.identifierPrefix),h.onRecoverableError!==void 0&&(O=h.onRecoverableError)),s=If(s,null,t,1,h??null,v,!1,_,O),t[ni]=s.current,$o(t),m)for(t=0;t<m.length;t++)h=m[t],v=h._getVersion,v=v(h._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[h,v]:s.mutableSourceEagerHydrationData.push(h,v);return new Rl(s)},Xr.render=function(t,s,h){if(!Ol(s))throw Error(o(200));return kl(null,t,s,!1,h)},Xr.unmountComponentAtNode=function(t){if(!Ol(t))throw Error(o(40));return t._reactRootContainer?(ws(function(){kl(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1},Xr.unstable_batchedUpdates=Nc,Xr.unstable_renderSubtreeIntoContainer=function(t,s,h,m){if(!Ol(h))throw Error(o(200));if(t==null||t._reactInternals===void 0)throw Error(o(38));return kl(t,s,h,!1,m)},Xr.version="18.3.1-next-f1338f8080-20240426",Xr}var jf;function wp(){if(jf)return Vc.exports;jf=1;function l(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l)}catch(n){console.error(n)}}return l(),Vc.exports=xp(),Vc.exports}var Ff;function yp(){if(Ff)return Ml;Ff=1;var l=wp();return Ml.createRoot=l.createRoot,Ml.hydrateRoot=l.hydrateRoot,Ml}var vp=yp();const Ep=du(vp);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Uf="popstate";function _p(l={}){function n(g,f){let{pathname:x="/",search:C="",hash:A=""}=Rs(g.location.hash.substring(1));return!x.startsWith("/")&&!x.startsWith(".")&&(x="/"+x),td("",{pathname:x,search:C,hash:A},f.state&&f.state.usr||null,f.state&&f.state.key||"default")}function o(g,f){let x=g.document.querySelector("base"),C="";if(x&&x.getAttribute("href")){let A=g.location.href,E=A.indexOf("#");C=E===-1?A:A.slice(0,E)}return C+"#"+(typeof f=="string"?f:ya(f))}function c(g,f){bn(g.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(f)})`)}return Ap(n,o,c,l)}function Wt(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function bn(l,n){if(!l){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function Cp(){return Math.random().toString(36).substring(2,10)}function Vf(l,n){return{usr:l.state,key:l.key,idx:n}}function td(l,n,o=null,c){return{pathname:typeof l=="string"?l:l.pathname,search:"",hash:"",...typeof n=="string"?Rs(n):n,state:o,key:n&&n.key||c||Cp()}}function ya({pathname:l="/",search:n="",hash:o=""}){return n&&n!=="?"&&(l+=n.charAt(0)==="?"?n:"?"+n),o&&o!=="#"&&(l+=o.charAt(0)==="#"?o:"#"+o),l}function Rs(l){let n={};if(l){let o=l.indexOf("#");o>=0&&(n.hash=l.substring(o),l=l.substring(0,o));let c=l.indexOf("?");c>=0&&(n.search=l.substring(c),l=l.substring(0,c)),l&&(n.pathname=l)}return n}function Ap(l,n,o,c={}){let{window:g=document.defaultView,v5Compat:f=!1}=c,x=g.history,C="POP",A=null,E=S();E==null&&(E=0,x.replaceState({...x.state,idx:E},""));function S(){return(x.state||{idx:null}).idx}function N(){C="POP";let j=S(),K=j==null?null:j-E;E=j,A&&A({action:C,location:F.location,delta:K})}function D(j,K){C="PUSH";let J=td(F.location,j,K);o&&o(J,j),E=S()+1;let V=Vf(J,E),oe=F.createHref(J);try{x.pushState(V,"",oe)}catch(_e){if(_e instanceof DOMException&&_e.name==="DataCloneError")throw _e;g.location.assign(oe)}f&&A&&A({action:C,location:F.location,delta:1})}function P(j,K){C="REPLACE";let J=td(F.location,j,K);o&&o(J,j),E=S();let V=Vf(J,E),oe=F.createHref(J);x.replaceState(V,"",oe),f&&A&&A({action:C,location:F.location,delta:0})}function U(j){return bp(j)}let F={get action(){return C},get location(){return l(g,x)},listen(j){if(A)throw new Error("A history only accepts one active listener");return g.addEventListener(Uf,N),A=j,()=>{g.removeEventListener(Uf,N),A=null}},createHref(j){return n(g,j)},createURL:U,encodeLocation(j){let K=U(j);return{pathname:K.pathname,search:K.search,hash:K.hash}},push:D,replace:P,go(j){return x.go(j)}};return F}function bp(l,n=!1){let o="http://localhost";typeof window<"u"&&(o=window.location.origin!=="null"?window.location.origin:window.location.href),Wt(o,"No window.location.(origin|href) available to create URL");let c=typeof l=="string"?l:ya(l);return c=c.replace(/ $/,"%20"),!n&&c.startsWith("//")&&(c=o+c),new URL(c,o)}function P0(l,n,o="/"){return Sp(l,n,o,!1)}function Sp(l,n,o,c){let g=typeof n=="string"?Rs(n):n,f=pi(g.pathname||"/",o);if(f==null)return null;let x=M0(l);Ip(x);let C=null;for(let A=0;C==null&&A<x.length;++A){let E=jp(f);C=Lp(x[A],E,c)}return C}function M0(l,n=[],o=[],c="",g=!1){let f=(x,C,A=g,E)=>{let S={relativePath:E===void 0?x.path||"":E,caseSensitive:x.caseSensitive===!0,childrenIndex:C,route:x};if(S.relativePath.startsWith("/")){if(!S.relativePath.startsWith(c)&&A)return;Wt(S.relativePath.startsWith(c),`Absolute route path "${S.relativePath}" nested under path "${c}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),S.relativePath=S.relativePath.slice(c.length)}let N=gi([c,S.relativePath]),D=o.concat(S);x.children&&x.children.length>0&&(Wt(x.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${N}".`),M0(x.children,n,D,N,A)),!(x.path==null&&!x.index)&&n.push({path:N,score:Pp(N,x.index),routesMeta:D})};return l.forEach((x,C)=>{var A;if(x.path===""||!((A=x.path)!=null&&A.includes("?")))f(x,C);else for(let E of L0(x.path))f(x,C,!0,E)}),n}function L0(l){let n=l.split("/");if(n.length===0)return[];let[o,...c]=n,g=o.endsWith("?"),f=o.replace(/\?$/,"");if(c.length===0)return g?[f,""]:[f];let x=L0(c.join("/")),C=[];return C.push(...x.map(A=>A===""?f:[f,A].join("/"))),g&&C.push(...x),C.map(A=>l.startsWith("/")&&A===""?"/":A)}function Ip(l){l.sort((n,o)=>n.score!==o.score?o.score-n.score:Mp(n.routesMeta.map(c=>c.childrenIndex),o.routesMeta.map(c=>c.childrenIndex)))}var Tp=/^:[\w-]+$/,Np=3,Rp=2,Op=1,kp=10,Dp=-2,Wf=l=>l==="*";function Pp(l,n){let o=l.split("/"),c=o.length;return o.some(Wf)&&(c+=Dp),n&&(c+=Rp),o.filter(g=>!Wf(g)).reduce((g,f)=>g+(Tp.test(f)?Np:f===""?Op:kp),c)}function Mp(l,n){return l.length===n.length&&l.slice(0,-1).every((c,g)=>c===n[g])?l[l.length-1]-n[n.length-1]:0}function Lp(l,n,o=!1){let{routesMeta:c}=l,g={},f="/",x=[];for(let C=0;C<c.length;++C){let A=c[C],E=C===c.length-1,S=f==="/"?n:n.slice(f.length)||"/",N=Ql({path:A.relativePath,caseSensitive:A.caseSensitive,end:E},S),D=A.route;if(!N&&E&&o&&!c[c.length-1].route.index&&(N=Ql({path:A.relativePath,caseSensitive:A.caseSensitive,end:!1},S)),!N)return null;Object.assign(g,N.params),x.push({params:g,pathname:gi([f,N.pathname]),pathnameBase:Hp(gi([f,N.pathnameBase])),route:D}),N.pathnameBase!=="/"&&(f=gi([f,N.pathnameBase]))}return x}function Ql(l,n){typeof l=="string"&&(l={path:l,caseSensitive:!1,end:!0});let[o,c]=Bp(l.path,l.caseSensitive,l.end),g=n.match(o);if(!g)return null;let f=g[0],x=f.replace(/(.)\/+$/,"$1"),C=g.slice(1);return{params:c.reduce((E,{paramName:S,isOptional:N},D)=>{if(S==="*"){let U=C[D]||"";x=f.slice(0,f.length-U.length).replace(/(.)\/+$/,"$1")}const P=C[D];return N&&!P?E[S]=void 0:E[S]=(P||"").replace(/%2F/g,"/"),E},{}),pathname:f,pathnameBase:x,pattern:l}}function Bp(l,n=!1,o=!0){bn(l==="*"||!l.endsWith("*")||l.endsWith("/*"),`Route path "${l}" will be treated as if it were "${l.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${l.replace(/\*$/,"/*")}".`);let c=[],g="^"+l.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(x,C,A)=>(c.push({paramName:C,isOptional:A!=null}),A?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return l.endsWith("*")?(c.push({paramName:"*"}),g+=l==="*"||l==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):o?g+="\\/*$":l!==""&&l!=="/"&&(g+="(?:(?=\\/|$))"),[new RegExp(g,n?void 0:"i"),c]}function jp(l){try{return l.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return bn(!1,`The URL path "${l}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),l}}function pi(l,n){if(n==="/")return l;if(!l.toLowerCase().startsWith(n.toLowerCase()))return null;let o=n.endsWith("/")?n.length-1:n.length,c=l.charAt(o);return c&&c!=="/"?null:l.slice(o)||"/"}var Fp=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Up=l=>Fp.test(l);function Vp(l,n="/"){let{pathname:o,search:c="",hash:g=""}=typeof l=="string"?Rs(l):l,f;if(o)if(Up(o))f=o;else{if(o.includes("//")){let x=o;o=o.replace(/\/\/+/g,"/"),bn(!1,`Pathnames cannot have embedded double slashes - normalizing ${x} -> ${o}`)}o.startsWith("/")?f=Hf(o.substring(1),"/"):f=Hf(o,n)}else f=n;return{pathname:f,search:zp(c),hash:Gp(g)}}function Hf(l,n){let o=n.replace(/\/+$/,"").split("/");return l.split("/").forEach(g=>{g===".."?o.length>1&&o.pop():g!=="."&&o.push(g)}),o.length>1?o.join("/"):"/"}function zc(l,n,o,c){return`Cannot include a '${l}' character in a manually specified \`to.${n}\` field [${JSON.stringify(c)}].  Please separate it out to the \`to.${o}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Wp(l){return l.filter((n,o)=>o===0||n.route.path&&n.route.path.length>0)}function B0(l){let n=Wp(l);return n.map((o,c)=>c===n.length-1?o.pathname:o.pathnameBase)}function j0(l,n,o,c=!1){let g;typeof l=="string"?g=Rs(l):(g={...l},Wt(!g.pathname||!g.pathname.includes("?"),zc("?","pathname","search",g)),Wt(!g.pathname||!g.pathname.includes("#"),zc("#","pathname","hash",g)),Wt(!g.search||!g.search.includes("#"),zc("#","search","hash",g)));let f=l===""||g.pathname==="",x=f?"/":g.pathname,C;if(x==null)C=o;else{let N=n.length-1;if(!c&&x.startsWith("..")){let D=x.split("/");for(;D[0]==="..";)D.shift(),N-=1;g.pathname=D.join("/")}C=N>=0?n[N]:"/"}let A=Vp(g,C),E=x&&x!=="/"&&x.endsWith("/"),S=(f||x===".")&&o.endsWith("/");return!A.pathname.endsWith("/")&&(E||S)&&(A.pathname+="/"),A}var gi=l=>l.join("/").replace(/\/\/+/g,"/"),Hp=l=>l.replace(/\/+$/,"").replace(/^\/*/,"/"),zp=l=>!l||l==="?"?"":l.startsWith("?")?l:"?"+l,Gp=l=>!l||l==="#"?"":l.startsWith("#")?l:"#"+l;function $p(l){return l!=null&&typeof l.status=="number"&&typeof l.statusText=="string"&&typeof l.internal=="boolean"&&"data"in l}function Xp(l){return l.map(n=>n.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var F0=["POST","PUT","PATCH","DELETE"];new Set(F0);var Kp=["GET",...F0];new Set(Kp);var yo=Z.createContext(null);yo.displayName="DataRouter";var hu=Z.createContext(null);hu.displayName="DataRouterState";Z.createContext(!1);var U0=Z.createContext({isTransitioning:!1});U0.displayName="ViewTransition";var qp=Z.createContext(new Map);qp.displayName="Fetchers";var Yp=Z.createContext(null);Yp.displayName="Await";var jn=Z.createContext(null);jn.displayName="Navigation";var Ca=Z.createContext(null);Ca.displayName="Location";var mi=Z.createContext({outlet:null,matches:[],isDataRoute:!1});mi.displayName="Route";var Cd=Z.createContext(null);Cd.displayName="RouteError";function Zp(l,{relative:n}={}){Wt(Aa(),"useHref() may be used only in the context of a <Router> component.");let{basename:o,navigator:c}=Z.useContext(jn),{hash:g,pathname:f,search:x}=ba(l,{relative:n}),C=f;return o!=="/"&&(C=f==="/"?o:gi([o,f])),c.createHref({pathname:C,search:x,hash:g})}function Aa(){return Z.useContext(Ca)!=null}function qi(){return Wt(Aa(),"useLocation() may be used only in the context of a <Router> component."),Z.useContext(Ca).location}var V0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function W0(l){Z.useContext(jn).static||Z.useLayoutEffect(l)}function Qp(){let{isDataRoute:l}=Z.useContext(mi);return l?dm():Jp()}function Jp(){Wt(Aa(),"useNavigate() may be used only in the context of a <Router> component.");let l=Z.useContext(yo),{basename:n,navigator:o}=Z.useContext(jn),{matches:c}=Z.useContext(mi),{pathname:g}=qi(),f=JSON.stringify(B0(c)),x=Z.useRef(!1);return W0(()=>{x.current=!0}),Z.useCallback((A,E={})=>{if(bn(x.current,V0),!x.current)return;if(typeof A=="number"){o.go(A);return}let S=j0(A,JSON.parse(f),g,E.relative==="path");l==null&&n!=="/"&&(S.pathname=S.pathname==="/"?n:gi([n,S.pathname])),(E.replace?o.replace:o.push)(S,E.state,E)},[n,o,f,g,l])}Z.createContext(null);function ba(l,{relative:n}={}){let{matches:o}=Z.useContext(mi),{pathname:c}=qi(),g=JSON.stringify(B0(o));return Z.useMemo(()=>j0(l,JSON.parse(g),c,n==="path"),[l,g,c,n])}function em(l,n){return H0(l,n)}function H0(l,n,o,c,g){var J;Wt(Aa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:f}=Z.useContext(jn),{matches:x}=Z.useContext(mi),C=x[x.length-1],A=C?C.params:{},E=C?C.pathname:"/",S=C?C.pathnameBase:"/",N=C&&C.route;{let V=N&&N.path||"";z0(E,!N||V.endsWith("*")||V.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${E}" (under <Route path="${V}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${V}"> to <Route path="${V==="/"?"*":`${V}/*`}">.`)}let D=qi(),P;if(n){let V=typeof n=="string"?Rs(n):n;Wt(S==="/"||((J=V.pathname)==null?void 0:J.startsWith(S)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${S}" but pathname "${V.pathname}" was given in the \`location\` prop.`),P=V}else P=D;let U=P.pathname||"/",F=U;if(S!=="/"){let V=S.replace(/^\//,"").split("/");F="/"+U.replace(/^\//,"").split("/").slice(V.length).join("/")}let j=P0(l,{pathname:F});bn(N||j!=null,`No routes matched location "${P.pathname}${P.search}${P.hash}" `),bn(j==null||j[j.length-1].route.element!==void 0||j[j.length-1].route.Component!==void 0||j[j.length-1].route.lazy!==void 0,`Matched leaf route at location "${P.pathname}${P.search}${P.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let K=sm(j&&j.map(V=>Object.assign({},V,{params:Object.assign({},A,V.params),pathname:gi([S,f.encodeLocation?f.encodeLocation(V.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathname]),pathnameBase:V.pathnameBase==="/"?S:gi([S,f.encodeLocation?f.encodeLocation(V.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:V.pathnameBase])})),x,o,c,g);return n&&K?Z.createElement(Ca.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...P},navigationType:"POP"}},K):K}function tm(){let l=cm(),n=$p(l)?`${l.status} ${l.statusText}`:l instanceof Error?l.message:JSON.stringify(l),o=l instanceof Error?l.stack:null,c="rgba(200,200,200, 0.5)",g={padding:"0.5rem",backgroundColor:c},f={padding:"2px 4px",backgroundColor:c},x=null;return console.error("Error handled by React Router default ErrorBoundary:",l),x=Z.createElement(Z.Fragment,null,Z.createElement("p",null," Hey developer "),Z.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Z.createElement("code",{style:f},"ErrorBoundary")," or"," ",Z.createElement("code",{style:f},"errorElement")," prop on your route.")),Z.createElement(Z.Fragment,null,Z.createElement("h2",null,"Unexpected Application Error!"),Z.createElement("h3",{style:{fontStyle:"italic"}},n),o?Z.createElement("pre",{style:g},o):null,x)}var rm=Z.createElement(tm,null),nm=class extends Z.Component{constructor(l){super(l),this.state={location:l.location,revalidation:l.revalidation,error:l.error}}static getDerivedStateFromError(l){return{error:l}}static getDerivedStateFromProps(l,n){return n.location!==l.location||n.revalidation!=="idle"&&l.revalidation==="idle"?{error:l.error,location:l.location,revalidation:l.revalidation}:{error:l.error!==void 0?l.error:n.error,location:n.location,revalidation:l.revalidation||n.revalidation}}componentDidCatch(l,n){this.props.onError?this.props.onError(l,n):console.error("React Router caught the following error during render",l)}render(){return this.state.error!==void 0?Z.createElement(mi.Provider,{value:this.props.routeContext},Z.createElement(Cd.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function im({routeContext:l,match:n,children:o}){let c=Z.useContext(yo);return c&&c.static&&c.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=n.route.id),Z.createElement(mi.Provider,{value:l},o)}function sm(l,n=[],o=null,c=null,g=null){if(l==null){if(!o)return null;if(o.errors)l=o.matches;else if(n.length===0&&!o.initialized&&o.matches.length>0)l=o.matches;else return null}let f=l,x=o==null?void 0:o.errors;if(x!=null){let S=f.findIndex(N=>N.route.id&&(x==null?void 0:x[N.route.id])!==void 0);Wt(S>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(x).join(",")}`),f=f.slice(0,Math.min(f.length,S+1))}let C=!1,A=-1;if(o)for(let S=0;S<f.length;S++){let N=f[S];if((N.route.HydrateFallback||N.route.hydrateFallbackElement)&&(A=S),N.route.id){let{loaderData:D,errors:P}=o,U=N.route.loader&&!D.hasOwnProperty(N.route.id)&&(!P||P[N.route.id]===void 0);if(N.route.lazy||U){C=!0,A>=0?f=f.slice(0,A+1):f=[f[0]];break}}}let E=o&&c?(S,N)=>{var D,P;c(S,{location:o.location,params:((P=(D=o.matches)==null?void 0:D[0])==null?void 0:P.params)??{},unstable_pattern:Xp(o.matches),errorInfo:N})}:void 0;return f.reduceRight((S,N,D)=>{let P,U=!1,F=null,j=null;o&&(P=x&&N.route.id?x[N.route.id]:void 0,F=N.route.errorElement||rm,C&&(A<0&&D===0?(z0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,j=null):A===D&&(U=!0,j=N.route.hydrateFallbackElement||null)));let K=n.concat(f.slice(0,D+1)),J=()=>{let V;return P?V=F:U?V=j:N.route.Component?V=Z.createElement(N.route.Component,null):N.route.element?V=N.route.element:V=S,Z.createElement(im,{match:N,routeContext:{outlet:S,matches:K,isDataRoute:o!=null},children:V})};return o&&(N.route.ErrorBoundary||N.route.errorElement||D===0)?Z.createElement(nm,{location:o.location,revalidation:o.revalidation,component:F,error:P,children:J(),routeContext:{outlet:null,matches:K,isDataRoute:!0},onError:E}):J()},null)}function Ad(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function om(l){let n=Z.useContext(yo);return Wt(n,Ad(l)),n}function am(l){let n=Z.useContext(hu);return Wt(n,Ad(l)),n}function lm(l){let n=Z.useContext(mi);return Wt(n,Ad(l)),n}function bd(l){let n=lm(l),o=n.matches[n.matches.length-1];return Wt(o.route.id,`${l} can only be used on routes that contain a unique "id"`),o.route.id}function um(){return bd("useRouteId")}function cm(){var c;let l=Z.useContext(Cd),n=am("useRouteError"),o=bd("useRouteError");return l!==void 0?l:(c=n.errors)==null?void 0:c[o]}function dm(){let{router:l}=om("useNavigate"),n=bd("useNavigate"),o=Z.useRef(!1);return W0(()=>{o.current=!0}),Z.useCallback(async(g,f={})=>{bn(o.current,V0),o.current&&(typeof g=="number"?await l.navigate(g):await l.navigate(g,{fromRouteId:n,...f}))},[l,n])}var zf={};function z0(l,n,o){!n&&!zf[l]&&(zf[l]=!0,bn(!1,o))}Z.memo(hm);function hm({routes:l,future:n,state:o,unstable_onError:c}){return H0(l,void 0,o,c,n)}function co(l){Wt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fm({basename:l="/",children:n=null,location:o,navigationType:c="POP",navigator:g,static:f=!1,unstable_useTransitions:x}){Wt(!Aa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let C=l.replace(/^\/*/,"/"),A=Z.useMemo(()=>({basename:C,navigator:g,static:f,unstable_useTransitions:x,future:{}}),[C,g,f,x]);typeof o=="string"&&(o=Rs(o));let{pathname:E="/",search:S="",hash:N="",state:D=null,key:P="default"}=o,U=Z.useMemo(()=>{let F=pi(E,C);return F==null?null:{location:{pathname:F,search:S,hash:N,state:D,key:P},navigationType:c}},[C,E,S,N,D,P,c]);return bn(U!=null,`<Router basename="${C}"> is not able to match the URL "${E}${S}${N}" because it does not start with the basename, so the <Router> won't render anything.`),U==null?null:Z.createElement(jn.Provider,{value:A},Z.createElement(Ca.Provider,{children:n,value:U}))}function gm({children:l,location:n}){return em(rd(l),n)}function rd(l,n=[]){let o=[];return Z.Children.forEach(l,(c,g)=>{if(!Z.isValidElement(c))return;let f=[...n,g];if(c.type===Z.Fragment){o.push.apply(o,rd(c.props.children,f));return}Wt(c.type===co,`[${typeof c.type=="string"?c.type:c.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Wt(!c.props.index||!c.props.children,"An index route cannot have child routes.");let x={id:c.props.id||f.join("-"),caseSensitive:c.props.caseSensitive,element:c.props.element,Component:c.props.Component,index:c.props.index,path:c.props.path,middleware:c.props.middleware,loader:c.props.loader,action:c.props.action,hydrateFallbackElement:c.props.hydrateFallbackElement,HydrateFallback:c.props.HydrateFallback,errorElement:c.props.errorElement,ErrorBoundary:c.props.ErrorBoundary,hasErrorBoundary:c.props.hasErrorBoundary===!0||c.props.ErrorBoundary!=null||c.props.errorElement!=null,shouldRevalidate:c.props.shouldRevalidate,handle:c.props.handle,lazy:c.props.lazy};c.props.children&&(x.children=rd(c.props.children,f)),o.push(x)}),o}var $l="get",Xl="application/x-www-form-urlencoded";function fu(l){return typeof HTMLElement<"u"&&l instanceof HTMLElement}function pm(l){return fu(l)&&l.tagName.toLowerCase()==="button"}function mm(l){return fu(l)&&l.tagName.toLowerCase()==="form"}function xm(l){return fu(l)&&l.tagName.toLowerCase()==="input"}function wm(l){return!!(l.metaKey||l.altKey||l.ctrlKey||l.shiftKey)}function ym(l,n){return l.button===0&&(!n||n==="_self")&&!wm(l)}var Ll=null;function vm(){if(Ll===null)try{new FormData(document.createElement("form"),0),Ll=!1}catch{Ll=!0}return Ll}var Em=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gc(l){return l!=null&&!Em.has(l)?(bn(!1,`"${l}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Xl}"`),null):l}function _m(l,n){let o,c,g,f,x;if(mm(l)){let C=l.getAttribute("action");c=C?pi(C,n):null,o=l.getAttribute("method")||$l,g=Gc(l.getAttribute("enctype"))||Xl,f=new FormData(l)}else if(pm(l)||xm(l)&&(l.type==="submit"||l.type==="image")){let C=l.form;if(C==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let A=l.getAttribute("formaction")||C.getAttribute("action");if(c=A?pi(A,n):null,o=l.getAttribute("formmethod")||C.getAttribute("method")||$l,g=Gc(l.getAttribute("formenctype"))||Gc(C.getAttribute("enctype"))||Xl,f=new FormData(C,l),!vm()){let{name:E,type:S,value:N}=l;if(S==="image"){let D=E?`${E}.`:"";f.append(`${D}x`,"0"),f.append(`${D}y`,"0")}else E&&f.append(E,N)}}else{if(fu(l))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');o=$l,c=null,g=Xl,x=l}return f&&g==="text/plain"&&(x=f,f=void 0),{action:c,method:o.toLowerCase(),encType:g,formData:f,body:x}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Sd(l,n){if(l===!1||l===null||typeof l>"u")throw new Error(n)}function Cm(l,n,o){let c=typeof l=="string"?new URL(l,typeof window>"u"?"server://singlefetch/":window.location.origin):l;return c.pathname==="/"?c.pathname=`_root.${o}`:n&&pi(c.pathname,n)==="/"?c.pathname=`${n.replace(/\/$/,"")}/_root.${o}`:c.pathname=`${c.pathname.replace(/\/$/,"")}.${o}`,c}async function Am(l,n){if(l.id in n)return n[l.id];try{let o=await import(l.module);return n[l.id]=o,o}catch(o){return console.error(`Error loading route module \`${l.module}\`, reloading page...`),console.error(o),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function bm(l){return l==null?!1:l.href==null?l.rel==="preload"&&typeof l.imageSrcSet=="string"&&typeof l.imageSizes=="string":typeof l.rel=="string"&&typeof l.href=="string"}async function Sm(l,n,o){let c=await Promise.all(l.map(async g=>{let f=n.routes[g.route.id];if(f){let x=await Am(f,o);return x.links?x.links():[]}return[]}));return Rm(c.flat(1).filter(bm).filter(g=>g.rel==="stylesheet"||g.rel==="preload").map(g=>g.rel==="stylesheet"?{...g,rel:"prefetch",as:"style"}:{...g,rel:"prefetch"}))}function Gf(l,n,o,c,g,f){let x=(A,E)=>o[E]?A.route.id!==o[E].route.id:!0,C=(A,E)=>{var S;return o[E].pathname!==A.pathname||((S=o[E].route.path)==null?void 0:S.endsWith("*"))&&o[E].params["*"]!==A.params["*"]};return f==="assets"?n.filter((A,E)=>x(A,E)||C(A,E)):f==="data"?n.filter((A,E)=>{var N;let S=c.routes[A.route.id];if(!S||!S.hasLoader)return!1;if(x(A,E)||C(A,E))return!0;if(A.route.shouldRevalidate){let D=A.route.shouldRevalidate({currentUrl:new URL(g.pathname+g.search+g.hash,window.origin),currentParams:((N=o[0])==null?void 0:N.params)||{},nextUrl:new URL(l,window.origin),nextParams:A.params,defaultShouldRevalidate:!0});if(typeof D=="boolean")return D}return!0}):[]}function Im(l,n,{includeHydrateFallback:o}={}){return Tm(l.map(c=>{let g=n.routes[c.route.id];if(!g)return[];let f=[g.module];return g.clientActionModule&&(f=f.concat(g.clientActionModule)),g.clientLoaderModule&&(f=f.concat(g.clientLoaderModule)),o&&g.hydrateFallbackModule&&(f=f.concat(g.hydrateFallbackModule)),g.imports&&(f=f.concat(g.imports)),f}).flat(1))}function Tm(l){return[...new Set(l)]}function Nm(l){let n={},o=Object.keys(l).sort();for(let c of o)n[c]=l[c];return n}function Rm(l,n){let o=new Set;return new Set(n),l.reduce((c,g)=>{let f=JSON.stringify(Nm(g));return o.has(f)||(o.add(f),c.push({key:f,link:g})),c},[])}function G0(){let l=Z.useContext(yo);return Sd(l,"You must render this element inside a <DataRouterContext.Provider> element"),l}function Om(){let l=Z.useContext(hu);return Sd(l,"You must render this element inside a <DataRouterStateContext.Provider> element"),l}var Id=Z.createContext(void 0);Id.displayName="FrameworkContext";function $0(){let l=Z.useContext(Id);return Sd(l,"You must render this element inside a <HydratedRouter> element"),l}function km(l,n){let o=Z.useContext(Id),[c,g]=Z.useState(!1),[f,x]=Z.useState(!1),{onFocus:C,onBlur:A,onMouseEnter:E,onMouseLeave:S,onTouchStart:N}=n,D=Z.useRef(null);Z.useEffect(()=>{if(l==="render"&&x(!0),l==="viewport"){let F=K=>{K.forEach(J=>{x(J.isIntersecting)})},j=new IntersectionObserver(F,{threshold:.5});return D.current&&j.observe(D.current),()=>{j.disconnect()}}},[l]),Z.useEffect(()=>{if(c){let F=setTimeout(()=>{x(!0)},100);return()=>{clearTimeout(F)}}},[c]);let P=()=>{g(!0)},U=()=>{g(!1),x(!1)};return o?l!=="intent"?[f,D,{}]:[f,D,{onFocus:da(C,P),onBlur:da(A,U),onMouseEnter:da(E,P),onMouseLeave:da(S,U),onTouchStart:da(N,P)}]:[!1,D,{}]}function da(l,n){return o=>{l&&l(o),o.defaultPrevented||n(o)}}function Dm({page:l,...n}){let{router:o}=G0(),c=Z.useMemo(()=>P0(o.routes,l,o.basename),[o.routes,l,o.basename]);return c?Z.createElement(Mm,{page:l,matches:c,...n}):null}function Pm(l){let{manifest:n,routeModules:o}=$0(),[c,g]=Z.useState([]);return Z.useEffect(()=>{let f=!1;return Sm(l,n,o).then(x=>{f||g(x)}),()=>{f=!0}},[l,n,o]),c}function Mm({page:l,matches:n,...o}){let c=qi(),{manifest:g,routeModules:f}=$0(),{basename:x}=G0(),{loaderData:C,matches:A}=Om(),E=Z.useMemo(()=>Gf(l,n,A,g,c,"data"),[l,n,A,g,c]),S=Z.useMemo(()=>Gf(l,n,A,g,c,"assets"),[l,n,A,g,c]),N=Z.useMemo(()=>{if(l===c.pathname+c.search+c.hash)return[];let U=new Set,F=!1;if(n.forEach(K=>{var V;let J=g.routes[K.route.id];!J||!J.hasLoader||(!E.some(oe=>oe.route.id===K.route.id)&&K.route.id in C&&((V=f[K.route.id])!=null&&V.shouldRevalidate)||J.hasClientLoader?F=!0:U.add(K.route.id))}),U.size===0)return[];let j=Cm(l,x,"data");return F&&U.size>0&&j.searchParams.set("_routes",n.filter(K=>U.has(K.route.id)).map(K=>K.route.id).join(",")),[j.pathname+j.search]},[x,C,c,g,E,n,l,f]),D=Z.useMemo(()=>Im(S,g),[S,g]),P=Pm(S);return Z.createElement(Z.Fragment,null,N.map(U=>Z.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...o})),D.map(U=>Z.createElement("link",{key:U,rel:"modulepreload",href:U,...o})),P.map(({key:U,link:F})=>Z.createElement("link",{key:U,nonce:o.nonce,...F})))}function Lm(...l){return n=>{l.forEach(o=>{typeof o=="function"?o(n):o!=null&&(o.current=n)})}}var X0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{X0&&(window.__reactRouterVersion="7.10.1")}catch{}function Bm({basename:l,children:n,unstable_useTransitions:o,window:c}){let g=Z.useRef();g.current==null&&(g.current=_p({window:c,v5Compat:!0}));let f=g.current,[x,C]=Z.useState({action:f.action,location:f.location}),A=Z.useCallback(E=>{o===!1?C(E):Z.startTransition(()=>C(E))},[o]);return Z.useLayoutEffect(()=>f.listen(A),[f,A]),Z.createElement(fm,{basename:l,children:n,location:x.location,navigationType:x.action,navigator:f,unstable_useTransitions:o===!0})}var K0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ki=Z.forwardRef(function({onClick:n,discover:o="render",prefetch:c="none",relative:g,reloadDocument:f,replace:x,state:C,target:A,to:E,preventScrollReset:S,viewTransition:N,...D},P){let{basename:U,unstable_useTransitions:F}=Z.useContext(jn),j=typeof E=="string"&&K0.test(E),K,J=!1;if(typeof E=="string"&&j&&(K=E,X0))try{let Me=new URL(window.location.href),He=E.startsWith("//")?new URL(Me.protocol+E):new URL(E),ve=pi(He.pathname,U);He.origin===Me.origin&&ve!=null?E=ve+He.search+He.hash:J=!0}catch{bn(!1,`<Link to="${E}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let V=Zp(E,{relative:g}),[oe,_e,xe]=km(c,D),se=Vm(E,{replace:x,state:C,target:A,preventScrollReset:S,relative:g,viewTransition:N,unstable_useTransitions:F});function he(Me){n&&n(Me),Me.defaultPrevented||se(Me)}let ne=Z.createElement("a",{...D,...xe,href:K||V,onClick:J||f?n:he,ref:Lm(P,_e),target:A,"data-discover":!j&&o==="render"?"true":void 0});return oe&&!j?Z.createElement(Z.Fragment,null,ne,Z.createElement(Dm,{page:V})):ne});Ki.displayName="Link";var jm=Z.forwardRef(function({"aria-current":n="page",caseSensitive:o=!1,className:c="",end:g=!1,style:f,to:x,viewTransition:C,children:A,...E},S){let N=ba(x,{relative:E.relative}),D=qi(),P=Z.useContext(hu),{navigator:U,basename:F}=Z.useContext(jn),j=P!=null&&$m(N)&&C===!0,K=U.encodeLocation?U.encodeLocation(N).pathname:N.pathname,J=D.pathname,V=P&&P.navigation&&P.navigation.location?P.navigation.location.pathname:null;o||(J=J.toLowerCase(),V=V?V.toLowerCase():null,K=K.toLowerCase()),V&&F&&(V=pi(V,F)||V);const oe=K!=="/"&&K.endsWith("/")?K.length-1:K.length;let _e=J===K||!g&&J.startsWith(K)&&J.charAt(oe)==="/",xe=V!=null&&(V===K||!g&&V.startsWith(K)&&V.charAt(K.length)==="/"),se={isActive:_e,isPending:xe,isTransitioning:j},he=_e?n:void 0,ne;typeof c=="function"?ne=c(se):ne=[c,_e?"active":null,xe?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let Me=typeof f=="function"?f(se):f;return Z.createElement(Ki,{...E,"aria-current":he,className:ne,ref:S,style:Me,to:x,viewTransition:C},typeof A=="function"?A(se):A)});jm.displayName="NavLink";var Fm=Z.forwardRef(({discover:l="render",fetcherKey:n,navigate:o,reloadDocument:c,replace:g,state:f,method:x=$l,action:C,onSubmit:A,relative:E,preventScrollReset:S,viewTransition:N,...D},P)=>{let{unstable_useTransitions:U}=Z.useContext(jn),F=zm(),j=Gm(C,{relative:E}),K=x.toLowerCase()==="get"?"get":"post",J=typeof C=="string"&&K0.test(C),V=oe=>{if(A&&A(oe),oe.defaultPrevented)return;oe.preventDefault();let _e=oe.nativeEvent.submitter,xe=(_e==null?void 0:_e.getAttribute("formmethod"))||x,se=()=>F(_e||oe.currentTarget,{fetcherKey:n,method:xe,navigate:o,replace:g,state:f,relative:E,preventScrollReset:S,viewTransition:N});U&&o!==!1?Z.startTransition(()=>se()):se()};return Z.createElement("form",{ref:P,method:K,action:j,onSubmit:c?A:V,...D,"data-discover":!J&&l==="render"?"true":void 0})});Fm.displayName="Form";function Um(l){return`${l} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function q0(l){let n=Z.useContext(yo);return Wt(n,Um(l)),n}function Vm(l,{target:n,replace:o,state:c,preventScrollReset:g,relative:f,viewTransition:x,unstable_useTransitions:C}={}){let A=Qp(),E=qi(),S=ba(l,{relative:f});return Z.useCallback(N=>{if(ym(N,n)){N.preventDefault();let D=o!==void 0?o:ya(E)===ya(S),P=()=>A(l,{replace:D,state:c,preventScrollReset:g,relative:f,viewTransition:x});C?Z.startTransition(()=>P()):P()}},[E,A,S,o,c,n,l,g,f,x,C])}var Wm=0,Hm=()=>`__${String(++Wm)}__`;function zm(){let{router:l}=q0("useSubmit"),{basename:n}=Z.useContext(jn),o=um(),c=l.fetch,g=l.navigate;return Z.useCallback(async(f,x={})=>{let{action:C,method:A,encType:E,formData:S,body:N}=_m(f,n);if(x.navigate===!1){let D=x.fetcherKey||Hm();await c(D,o,x.action||C,{preventScrollReset:x.preventScrollReset,formData:S,body:N,formMethod:x.method||A,formEncType:x.encType||E,flushSync:x.flushSync})}else await g(x.action||C,{preventScrollReset:x.preventScrollReset,formData:S,body:N,formMethod:x.method||A,formEncType:x.encType||E,replace:x.replace,state:x.state,fromRouteId:o,flushSync:x.flushSync,viewTransition:x.viewTransition})},[c,g,n,o])}function Gm(l,{relative:n}={}){let{basename:o}=Z.useContext(jn),c=Z.useContext(mi);Wt(c,"useFormAction must be used inside a RouteContext");let[g]=c.matches.slice(-1),f={...ba(l||".",{relative:n})},x=qi();if(l==null){f.search=x.search;let C=new URLSearchParams(f.search),A=C.getAll("index");if(A.some(S=>S==="")){C.delete("index"),A.filter(N=>N).forEach(N=>C.append("index",N));let S=C.toString();f.search=S?`?${S}`:""}}return(!l||l===".")&&g.route.index&&(f.search=f.search?f.search.replace(/^\?/,"?index&"):"?index"),o!=="/"&&(f.pathname=f.pathname==="/"?o:gi([o,f.pathname])),ya(f)}function $m(l,{relative:n}={}){let o=Z.useContext(U0);Wt(o!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:c}=q0("useViewTransitionState"),g=ba(l,{relative:n});if(!o.isTransitioning)return!1;let f=pi(o.currentLocation.pathname,c)||o.currentLocation.pathname,x=pi(o.nextLocation.pathname,c)||o.nextLocation.pathname;return Ql(g.pathname,x)!=null||Ql(g.pathname,f)!=null}const Y0="https://portal.umoja.network/api/2.0/admin",Z0="MWY3M2M4ODUzY2FiYzg3ZTI0MjIyOWE5NDU1NDg4MDE6MWU2MTM4NzAwMjA0MjlmNjM3NzRjYmYwZjU5ZGIxMTY=",Q0=[{id:"cust_1",first_name:"John",last_name:"Doe",email:"john@example.com",phone:"555-0101"},{id:"cust_2",first_name:"Jane",last_name:"Smith",email:"jane@test.com",phone:"555-0102"},{id:"cust_3",first_name:"Alice",last_name:"Johnson",email:"alice@company.net",phone:"555-0103"}],pa=[{id:"inv_1",deviceId:"DEV-001",status:"assigned",customer_id:"cust_1",model:"Router X1"},{id:"inv_2",deviceId:"DEV-002",status:"in_stock",customer_id:null,model:"Router X1"},{id:"inv_3",deviceId:"DEV-003",status:"assigned",customer_id:"cust_2",model:"Modem Z2"},{id:"inv_4",deviceId:"DEV-004",status:"returned",customer_id:null,model:"Modem Z2"},{id:"inv_5",deviceId:"DEV-005",status:"in_stock",customer_id:null,model:"Router X1"}];class Xm{constructor(){this.token=Z0}setToken(n){this.token=n}async fetch(n,o={}){const c={"Content-Type":"application/json",Authorization:`Basic ${this.token}`,...o.headers},g=await fetch(`${Y0}${n}`,{...o,headers:c});if(!g.ok){const f=await g.text();throw new Error(`API Error ${g.status}: ${f}`)}return g.json()}async getCustomers(){try{if(!this.token)throw new Error("No token provided");const n=await this.fetch("/customers/customer");return(Array.isArray(n)?n:n.data||[]).map(c=>({...c,id:c.id,customer_Id:c.customer_Id||c.customerId||c.id,first_name:c.first_name||"",last_name:c.last_name||"",name:c.name||"",email:c.email||"",phone:c.phone||""}))}catch(n){throw console.warn("Failed to fetch customers (likely auth), falling back to empty/mock",n),n}}async getCustomer(n){try{if(!this.token)throw new Error("No token provided");const o=await this.fetch(`/customers/customer/${n}`),c=o.data||o;return c?{id:c.id,customer_Id:c.customer_Id||c.customerId||c.id,first_name:c.first_name||"",last_name:c.last_name||"",name:c.name||"",email:c.email||"",phone:c.phone||""}:null}catch(o){return console.warn(`Failed to fetch customer ${n}`,o),null}}async getInventory(){try{if(!this.token)throw new Error("No token provided");const n=await this.fetch("/inventory/items");return(Array.isArray(n)?n:n.data||[]).map(c=>{const g=c.iccid||c.ICCID||c.Iccid,f=c.imei||c.IMEI||c.Imei,x=c.barcode||c.Barcode||c.bar_code,C=c.serial_number||c.serialNumber||c.sn||c.SN||c.serial,A=g||x||C||f||c.deviceId||c.device_id||c.id;return{id:c.id||A,deviceId:A,status:c.status,customer_id:c.customer_id||c.customerId||c.customer_Id,model:c.model||c.type||c.description,type:c.type,iccid:g,imei:f,barcode:x,serialNumber:C}})}catch(n){throw console.warn("Failed to fetch inventory",n),n}}async returnDevice(n){if(!this.token)throw new Error("Token required for transaction");await this.fetch(`/inventory/items/${n}`,{method:"PUT",body:JSON.stringify({status:"returned"})})}async assignDevice(n,o){if(!this.token)throw new Error("Token required for transaction");await this.fetch(`/inventory/items/${n}`,{method:"PUT",body:JSON.stringify({customer_id:o,status:"assigned"})})}async disableCustomer(n){if(!this.token)throw new Error("Token required for transaction");await this.fetch(`/customers/customer/${n}`,{method:"PUT",body:JSON.stringify({status:"disabled"})})}}const An=new Xm;var di={},Bl={},nd=function(l,n){return nd=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,c){o.__proto__=c}||function(o,c){for(var g in c)Object.prototype.hasOwnProperty.call(c,g)&&(o[g]=c[g])},nd(l,n)};function J0(l,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");nd(l,n);function o(){this.constructor=l}l.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}var Jl=function(){return Jl=Object.assign||function(n){for(var o,c=1,g=arguments.length;c<g;c++){o=arguments[c];for(var f in o)Object.prototype.hasOwnProperty.call(o,f)&&(n[f]=o[f])}return n},Jl.apply(this,arguments)};function vo(l,n){var o={};for(var c in l)Object.prototype.hasOwnProperty.call(l,c)&&n.indexOf(c)<0&&(o[c]=l[c]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,c=Object.getOwnPropertySymbols(l);g<c.length;g++)n.indexOf(c[g])<0&&Object.prototype.propertyIsEnumerable.call(l,c[g])&&(o[c[g]]=l[c[g]]);return o}function e1(l,n,o,c){var g=arguments.length,f=g<3?n:c===null?c=Object.getOwnPropertyDescriptor(n,o):c,x;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(l,n,o,c);else for(var C=l.length-1;C>=0;C--)(x=l[C])&&(f=(g<3?x(f):g>3?x(n,o,f):x(n,o))||f);return g>3&&f&&Object.defineProperty(n,o,f),f}function t1(l,n){return function(o,c){n(o,c,l)}}function r1(l,n,o,c,g,f){function x(K){if(K!==void 0&&typeof K!="function")throw new TypeError("Function expected");return K}for(var C=c.kind,A=C==="getter"?"get":C==="setter"?"set":"value",E=!n&&l?c.static?l:l.prototype:null,S=n||(E?Object.getOwnPropertyDescriptor(E,c.name):{}),N,D=!1,P=o.length-1;P>=0;P--){var U={};for(var F in c)U[F]=F==="access"?{}:c[F];for(var F in c.access)U.access[F]=c.access[F];U.addInitializer=function(K){if(D)throw new TypeError("Cannot add initializers after decoration has completed");f.push(x(K||null))};var j=(0,o[P])(C==="accessor"?{get:S.get,set:S.set}:S[A],U);if(C==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(N=x(j.get))&&(S.get=N),(N=x(j.set))&&(S.set=N),(N=x(j.init))&&g.unshift(N)}else(N=x(j))&&(C==="field"?g.unshift(N):S[A]=N)}E&&Object.defineProperty(E,c.name,S),D=!0}function n1(l,n,o){for(var c=arguments.length>2,g=0;g<n.length;g++)o=c?n[g].call(l,o):n[g].call(l);return c?o:void 0}function i1(l){return typeof l=="symbol"?l:"".concat(l)}function s1(l,n,o){return typeof n=="symbol"&&(n=n.description?"[".concat(n.description,"]"):""),Object.defineProperty(l,"name",{configurable:!0,value:o?"".concat(o," ",n):n})}function o1(l,n){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(l,n)}function Ne(l,n,o,c){function g(f){return f instanceof o?f:new o(function(x){x(f)})}return new(o||(o=Promise))(function(f,x){function C(S){try{E(c.next(S))}catch(N){x(N)}}function A(S){try{E(c.throw(S))}catch(N){x(N)}}function E(S){S.done?f(S.value):g(S.value).then(C,A)}E((c=c.apply(l,n||[])).next())})}function a1(l,n){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,g,f,x=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return x.next=C(0),x.throw=C(1),x.return=C(2),typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(E){return function(S){return A([E,S])}}function A(E){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(o=0)),o;)try{if(c=1,g&&(f=E[0]&2?g.return:E[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,E[1])).done)return f;switch(g=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,g=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){o.label=E[1];break}if(E[0]===6&&o.label<f[1]){o.label=f[1],f=E;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(E);break}f[2]&&o.ops.pop(),o.trys.pop();continue}E=n.call(l,o)}catch(S){E=[6,S],g=0}finally{c=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}}var gu=Object.create?(function(l,n,o,c){c===void 0&&(c=o);var g=Object.getOwnPropertyDescriptor(n,o);(!g||("get"in g?!n.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return n[o]}}),Object.defineProperty(l,c,g)}):(function(l,n,o,c){c===void 0&&(c=o),l[c]=n[o]});function l1(l,n){for(var o in l)o!=="default"&&!Object.prototype.hasOwnProperty.call(n,o)&&gu(n,l,o)}function eu(l){var n=typeof Symbol=="function"&&Symbol.iterator,o=n&&l[n],c=0;if(o)return o.call(l);if(l&&typeof l.length=="number")return{next:function(){return l&&c>=l.length&&(l=void 0),{value:l&&l[c++],done:!l}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Td(l,n){var o=typeof Symbol=="function"&&l[Symbol.iterator];if(!o)return l;var c=o.call(l),g,f=[],x;try{for(;(n===void 0||n-- >0)&&!(g=c.next()).done;)f.push(g.value)}catch(C){x={error:C}}finally{try{g&&!g.done&&(o=c.return)&&o.call(c)}finally{if(x)throw x.error}}return f}function u1(){for(var l=[],n=0;n<arguments.length;n++)l=l.concat(Td(arguments[n]));return l}function c1(){for(var l=0,n=0,o=arguments.length;n<o;n++)l+=arguments[n].length;for(var c=Array(l),g=0,n=0;n<o;n++)for(var f=arguments[n],x=0,C=f.length;x<C;x++,g++)c[g]=f[x];return c}function d1(l,n,o){if(o||arguments.length===2)for(var c=0,g=n.length,f;c<g;c++)(f||!(c in n))&&(f||(f=Array.prototype.slice.call(n,0,c)),f[c]=n[c]);return l.concat(f||Array.prototype.slice.call(n))}function xo(l){return this instanceof xo?(this.v=l,this):new xo(l)}function h1(l,n,o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=o.apply(l,n||[]),g,f=[];return g=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),C("next"),C("throw"),C("return",x),g[Symbol.asyncIterator]=function(){return this},g;function x(P){return function(U){return Promise.resolve(U).then(P,N)}}function C(P,U){c[P]&&(g[P]=function(F){return new Promise(function(j,K){f.push([P,F,j,K])>1||A(P,F)})},U&&(g[P]=U(g[P])))}function A(P,U){try{E(c[P](U))}catch(F){D(f[0][3],F)}}function E(P){P.value instanceof xo?Promise.resolve(P.value.v).then(S,N):D(f[0][2],P)}function S(P){A("next",P)}function N(P){A("throw",P)}function D(P,U){P(U),f.shift(),f.length&&A(f[0][0],f[0][1])}}function f1(l){var n,o;return n={},c("next"),c("throw",function(g){throw g}),c("return"),n[Symbol.iterator]=function(){return this},n;function c(g,f){n[g]=l[g]?function(x){return(o=!o)?{value:xo(l[g](x)),done:!1}:f?f(x):x}:f}}function g1(l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=l[Symbol.asyncIterator],o;return n?n.call(l):(l=typeof eu=="function"?eu(l):l[Symbol.iterator](),o={},c("next"),c("throw"),c("return"),o[Symbol.asyncIterator]=function(){return this},o);function c(f){o[f]=l[f]&&function(x){return new Promise(function(C,A){x=l[f](x),g(C,A,x.done,x.value)})}}function g(f,x,C,A){Promise.resolve(A).then(function(E){f({value:E,done:C})},x)}}function p1(l,n){return Object.defineProperty?Object.defineProperty(l,"raw",{value:n}):l.raw=n,l}var Km=Object.create?(function(l,n){Object.defineProperty(l,"default",{enumerable:!0,value:n})}):function(l,n){l.default=n},id=function(l){return id=Object.getOwnPropertyNames||function(n){var o=[];for(var c in n)Object.prototype.hasOwnProperty.call(n,c)&&(o[o.length]=c);return o},id(l)};function m1(l){if(l&&l.__esModule)return l;var n={};if(l!=null)for(var o=id(l),c=0;c<o.length;c++)o[c]!=="default"&&gu(n,l,o[c]);return Km(n,l),n}function x1(l){return l&&l.__esModule?l:{default:l}}function w1(l,n,o,c){if(o==="a"&&!c)throw new TypeError("Private accessor was defined without a getter");if(typeof n=="function"?l!==n||!c:!n.has(l))throw new TypeError("Cannot read private member from an object whose class did not declare it");return o==="m"?c:o==="a"?c.call(l):c?c.value:n.get(l)}function y1(l,n,o,c,g){if(c==="m")throw new TypeError("Private method is not writable");if(c==="a"&&!g)throw new TypeError("Private accessor was defined without a setter");if(typeof n=="function"?l!==n||!g:!n.has(l))throw new TypeError("Cannot write private member to an object whose class did not declare it");return c==="a"?g.call(l,o):g?g.value=o:n.set(l,o),o}function v1(l,n){if(n===null||typeof n!="object"&&typeof n!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof l=="function"?n===l:l.has(n)}function E1(l,n,o){if(n!=null){if(typeof n!="object"&&typeof n!="function")throw new TypeError("Object expected.");var c,g;if(o){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");c=n[Symbol.asyncDispose]}if(c===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");c=n[Symbol.dispose],o&&(g=c)}if(typeof c!="function")throw new TypeError("Object not disposable.");g&&(c=function(){try{g.call(this)}catch(f){return Promise.reject(f)}}),l.stack.push({value:n,dispose:c,async:o})}else o&&l.stack.push({async:!0});return n}var qm=typeof SuppressedError=="function"?SuppressedError:function(l,n,o){var c=new Error(o);return c.name="SuppressedError",c.error=l,c.suppressed=n,c};function _1(l){function n(f){l.error=l.hasError?new qm(f,l.error,"An error was suppressed during disposal."):f,l.hasError=!0}var o,c=0;function g(){for(;o=l.stack.pop();)try{if(!o.async&&c===1)return c=0,l.stack.push(o),Promise.resolve().then(g);if(o.dispose){var f=o.dispose.call(o.value);if(o.async)return c|=2,Promise.resolve(f).then(g,function(x){return n(x),g()})}else c|=1}catch(x){n(x)}if(c===1)return l.hasError?Promise.reject(l.error):Promise.resolve();if(l.hasError)throw l.error}return g()}function C1(l,n){return typeof l=="string"&&/^\.\.?\//.test(l)?l.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(o,c,g,f,x){return c?n?".jsx":".js":g&&(!f||!x)?o:g+f+"."+x.toLowerCase()+"js"}):l}const Ym={__extends:J0,__assign:Jl,__rest:vo,__decorate:e1,__param:t1,__esDecorate:r1,__runInitializers:n1,__propKey:i1,__setFunctionName:s1,__metadata:o1,__awaiter:Ne,__generator:a1,__createBinding:gu,__exportStar:l1,__values:eu,__read:Td,__spread:u1,__spreadArrays:c1,__spreadArray:d1,__await:xo,__asyncGenerator:h1,__asyncDelegator:f1,__asyncValues:g1,__makeTemplateObject:p1,__importStar:m1,__importDefault:x1,__classPrivateFieldGet:w1,__classPrivateFieldSet:y1,__classPrivateFieldIn:v1,__addDisposableResource:E1,__disposeResources:_1,__rewriteRelativeImportExtension:C1},Zm=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:E1,get __assign(){return Jl},__asyncDelegator:f1,__asyncGenerator:h1,__asyncValues:g1,__await:xo,__awaiter:Ne,__classPrivateFieldGet:w1,__classPrivateFieldIn:v1,__classPrivateFieldSet:y1,__createBinding:gu,__decorate:e1,__disposeResources:_1,__esDecorate:r1,__exportStar:l1,__extends:J0,__generator:a1,__importDefault:x1,__importStar:m1,__makeTemplateObject:p1,__metadata:o1,__param:t1,__propKey:i1,__read:Td,__rest:vo,__rewriteRelativeImportExtension:C1,__runInitializers:n1,__setFunctionName:s1,__spread:u1,__spreadArray:d1,__spreadArrays:c1,__values:eu,default:Ym},Symbol.toStringTag,{value:"Module"})),Qm=l=>l?(...n)=>l(...n):(...n)=>fetch(...n);let pu=class extends Error{constructor(n,o="FunctionsError",c){super(n),this.name=o,this.context=c}},A1=class extends pu{constructor(n){super("Failed to send a request to the Edge Function","FunctionsFetchError",n)}},sd=class extends pu{constructor(n){super("Relay Error invoking the Edge Function","FunctionsRelayError",n)}},od=class extends pu{constructor(n){super("Edge Function returned a non-2xx status code","FunctionsHttpError",n)}};var tu;(function(l){l.Any="any",l.ApNortheast1="ap-northeast-1",l.ApNortheast2="ap-northeast-2",l.ApSouth1="ap-south-1",l.ApSoutheast1="ap-southeast-1",l.ApSoutheast2="ap-southeast-2",l.CaCentral1="ca-central-1",l.EuCentral1="eu-central-1",l.EuWest1="eu-west-1",l.EuWest2="eu-west-2",l.EuWest3="eu-west-3",l.SaEast1="sa-east-1",l.UsEast1="us-east-1",l.UsWest1="us-west-1",l.UsWest2="us-west-2"})(tu||(tu={}));class Jm{constructor(n,{headers:o={},customFetch:c,region:g=tu.Any}={}){this.url=n,this.headers=o,this.region=g,this.fetch=Qm(c)}setAuth(n){this.headers.Authorization=`Bearer ${n}`}invoke(n){return Ne(this,arguments,void 0,function*(o,c={}){var g;let f,x;try{const{headers:C,method:A,body:E,signal:S,timeout:N}=c;let D={},{region:P}=c;P||(P=this.region);const U=new URL(`${this.url}/${o}`);P&&P!=="any"&&(D["x-region"]=P,U.searchParams.set("forceFunctionRegion",P));let F;E&&(C&&!Object.prototype.hasOwnProperty.call(C,"Content-Type")||!C)?typeof Blob<"u"&&E instanceof Blob||E instanceof ArrayBuffer?(D["Content-Type"]="application/octet-stream",F=E):typeof E=="string"?(D["Content-Type"]="text/plain",F=E):typeof FormData<"u"&&E instanceof FormData?F=E:(D["Content-Type"]="application/json",F=JSON.stringify(E)):F=E;let j=S;N&&(x=new AbortController,f=setTimeout(()=>x.abort(),N),S?(j=x.signal,S.addEventListener("abort",()=>x.abort())):j=x.signal);const K=yield this.fetch(U.toString(),{method:A||"POST",headers:Object.assign(Object.assign(Object.assign({},D),this.headers),C),body:F,signal:j}).catch(_e=>{throw new A1(_e)}),J=K.headers.get("x-relay-error");if(J&&J==="true")throw new sd(K);if(!K.ok)throw new od(K);let V=((g=K.headers.get("Content-Type"))!==null&&g!==void 0?g:"text/plain").split(";")[0].trim(),oe;return V==="application/json"?oe=yield K.json():V==="application/octet-stream"||V==="application/pdf"?oe=yield K.blob():V==="text/event-stream"?oe=K:V==="multipart/form-data"?oe=yield K.formData():oe=yield K.text(),{data:oe,error:null,response:K}}catch(C){return{data:null,error:C,response:C instanceof od||C instanceof sd?C.context:void 0}}finally{f&&clearTimeout(f)}})}}const ex=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return tu},FunctionsClient:Jm,FunctionsError:pu,FunctionsFetchError:A1,FunctionsHttpError:od,FunctionsRelayError:sd},Symbol.toStringTag,{value:"Module"})),b1=_a(ex);var Pr={};const Eo=_a(Zm);var jl={},Fl={},Ul={},Vl={},Wl={},Hl={},$f;function S1(){if($f)return Hl;$f=1,Object.defineProperty(Hl,"__esModule",{value:!0});class l extends Error{constructor(o){super(o.message),this.name="PostgrestError",this.details=o.details,this.hint=o.hint,this.code=o.code}}return Hl.default=l,Hl}var Xf;function I1(){if(Xf)return Wl;Xf=1,Object.defineProperty(Wl,"__esModule",{value:!0});const n=Eo.__importDefault(S1());let o=class{constructor(g){var f,x;this.shouldThrowOnError=!1,this.method=g.method,this.url=g.url,this.headers=new Headers(g.headers),this.schema=g.schema,this.body=g.body,this.shouldThrowOnError=(f=g.shouldThrowOnError)!==null&&f!==void 0?f:!1,this.signal=g.signal,this.isMaybeSingle=(x=g.isMaybeSingle)!==null&&x!==void 0?x:!1,g.fetch?this.fetch=g.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(g,f){return this.headers=new Headers(this.headers),this.headers.set(g,f),this}then(g,f){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const x=this.fetch;let C=x(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async A=>{var E,S,N,D;let P=null,U=null,F=null,j=A.status,K=A.statusText;if(A.ok){if(this.method!=="HEAD"){const _e=await A.text();_e===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((E=this.headers.get("Accept"))===null||E===void 0)&&E.includes("application/vnd.pgrst.plan+text"))?U=_e:U=JSON.parse(_e))}const V=(S=this.headers.get("Prefer"))===null||S===void 0?void 0:S.match(/count=(exact|planned|estimated)/),oe=(N=A.headers.get("content-range"))===null||N===void 0?void 0:N.split("/");V&&oe&&oe.length>1&&(F=parseInt(oe[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(U)&&(U.length>1?(P={code:"PGRST116",details:`Results contain ${U.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},U=null,F=null,j=406,K="Not Acceptable"):U.length===1?U=U[0]:U=null)}else{const V=await A.text();try{P=JSON.parse(V),Array.isArray(P)&&A.status===404&&(U=[],P=null,j=200,K="OK")}catch{A.status===404&&V===""?(j=204,K="No Content"):P={message:V}}if(P&&this.isMaybeSingle&&(!((D=P==null?void 0:P.details)===null||D===void 0)&&D.includes("0 rows"))&&(P=null,j=200,K="OK"),P&&this.shouldThrowOnError)throw new n.default(P)}return{error:P,data:U,count:F,status:j,statusText:K}});return this.shouldThrowOnError||(C=C.catch(A=>{var E,S,N,D,P,U;let F="";const j=A==null?void 0:A.cause;if(j){const K=(E=j==null?void 0:j.message)!==null&&E!==void 0?E:"",J=(S=j==null?void 0:j.code)!==null&&S!==void 0?S:"";F=`${(N=A==null?void 0:A.name)!==null&&N!==void 0?N:"FetchError"}: ${A==null?void 0:A.message}`,F+=`

Caused by: ${(D=j==null?void 0:j.name)!==null&&D!==void 0?D:"Error"}: ${K}`,J&&(F+=` (${J})`),j!=null&&j.stack&&(F+=`
${j.stack}`)}else F=(P=A==null?void 0:A.stack)!==null&&P!==void 0?P:"";return{error:{message:`${(U=A==null?void 0:A.name)!==null&&U!==void 0?U:"FetchError"}: ${A==null?void 0:A.message}`,details:F,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),C.then(g,f)}returns(){return this}overrideTypes(){return this}};return Wl.default=o,Wl}var Kf;function T1(){if(Kf)return Vl;Kf=1,Object.defineProperty(Vl,"__esModule",{value:!0});const n=Eo.__importDefault(I1());let o=class extends n.default{select(g){let f=!1;const x=(g??"*").split("").map(C=>/\s/.test(C)&&!f?"":(C==='"'&&(f=!f),C)).join("");return this.url.searchParams.set("select",x),this.headers.append("Prefer","return=representation"),this}order(g,{ascending:f=!0,nullsFirst:x,foreignTable:C,referencedTable:A=C}={}){const E=A?`${A}.order`:"order",S=this.url.searchParams.get(E);return this.url.searchParams.set(E,`${S?`${S},`:""}${g}.${f?"asc":"desc"}${x===void 0?"":x?".nullsfirst":".nullslast"}`),this}limit(g,{foreignTable:f,referencedTable:x=f}={}){const C=typeof x>"u"?"limit":`${x}.limit`;return this.url.searchParams.set(C,`${g}`),this}range(g,f,{foreignTable:x,referencedTable:C=x}={}){const A=typeof C>"u"?"offset":`${C}.offset`,E=typeof C>"u"?"limit":`${C}.limit`;return this.url.searchParams.set(A,`${g}`),this.url.searchParams.set(E,`${f-g+1}`),this}abortSignal(g){return this.signal=g,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:g=!1,verbose:f=!1,settings:x=!1,buffers:C=!1,wal:A=!1,format:E="text"}={}){var S;const N=[g?"analyze":null,f?"verbose":null,x?"settings":null,C?"buffers":null,A?"wal":null].filter(Boolean).join("|"),D=(S=this.headers.get("Accept"))!==null&&S!==void 0?S:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${E}; for="${D}"; options=${N};`),E==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(g){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${g}`),this}};return Vl.default=o,Vl}var qf;function Nd(){if(qf)return Ul;qf=1,Object.defineProperty(Ul,"__esModule",{value:!0});const n=Eo.__importDefault(T1()),o=new RegExp("[,()]");let c=class extends n.default{eq(f,x){return this.url.searchParams.append(f,`eq.${x}`),this}neq(f,x){return this.url.searchParams.append(f,`neq.${x}`),this}gt(f,x){return this.url.searchParams.append(f,`gt.${x}`),this}gte(f,x){return this.url.searchParams.append(f,`gte.${x}`),this}lt(f,x){return this.url.searchParams.append(f,`lt.${x}`),this}lte(f,x){return this.url.searchParams.append(f,`lte.${x}`),this}like(f,x){return this.url.searchParams.append(f,`like.${x}`),this}likeAllOf(f,x){return this.url.searchParams.append(f,`like(all).{${x.join(",")}}`),this}likeAnyOf(f,x){return this.url.searchParams.append(f,`like(any).{${x.join(",")}}`),this}ilike(f,x){return this.url.searchParams.append(f,`ilike.${x}`),this}ilikeAllOf(f,x){return this.url.searchParams.append(f,`ilike(all).{${x.join(",")}}`),this}ilikeAnyOf(f,x){return this.url.searchParams.append(f,`ilike(any).{${x.join(",")}}`),this}regexMatch(f,x){return this.url.searchParams.append(f,`match.${x}`),this}regexIMatch(f,x){return this.url.searchParams.append(f,`imatch.${x}`),this}is(f,x){return this.url.searchParams.append(f,`is.${x}`),this}isDistinct(f,x){return this.url.searchParams.append(f,`isdistinct.${x}`),this}in(f,x){const C=Array.from(new Set(x)).map(A=>typeof A=="string"&&o.test(A)?`"${A}"`:`${A}`).join(",");return this.url.searchParams.append(f,`in.(${C})`),this}contains(f,x){return typeof x=="string"?this.url.searchParams.append(f,`cs.${x}`):Array.isArray(x)?this.url.searchParams.append(f,`cs.{${x.join(",")}}`):this.url.searchParams.append(f,`cs.${JSON.stringify(x)}`),this}containedBy(f,x){return typeof x=="string"?this.url.searchParams.append(f,`cd.${x}`):Array.isArray(x)?this.url.searchParams.append(f,`cd.{${x.join(",")}}`):this.url.searchParams.append(f,`cd.${JSON.stringify(x)}`),this}rangeGt(f,x){return this.url.searchParams.append(f,`sr.${x}`),this}rangeGte(f,x){return this.url.searchParams.append(f,`nxl.${x}`),this}rangeLt(f,x){return this.url.searchParams.append(f,`sl.${x}`),this}rangeLte(f,x){return this.url.searchParams.append(f,`nxr.${x}`),this}rangeAdjacent(f,x){return this.url.searchParams.append(f,`adj.${x}`),this}overlaps(f,x){return typeof x=="string"?this.url.searchParams.append(f,`ov.${x}`):this.url.searchParams.append(f,`ov.{${x.join(",")}}`),this}textSearch(f,x,{config:C,type:A}={}){let E="";A==="plain"?E="pl":A==="phrase"?E="ph":A==="websearch"&&(E="w");const S=C===void 0?"":`(${C})`;return this.url.searchParams.append(f,`${E}fts${S}.${x}`),this}match(f){return Object.entries(f).forEach(([x,C])=>{this.url.searchParams.append(x,`eq.${C}`)}),this}not(f,x,C){return this.url.searchParams.append(f,`not.${x}.${C}`),this}or(f,{foreignTable:x,referencedTable:C=x}={}){const A=C?`${C}.or`:"or";return this.url.searchParams.append(A,`(${f})`),this}filter(f,x,C){return this.url.searchParams.append(f,`${x}.${C}`),this}};return Ul.default=c,Ul}var Yf;function N1(){if(Yf)return Fl;Yf=1,Object.defineProperty(Fl,"__esModule",{value:!0});const n=Eo.__importDefault(Nd());let o=class{constructor(g,{headers:f={},schema:x,fetch:C}){this.url=g,this.headers=new Headers(f),this.schema=x,this.fetch=C}select(g,f){const{head:x=!1,count:C}=f??{},A=x?"HEAD":"GET";let E=!1;const S=(g??"*").split("").map(N=>/\s/.test(N)&&!E?"":(N==='"'&&(E=!E),N)).join("");return this.url.searchParams.set("select",S),C&&this.headers.append("Prefer",`count=${C}`),new n.default({method:A,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(g,{count:f,defaultToNull:x=!0}={}){var C;const A="POST";if(f&&this.headers.append("Prefer",`count=${f}`),x||this.headers.append("Prefer","missing=default"),Array.isArray(g)){const E=g.reduce((S,N)=>S.concat(Object.keys(N)),[]);if(E.length>0){const S=[...new Set(E)].map(N=>`"${N}"`);this.url.searchParams.set("columns",S.join(","))}}return new n.default({method:A,url:this.url,headers:this.headers,schema:this.schema,body:g,fetch:(C=this.fetch)!==null&&C!==void 0?C:fetch})}upsert(g,{onConflict:f,ignoreDuplicates:x=!1,count:C,defaultToNull:A=!0}={}){var E;const S="POST";if(this.headers.append("Prefer",`resolution=${x?"ignore":"merge"}-duplicates`),f!==void 0&&this.url.searchParams.set("on_conflict",f),C&&this.headers.append("Prefer",`count=${C}`),A||this.headers.append("Prefer","missing=default"),Array.isArray(g)){const N=g.reduce((D,P)=>D.concat(Object.keys(P)),[]);if(N.length>0){const D=[...new Set(N)].map(P=>`"${P}"`);this.url.searchParams.set("columns",D.join(","))}}return new n.default({method:S,url:this.url,headers:this.headers,schema:this.schema,body:g,fetch:(E=this.fetch)!==null&&E!==void 0?E:fetch})}update(g,{count:f}={}){var x;const C="PATCH";return f&&this.headers.append("Prefer",`count=${f}`),new n.default({method:C,url:this.url,headers:this.headers,schema:this.schema,body:g,fetch:(x=this.fetch)!==null&&x!==void 0?x:fetch})}delete({count:g}={}){var f;const x="DELETE";return g&&this.headers.append("Prefer",`count=${g}`),new n.default({method:x,url:this.url,headers:this.headers,schema:this.schema,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}};return Fl.default=o,Fl}var Zf;function tx(){if(Zf)return jl;Zf=1,Object.defineProperty(jl,"__esModule",{value:!0});const l=Eo,n=l.__importDefault(N1()),o=l.__importDefault(Nd());let c=class R1{constructor(f,{headers:x={},schema:C,fetch:A}={}){this.url=f,this.headers=new Headers(x),this.schemaName=C,this.fetch=A}from(f){if(!f||typeof f!="string"||f.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const x=new URL(`${this.url}/${f}`);return new n.default(x,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(f){return new R1(this.url,{headers:this.headers,schema:f,fetch:this.fetch})}rpc(f,x={},{head:C=!1,get:A=!1,count:E}={}){var S;let N;const D=new URL(`${this.url}/rpc/${f}`);let P;C||A?(N=C?"HEAD":"GET",Object.entries(x).filter(([F,j])=>j!==void 0).map(([F,j])=>[F,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([F,j])=>{D.searchParams.append(F,j)})):(N="POST",P=x);const U=new Headers(this.headers);return E&&U.set("Prefer",`count=${E}`),new o.default({method:N,url:D,headers:U,schema:this.schemaName,body:P,fetch:(S=this.fetch)!==null&&S!==void 0?S:fetch})}};return jl.default=c,jl}var Qf;function O1(){if(Qf)return Pr;Qf=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.PostgrestError=Pr.PostgrestBuilder=Pr.PostgrestTransformBuilder=Pr.PostgrestFilterBuilder=Pr.PostgrestQueryBuilder=Pr.PostgrestClient=void 0;const l=Eo,n=l.__importDefault(tx());Pr.PostgrestClient=n.default;const o=l.__importDefault(N1());Pr.PostgrestQueryBuilder=o.default;const c=l.__importDefault(Nd());Pr.PostgrestFilterBuilder=c.default;const g=l.__importDefault(T1());Pr.PostgrestTransformBuilder=g.default;const f=l.__importDefault(I1());Pr.PostgrestBuilder=f.default;const x=l.__importDefault(S1());return Pr.PostgrestError=x.default,Pr.default={PostgrestClient:n.default,PostgrestQueryBuilder:o.default,PostgrestFilterBuilder:c.default,PostgrestTransformBuilder:g.default,PostgrestBuilder:f.default,PostgrestError:x.default},Pr}class k1{constructor(){}static detectEnvironment(){var n;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((n=navigator.userAgent)===null||n===void 0)&&n.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const o=process.versions;if(o&&o.node){const c=o.node,g=parseInt(c.replace(/^v/,"").split(".")[0]);return g>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${g} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${g} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const n=this.detectEnvironment();if(n.constructor)return n.constructor;let o=n.error||"WebSocket not supported in this environment.";throw n.workaround&&(o+=`

Suggested solution: ${n.workaround}`),new Error(o)}static createWebSocket(n,o){const c=this.getWebSocketConstructor();return new c(n,o)}static isWebSocketSupported(){try{const n=this.detectEnvironment();return n.type==="native"||n.type==="ws"}catch{return!1}}}const rx="2.86.2",nx=`realtime-js/${rx}`,D1="1.0.0",ix="2.0.0",Jf=D1,ad=1e4,sx=1e3,ox=100;var Is;(function(l){l[l.connecting=0]="connecting",l[l.open=1]="open",l[l.closing=2]="closing",l[l.closed=3]="closed"})(Is||(Is={}));var tr;(function(l){l.closed="closed",l.errored="errored",l.joined="joined",l.joining="joining",l.leaving="leaving"})(tr||(tr={}));var Bn;(function(l){l.close="phx_close",l.error="phx_error",l.join="phx_join",l.reply="phx_reply",l.leave="phx_leave",l.access_token="access_token"})(Bn||(Bn={}));var ld;(function(l){l.websocket="websocket"})(ld||(ld={}));var Ts;(function(l){l.Connecting="connecting",l.Open="open",l.Closing="closing",l.Closed="closed"})(Ts||(Ts={}));class ax{constructor(n){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=n??[]}encode(n,o){if(n.event===this.BROADCAST_EVENT&&!(n.payload instanceof ArrayBuffer)&&typeof n.payload.event=="string")return o(this._binaryEncodeUserBroadcastPush(n));let c=[n.join_ref,n.ref,n.topic,n.event,n.payload];return o(JSON.stringify(c))}_binaryEncodeUserBroadcastPush(n){var o;return this._isArrayBuffer((o=n.payload)===null||o===void 0?void 0:o.payload)?this._encodeBinaryUserBroadcastPush(n):this._encodeJsonUserBroadcastPush(n)}_encodeBinaryUserBroadcastPush(n){var o,c;const g=(c=(o=n.payload)===null||o===void 0?void 0:o.payload)!==null&&c!==void 0?c:new ArrayBuffer(0);return this._encodeUserBroadcastPush(n,this.BINARY_ENCODING,g)}_encodeJsonUserBroadcastPush(n){var o,c;const g=(c=(o=n.payload)===null||o===void 0?void 0:o.payload)!==null&&c!==void 0?c:{},x=new TextEncoder().encode(JSON.stringify(g)).buffer;return this._encodeUserBroadcastPush(n,this.JSON_ENCODING,x)}_encodeUserBroadcastPush(n,o,c){var g,f;const x=n.topic,C=(g=n.ref)!==null&&g!==void 0?g:"",A=(f=n.join_ref)!==null&&f!==void 0?f:"",E=n.payload.event,S=this.allowedMetadataKeys?this._pick(n.payload,this.allowedMetadataKeys):{},N=Object.keys(S).length===0?"":JSON.stringify(S);if(A.length>255)throw new Error(`joinRef length ${A.length} exceeds maximum of 255`);if(C.length>255)throw new Error(`ref length ${C.length} exceeds maximum of 255`);if(x.length>255)throw new Error(`topic length ${x.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`userEvent length ${E.length} exceeds maximum of 255`);if(N.length>255)throw new Error(`metadata length ${N.length} exceeds maximum of 255`);const D=this.USER_BROADCAST_PUSH_META_LENGTH+A.length+C.length+x.length+E.length+N.length,P=new ArrayBuffer(this.HEADER_LENGTH+D);let U=new DataView(P),F=0;U.setUint8(F++,this.KINDS.userBroadcastPush),U.setUint8(F++,A.length),U.setUint8(F++,C.length),U.setUint8(F++,x.length),U.setUint8(F++,E.length),U.setUint8(F++,N.length),U.setUint8(F++,o),Array.from(A,K=>U.setUint8(F++,K.charCodeAt(0))),Array.from(C,K=>U.setUint8(F++,K.charCodeAt(0))),Array.from(x,K=>U.setUint8(F++,K.charCodeAt(0))),Array.from(E,K=>U.setUint8(F++,K.charCodeAt(0))),Array.from(N,K=>U.setUint8(F++,K.charCodeAt(0)));var j=new Uint8Array(P.byteLength+c.byteLength);return j.set(new Uint8Array(P),0),j.set(new Uint8Array(c),P.byteLength),j.buffer}decode(n,o){if(this._isArrayBuffer(n)){let c=this._binaryDecode(n);return o(c)}if(typeof n=="string"){const c=JSON.parse(n),[g,f,x,C,A]=c;return o({join_ref:g,ref:f,topic:x,event:C,payload:A})}return o({})}_binaryDecode(n){const o=new DataView(n),c=o.getUint8(0),g=new TextDecoder;switch(c){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(n,o,g)}}_decodeUserBroadcast(n,o,c){const g=o.getUint8(1),f=o.getUint8(2),x=o.getUint8(3),C=o.getUint8(4);let A=this.HEADER_LENGTH+4;const E=c.decode(n.slice(A,A+g));A=A+g;const S=c.decode(n.slice(A,A+f));A=A+f;const N=c.decode(n.slice(A,A+x));A=A+x;const D=n.slice(A,n.byteLength),P=C===this.JSON_ENCODING?JSON.parse(c.decode(D)):D,U={type:this.BROADCAST_EVENT,event:S,payload:P};return x>0&&(U.meta=JSON.parse(N)),{join_ref:null,ref:null,topic:E,event:this.BROADCAST_EVENT,payload:U}}_isArrayBuffer(n){var o;return n instanceof ArrayBuffer||((o=n==null?void 0:n.constructor)===null||o===void 0?void 0:o.name)==="ArrayBuffer"}_pick(n,o){return!n||typeof n!="object"?{}:Object.fromEntries(Object.entries(n).filter(([c])=>o.includes(c)))}}class P1{constructor(n,o){this.callback=n,this.timerCalc=o,this.timer=void 0,this.tries=0,this.callback=n,this.timerCalc=o}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ot;(function(l){l.abstime="abstime",l.bool="bool",l.date="date",l.daterange="daterange",l.float4="float4",l.float8="float8",l.int2="int2",l.int4="int4",l.int4range="int4range",l.int8="int8",l.int8range="int8range",l.json="json",l.jsonb="jsonb",l.money="money",l.numeric="numeric",l.oid="oid",l.reltime="reltime",l.text="text",l.time="time",l.timestamp="timestamp",l.timestamptz="timestamptz",l.timetz="timetz",l.tsrange="tsrange",l.tstzrange="tstzrange"})(Ot||(Ot={}));const e0=(l,n,o={})=>{var c;const g=(c=o.skipTypes)!==null&&c!==void 0?c:[];return n?Object.keys(n).reduce((f,x)=>(f[x]=lx(x,l,n,g),f),{}):{}},lx=(l,n,o,c)=>{const g=n.find(C=>C.name===l),f=g==null?void 0:g.type,x=o[l];return f&&!c.includes(f)?M1(f,x):ud(x)},M1=(l,n)=>{if(l.charAt(0)==="_"){const o=l.slice(1,l.length);return hx(n,o)}switch(l){case Ot.bool:return ux(n);case Ot.float4:case Ot.float8:case Ot.int2:case Ot.int4:case Ot.int8:case Ot.numeric:case Ot.oid:return cx(n);case Ot.json:case Ot.jsonb:return dx(n);case Ot.timestamp:return fx(n);case Ot.abstime:case Ot.date:case Ot.daterange:case Ot.int4range:case Ot.int8range:case Ot.money:case Ot.reltime:case Ot.text:case Ot.time:case Ot.timestamptz:case Ot.timetz:case Ot.tsrange:case Ot.tstzrange:return ud(n);default:return ud(n)}},ud=l=>l,ux=l=>{switch(l){case"t":return!0;case"f":return!1;default:return l}},cx=l=>{if(typeof l=="string"){const n=parseFloat(l);if(!Number.isNaN(n))return n}return l},dx=l=>{if(typeof l=="string")try{return JSON.parse(l)}catch(n){return console.log(`JSON parse error: ${n}`),l}return l},hx=(l,n)=>{if(typeof l!="string")return l;const o=l.length-1,c=l[o];if(l[0]==="{"&&c==="}"){let f;const x=l.slice(1,o);try{f=JSON.parse("["+x+"]")}catch{f=x?x.split(","):[]}return f.map(C=>M1(n,C))}return l},fx=l=>typeof l=="string"?l.replace(" ","T"):l,L1=l=>{const n=new URL(l);return n.protocol=n.protocol.replace(/^ws/i,"http"),n.pathname=n.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),n.pathname===""||n.pathname==="/"?n.pathname="/api/broadcast":n.pathname=n.pathname+"/api/broadcast",n.href};class $c{constructor(n,o,c={},g=ad){this.channel=n,this.event=o,this.payload=c,this.timeout=g,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(n){this.timeout=n,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(n){this.payload=Object.assign(Object.assign({},this.payload),n)}receive(n,o){var c;return this._hasReceived(n)&&o((c=this.receivedResp)===null||c===void 0?void 0:c.response),this.recHooks.push({status:n,callback:o}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const n=o=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=o,this._matchReceive(o)};this.channel._on(this.refEvent,{},n),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(n,o){this.refEvent&&this.channel._trigger(this.refEvent,{status:n,response:o})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:n,response:o}){this.recHooks.filter(c=>c.status===n).forEach(c=>c.callback(o))}_hasReceived(n){return this.receivedResp&&this.receivedResp.status===n}}var cd;(function(l){l.SYNC="sync",l.JOIN="join",l.LEAVE="leave"})(cd||(cd={}));let B1=class Kl{constructor(n,o){this.channel=n,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const c=(o==null?void 0:o.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(c.state,{},g=>{const{onJoin:f,onLeave:x,onSync:C}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Kl.syncState(this.state,g,f,x),this.pendingDiffs.forEach(A=>{this.state=Kl.syncDiff(this.state,A,f,x)}),this.pendingDiffs=[],C()}),this.channel._on(c.diff,{},g=>{const{onJoin:f,onLeave:x,onSync:C}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(g):(this.state=Kl.syncDiff(this.state,g,f,x),C())}),this.onJoin((g,f,x)=>{this.channel._trigger("presence",{event:"join",key:g,currentPresences:f,newPresences:x})}),this.onLeave((g,f,x)=>{this.channel._trigger("presence",{event:"leave",key:g,currentPresences:f,leftPresences:x})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(n,o,c,g){const f=this.cloneDeep(n),x=this.transformState(o),C={},A={};return this.map(f,(E,S)=>{x[E]||(A[E]=S)}),this.map(x,(E,S)=>{const N=f[E];if(N){const D=S.map(j=>j.presence_ref),P=N.map(j=>j.presence_ref),U=S.filter(j=>P.indexOf(j.presence_ref)<0),F=N.filter(j=>D.indexOf(j.presence_ref)<0);U.length>0&&(C[E]=U),F.length>0&&(A[E]=F)}else C[E]=S}),this.syncDiff(f,{joins:C,leaves:A},c,g)}static syncDiff(n,o,c,g){const{joins:f,leaves:x}={joins:this.transformState(o.joins),leaves:this.transformState(o.leaves)};return c||(c=()=>{}),g||(g=()=>{}),this.map(f,(C,A)=>{var E;const S=(E=n[C])!==null&&E!==void 0?E:[];if(n[C]=this.cloneDeep(A),S.length>0){const N=n[C].map(P=>P.presence_ref),D=S.filter(P=>N.indexOf(P.presence_ref)<0);n[C].unshift(...D)}c(C,S,A)}),this.map(x,(C,A)=>{let E=n[C];if(!E)return;const S=A.map(N=>N.presence_ref);E=E.filter(N=>S.indexOf(N.presence_ref)<0),n[C]=E,g(C,E,A),E.length===0&&delete n[C]}),n}static map(n,o){return Object.getOwnPropertyNames(n).map(c=>o(c,n[c]))}static transformState(n){return n=this.cloneDeep(n),Object.getOwnPropertyNames(n).reduce((o,c)=>{const g=n[c];return"metas"in g?o[c]=g.metas.map(f=>(f.presence_ref=f.phx_ref,delete f.phx_ref,delete f.phx_ref_prev,f)):o[c]=g,o},{})}static cloneDeep(n){return JSON.parse(JSON.stringify(n))}onJoin(n){this.caller.onJoin=n}onLeave(n){this.caller.onLeave=n}onSync(n){this.caller.onSync=n}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var dd;(function(l){l.ALL="*",l.INSERT="INSERT",l.UPDATE="UPDATE",l.DELETE="DELETE"})(dd||(dd={}));var po;(function(l){l.BROADCAST="broadcast",l.PRESENCE="presence",l.POSTGRES_CHANGES="postgres_changes",l.SYSTEM="system"})(po||(po={}));var Yn;(function(l){l.SUBSCRIBED="SUBSCRIBED",l.TIMED_OUT="TIMED_OUT",l.CLOSED="CLOSED",l.CHANNEL_ERROR="CHANNEL_ERROR"})(Yn||(Yn={}));const gx=tr;let j1=class F1{constructor(n,o={config:{}},c){var g,f;if(this.topic=n,this.params=o,this.socket=c,this.bindings={},this.state=tr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=n.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},o.config),this.timeout=this.socket.timeout,this.joinPush=new $c(this,Bn.join,this.params,this.timeout),this.rejoinTimer=new P1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=tr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(x=>x.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=tr.closed,this.socket._remove(this)}),this._onError(x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",x=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,x),this.state=tr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Bn.reply,{},(x,C)=>{this._trigger(this._replyEventName(C),x)}),this.presence=new B1(this),this.broadcastEndpointURL=L1(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((f=(g=this.params.config)===null||g===void 0?void 0:g.broadcast)===null||f===void 0)&&f.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(n,o=this.timeout){var c,g,f;if(this.socket.isConnected()||this.socket.connect(),this.state==tr.closed){const{config:{broadcast:x,presence:C,private:A}}=this.params,E=(g=(c=this.bindings.postgres_changes)===null||c===void 0?void 0:c.map(P=>P.filter))!==null&&g!==void 0?g:[],S=!!this.bindings[po.PRESENCE]&&this.bindings[po.PRESENCE].length>0||((f=this.params.config.presence)===null||f===void 0?void 0:f.enabled)===!0,N={},D={broadcast:x,presence:Object.assign(Object.assign({},C),{enabled:S}),postgres_changes:E,private:A};this.socket.accessTokenValue&&(N.access_token=this.socket.accessTokenValue),this._onError(P=>n==null?void 0:n(Yn.CHANNEL_ERROR,P)),this._onClose(()=>n==null?void 0:n(Yn.CLOSED)),this.updateJoinPayload(Object.assign({config:D},N)),this.joinedOnce=!0,this._rejoin(o),this.joinPush.receive("ok",async({postgres_changes:P})=>{var U;if(this.socket.setAuth(),P===void 0){n==null||n(Yn.SUBSCRIBED);return}else{const F=this.bindings.postgres_changes,j=(U=F==null?void 0:F.length)!==null&&U!==void 0?U:0,K=[];for(let J=0;J<j;J++){const V=F[J],{filter:{event:oe,schema:_e,table:xe,filter:se}}=V,he=P&&P[J];if(he&&he.event===oe&&he.schema===_e&&he.table===xe&&he.filter===se)K.push(Object.assign(Object.assign({},V),{id:he.id}));else{this.unsubscribe(),this.state=tr.errored,n==null||n(Yn.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=K,n&&n(Yn.SUBSCRIBED);return}}).receive("error",P=>{this.state=tr.errored,n==null||n(Yn.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{n==null||n(Yn.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(n,o={}){return await this.send({type:"presence",event:"track",payload:n},o.timeout||this.timeout)}async untrack(n={}){return await this.send({type:"presence",event:"untrack"},n)}on(n,o,c){return this.state===tr.joined&&n===po.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(n,o,c)}async httpSend(n,o,c={}){var g;const f=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(o==null)return Promise.reject("Payload is required for httpSend()");const x={method:"POST",headers:{Authorization:f,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:o,private:this.private}]})},C=await this._fetchWithTimeout(this.broadcastEndpointURL,x,(g=c.timeout)!==null&&g!==void 0?g:this.timeout);if(C.status===202)return{success:!0};let A=C.statusText;try{const E=await C.json();A=E.error||E.message||A}catch{}return Promise.reject(new Error(A))}async send(n,o={}){var c,g;if(!this._canPush()&&n.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:f,payload:x}=n,A={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:f,payload:x,private:this.private}]})};try{const E=await this._fetchWithTimeout(this.broadcastEndpointURL,A,(c=o.timeout)!==null&&c!==void 0?c:this.timeout);return await((g=E.body)===null||g===void 0?void 0:g.cancel()),E.ok?"ok":"error"}catch(E){return E.name==="AbortError"?"timed out":"error"}}else return new Promise(f=>{var x,C,A;const E=this._push(n.type,n,o.timeout||this.timeout);n.type==="broadcast"&&!(!((A=(C=(x=this.params)===null||x===void 0?void 0:x.config)===null||C===void 0?void 0:C.broadcast)===null||A===void 0)&&A.ack)&&f("ok"),E.receive("ok",()=>f("ok")),E.receive("error",()=>f("error")),E.receive("timeout",()=>f("timed out"))})}updateJoinPayload(n){this.joinPush.updatePayload(n)}unsubscribe(n=this.timeout){this.state=tr.leaving;const o=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Bn.close,"leave",this._joinRef())};this.joinPush.destroy();let c=null;return new Promise(g=>{c=new $c(this,Bn.leave,{},n),c.receive("ok",()=>{o(),g("ok")}).receive("timeout",()=>{o(),g("timed out")}).receive("error",()=>{g("error")}),c.send(),this._canPush()||c.trigger("ok",{})}).finally(()=>{c==null||c.destroy()})}teardown(){this.pushBuffer.forEach(n=>n.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=tr.closed,this.bindings={}}async _fetchWithTimeout(n,o,c){const g=new AbortController,f=setTimeout(()=>g.abort(),c),x=await this.socket.fetch(n,Object.assign(Object.assign({},o),{signal:g.signal}));return clearTimeout(f),x}_push(n,o,c=this.timeout){if(!this.joinedOnce)throw`tried to push '${n}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let g=new $c(this,n,o,c);return this._canPush()?g.send():this._addToPushBuffer(g),g}_addToPushBuffer(n){if(n.startTimeout(),this.pushBuffer.push(n),this.pushBuffer.length>ox){const o=this.pushBuffer.shift();o&&(o.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${o.event}`,o.payload))}}_onMessage(n,o,c){return o}_isMember(n){return this.topic===n}_joinRef(){return this.joinPush.ref}_trigger(n,o,c){var g,f;const x=n.toLocaleLowerCase(),{close:C,error:A,leave:E,join:S}=Bn;if(c&&[C,A,E,S].indexOf(x)>=0&&c!==this._joinRef())return;let D=this._onMessage(x,o,c);if(o&&!D)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(x)?(g=this.bindings.postgres_changes)===null||g===void 0||g.filter(P=>{var U,F,j;return((U=P.filter)===null||U===void 0?void 0:U.event)==="*"||((j=(F=P.filter)===null||F===void 0?void 0:F.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===x}).map(P=>P.callback(D,c)):(f=this.bindings[x])===null||f===void 0||f.filter(P=>{var U,F,j,K,J,V;if(["broadcast","presence","postgres_changes"].includes(x))if("id"in P){const oe=P.id,_e=(U=P.filter)===null||U===void 0?void 0:U.event;return oe&&((F=o.ids)===null||F===void 0?void 0:F.includes(oe))&&(_e==="*"||(_e==null?void 0:_e.toLocaleLowerCase())===((j=o.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const oe=(J=(K=P==null?void 0:P.filter)===null||K===void 0?void 0:K.event)===null||J===void 0?void 0:J.toLocaleLowerCase();return oe==="*"||oe===((V=o==null?void 0:o.event)===null||V===void 0?void 0:V.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===x}).map(P=>{if(typeof D=="object"&&"ids"in D){const U=D.data,{schema:F,table:j,commit_timestamp:K,type:J,errors:V}=U;D=Object.assign(Object.assign({},{schema:F,table:j,commit_timestamp:K,eventType:J,new:{},old:{},errors:V}),this._getPayloadRecords(U))}P.callback(D,c)})}_isClosed(){return this.state===tr.closed}_isJoined(){return this.state===tr.joined}_isJoining(){return this.state===tr.joining}_isLeaving(){return this.state===tr.leaving}_replyEventName(n){return`chan_reply_${n}`}_on(n,o,c){const g=n.toLocaleLowerCase(),f={type:g,filter:o,callback:c};return this.bindings[g]?this.bindings[g].push(f):this.bindings[g]=[f],this}_off(n,o){const c=n.toLocaleLowerCase();return this.bindings[c]&&(this.bindings[c]=this.bindings[c].filter(g=>{var f;return!(((f=g.type)===null||f===void 0?void 0:f.toLocaleLowerCase())===c&&F1.isEqual(g.filter,o))})),this}static isEqual(n,o){if(Object.keys(n).length!==Object.keys(o).length)return!1;for(const c in n)if(n[c]!==o[c])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(n){this._on(Bn.close,{},n)}_onError(n){this._on(Bn.error,{},o=>n(o))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(n=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=tr.joining,this.joinPush.resend(n))}_getPayloadRecords(n){const o={new:{},old:{}};return(n.type==="INSERT"||n.type==="UPDATE")&&(o.new=e0(n.columns,n.record)),(n.type==="UPDATE"||n.type==="DELETE")&&(o.old=e0(n.columns,n.old_record)),o}};const Xc=()=>{},zl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},px=[1e3,2e3,5e3,1e4],mx=1e4,xx=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let wx=class{constructor(n,o){var c;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ad,this.transport=null,this.heartbeatIntervalMs=zl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xc,this.ref=0,this.reconnectTimer=null,this.vsn=Jf,this.logger=Xc,this.conn=null,this.sendBuffer=[],this.serializer=new ax,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=g=>g?(...f)=>g(...f):(...f)=>fetch(...f),!(!((c=o==null?void 0:o.params)===null||c===void 0)&&c.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=o.params.apikey,this.endPoint=`${n}/${ld.websocket}`,this.httpEndpoint=L1(n),this._initializeOptions(o),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(o==null?void 0:o.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=k1.createWebSocket(this.endpointURL())}catch(n){this._setConnectionState("disconnected");const o=n.message;throw o.includes("Node.js")?new Error(`${o}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${o}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(n,o){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const c=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(c),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(n?this.conn.close(n,o??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(n){const o=await n.unsubscribe();return this.channels.length===0&&this.disconnect(),o}async removeAllChannels(){const n=await Promise.all(this.channels.map(o=>o.unsubscribe()));return this.channels=[],this.disconnect(),n}log(n,o,c){this.logger(n,o,c)}connectionState(){switch(this.conn&&this.conn.readyState){case Is.connecting:return Ts.Connecting;case Is.open:return Ts.Open;case Is.closing:return Ts.Closing;default:return Ts.Closed}}isConnected(){return this.connectionState()===Ts.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(n,o={config:{}}){const c=`realtime:${n}`,g=this.getChannels().find(f=>f.topic===c);if(g)return g;{const f=new j1(`realtime:${n}`,o,this);return this.channels.push(f),f}}push(n){const{topic:o,event:c,payload:g,ref:f}=n,x=()=>{this.encode(n,C=>{var A;(A=this.conn)===null||A===void 0||A.send(C)})};this.log("push",`${o} ${c} (${f})`,g),this.isConnected()?x():this.sendBuffer.push(x)}async setAuth(n=null){this._authPromise=this._performAuth(n);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var n;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(o){this.log("error","error in heartbeat callback",o)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(o){this.log("error","error in heartbeat callback",o)}this._wasManualDisconnect=!1,(n=this.conn)===null||n===void 0||n.close(sx,"heartbeat timeout"),setTimeout(()=>{var o;this.isConnected()||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout()},zl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(o){this.log("error","error in heartbeat callback",o)}this._setAuthSafely("heartbeat")}onHeartbeat(n){this.heartbeatCallback=n}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(n=>n()),this.sendBuffer=[])}_makeRef(){let n=this.ref+1;return n===this.ref?this.ref=0:this.ref=n,this.ref.toString()}_leaveOpenTopic(n){let o=this.channels.find(c=>c.topic===n&&(c._isJoined()||c._isJoining()));o&&(this.log("transport",`leaving duplicate topic "${n}"`),o.unsubscribe())}_remove(n){this.channels=this.channels.filter(o=>o.topic!==n.topic)}_onConnMessage(n){this.decode(n.data,o=>{if(o.topic==="phoenix"&&o.event==="phx_reply")try{this.heartbeatCallback(o.payload.status==="ok"?"ok":"error")}catch(E){this.log("error","error in heartbeat callback",E)}o.ref&&o.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:c,event:g,payload:f,ref:x}=o,C=x?`(${x})`:"",A=f.status||"";this.log("receive",`${A} ${c} ${g} ${C}`.trim(),f),this.channels.filter(E=>E._isMember(c)).forEach(E=>E._trigger(g,f,x)),this._triggerStateCallbacks("message",o)})}_clearTimer(n){var o;n==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):n==="reconnect"&&((o=this.reconnectTimer)===null||o===void 0||o.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=n=>this._onConnError(n),this.conn.onmessage=n=>this._onConnMessage(n),this.conn.onclose=n=>this._onConnClose(n))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Is.open||this.conn.readyState===Is.connecting)try{this.conn.close()}catch(n){this.log("error","Error closing connection",n)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(n=>n.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(o=>{this.log("error","error waiting for auth on connect",o),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const n=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(n),this.workerRef.onerror=o=>{this.log("worker","worker error",o.message),this.workerRef.terminate()},this.workerRef.onmessage=o=>{o.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(n){var o;this._setConnectionState("disconnected"),this.log("transport","close",n),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(o=this.reconnectTimer)===null||o===void 0||o.scheduleTimeout(),this._triggerStateCallbacks("close",n)}_onConnError(n){this._setConnectionState("disconnected"),this.log("transport",`${n}`),this._triggerChanError(),this._triggerStateCallbacks("error",n)}_triggerChanError(){this.channels.forEach(n=>n._trigger(Bn.error))}_appendParams(n,o){if(Object.keys(o).length===0)return n;const c=n.match(/\?/)?"&":"?",g=new URLSearchParams(o);return`${n}${c}${g}`}_workerObjectUrl(n){let o;if(n)o=n;else{const c=new Blob([xx],{type:"application/javascript"});o=URL.createObjectURL(c)}return o}_setConnectionState(n,o=!1){this._connectionState=n,n==="connecting"?this._wasManualDisconnect=!1:n==="disconnecting"&&(this._wasManualDisconnect=o)}async _performAuth(n=null){let o;n?o=n:this.accessToken?o=await this.accessToken():o=this.accessTokenValue,this.accessTokenValue!=o&&(this.accessTokenValue=o,this.channels.forEach(c=>{const g={access_token:o,version:nx};o&&c.updateJoinPayload(g),c.joinedOnce&&c._isJoined()&&c._push(Bn.access_token,{access_token:o})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(n="general"){this.setAuth().catch(o=>{this.log("error",`error setting auth in ${n}`,o)})}_triggerStateCallbacks(n,o){try{this.stateChangeCallbacks[n].forEach(c=>{try{c(o)}catch(g){this.log("error",`error in ${n} callback`,g)}})}catch(c){this.log("error",`error triggering ${n} callbacks`,c)}}_setupReconnectionTimer(){this.reconnectTimer=new P1(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},zl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(n){var o,c,g,f,x,C,A,E,S,N,D,P;switch(this.transport=(o=n==null?void 0:n.transport)!==null&&o!==void 0?o:null,this.timeout=(c=n==null?void 0:n.timeout)!==null&&c!==void 0?c:ad,this.heartbeatIntervalMs=(g=n==null?void 0:n.heartbeatIntervalMs)!==null&&g!==void 0?g:zl.HEARTBEAT_INTERVAL,this.worker=(f=n==null?void 0:n.worker)!==null&&f!==void 0?f:!1,this.accessToken=(x=n==null?void 0:n.accessToken)!==null&&x!==void 0?x:null,this.heartbeatCallback=(C=n==null?void 0:n.heartbeatCallback)!==null&&C!==void 0?C:Xc,this.vsn=(A=n==null?void 0:n.vsn)!==null&&A!==void 0?A:Jf,n!=null&&n.params&&(this.params=n.params),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(E=n==null?void 0:n.reconnectAfterMs)!==null&&E!==void 0?E:(U=>px[U-1]||mx),this.vsn){case D1:this.encode=(S=n==null?void 0:n.encode)!==null&&S!==void 0?S:((U,F)=>F(JSON.stringify(U))),this.decode=(N=n==null?void 0:n.decode)!==null&&N!==void 0?N:((U,F)=>F(JSON.parse(U)));break;case ix:this.encode=(D=n==null?void 0:n.encode)!==null&&D!==void 0?D:this.serializer.encode.bind(this.serializer),this.decode=(P=n==null?void 0:n.decode)!==null&&P!==void 0?P:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=n==null?void 0:n.workerUrl}}};const yx=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:gx,get REALTIME_LISTEN_TYPES(){return po},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return dd},get REALTIME_PRESENCE_LISTEN_EVENTS(){return cd},get REALTIME_SUBSCRIBE_STATES(){return Yn},RealtimeChannel:j1,RealtimeClient:wx,RealtimePresence:B1,WebSocketFactory:k1},Symbol.toStringTag,{value:"Module"})),U1=_a(yx);class Sa extends Error{constructor(n){super(n),this.__isStorageError=!0,this.name="StorageError"}}function Bt(l){return typeof l=="object"&&l!==null&&"__isStorageError"in l}class V1 extends Sa{constructor(n,o,c){super(n),this.name="StorageApiError",this.status=o,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ru extends Sa{constructor(n,o){super(n),this.name="StorageUnknownError",this.originalError=o}}const Rd=l=>l?(...n)=>l(...n):(...n)=>fetch(...n),vx=()=>Response,hd=l=>{if(Array.isArray(l))return l.map(o=>hd(o));if(typeof l=="function"||l!==Object(l))return l;const n={};return Object.entries(l).forEach(([o,c])=>{const g=o.replace(/([-_][a-z])/gi,f=>f.toUpperCase().replace(/[-_]/g,""));n[g]=hd(c)}),n},Ex=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},_x=l=>!l||typeof l!="string"||l.length===0||l.length>100||l.trim()!==l||l.includes("/")||l.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(l),Kc=l=>{var n;return l.msg||l.message||l.error_description||(typeof l.error=="string"?l.error:(n=l.error)===null||n===void 0?void 0:n.message)||JSON.stringify(l)},Cx=(l,n,o)=>Ne(void 0,void 0,void 0,function*(){const c=yield vx();l instanceof c&&!(o!=null&&o.noResolveJson)?l.json().then(g=>{const f=l.status||500,x=(g==null?void 0:g.statusCode)||f+"";n(new V1(Kc(g),f,x))}).catch(g=>{n(new ru(Kc(g),g))}):n(new ru(Kc(l),l))}),Ax=(l,n,o,c)=>{const g={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"||!c?g:(Ex(c)?(g.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),g.body=JSON.stringify(c)):g.body=c,n!=null&&n.duplex&&(g.duplex=n.duplex),Object.assign(Object.assign({},g),o))};function Ia(l,n,o,c,g,f){return Ne(this,void 0,void 0,function*(){return new Promise((x,C)=>{l(o,Ax(n,c,g,f)).then(A=>{if(!A.ok)throw A;return c!=null&&c.noResolveJson?A:A.json()}).then(A=>x(A)).catch(A=>Cx(A,C,c))})})}function va(l,n,o,c){return Ne(this,void 0,void 0,function*(){return Ia(l,"GET",n,o,c)})}function Ln(l,n,o,c,g){return Ne(this,void 0,void 0,function*(){return Ia(l,"POST",n,c,g,o)})}function fd(l,n,o,c,g){return Ne(this,void 0,void 0,function*(){return Ia(l,"PUT",n,c,g,o)})}function bx(l,n,o,c){return Ne(this,void 0,void 0,function*(){return Ia(l,"HEAD",n,Object.assign(Object.assign({},o),{noResolveJson:!0}),c)})}function Od(l,n,o,c,g){return Ne(this,void 0,void 0,function*(){return Ia(l,"DELETE",n,c,g,o)})}class Sx{constructor(n,o){this.downloadFn=n,this.shouldThrowOnError=o}then(n,o){return this.execute().then(n,o)}execute(){return Ne(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}}var W1;class Ix{constructor(n,o){this.downloadFn=n,this.shouldThrowOnError=o,this[W1]="BlobDownloadBuilder",this.promise=null}asStream(){return new Sx(this.downloadFn,this.shouldThrowOnError)}then(n,o){return this.getPromise().then(n,o)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ne(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Bt(n))return{data:null,error:n};throw n}})}}W1=Symbol.toStringTag;const Tx={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},t0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Nx{constructor(n,o={},c,g){this.shouldThrowOnError=!1,this.url=n,this.headers=o,this.bucketId=c,this.fetch=Rd(g)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(n,o,c,g){return Ne(this,void 0,void 0,function*(){try{let f;const x=Object.assign(Object.assign({},t0),g);let C=Object.assign(Object.assign({},this.headers),n==="POST"&&{"x-upsert":String(x.upsert)});const A=x.metadata;typeof Blob<"u"&&c instanceof Blob?(f=new FormData,f.append("cacheControl",x.cacheControl),A&&f.append("metadata",this.encodeMetadata(A)),f.append("",c)):typeof FormData<"u"&&c instanceof FormData?(f=c,f.has("cacheControl")||f.append("cacheControl",x.cacheControl),A&&!f.has("metadata")&&f.append("metadata",this.encodeMetadata(A))):(f=c,C["cache-control"]=`max-age=${x.cacheControl}`,C["content-type"]=x.contentType,A&&(C["x-metadata"]=this.toBase64(this.encodeMetadata(A))),(typeof ReadableStream<"u"&&f instanceof ReadableStream||f&&typeof f=="object"&&"pipe"in f&&typeof f.pipe=="function")&&!x.duplex&&(x.duplex="half")),g!=null&&g.headers&&(C=Object.assign(Object.assign({},C),g.headers));const E=this._removeEmptyFolders(o),S=this._getFinalPath(E),N=yield(n=="PUT"?fd:Ln)(this.fetch,`${this.url}/object/${S}`,f,Object.assign({headers:C},x!=null&&x.duplex?{duplex:x.duplex}:{}));return{data:{path:E,id:N.Id,fullPath:N.Key},error:null}}catch(f){if(this.shouldThrowOnError)throw f;if(Bt(f))return{data:null,error:f};throw f}})}upload(n,o,c){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",n,o,c)})}uploadToSignedUrl(n,o,c,g){return Ne(this,void 0,void 0,function*(){const f=this._removeEmptyFolders(n),x=this._getFinalPath(f),C=new URL(this.url+`/object/upload/sign/${x}`);C.searchParams.set("token",o);try{let A;const E=Object.assign({upsert:t0.upsert},g),S=Object.assign(Object.assign({},this.headers),{"x-upsert":String(E.upsert)});typeof Blob<"u"&&c instanceof Blob?(A=new FormData,A.append("cacheControl",E.cacheControl),A.append("",c)):typeof FormData<"u"&&c instanceof FormData?(A=c,A.append("cacheControl",E.cacheControl)):(A=c,S["cache-control"]=`max-age=${E.cacheControl}`,S["content-type"]=E.contentType);const N=yield fd(this.fetch,C.toString(),A,{headers:S});return{data:{path:f,fullPath:N.Key},error:null}}catch(A){if(this.shouldThrowOnError)throw A;if(Bt(A))return{data:null,error:A};throw A}})}createSignedUploadUrl(n,o){return Ne(this,void 0,void 0,function*(){try{let c=this._getFinalPath(n);const g=Object.assign({},this.headers);o!=null&&o.upsert&&(g["x-upsert"]="true");const f=yield Ln(this.fetch,`${this.url}/object/upload/sign/${c}`,{},{headers:g}),x=new URL(this.url+f.url),C=x.searchParams.get("token");if(!C)throw new Sa("No token returned by API");return{data:{signedUrl:x.toString(),path:n,token:C},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Bt(c))return{data:null,error:c};throw c}})}update(n,o,c){return Ne(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",n,o,c)})}move(n,o,c){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:n,destinationKey:o,destinationBucket:c==null?void 0:c.destinationBucket},{headers:this.headers}),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Bt(g))return{data:null,error:g};throw g}})}copy(n,o,c){return Ne(this,void 0,void 0,function*(){try{return{data:{path:(yield Ln(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:n,destinationKey:o,destinationBucket:c==null?void 0:c.destinationBucket},{headers:this.headers})).Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Bt(g))return{data:null,error:g};throw g}})}createSignedUrl(n,o,c){return Ne(this,void 0,void 0,function*(){try{let g=this._getFinalPath(n),f=yield Ln(this.fetch,`${this.url}/object/sign/${g}`,Object.assign({expiresIn:o},c!=null&&c.transform?{transform:c.transform}:{}),{headers:this.headers});const x=c!=null&&c.download?`&download=${c.download===!0?"":c.download}`:"";return f={signedUrl:encodeURI(`${this.url}${f.signedURL}${x}`)},{data:f,error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Bt(g))return{data:null,error:g};throw g}})}createSignedUrls(n,o,c){return Ne(this,void 0,void 0,function*(){try{const g=yield Ln(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:o,paths:n},{headers:this.headers}),f=c!=null&&c.download?`&download=${c.download===!0?"":c.download}`:"";return{data:g.map(x=>Object.assign(Object.assign({},x),{signedUrl:x.signedURL?encodeURI(`${this.url}${x.signedURL}${f}`):null})),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Bt(g))return{data:null,error:g};throw g}})}download(n,o){const g=typeof(o==null?void 0:o.transform)<"u"?"render/image/authenticated":"object",f=this.transformOptsToQueryString((o==null?void 0:o.transform)||{}),x=f?`?${f}`:"",C=this._getFinalPath(n),A=()=>va(this.fetch,`${this.url}/${g}/${C}${x}`,{headers:this.headers,noResolveJson:!0});return new Ix(A,this.shouldThrowOnError)}info(n){return Ne(this,void 0,void 0,function*(){const o=this._getFinalPath(n);try{const c=yield va(this.fetch,`${this.url}/object/info/${o}`,{headers:this.headers});return{data:hd(c),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Bt(c))return{data:null,error:c};throw c}})}exists(n){return Ne(this,void 0,void 0,function*(){const o=this._getFinalPath(n);try{return yield bx(this.fetch,`${this.url}/object/${o}`,{headers:this.headers}),{data:!0,error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Bt(c)&&c instanceof ru){const g=c.originalError;if([400,404].includes(g==null?void 0:g.status))return{data:!1,error:c}}throw c}})}getPublicUrl(n,o){const c=this._getFinalPath(n),g=[],f=o!=null&&o.download?`download=${o.download===!0?"":o.download}`:"";f!==""&&g.push(f);const C=typeof(o==null?void 0:o.transform)<"u"?"render/image":"object",A=this.transformOptsToQueryString((o==null?void 0:o.transform)||{});A!==""&&g.push(A);let E=g.join("&");return E!==""&&(E=`?${E}`),{data:{publicUrl:encodeURI(`${this.url}/${C}/public/${c}${E}`)}}}remove(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}list(n,o,c){return Ne(this,void 0,void 0,function*(){try{const g=Object.assign(Object.assign(Object.assign({},Tx),o),{prefix:n||""});return{data:yield Ln(this.fetch,`${this.url}/object/list/${this.bucketId}`,g,{headers:this.headers},c),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Bt(g))return{data:null,error:g};throw g}})}listV2(n,o){return Ne(this,void 0,void 0,function*(){try{const c=Object.assign({},n);return{data:yield Ln(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,c,{headers:this.headers},o),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Bt(c))return{data:null,error:c};throw c}})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){const o=[];return n.width&&o.push(`width=${n.width}`),n.height&&o.push(`height=${n.height}`),n.resize&&o.push(`resize=${n.resize}`),n.format&&o.push(`format=${n.format}`),n.quality&&o.push(`quality=${n.quality}`),o.join("&")}}const H1="2.86.2",z1={"X-Client-Info":`storage-js/${H1}`};class Rx{constructor(n,o={},c,g){this.shouldThrowOnError=!1;const f=new URL(n);g!=null&&g.useNewHostname&&/supabase\.(co|in|red)$/.test(f.hostname)&&!f.hostname.includes("storage.supabase.")&&(f.hostname=f.hostname.replace("supabase.","storage.supabase.")),this.url=f.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},z1),o),this.fetch=Rd(c)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(n){return Ne(this,void 0,void 0,function*(){try{const o=this.listBucketOptionsToQueryString(n);return{data:yield va(this.fetch,`${this.url}/bucket${o}`,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}getBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield va(this.fetch,`${this.url}/bucket/${n}`,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}createBucket(n){return Ne(this,arguments,void 0,function*(o,c={public:!1}){try{return{data:yield Ln(this.fetch,`${this.url}/bucket`,{id:o,name:o,type:c.type,public:c.public,file_size_limit:c.fileSizeLimit,allowed_mime_types:c.allowedMimeTypes},{headers:this.headers}),error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(Bt(g))return{data:null,error:g};throw g}})}updateBucket(n,o){return Ne(this,void 0,void 0,function*(){try{return{data:yield fd(this.fetch,`${this.url}/bucket/${n}`,{id:n,name:n,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Bt(c))return{data:null,error:c};throw c}})}emptyBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket/${n}/empty`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}deleteBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}listBucketOptionsToQueryString(n){const o={};return n&&("limit"in n&&(o.limit=String(n.limit)),"offset"in n&&(o.offset=String(n.offset)),n.search&&(o.search=n.search),n.sortColumn&&(o.sortColumn=n.sortColumn),n.sortOrder&&(o.sortOrder=n.sortOrder)),Object.keys(o).length>0?"?"+new URLSearchParams(o).toString():""}}var Ea=class extends Error{constructor(l,n){var o;super(l),this.name="IcebergError",this.status=n.status,this.icebergType=n.icebergType,this.icebergCode=n.icebergCode,this.details=n.details,this.isCommitStateUnknown=n.icebergType==="CommitStateUnknownException"||[500,502,504].includes(n.status)&&((o=n.icebergType)==null?void 0:o.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ox(l,n,o){const c=new URL(n,l);if(o)for(const[g,f]of Object.entries(o))f!==void 0&&c.searchParams.set(g,f);return c.toString()}async function kx(l){return!l||l.type==="none"?{}:l.type==="bearer"?{Authorization:`Bearer ${l.token}`}:l.type==="header"?{[l.name]:l.value}:l.type==="custom"?await l.getHeaders():{}}function Dx(l){const n=l.fetchImpl??globalThis.fetch;return{async request({method:o,path:c,query:g,body:f,headers:x}){const C=Ox(l.baseUrl,c,g),A=await kx(l.auth),E=await n(C,{method:o,headers:{...f?{"Content-Type":"application/json"}:{},...A,...x},body:f?JSON.stringify(f):void 0}),S=await E.text(),N=(E.headers.get("content-type")||"").includes("application/json"),D=N&&S?JSON.parse(S):S;if(!E.ok){const P=N?D:void 0,U=P==null?void 0:P.error;throw new Ea((U==null?void 0:U.message)??`Request failed with status ${E.status}`,{status:E.status,icebergType:U==null?void 0:U.type,icebergCode:U==null?void 0:U.code,details:P})}return{status:E.status,headers:E.headers,data:D}}}}function Gl(l){return l.join("")}var Px=class{constructor(l,n=""){this.client=l,this.prefix=n}async listNamespaces(l){const n=l?{parent:Gl(l.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:n})).data.namespaces.map(c=>({namespace:c}))}async createNamespace(l,n){const o={namespace:l.namespace,properties:n==null?void 0:n.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:o})).data}async dropNamespace(l){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Gl(l.namespace)}`})}async loadNamespaceMetadata(l){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Gl(l.namespace)}`})).data.properties}}async namespaceExists(l){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Gl(l.namespace)}`}),!0}catch(n){if(n instanceof Ea&&n.status===404)return!1;throw n}}async createNamespaceIfNotExists(l,n){try{return await this.createNamespace(l,n)}catch(o){if(o instanceof Ea&&o.status===409)return;throw o}}};function oo(l){return l.join("")}var Mx=class{constructor(l,n="",o){this.client=l,this.prefix=n,this.accessDelegation=o}async listTables(l){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oo(l.namespace)}/tables`})).data.identifiers}async createTable(l,n){const o={};return this.accessDelegation&&(o["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oo(l.namespace)}/tables`,body:n,headers:o})).data.metadata}async updateTable(l,n){const o=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oo(l.namespace)}/tables/${l.name}`,body:n});return{"metadata-location":o.data["metadata-location"],metadata:o.data.metadata}}async dropTable(l,n){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oo(l.namespace)}/tables/${l.name}`,query:{purgeRequested:String((n==null?void 0:n.purge)??!1)}})}async loadTable(l){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oo(l.namespace)}/tables/${l.name}`,headers:n})).data.metadata}async tableExists(l){const n={};this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oo(l.namespace)}/tables/${l.name}`,headers:n}),!0}catch(o){if(o instanceof Ea&&o.status===404)return!1;throw o}}async createTableIfNotExists(l,n){try{return await this.createTable(l,n)}catch(o){if(o instanceof Ea&&o.status===409)return await this.loadTable({namespace:l.namespace,name:n.name});throw o}}},Lx=class{constructor(l){var c;let n="v1";l.catalogName&&(n+=`/${l.catalogName}`);const o=l.baseUrl.endsWith("/")?l.baseUrl:`${l.baseUrl}/`;this.client=Dx({baseUrl:o,auth:l.auth,fetchImpl:l.fetch}),this.accessDelegation=(c=l.accessDelegation)==null?void 0:c.join(","),this.namespaceOps=new Px(this.client,n),this.tableOps=new Mx(this.client,n,this.accessDelegation)}async listNamespaces(l){return this.namespaceOps.listNamespaces(l)}async createNamespace(l,n){return this.namespaceOps.createNamespace(l,n)}async dropNamespace(l){await this.namespaceOps.dropNamespace(l)}async loadNamespaceMetadata(l){return this.namespaceOps.loadNamespaceMetadata(l)}async listTables(l){return this.tableOps.listTables(l)}async createTable(l,n){return this.tableOps.createTable(l,n)}async updateTable(l,n){return this.tableOps.updateTable(l,n)}async dropTable(l,n){await this.tableOps.dropTable(l,n)}async loadTable(l){return this.tableOps.loadTable(l)}async namespaceExists(l){return this.namespaceOps.namespaceExists(l)}async tableExists(l){return this.tableOps.tableExists(l)}async createNamespaceIfNotExists(l,n){return this.namespaceOps.createNamespaceIfNotExists(l,n)}async createTableIfNotExists(l,n){return this.tableOps.createTableIfNotExists(l,n)}};class G1{constructor(n,o={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},z1),o),this.fetch=Rd(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield Ln(this.fetch,`${this.url}/bucket`,{name:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}listBuckets(n){return Ne(this,void 0,void 0,function*(){try{const o=new URLSearchParams;(n==null?void 0:n.limit)!==void 0&&o.set("limit",n.limit.toString()),(n==null?void 0:n.offset)!==void 0&&o.set("offset",n.offset.toString()),n!=null&&n.sortColumn&&o.set("sortColumn",n.sortColumn),n!=null&&n.sortOrder&&o.set("sortOrder",n.sortOrder),n!=null&&n.search&&o.set("search",n.search);const c=o.toString(),g=c?`${this.url}/bucket?${c}`:`${this.url}/bucket`;return{data:yield va(this.fetch,g,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}deleteBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield Od(this.fetch,`${this.url}/bucket/${n}`,{},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Bt(o))return{data:null,error:o};throw o}})}from(n){if(!_x(n))throw new Sa("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new Lx({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:()=>Ne(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const kd={"X-Client-Info":`storage-js/${H1}`,"Content-Type":"application/json"};class Dd extends Error{constructor(n){super(n),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Yr(l){return typeof l=="object"&&l!==null&&"__isStorageVectorsError"in l}class ql extends Dd{constructor(n,o,c){super(n),this.name="StorageVectorsApiError",this.status=o,this.statusCode=c}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class $1 extends Dd{constructor(n,o){super(n),this.name="StorageVectorsUnknownError",this.originalError=o}}var gd;(function(l){l.InternalError="InternalError",l.S3VectorConflictException="S3VectorConflictException",l.S3VectorNotFoundException="S3VectorNotFoundException",l.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",l.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",l.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(gd||(gd={}));const mu=l=>l?(...n)=>l(...n):(...n)=>fetch(...n),Bx=()=>Response,X1=l=>{if(typeof l!="object"||l===null)return!1;const n=Object.getPrototypeOf(l);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in l)&&!(Symbol.iterator in l)},jx=l=>Array.from(new Float32Array(l)),Fx=(l,n)=>{if(n!==void 0&&l.float32.length!==n)throw new Error(`Vector dimension mismatch: expected ${n}, got ${l.float32.length}`)},r0=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Ux=(l,n,o)=>Ne(void 0,void 0,void 0,function*(){if(l&&typeof l=="object"&&"status"in l&&"ok"in l&&typeof l.status=="number"&&!(o!=null&&o.noResolveJson)){const g=l.status||500,f=l;if(typeof f.json=="function")f.json().then(x=>{const C=(x==null?void 0:x.statusCode)||(x==null?void 0:x.code)||g+"";n(new ql(r0(x),g,C))}).catch(()=>{const x=g+"",C=f.statusText||`HTTP ${g} error`;n(new ql(C,g,x))});else{const x=g+"",C=f.statusText||`HTTP ${g} error`;n(new ql(C,g,x))}}else n(new $1(r0(l),l))}),Vx=(l,n,o,c)=>{const g={method:l,headers:(n==null?void 0:n.headers)||{}};return c?(X1(c)?(g.headers=Object.assign({"Content-Type":"application/json"},n==null?void 0:n.headers),g.body=JSON.stringify(c)):g.body=c,Object.assign(Object.assign({},g),o)):g};function Wx(l,n,o,c,g,f){return Ne(this,void 0,void 0,function*(){return new Promise((x,C)=>{l(o,Vx(n,c,g,f)).then(A=>{if(!A.ok)throw A;if(c!=null&&c.noResolveJson)return A;const E=A.headers.get("content-type");return!E||!E.includes("application/json")?{}:A.json()}).then(A=>x(A)).catch(A=>Ux(A,C,c))})})}function dn(l,n,o,c,g){return Ne(this,void 0,void 0,function*(){return Wx(l,"POST",n,c,g,o)})}class K1{constructor(n,o={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kd),o),this.fetch=mu(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(n){return Ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/CreateIndex`,n,{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}getIndex(n,o){return Ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:n,indexName:o},{headers:this.headers}),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Yr(c))return{data:null,error:c};throw c}})}listIndexes(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/ListIndexes`,n,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}deleteIndex(n,o){return Ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:n,indexName:o},{headers:this.headers}))||{},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Yr(c))return{data:null,error:c};throw c}})}}class q1{constructor(n,o={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kd),o),this.fetch=mu(c)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(n){return Ne(this,void 0,void 0,function*(){try{if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield dn(this.fetch,`${this.url}/PutVectors`,n,{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}getVectors(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/GetVectors`,n,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}listVectors(n){return Ne(this,void 0,void 0,function*(){try{if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return{data:yield dn(this.fetch,`${this.url}/ListVectors`,n,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}queryVectors(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/QueryVectors`,n,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}deleteVectors(n){return Ne(this,void 0,void 0,function*(){try{if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield dn(this.fetch,`${this.url}/DeleteVectors`,n,{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}}class Y1{constructor(n,o={},c){this.shouldThrowOnError=!1,this.url=n.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},kd),o),this.fetch=mu(c)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}getBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:yield dn(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}listBuckets(){return Ne(this,arguments,void 0,function*(n={}){try{return{data:yield dn(this.fetch,`${this.url}/ListVectorBuckets`,n,{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}deleteBucket(n){return Ne(this,void 0,void 0,function*(){try{return{data:(yield dn(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Yr(o))return{data:null,error:o};throw o}})}}class Z1 extends Y1{constructor(n,o={}){super(n,o.headers||{},o.fetch)}from(n){return new Q1(this.url,this.headers,n,this.fetch)}createBucket(n){const o=Object.create(null,{createBucket:{get:()=>super.createBucket}});return Ne(this,void 0,void 0,function*(){return o.createBucket.call(this,n)})}getBucket(n){const o=Object.create(null,{getBucket:{get:()=>super.getBucket}});return Ne(this,void 0,void 0,function*(){return o.getBucket.call(this,n)})}listBuckets(){const n=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return Ne(this,arguments,void 0,function*(o={}){return n.listBuckets.call(this,o)})}deleteBucket(n){const o=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return Ne(this,void 0,void 0,function*(){return o.deleteBucket.call(this,n)})}}class Q1 extends K1{constructor(n,o,c,g){super(n,o,g),this.vectorBucketName=c}createIndex(n){const o=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ne(this,void 0,void 0,function*(){return o.createIndex.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const n=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ne(this,arguments,void 0,function*(o={}){return n.listIndexes.call(this,Object.assign(Object.assign({},o),{vectorBucketName:this.vectorBucketName}))})}getIndex(n){const o=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ne(this,void 0,void 0,function*(){return o.getIndex.call(this,this.vectorBucketName,n)})}deleteIndex(n){const o=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ne(this,void 0,void 0,function*(){return o.deleteIndex.call(this,this.vectorBucketName,n)})}index(n){return new J1(this.url,this.headers,this.vectorBucketName,n,this.fetch)}}class J1 extends q1{constructor(n,o,c,g,f){super(n,o,f),this.vectorBucketName=c,this.indexName=g}putVectors(n){const o=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ne(this,void 0,void 0,function*(){return o.putVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(n){const o=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ne(this,void 0,void 0,function*(){return o.getVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const n=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ne(this,arguments,void 0,function*(o={}){return n.listVectors.call(this,Object.assign(Object.assign({},o),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(n){const o=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ne(this,void 0,void 0,function*(){return o.queryVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(n){const o=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ne(this,void 0,void 0,function*(){return o.deleteVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Hx extends Rx{constructor(n,o={},c,g){super(n,o,c,g)}from(n){return new Nx(this.url,this.headers,n,this.fetch)}get vectors(){return new Z1(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new G1(this.url+"/iceberg",this.headers,this.fetch)}}const zx=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:G1,StorageApiError:V1,StorageClient:Hx,StorageError:Sa,StorageUnknownError:ru,StorageVectorsApiError:ql,StorageVectorsClient:Z1,StorageVectorsError:Dd,get StorageVectorsErrorCode(){return gd},StorageVectorsUnknownError:$1,VectorBucketApi:Y1,VectorBucketScope:Q1,VectorDataApi:q1,VectorIndexApi:K1,VectorIndexScope:J1,isPlainObject:X1,isStorageError:Bt,isStorageVectorsError:Yr,normalizeToFloat32:jx,resolveFetch:mu,resolveResponse:Bx,validateVectorDimension:Fx},Symbol.toStringTag,{value:"Module"})),Gx=_a(zx);var qc={},ha={},n0;function $x(){return n0||(n0=1,Object.defineProperty(ha,"__esModule",{value:!0}),ha.version=void 0,ha.version="2.86.2"),ha}var i0;function Xx(){return i0||(i0=1,(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.DEFAULT_REALTIME_OPTIONS=l.DEFAULT_AUTH_OPTIONS=l.DEFAULT_DB_OPTIONS=l.DEFAULT_GLOBAL_OPTIONS=l.DEFAULT_HEADERS=void 0;const n=$x();let o="";typeof Deno<"u"?o="deno":typeof document<"u"?o="web":typeof navigator<"u"&&navigator.product==="ReactNative"?o="react-native":o="node",l.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${o}/${n.version}`},l.DEFAULT_GLOBAL_OPTIONS={headers:l.DEFAULT_HEADERS},l.DEFAULT_DB_OPTIONS={schema:"public"},l.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},l.DEFAULT_REALTIME_OPTIONS={}})(qc)),qc}var Yc={},s0;function Kx(){return s0||(s0=1,(function(l){Object.defineProperty(l,"__esModule",{value:!0}),l.fetchWithAuth=l.resolveHeadersConstructor=l.resolveFetch=void 0;const n=g=>g?(...f)=>g(...f):(...f)=>fetch(...f);l.resolveFetch=n;const o=()=>Headers;l.resolveHeadersConstructor=o;const c=(g,f,x)=>{const C=(0,l.resolveFetch)(x),A=(0,l.resolveHeadersConstructor)();return async(E,S)=>{var N;const D=(N=await f())!==null&&N!==void 0?N:g;let P=new A(S==null?void 0:S.headers);return P.has("apikey")||P.set("apikey",g),P.has("Authorization")||P.set("Authorization",`Bearer ${D}`),C(E,Object.assign(Object.assign({},S),{headers:P}))}};l.fetchWithAuth=c})(Yc)),Yc}var hi={},o0;function qx(){if(o0)return hi;o0=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.isBrowser=void 0,hi.uuid=l,hi.ensureTrailingSlash=n,hi.applySettingDefaults=c,hi.validateSupabaseUrl=g;function l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(f){var x=Math.random()*16|0,C=f=="x"?x:x&3|8;return C.toString(16)})}function n(f){return f.endsWith("/")?f:f+"/"}const o=()=>typeof window<"u";hi.isBrowser=o;function c(f,x){var C,A;const{db:E,auth:S,realtime:N,global:D}=f,{db:P,auth:U,realtime:F,global:j}=x,K={db:Object.assign(Object.assign({},P),E),auth:Object.assign(Object.assign({},U),S),realtime:Object.assign(Object.assign({},F),N),storage:{},global:Object.assign(Object.assign(Object.assign({},j),D),{headers:Object.assign(Object.assign({},(C=j==null?void 0:j.headers)!==null&&C!==void 0?C:{}),(A=D==null?void 0:D.headers)!==null&&A!==void 0?A:{})}),accessToken:async()=>""};return f.accessToken?K.accessToken=f.accessToken:delete K.accessToken,K}function g(f){const x=f==null?void 0:f.trim();if(!x)throw new Error("supabaseUrl is required.");if(!x.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(n(x))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return hi}var fa={};const eg="2.86.2",ho=30*1e3,pd=3,Zc=pd*ho,Yx="http://localhost:9999",Zx="supabase.auth.token",Qx={"X-Client-Info":`gotrue-js/${eg}`},md="X-Supabase-Api-Version",tg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Jx=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ew=600*1e3;let wo=class extends Error{constructor(n,o,c){super(n),this.__isAuthError=!0,this.name="AuthError",this.status=o,this.code=c}};function Pe(l){return typeof l=="object"&&l!==null&&"__isAuthError"in l}let rg=class extends wo{constructor(n,o,c){super(n,o,c),this.name="AuthApiError",this.status=o,this.code=c}};function ng(l){return Pe(l)&&l.name==="AuthApiError"}let $i=class extends wo{constructor(n,o){super(n),this.name="AuthUnknownError",this.originalError=o}},xi=class extends wo{constructor(n,o,c,g){super(n,c,g),this.name=o,this.status=c}},Kr=class extends xi{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function ig(l){return Pe(l)&&l.name==="AuthSessionMissingError"}let As=class extends xi{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ma=class extends xi{constructor(n){super(n,"AuthInvalidCredentialsError",400,void 0)}},xa=class extends xi{constructor(n,o=null){super(n,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function sg(l){return Pe(l)&&l.name==="AuthImplicitGrantRedirectError"}let xd=class extends xi{constructor(n,o=null){super(n,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=o}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},nu=class extends xi{constructor(n,o){super(n,"AuthRetryableFetchError",o,void 0)}};function Yl(l){return Pe(l)&&l.name==="AuthRetryableFetchError"}let wd=class extends xi{constructor(n,o,c){super(n,"AuthWeakPasswordError",o,"weak_password"),this.reasons=c}};function tw(l){return Pe(l)&&l.name==="AuthWeakPasswordError"}let iu=class extends xi{constructor(n){super(n,"AuthInvalidJwtError",400,"invalid_jwt")}};const su="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),a0=` 	
\r=`.split(""),rw=(()=>{const l=new Array(128);for(let n=0;n<l.length;n+=1)l[n]=-1;for(let n=0;n<a0.length;n+=1)l[a0[n].charCodeAt(0)]=-2;for(let n=0;n<su.length;n+=1)l[su[n].charCodeAt(0)]=n;return l})();function l0(l,n,o){if(l!==null)for(n.queue=n.queue<<8|l,n.queuedBits+=8;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;o(su[c]),n.queuedBits-=6}else if(n.queuedBits>0)for(n.queue=n.queue<<6-n.queuedBits,n.queuedBits=6;n.queuedBits>=6;){const c=n.queue>>n.queuedBits-6&63;o(su[c]),n.queuedBits-=6}}function og(l,n,o){const c=rw[l];if(c>-1)for(n.queue=n.queue<<6|c,n.queuedBits+=6;n.queuedBits>=8;)o(n.queue>>n.queuedBits-8&255),n.queuedBits-=8;else{if(c===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(l)}"`)}}function u0(l){const n=[],o=x=>{n.push(String.fromCodePoint(x))},c={utf8seq:0,codepoint:0},g={queue:0,queuedBits:0},f=x=>{sw(x,c,o)};for(let x=0;x<l.length;x+=1)og(l.charCodeAt(x),g,f);return n.join("")}function nw(l,n){if(l<=127){n(l);return}else if(l<=2047){n(192|l>>6),n(128|l&63);return}else if(l<=65535){n(224|l>>12),n(128|l>>6&63),n(128|l&63);return}else if(l<=1114111){n(240|l>>18),n(128|l>>12&63),n(128|l>>6&63),n(128|l&63);return}throw new Error(`Unrecognized Unicode codepoint: ${l.toString(16)}`)}function iw(l,n){for(let o=0;o<l.length;o+=1){let c=l.charCodeAt(o);if(c>55295&&c<=56319){const g=(c-55296)*1024&65535;c=(l.charCodeAt(o+1)-56320&65535|g)+65536,o+=1}nw(c,n)}}function sw(l,n,o){if(n.utf8seq===0){if(l<=127){o(l);return}for(let c=1;c<6;c+=1)if((l>>7-c&1)===0){n.utf8seq=c;break}if(n.utf8seq===2)n.codepoint=l&31;else if(n.utf8seq===3)n.codepoint=l&15;else if(n.utf8seq===4)n.codepoint=l&7;else throw new Error("Invalid UTF-8 sequence");n.utf8seq-=1}else if(n.utf8seq>0){if(l<=127)throw new Error("Invalid UTF-8 sequence");n.codepoint=n.codepoint<<6|l&63,n.utf8seq-=1,n.utf8seq===0&&o(n.codepoint)}}function mo(l){const n=[],o={queue:0,queuedBits:0},c=g=>{n.push(g)};for(let g=0;g<l.length;g+=1)og(l.charCodeAt(g),o,c);return new Uint8Array(n)}function ow(l){const n=[];return iw(l,o=>n.push(o)),new Uint8Array(n)}function Ns(l){const n=[],o={queue:0,queuedBits:0},c=g=>{n.push(g)};return l.forEach(g=>l0(g,o,c)),l0(null,o,c),n.join("")}function aw(l){return Math.round(Date.now()/1e3)+l}function lw(){return Symbol("auth-callback")}const br=()=>typeof window<"u"&&typeof document<"u",_s={tested:!1,writable:!1},ag=()=>{if(!br())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(_s.tested)return _s.writable;const l=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(l,l),globalThis.localStorage.removeItem(l),_s.tested=!0,_s.writable=!0}catch{_s.tested=!0,_s.writable=!1}return _s.writable};function uw(l){const n={},o=new URL(l);if(o.hash&&o.hash[0]==="#")try{new URLSearchParams(o.hash.substring(1)).forEach((g,f)=>{n[f]=g})}catch{}return o.searchParams.forEach((c,g)=>{n[g]=c}),n}const lg=l=>l?(...n)=>l(...n):(...n)=>fetch(...n),cw=l=>typeof l=="object"&&l!==null&&"status"in l&&"ok"in l&&"json"in l&&typeof l.json=="function",fo=async(l,n,o)=>{await l.setItem(n,JSON.stringify(o))},Cs=async(l,n)=>{const o=await l.getItem(n);if(!o)return null;try{return JSON.parse(o)}catch{return o}},Ar=async(l,n)=>{await l.removeItem(n)};class xu{constructor(){this.promise=new xu.promiseConstructor((n,o)=>{this.resolve=n,this.reject=o})}}xu.promiseConstructor=Promise;function Qc(l){const n=l.split(".");if(n.length!==3)throw new iu("Invalid JWT structure");for(let c=0;c<n.length;c++)if(!Jx.test(n[c]))throw new iu("JWT not in base64url format");return{header:JSON.parse(u0(n[0])),payload:JSON.parse(u0(n[1])),signature:mo(n[2]),raw:{header:n[0],payload:n[1]}}}async function dw(l){return await new Promise(n=>{setTimeout(()=>n(null),l)})}function hw(l,n){return new Promise((c,g)=>{(async()=>{for(let f=0;f<1/0;f++)try{const x=await l(f);if(!n(f,null,x)){c(x);return}}catch(x){if(!n(f,x)){g(x);return}}})()})}function fw(l){return("0"+l.toString(16)).substr(-2)}function gw(){const n=new Uint32Array(56);if(typeof crypto>"u"){const o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",c=o.length;let g="";for(let f=0;f<56;f++)g+=o.charAt(Math.floor(Math.random()*c));return g}return crypto.getRandomValues(n),Array.from(n,fw).join("")}async function pw(l){const o=new TextEncoder().encode(l),c=await crypto.subtle.digest("SHA-256",o),g=new Uint8Array(c);return Array.from(g).map(f=>String.fromCharCode(f)).join("")}async function mw(l){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),l;const o=await pw(l);return btoa(o).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ao(l,n,o=!1){const c=gw();let g=c;o&&(g+="/PASSWORD_RECOVERY"),await fo(l,`${n}-code-verifier`,g);const f=await mw(c);return[f,c===f?"plain":"s256"]}const xw=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ww(l){const n=l.headers.get(md);if(!n||!n.match(xw))return null;try{return new Date(`${n}T00:00:00.0Z`)}catch{return null}}function yw(l){if(!l)throw new Error("Missing exp claim");const n=Math.floor(Date.now()/1e3);if(l<=n)throw new Error("JWT has expired")}function vw(l){switch(l){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Ew=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function lo(l){if(!Ew.test(l))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Jc(){const l={};return new Proxy(l,{get:(n,o)=>{if(o==="__isUserNotAvailableProxy")return!0;if(typeof o=="symbol"){const c=o.toString();if(c==="Symbol(Symbol.toPrimitive)"||c==="Symbol(Symbol.toStringTag)"||c==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${o}" property of the session object is not supported. Please use getUser() instead.`)},set:(n,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(n,o)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${o}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _w(l,n){return new Proxy(l,{get:(o,c,g)=>{if(c==="__isInsecureUserWarningProxy")return!0;if(typeof c=="symbol"){const f=c.toString();if(f==="Symbol(Symbol.toPrimitive)"||f==="Symbol(Symbol.toStringTag)"||f==="Symbol(util.inspect.custom)"||f==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(o,c,g)}return!n.value&&typeof c=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),n.value=!0),Reflect.get(o,c,g)}})}function c0(l){return JSON.parse(JSON.stringify(l))}const bs=l=>l.msg||l.message||l.error_description||l.error||JSON.stringify(l),Cw=[502,503,504];async function d0(l){var n;if(!cw(l))throw new nu(bs(l),0);if(Cw.includes(l.status))throw new nu(bs(l),l.status);let o;try{o=await l.json()}catch(f){throw new $i(bs(f),f)}let c;const g=ww(l);if(g&&g.getTime()>=tg["2024-01-01"].timestamp&&typeof o=="object"&&o&&typeof o.code=="string"?c=o.code:typeof o=="object"&&o&&typeof o.error_code=="string"&&(c=o.error_code),c){if(c==="weak_password")throw new wd(bs(o),l.status,((n=o.weak_password)===null||n===void 0?void 0:n.reasons)||[]);if(c==="session_not_found")throw new Kr}else if(typeof o=="object"&&o&&typeof o.weak_password=="object"&&o.weak_password&&Array.isArray(o.weak_password.reasons)&&o.weak_password.reasons.length&&o.weak_password.reasons.reduce((f,x)=>f&&typeof x=="string",!0))throw new wd(bs(o),l.status,o.weak_password.reasons);throw new rg(bs(o),l.status||500,c)}const Aw=(l,n,o,c)=>{const g={method:l,headers:(n==null?void 0:n.headers)||{}};return l==="GET"?g:(g.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},n==null?void 0:n.headers),g.body=JSON.stringify(c),Object.assign(Object.assign({},g),o))};async function Ge(l,n,o,c){var g;const f=Object.assign({},c==null?void 0:c.headers);f[md]||(f[md]=tg["2024-01-01"].name),c!=null&&c.jwt&&(f.Authorization=`Bearer ${c.jwt}`);const x=(g=c==null?void 0:c.query)!==null&&g!==void 0?g:{};c!=null&&c.redirectTo&&(x.redirect_to=c.redirectTo);const C=Object.keys(x).length?"?"+new URLSearchParams(x).toString():"",A=await bw(l,n,o+C,{headers:f,noResolveJson:c==null?void 0:c.noResolveJson},{},c==null?void 0:c.body);return c!=null&&c.xform?c==null?void 0:c.xform(A):{data:Object.assign({},A),error:null}}async function bw(l,n,o,c,g,f){const x=Aw(n,c,g,f);let C;try{C=await l(o,Object.assign({},x))}catch(A){throw console.error(A),new nu(bs(A),0)}if(C.ok||await d0(C),c!=null&&c.noResolveJson)return C;try{return await C.json()}catch(A){await d0(A)}}function Mn(l){var n;let o=null;Tw(l)&&(o=Object.assign({},l),l.expires_at||(o.expires_at=aw(l.expires_in)));const c=(n=l.user)!==null&&n!==void 0?n:l;return{data:{session:o,user:c},error:null}}function h0(l){const n=Mn(l);return!n.error&&l.weak_password&&typeof l.weak_password=="object"&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.message&&typeof l.weak_password.message=="string"&&l.weak_password.reasons.reduce((o,c)=>o&&typeof c=="string",!0)&&(n.data.weak_password=l.weak_password),n}function Xi(l){var n;return{data:{user:(n=l.user)!==null&&n!==void 0?n:l},error:null}}function Sw(l){return{data:l,error:null}}function Iw(l){const{action_link:n,email_otp:o,hashed_token:c,redirect_to:g,verification_type:f}=l,x=vo(l,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),C={action_link:n,email_otp:o,hashed_token:c,redirect_to:g,verification_type:f},A=Object.assign({},x);return{data:{properties:C,user:A},error:null}}function f0(l){return l}function Tw(l){return l.access_token&&l.refresh_token&&l.expires_in}const Zl=["global","local","others"];let Pd=class{constructor({url:n="",headers:o={},fetch:c}){this.url=n,this.headers=o,this.fetch=lg(c),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(n,o=Zl[0]){if(Zl.indexOf(o)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Zl.join(", ")}`);try{return await Ge(this.fetch,"POST",`${this.url}/logout?scope=${o}`,{headers:this.headers,jwt:n,noResolveJson:!0}),{data:null,error:null}}catch(c){if(Pe(c))return{data:null,error:c};throw c}}async inviteUserByEmail(n,o={}){try{return await Ge(this.fetch,"POST",`${this.url}/invite`,{body:{email:n,data:o.data},headers:this.headers,redirectTo:o.redirectTo,xform:Xi})}catch(c){if(Pe(c))return{data:{user:null},error:c};throw c}}async generateLink(n){try{const{options:o}=n,c=vo(n,["options"]),g=Object.assign(Object.assign({},c),o);return"newEmail"in c&&(g.new_email=c==null?void 0:c.newEmail,delete g.newEmail),await Ge(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:g,headers:this.headers,xform:Iw,redirectTo:o==null?void 0:o.redirectTo})}catch(o){if(Pe(o))return{data:{properties:null,user:null},error:o};throw o}}async createUser(n){try{return await Ge(this.fetch,"POST",`${this.url}/admin/users`,{body:n,headers:this.headers,xform:Xi})}catch(o){if(Pe(o))return{data:{user:null},error:o};throw o}}async listUsers(n){var o,c,g,f,x,C,A;try{const E={nextPage:null,lastPage:0,total:0},S=await Ge(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(o=n==null?void 0:n.page)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:"",per_page:(f=(g=n==null?void 0:n.perPage)===null||g===void 0?void 0:g.toString())!==null&&f!==void 0?f:""},xform:f0});if(S.error)throw S.error;const N=await S.json(),D=(x=S.headers.get("x-total-count"))!==null&&x!==void 0?x:0,P=(A=(C=S.headers.get("link"))===null||C===void 0?void 0:C.split(","))!==null&&A!==void 0?A:[];return P.length>0&&(P.forEach(U=>{const F=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(U.split(";")[1].split("=")[1]);E[`${j}Page`]=F}),E.total=parseInt(D)),{data:Object.assign(Object.assign({},N),E),error:null}}catch(E){if(Pe(E))return{data:{users:[]},error:E};throw E}}async getUserById(n){lo(n);try{return await Ge(this.fetch,"GET",`${this.url}/admin/users/${n}`,{headers:this.headers,xform:Xi})}catch(o){if(Pe(o))return{data:{user:null},error:o};throw o}}async updateUserById(n,o){lo(n);try{return await Ge(this.fetch,"PUT",`${this.url}/admin/users/${n}`,{body:o,headers:this.headers,xform:Xi})}catch(c){if(Pe(c))return{data:{user:null},error:c};throw c}}async deleteUser(n,o=!1){lo(n);try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${n}`,{headers:this.headers,body:{should_soft_delete:o},xform:Xi})}catch(c){if(Pe(c))return{data:{user:null},error:c};throw c}}async _listFactors(n){lo(n.userId);try{const{data:o,error:c}=await Ge(this.fetch,"GET",`${this.url}/admin/users/${n.userId}/factors`,{headers:this.headers,xform:g=>({data:{factors:g},error:null})});return{data:o,error:c}}catch(o){if(Pe(o))return{data:null,error:o};throw o}}async _deleteFactor(n){lo(n.userId),lo(n.id);try{return{data:await Ge(this.fetch,"DELETE",`${this.url}/admin/users/${n.userId}/factors/${n.id}`,{headers:this.headers}),error:null}}catch(o){if(Pe(o))return{data:null,error:o};throw o}}async _listOAuthClients(n){var o,c,g,f,x,C,A;try{const E={nextPage:null,lastPage:0,total:0},S=await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(c=(o=n==null?void 0:n.page)===null||o===void 0?void 0:o.toString())!==null&&c!==void 0?c:"",per_page:(f=(g=n==null?void 0:n.perPage)===null||g===void 0?void 0:g.toString())!==null&&f!==void 0?f:""},xform:f0});if(S.error)throw S.error;const N=await S.json(),D=(x=S.headers.get("x-total-count"))!==null&&x!==void 0?x:0,P=(A=(C=S.headers.get("link"))===null||C===void 0?void 0:C.split(","))!==null&&A!==void 0?A:[];return P.length>0&&(P.forEach(U=>{const F=parseInt(U.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(U.split(";")[1].split("=")[1]);E[`${j}Page`]=F}),E.total=parseInt(D)),{data:Object.assign(Object.assign({},N),E),error:null}}catch(E){if(Pe(E))return{data:{clients:[]},error:E};throw E}}async _createOAuthClient(n){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Pe(o))return{data:null,error:o};throw o}}async _getOAuthClient(n){try{return await Ge(this.fetch,"GET",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Pe(o))return{data:null,error:o};throw o}}async _updateOAuthClient(n,o){try{return await Ge(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${n}`,{body:o,headers:this.headers,xform:c=>({data:c,error:null})})}catch(c){if(Pe(c))return{data:null,error:c};throw c}}async _deleteOAuthClient(n){try{return await Ge(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${n}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(o){if(Pe(o))return{data:null,error:o};throw o}}async _regenerateOAuthClientSecret(n){try{return await Ge(this.fetch,"POST",`${this.url}/admin/oauth/clients/${n}/regenerate_secret`,{headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(Pe(o))return{data:null,error:o};throw o}}};function g0(l={}){return{getItem:n=>l[n]||null,setItem:(n,o)=>{l[n]=o},removeItem:n=>{delete l[n]}}}const Ss={debug:!!(globalThis&&ag()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Md extends Error{constructor(n){super(n),this.isAcquireTimeout=!0}}let ug=class extends Md{};class Nw extends Md{}async function cg(l,n,o){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",l,n);const c=new globalThis.AbortController;return n>0&&setTimeout(()=>{c.abort(),Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",l)},n),await Promise.resolve().then(()=>globalThis.navigator.locks.request(l,n===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:c.signal},async g=>{if(g){Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",l,g.name);try{return await o()}finally{Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",l,g.name)}}else{if(n===0)throw Ss.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",l),new ug(`Acquiring an exclusive Navigator LockManager lock "${l}" immediately failed`);if(Ss.debug)try{const f=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(f,null,"  "))}catch(f){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",f)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await o()}}))}const p0={};async function Rw(l,n,o){var c;const g=(c=p0[l])!==null&&c!==void 0?c:Promise.resolve(),f=Promise.race([g.catch(()=>null),n>=0?new Promise((x,C)=>{setTimeout(()=>{C(new Nw(`Acquring process lock with name "${l}" timed out`))},n)}):null].filter(x=>x)).catch(x=>{if(x&&x.isAcquireTimeout)throw x;return null}).then(async()=>await o());return p0[l]=f.catch(async x=>{if(x&&x.isAcquireTimeout)return await g,null;throw x}),await f}function Ow(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function dg(l){if(!/^0x[a-fA-F0-9]{40}$/.test(l))throw new Error(`@supabase/auth-js: Address "${l}" is invalid.`);return l.toLowerCase()}function kw(l){return parseInt(l,16)}function Dw(l){const n=new TextEncoder().encode(l);return"0x"+Array.from(n,c=>c.toString(16).padStart(2,"0")).join("")}function Pw(l){var n;const{chainId:o,domain:c,expirationTime:g,issuedAt:f=new Date,nonce:x,notBefore:C,requestId:A,resources:E,scheme:S,uri:N,version:D}=l;{if(!Number.isInteger(o))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${o}`);if(!c)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(x&&x.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${x}`);if(!N)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(D!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${D}`);if(!((n=l.statement)===null||n===void 0)&&n.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${l.statement}`)}const P=dg(l.address),U=S?`${S}://${c}`:c,F=l.statement?`${l.statement}
`:"",j=`${U} wants you to sign in with your Ethereum account:
${P}

${F}`;let K=`URI: ${N}
Version: ${D}
Chain ID: ${o}${x?`
Nonce: ${x}`:""}
Issued At: ${f.toISOString()}`;if(g&&(K+=`
Expiration Time: ${g.toISOString()}`),C&&(K+=`
Not Before: ${C.toISOString()}`),A&&(K+=`
Request ID: ${A}`),E){let J=`
Resources:`;for(const V of E){if(!V||typeof V!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${V}`);J+=`
- ${V}`}K+=J}return`${j}
${K}`}class rr extends Error{constructor({message:n,code:o,cause:c,name:g}){var f;super(n,{cause:c}),this.__isWebAuthnError=!0,this.name=(f=g??(c instanceof Error?c.name:void 0))!==null&&f!==void 0?f:"Unknown Error",this.code=o}}class ou extends rr{constructor(n,o){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:o,message:n}),this.name="WebAuthnUnknownError",this.originalError=o}}function Mw({error:l,options:n}){var o,c,g;const{publicKey:f}=n;if(!f)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new rr({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else if(l.name==="ConstraintError"){if(((o=f.authenticatorSelection)===null||o===void 0?void 0:o.requireResidentKey)===!0)return new rr({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:l});if(n.mediation==="conditional"&&((c=f.authenticatorSelection)===null||c===void 0?void 0:c.userVerification)==="required")return new rr({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:l});if(((g=f.authenticatorSelection)===null||g===void 0?void 0:g.userVerification)==="required")return new rr({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:l})}else{if(l.name==="InvalidStateError")return new rr({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:l});if(l.name==="NotAllowedError")return new rr({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="NotSupportedError")return f.pubKeyCredParams.filter(C=>C.type==="public-key").length===0?new rr({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:l}):new rr({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:l});if(l.name==="SecurityError"){const x=window.location.hostname;if(hg(x)){if(f.rp.id!==x)return new rr({message:`The RP ID "${f.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new rr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="TypeError"){if(f.user.id.byteLength<1||f.user.id.byteLength>64)return new rr({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:l})}else if(l.name==="UnknownError")return new rr({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new rr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}function Lw({error:l,options:n}){const{publicKey:o}=n;if(!o)throw Error("options was missing required publicKey property");if(l.name==="AbortError"){if(n.signal instanceof AbortSignal)return new rr({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:l})}else{if(l.name==="NotAllowedError")return new rr({message:l.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l});if(l.name==="SecurityError"){const c=window.location.hostname;if(hg(c)){if(o.rpId!==c)return new rr({message:`The RP ID "${o.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:l})}else return new rr({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:l})}else if(l.name==="UnknownError")return new rr({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:l})}return new rr({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l})}class Bw{createNewAbortSignal(){if(this.controller){const o=new Error("Cancelling existing WebAuthn API call for new one");o.name="AbortError",this.controller.abort(o)}const n=new AbortController;return this.controller=n,n.signal}cancelCeremony(){if(this.controller){const n=new Error("Manually cancelling existing WebAuthn API call");n.name="AbortError",this.controller.abort(n),this.controller=void 0}}}const jw=new Bw;function Fw(l){if(!l)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(l);const{challenge:n,user:o,excludeCredentials:c}=l,g=vo(l,["challenge","user","excludeCredentials"]),f=mo(n).buffer,x=Object.assign(Object.assign({},o),{id:mo(o.id).buffer}),C=Object.assign(Object.assign({},g),{challenge:f,user:x});if(c&&c.length>0){C.excludeCredentials=new Array(c.length);for(let A=0;A<c.length;A++){const E=c[A];C.excludeCredentials[A]=Object.assign(Object.assign({},E),{id:mo(E.id).buffer,type:E.type||"public-key",transports:E.transports})}}return C}function Uw(l){if(!l)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(l);const{challenge:n,allowCredentials:o}=l,c=vo(l,["challenge","allowCredentials"]),g=mo(n).buffer,f=Object.assign(Object.assign({},c),{challenge:g});if(o&&o.length>0){f.allowCredentials=new Array(o.length);for(let x=0;x<o.length;x++){const C=o[x];f.allowCredentials[x]=Object.assign(Object.assign({},C),{id:mo(C.id).buffer,type:C.type||"public-key",transports:C.transports})}}return f}function Vw(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const o=l;return{id:l.id,rawId:l.id,response:{attestationObject:Ns(new Uint8Array(l.response.attestationObject)),clientDataJSON:Ns(new Uint8Array(l.response.clientDataJSON))},type:"public-key",clientExtensionResults:l.getClientExtensionResults(),authenticatorAttachment:(n=o.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function Ww(l){var n;if("toJSON"in l&&typeof l.toJSON=="function")return l.toJSON();const o=l,c=l.getClientExtensionResults(),g=l.response;return{id:l.id,rawId:l.id,response:{authenticatorData:Ns(new Uint8Array(g.authenticatorData)),clientDataJSON:Ns(new Uint8Array(g.clientDataJSON)),signature:Ns(new Uint8Array(g.signature)),userHandle:g.userHandle?Ns(new Uint8Array(g.userHandle)):void 0},type:"public-key",clientExtensionResults:c,authenticatorAttachment:(n=o.authenticatorAttachment)!==null&&n!==void 0?n:void 0}}function hg(l){return l==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(l)}function m0(){var l,n;return!!(br()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((l=navigator==null?void 0:navigator.credentials)===null||l===void 0?void 0:l.create)=="function"&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.get)=="function")}async function Hw(l){try{const n=await navigator.credentials.create(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ou("Browser returned unexpected credential type",n)}:{data:null,error:new ou("Empty credential response",n)}}catch(n){return{data:null,error:Mw({error:n,options:l})}}}async function zw(l){try{const n=await navigator.credentials.get(l);return n?n instanceof PublicKeyCredential?{data:n,error:null}:{data:null,error:new ou("Browser returned unexpected credential type",n)}:{data:null,error:new ou("Empty credential response",n)}}catch(n){return{data:null,error:Lw({error:n,options:l})}}}const Gw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$w={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function au(...l){const n=g=>g!==null&&typeof g=="object"&&!Array.isArray(g),o=g=>g instanceof ArrayBuffer||ArrayBuffer.isView(g),c={};for(const g of l)if(g)for(const f in g){const x=g[f];if(x!==void 0)if(Array.isArray(x))c[f]=x;else if(o(x))c[f]=x;else if(n(x)){const C=c[f];n(C)?c[f]=au(C,x):c[f]=au(x)}else c[f]=x}return c}function Xw(l,n){return au(Gw,l,n||{})}function Kw(l,n){return au($w,l,n||{})}class qw{constructor(n){this.client=n,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(n){return this.client.mfa.enroll(Object.assign(Object.assign({},n),{factorType:"webauthn"}))}async _challenge({factorId:n,webauthn:o,friendlyName:c,signal:g},f){try{const{data:x,error:C}=await this.client.mfa.challenge({factorId:n,webauthn:o});if(!x)return{data:null,error:C};const A=g??jw.createNewAbortSignal();if(x.webauthn.type==="create"){const{user:E}=x.webauthn.credential_options.publicKey;E.name||(E.name=`${E.id}:${c}`),E.displayName||(E.displayName=E.name)}switch(x.webauthn.type){case"create":{const E=Xw(x.webauthn.credential_options.publicKey,f==null?void 0:f.create),{data:S,error:N}=await Hw({publicKey:E,signal:A});return S?{data:{factorId:n,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:S}},error:null}:{data:null,error:N}}case"request":{const E=Kw(x.webauthn.credential_options.publicKey,f==null?void 0:f.request),{data:S,error:N}=await zw(Object.assign(Object.assign({},x.webauthn.credential_options),{publicKey:E,signal:A}));return S?{data:{factorId:n,challengeId:x.id,webauthn:{type:x.webauthn.type,credential_response:S}},error:null}:{data:null,error:N}}}}catch(x){return Pe(x)?{data:null,error:x}:{data:null,error:new $i("Unexpected error in challenge",x)}}}async _verify({challengeId:n,factorId:o,webauthn:c}){return this.client.mfa.verify({factorId:o,challengeId:n,webauthn:c})}async _authenticate({factorId:n,webauthn:{rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:g}={}},f){if(!o)return{data:null,error:new wo("rpId is required for WebAuthn authentication")};try{if(!m0())return{data:null,error:new $i("Browser does not support WebAuthn",null)};const{data:x,error:C}=await this.challenge({factorId:n,webauthn:{rpId:o,rpOrigins:c},signal:g},{request:f});if(!x)return{data:null,error:C};const{webauthn:A}=x;return this._verify({factorId:n,challengeId:x.challengeId,webauthn:{type:A.type,rpId:o,rpOrigins:c,credential_response:A.credential_response}})}catch(x){return Pe(x)?{data:null,error:x}:{data:null,error:new $i("Unexpected error in authenticate",x)}}}async _register({friendlyName:n,webauthn:{rpId:o=typeof window<"u"?window.location.hostname:void 0,rpOrigins:c=typeof window<"u"?[window.location.origin]:void 0,signal:g}={}},f){if(!o)return{data:null,error:new wo("rpId is required for WebAuthn registration")};try{if(!m0())return{data:null,error:new $i("Browser does not support WebAuthn",null)};const{data:x,error:C}=await this._enroll({friendlyName:n});if(!x)return await this.client.mfa.listFactors().then(S=>{var N;return(N=S.data)===null||N===void 0?void 0:N.all.find(D=>D.factor_type==="webauthn"&&D.friendly_name===n&&D.status!=="unverified")}).then(S=>S?this.client.mfa.unenroll({factorId:S==null?void 0:S.id}):void 0),{data:null,error:C};const{data:A,error:E}=await this._challenge({factorId:x.id,friendlyName:x.friendly_name,webauthn:{rpId:o,rpOrigins:c},signal:g},{create:f});return A?this._verify({factorId:x.id,challengeId:A.challengeId,webauthn:{rpId:o,rpOrigins:c,type:A.webauthn.type,credential_response:A.webauthn.credential_response}}):{data:null,error:E}}catch(x){return Pe(x)?{data:null,error:x}:{data:null,error:new $i("Unexpected error in register",x)}}}}Ow();const Yw={url:Yx,storageKey:Zx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Qx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function x0(l,n,o){return await o()}const uo={};let Ld=class yd{get jwks(){var n,o;return(o=(n=uo[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&o!==void 0?o:{keys:[]}}set jwks(n){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,o;return(o=(n=uo[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&o!==void 0?o:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){uo[this.storageKey]=Object.assign(Object.assign({},uo[this.storageKey]),{cachedAt:n})}constructor(n){var o,c,g;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const f=Object.assign(Object.assign({},Yw),n);if(this.storageKey=f.storageKey,this.instanceID=(o=yd.nextInstanceID[this.storageKey])!==null&&o!==void 0?o:0,yd.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!f.debug,typeof f.debug=="function"&&(this.logger=f.debug),this.instanceID>0&&br()){const x=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(x),this.logDebugMessages&&console.trace(x)}if(this.persistSession=f.persistSession,this.autoRefreshToken=f.autoRefreshToken,this.admin=new Pd({url:f.url,headers:f.headers,fetch:f.fetch}),this.url=f.url,this.headers=f.headers,this.fetch=lg(f.fetch),this.lock=f.lock||x0,this.detectSessionInUrl=f.detectSessionInUrl,this.flowType=f.flowType,this.hasCustomAuthorizationHeader=f.hasCustomAuthorizationHeader,this.throwOnError=f.throwOnError,f.lock?this.lock=f.lock:br()&&(!((c=globalThis==null?void 0:globalThis.navigator)===null||c===void 0)&&c.locks)?this.lock=cg:this.lock=x0,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new qw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(f.storage?this.storage=f.storage:ag()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=g0(this.memoryStorage)),f.userStorage&&(this.userStorage=f.userStorage)):(this.memoryStorage={},this.storage=g0(this.memoryStorage)),br()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(x){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",x)}(g=this.broadcastChannel)===null||g===void 0||g.addEventListener("message",async x=>{this._debug("received broadcast notification from other tab or client",x),await this._notifyAllSubscribers(x.data.event,x.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${eg}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let o={},c="none";if(br()&&(o=uw(window.location.href),this._isImplicitGrantCallback(o)?c="implicit":await this._isPKCECallback(o)&&(c="pkce")),br()&&this.detectSessionInUrl&&c!=="none"){const{data:g,error:f}=await this._getSessionFromURL(o,c);if(f){if(this._debug("#_initialize()","error detecting session from URL",f),sg(f)){const A=(n=f.details)===null||n===void 0?void 0:n.code;if(A==="identity_already_exists"||A==="identity_not_found"||A==="single_identity_not_deletable")return{error:f}}return await this._removeSession(),{error:f}}const{session:x,redirectType:C}=g;return this._debug("#_initialize()","detected session in URL",x,"redirect type",C),await this._saveSession(x),setTimeout(async()=>{C==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",x):await this._notifyAllSubscribers("SIGNED_IN",x)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(o){return Pe(o)?this._returnResult({error:o}):this._returnResult({error:new $i("Unexpected error during initialization",o)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var o,c,g;try{const f=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(c=(o=n==null?void 0:n.options)===null||o===void 0?void 0:o.data)!==null&&c!==void 0?c:{},gotrue_meta_security:{captcha_token:(g=n==null?void 0:n.options)===null||g===void 0?void 0:g.captchaToken}},xform:Mn}),{data:x,error:C}=f;if(C||!x)return this._returnResult({data:{user:null,session:null},error:C});const A=x.session,E=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:E,session:A},error:null})}catch(f){if(Pe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signUp(n){var o,c,g;try{let f;if("email"in n){const{email:S,password:N,options:D}=n;let P=null,U=null;this.flowType==="pkce"&&([P,U]=await ao(this.storage,this.storageKey)),f=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:D==null?void 0:D.emailRedirectTo,body:{email:S,password:N,data:(o=D==null?void 0:D.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:D==null?void 0:D.captchaToken},code_challenge:P,code_challenge_method:U},xform:Mn})}else if("phone"in n){const{phone:S,password:N,options:D}=n;f=await Ge(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:S,password:N,data:(c=D==null?void 0:D.data)!==null&&c!==void 0?c:{},channel:(g=D==null?void 0:D.channel)!==null&&g!==void 0?g:"sms",gotrue_meta_security:{captcha_token:D==null?void 0:D.captchaToken}},xform:Mn})}else throw new ma("You must provide either an email or phone number and a password");const{data:x,error:C}=f;if(C||!x)return await Ar(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:C});const A=x.session,E=x.user;return x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",A)),this._returnResult({data:{user:E,session:A},error:null})}catch(f){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Pe(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithPassword(n){try{let o;if("email"in n){const{email:f,password:x,options:C}=n;o=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:f,password:x,gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:h0})}else if("phone"in n){const{phone:f,password:x,options:C}=n;o=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:f,password:x,gotrue_meta_security:{captcha_token:C==null?void 0:C.captchaToken}},xform:h0})}else throw new ma("You must provide either an email or phone number and a password");const{data:c,error:g}=o;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!c||!c.session||!c.user){const f=new As;return this._returnResult({data:{user:null,session:null},error:f})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:Object.assign({user:c.user,session:c.session},c.weak_password?{weakPassword:c.weak_password}:null),error:g})}catch(o){if(Pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithOAuth(n){var o,c,g,f;return await this._handleProviderSignIn(n.provider,{redirectTo:(o=n.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(g=n.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:(f=n.options)===null||f===void 0?void 0:f.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){const{chain:o}=n;switch(o){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${o}"`)}}async signInWithEthereum(n){var o,c,g,f,x,C,A,E,S,N,D;let P,U;if("message"in n)P=n.message,U=n.signature;else{const{chain:F,wallet:j,statement:K,options:J}=n;let V;if(br())if(typeof j=="object")V=j;else{const ne=window;if("ethereum"in ne&&typeof ne.ethereum=="object"&&"request"in ne.ethereum&&typeof ne.ethereum.request=="function")V=ne.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!(J!=null&&J.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");V=j}const oe=new URL((o=J==null?void 0:J.url)!==null&&o!==void 0?o:window.location.href),_e=await V.request({method:"eth_requestAccounts"}).then(ne=>ne).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_e||_e.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const xe=dg(_e[0]);let se=(c=J==null?void 0:J.signInWithEthereum)===null||c===void 0?void 0:c.chainId;if(!se){const ne=await V.request({method:"eth_chainId"});se=kw(ne)}const he={domain:oe.host,address:xe,statement:K,uri:oe.href,version:"1",chainId:se,nonce:(g=J==null?void 0:J.signInWithEthereum)===null||g===void 0?void 0:g.nonce,issuedAt:(x=(f=J==null?void 0:J.signInWithEthereum)===null||f===void 0?void 0:f.issuedAt)!==null&&x!==void 0?x:new Date,expirationTime:(C=J==null?void 0:J.signInWithEthereum)===null||C===void 0?void 0:C.expirationTime,notBefore:(A=J==null?void 0:J.signInWithEthereum)===null||A===void 0?void 0:A.notBefore,requestId:(E=J==null?void 0:J.signInWithEthereum)===null||E===void 0?void 0:E.requestId,resources:(S=J==null?void 0:J.signInWithEthereum)===null||S===void 0?void 0:S.resources};P=Pw(he),U=await V.request({method:"personal_sign",params:[Dw(P),xe]})}try{const{data:F,error:j}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:P,signature:U},!((N=n.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(D=n.options)===null||D===void 0?void 0:D.captchaToken}}:null),xform:Mn});if(j)throw j;if(!F||!F.session||!F.user){const K=new As;return this._returnResult({data:{user:null,session:null},error:K})}return F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),this._returnResult({data:Object.assign({},F),error:j})}catch(F){if(Pe(F))return this._returnResult({data:{user:null,session:null},error:F});throw F}}async signInWithSolana(n){var o,c,g,f,x,C,A,E,S,N,D,P;let U,F;if("message"in n)U=n.message,F=n.signature;else{const{chain:j,wallet:K,statement:J,options:V}=n;let oe;if(br())if(typeof K=="object")oe=K;else{const xe=window;if("solana"in xe&&typeof xe.solana=="object"&&("signIn"in xe.solana&&typeof xe.solana.signIn=="function"||"signMessage"in xe.solana&&typeof xe.solana.signMessage=="function"))oe=xe.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!(V!=null&&V.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");oe=K}const _e=new URL((o=V==null?void 0:V.url)!==null&&o!==void 0?o:window.location.href);if("signIn"in oe&&oe.signIn){const xe=await oe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},V==null?void 0:V.signInWithSolana),{version:"1",domain:_e.host,uri:_e.href}),J?{statement:J}:null));let se;if(Array.isArray(xe)&&xe[0]&&typeof xe[0]=="object")se=xe[0];else if(xe&&typeof xe=="object"&&"signedMessage"in xe&&"signature"in xe)se=xe;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in se&&"signature"in se&&(typeof se.signedMessage=="string"||se.signedMessage instanceof Uint8Array)&&se.signature instanceof Uint8Array)U=typeof se.signedMessage=="string"?se.signedMessage:new TextDecoder().decode(se.signedMessage),F=se.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in oe)||typeof oe.signMessage!="function"||!("publicKey"in oe)||typeof oe!="object"||!oe.publicKey||!("toBase58"in oe.publicKey)||typeof oe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");U=[`${_e.host} wants you to sign in with your Solana account:`,oe.publicKey.toBase58(),...J?["",J,""]:[""],"Version: 1",`URI: ${_e.href}`,`Issued At: ${(g=(c=V==null?void 0:V.signInWithSolana)===null||c===void 0?void 0:c.issuedAt)!==null&&g!==void 0?g:new Date().toISOString()}`,...!((f=V==null?void 0:V.signInWithSolana)===null||f===void 0)&&f.notBefore?[`Not Before: ${V.signInWithSolana.notBefore}`]:[],...!((x=V==null?void 0:V.signInWithSolana)===null||x===void 0)&&x.expirationTime?[`Expiration Time: ${V.signInWithSolana.expirationTime}`]:[],...!((C=V==null?void 0:V.signInWithSolana)===null||C===void 0)&&C.chainId?[`Chain ID: ${V.signInWithSolana.chainId}`]:[],...!((A=V==null?void 0:V.signInWithSolana)===null||A===void 0)&&A.nonce?[`Nonce: ${V.signInWithSolana.nonce}`]:[],...!((E=V==null?void 0:V.signInWithSolana)===null||E===void 0)&&E.requestId?[`Request ID: ${V.signInWithSolana.requestId}`]:[],...!((N=(S=V==null?void 0:V.signInWithSolana)===null||S===void 0?void 0:S.resources)===null||N===void 0)&&N.length?["Resources",...V.signInWithSolana.resources.map(se=>`- ${se}`)]:[]].join(`
`);const xe=await oe.signMessage(new TextEncoder().encode(U),"utf8");if(!xe||!(xe instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");F=xe}}try{const{data:j,error:K}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:U,signature:Ns(F)},!((D=n.options)===null||D===void 0)&&D.captchaToken?{gotrue_meta_security:{captcha_token:(P=n.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:Mn});if(K)throw K;if(!j||!j.session||!j.user){const J=new As;return this._returnResult({data:{user:null,session:null},error:J})}return j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),this._returnResult({data:Object.assign({},j),error:K})}catch(j){if(Pe(j))return this._returnResult({data:{user:null,session:null},error:j});throw j}}async _exchangeCodeForSession(n){const o=await Cs(this.storage,`${this.storageKey}-code-verifier`),[c,g]=(o??"").split("/");try{const{data:f,error:x}=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:c},xform:Mn});if(await Ar(this.storage,`${this.storageKey}-code-verifier`),x)throw x;if(!f||!f.session||!f.user){const C=new As;return this._returnResult({data:{user:null,session:null,redirectType:null},error:C})}return f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("SIGNED_IN",f.session)),this._returnResult({data:Object.assign(Object.assign({},f),{redirectType:g??null}),error:x})}catch(f){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Pe(f))return this._returnResult({data:{user:null,session:null,redirectType:null},error:f});throw f}}async signInWithIdToken(n){try{const{options:o,provider:c,token:g,access_token:f,nonce:x}=n,C=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:c,id_token:g,access_token:f,nonce:x,gotrue_meta_security:{captcha_token:o==null?void 0:o.captchaToken}},xform:Mn}),{data:A,error:E}=C;if(E)return this._returnResult({data:{user:null,session:null},error:E});if(!A||!A.session||!A.user){const S=new As;return this._returnResult({data:{user:null,session:null},error:S})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:A,error:E})}catch(o){if(Pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithOtp(n){var o,c,g,f,x;try{if("email"in n){const{email:C,options:A}=n;let E=null,S=null;this.flowType==="pkce"&&([E,S]=await ao(this.storage,this.storageKey));const{error:N}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:C,data:(o=A==null?void 0:A.data)!==null&&o!==void 0?o:{},create_user:(c=A==null?void 0:A.shouldCreateUser)!==null&&c!==void 0?c:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},code_challenge:E,code_challenge_method:S},redirectTo:A==null?void 0:A.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:N})}if("phone"in n){const{phone:C,options:A}=n,{data:E,error:S}=await Ge(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:C,data:(g=A==null?void 0:A.data)!==null&&g!==void 0?g:{},create_user:(f=A==null?void 0:A.shouldCreateUser)!==null&&f!==void 0?f:!0,gotrue_meta_security:{captcha_token:A==null?void 0:A.captchaToken},channel:(x=A==null?void 0:A.channel)!==null&&x!==void 0?x:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:E==null?void 0:E.message_id},error:S})}throw new ma("You must provide either an email or phone number.")}catch(C){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Pe(C))return this._returnResult({data:{user:null,session:null},error:C});throw C}}async verifyOtp(n){var o,c;try{let g,f;"options"in n&&(g=(o=n.options)===null||o===void 0?void 0:o.redirectTo,f=(c=n.options)===null||c===void 0?void 0:c.captchaToken);const{data:x,error:C}=await Ge(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:f}}),redirectTo:g,xform:Mn});if(C)throw C;if(!x)throw new Error("An error occurred on token verification.");const A=x.session,E=x.user;return A!=null&&A.access_token&&(await this._saveSession(A),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",A)),this._returnResult({data:{user:E,session:A},error:null})}catch(g){if(Pe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSSO(n){var o,c,g,f,x;try{let C=null,A=null;this.flowType==="pkce"&&([C,A]=await ao(this.storage,this.storageKey));const E=await Ge(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(c=(o=n.options)===null||o===void 0?void 0:o.redirectTo)!==null&&c!==void 0?c:void 0}),!((g=n==null?void 0:n.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:C,code_challenge_method:A}),headers:this.headers,xform:Sw});return!((f=E.data)===null||f===void 0)&&f.url&&br()&&!(!((x=n.options)===null||x===void 0)&&x.skipBrowserRedirect)&&window.location.assign(E.data.url),this._returnResult(E)}catch(C){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Pe(C))return this._returnResult({data:null,error:C});throw C}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;if(c)throw c;if(!o)throw new Kr;const{error:g}=await Ge(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:o.access_token});return this._returnResult({data:{user:null,session:null},error:g})})}catch(n){if(Pe(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{const o=`${this.url}/resend`;if("email"in n){const{email:c,type:g,options:f}=n,{error:x}=await Ge(this.fetch,"POST",o,{headers:this.headers,body:{email:c,type:g,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},redirectTo:f==null?void 0:f.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:x})}else if("phone"in n){const{phone:c,type:g,options:f}=n,{data:x,error:C}=await Ge(this.fetch,"POST",o,{headers:this.headers,body:{phone:c,type:g,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:C})}throw new ma("You must provide either an email or phone number and a type")}catch(o){if(Pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async o=>o))}async _acquireLock(n,o){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){const c=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),g=(async()=>(await c,await o()))();return this.pendingInLock.push((async()=>{try{await g}catch{}})()),g}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const c=o();for(this.pendingInLock.push((async()=>{try{await c}catch{}})()),await c;this.pendingInLock.length;){const g=[...this.pendingInLock];await Promise.all(g),this.pendingInLock.splice(0,g.length)}return await c}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{const o=await this.__loadSession();return await n(o)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null;const o=await Cs(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",o),o!==null&&(this._isValidSession(o)?n=o:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};const c=n.expires_at?n.expires_at*1e3-Date.now()<Zc:!1;if(this._debug("#__loadSession()",`session has${c?"":" not"} expired`,"expires_at",n.expires_at),!c){if(this.userStorage){const x=await Cs(this.userStorage,this.storageKey+"-user");x!=null&&x.user?n.user=x.user:n.user=Jc()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){const x={value:this.suppressGetSessionWarning};n.user=_w(n.user,x),x.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}const{data:g,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{session:null},error:f}):this._returnResult({data:{session:g},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;const o=await this._acquireLock(-1,async()=>await this._getUser());return o.data.user&&(this.suppressGetSessionWarning=!0),o}async _getUser(n){try{return n?await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Xi}):await this._useSession(async o=>{var c,g,f;const{data:x,error:C}=o;if(C)throw C;return!(!((c=x.session)===null||c===void 0)&&c.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Kr}:await Ge(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(f=(g=x.session)===null||g===void 0?void 0:g.access_token)!==null&&f!==void 0?f:void 0,xform:Xi})})}catch(o){if(Pe(o))return ig(o)&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:o});throw o}}async updateUser(n,o={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(n,o))}async _updateUser(n,o={}){try{return await this._useSession(async c=>{const{data:g,error:f}=c;if(f)throw f;if(!g.session)throw new Kr;const x=g.session;let C=null,A=null;this.flowType==="pkce"&&n.email!=null&&([C,A]=await ao(this.storage,this.storageKey));const{data:E,error:S}=await Ge(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:o==null?void 0:o.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:C,code_challenge_method:A}),jwt:x.access_token,xform:Xi});if(S)throw S;return x.user=E.user,await this._saveSession(x),await this._notifyAllSubscribers("USER_UPDATED",x),this._returnResult({data:{user:x.user},error:null})})}catch(c){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Pe(c))return this._returnResult({data:{user:null},error:c});throw c}}async setSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Kr;const o=Date.now()/1e3;let c=o,g=!0,f=null;const{payload:x}=Qc(n.access_token);if(x.exp&&(c=x.exp,g=c<=o),g){const{data:C,error:A}=await this._callRefreshToken(n.refresh_token);if(A)return this._returnResult({data:{user:null,session:null},error:A});if(!C)return{data:{user:null,session:null},error:null};f=C}else{const{data:C,error:A}=await this._getUser(n.access_token);if(A)throw A;f={access_token:n.access_token,refresh_token:n.refresh_token,user:C.user,token_type:"bearer",expires_in:c-o,expires_at:c},await this._saveSession(f),await this._notifyAllSubscribers("SIGNED_IN",f)}return this._returnResult({data:{user:f.user,session:f},error:null})}catch(o){if(Pe(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async o=>{var c;if(!n){const{data:x,error:C}=o;if(C)throw C;n=(c=x.session)!==null&&c!==void 0?c:void 0}if(!(n!=null&&n.refresh_token))throw new Kr;const{data:g,error:f}=await this._callRefreshToken(n.refresh_token);return f?this._returnResult({data:{user:null,session:null},error:f}):g?this._returnResult({data:{user:g.user,session:g},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(o){if(Pe(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async _getSessionFromURL(n,o){try{if(!br())throw new xa("No browser detected.");if(n.error||n.error_description||n.error_code)throw new xa(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(o){case"implicit":if(this.flowType==="pkce")throw new xd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xa("Not a valid implicit grant flow url.");break;default:}if(o==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new xd("No code detected.");const{data:J,error:V}=await this._exchangeCodeForSession(n.code);if(V)throw V;const oe=new URL(window.location.href);return oe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",oe.toString()),{data:{session:J.session,redirectType:null},error:null}}const{provider_token:c,provider_refresh_token:g,access_token:f,refresh_token:x,expires_in:C,expires_at:A,token_type:E}=n;if(!f||!C||!x||!E)throw new xa("No session defined in URL");const S=Math.round(Date.now()/1e3),N=parseInt(C);let D=S+N;A&&(D=parseInt(A));const P=D-S;P*1e3<=ho&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${N}s`);const U=D-N;S-U>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",U,D,S):S-U<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",U,D,S);const{data:F,error:j}=await this._getUser(f);if(j)throw j;const K={provider_token:c,provider_refresh_token:g,access_token:f,expires_in:N,expires_at:D,refresh_token:x,token_type:E,user:F.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:K,redirectType:n.type},error:null})}catch(c){if(Pe(c))return this._returnResult({data:{session:null,redirectType:null},error:c});throw c}}_isImplicitGrantCallback(n){return!!(n.access_token||n.error_description)}async _isPKCECallback(n){const o=await Cs(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&o)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async o=>{var c;const{data:g,error:f}=o;if(f)return this._returnResult({error:f});const x=(c=g.session)===null||c===void 0?void 0:c.access_token;if(x){const{error:C}=await this.admin.signOut(x,n);if(C&&!(ng(C)&&(C.status===404||C.status===401||C.status===403)))return this._returnResult({error:C})}return n!=="others"&&(await this._removeSession(),await Ar(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){const o=lw(),c={id:o,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",o),this.stateChangeEmitters.delete(o)}};return this._debug("#onAuthStateChange()","registered callback with id",o),this.stateChangeEmitters.set(o,c),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(o)})))(),{data:{subscription:c}}}async _emitInitialSession(n){return await this._useSession(async o=>{var c,g;try{const{data:{session:f},error:x}=o;if(x)throw x;await((c=this.stateChangeEmitters.get(n))===null||c===void 0?void 0:c.callback("INITIAL_SESSION",f)),this._debug("INITIAL_SESSION","callback id",n,"session",f)}catch(f){await((g=this.stateChangeEmitters.get(n))===null||g===void 0?void 0:g.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",f),console.error(f)}})}async resetPasswordForEmail(n,o={}){let c=null,g=null;this.flowType==="pkce"&&([c,g]=await ao(this.storage,this.storageKey,!0));try{return await Ge(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:c,code_challenge_method:g,gotrue_meta_security:{captcha_token:o.captchaToken}},headers:this.headers,redirectTo:o.redirectTo})}catch(f){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Pe(f))return this._returnResult({data:null,error:f});throw f}}async getUserIdentities(){var n;try{const{data:o,error:c}=await this.getUser();if(c)throw c;return this._returnResult({data:{identities:(n=o.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var o;try{const{data:c,error:g}=await this._useSession(async f=>{var x,C,A,E,S;const{data:N,error:D}=f;if(D)throw D;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(x=n.options)===null||x===void 0?void 0:x.redirectTo,scopes:(C=n.options)===null||C===void 0?void 0:C.scopes,queryParams:(A=n.options)===null||A===void 0?void 0:A.queryParams,skipBrowserRedirect:!0});return await Ge(this.fetch,"GET",P,{headers:this.headers,jwt:(S=(E=N.session)===null||E===void 0?void 0:E.access_token)!==null&&S!==void 0?S:void 0})});if(g)throw g;return br()&&!(!((o=n.options)===null||o===void 0)&&o.skipBrowserRedirect)&&window.location.assign(c==null?void 0:c.url),this._returnResult({data:{provider:n.provider,url:c==null?void 0:c.url},error:null})}catch(c){if(Pe(c))return this._returnResult({data:{provider:n.provider,url:null},error:c});throw c}}async linkIdentityIdToken(n){return await this._useSession(async o=>{var c;try{const{error:g,data:{session:f}}=o;if(g)throw g;const{options:x,provider:C,token:A,access_token:E,nonce:S}=n,N=await Ge(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(c=f==null?void 0:f.access_token)!==null&&c!==void 0?c:void 0,body:{provider:C,id_token:A,access_token:E,nonce:S,link_identity:!0,gotrue_meta_security:{captcha_token:x==null?void 0:x.captchaToken}},xform:Mn}),{data:D,error:P}=N;return P?this._returnResult({data:{user:null,session:null},error:P}):!D||!D.session||!D.user?this._returnResult({data:{user:null,session:null},error:new As}):(D.session&&(await this._saveSession(D.session),await this._notifyAllSubscribers("USER_UPDATED",D.session)),this._returnResult({data:D,error:P}))}catch(g){if(await Ar(this.storage,`${this.storageKey}-code-verifier`),Pe(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}})}async unlinkIdentity(n){try{return await this._useSession(async o=>{var c,g;const{data:f,error:x}=o;if(x)throw x;return await Ge(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(g=(c=f.session)===null||c===void 0?void 0:c.access_token)!==null&&g!==void 0?g:void 0})})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}}async _refreshAccessToken(n){const o=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{const c=Date.now();return await hw(async g=>(g>0&&await dw(200*Math.pow(2,g-1)),this._debug(o,"refreshing attempt",g),await Ge(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:Mn})),(g,f)=>{const x=200*Math.pow(2,g);return f&&Yl(f)&&Date.now()+x-c<ho})}catch(c){if(this._debug(o,"error",c),Pe(c))return this._returnResult({data:{session:null,user:null},error:c});throw c}finally{this._debug(o,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,o){const c=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:o.redirectTo,scopes:o.scopes,queryParams:o.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",o,"url",c),br()&&!o.skipBrowserRedirect&&window.location.assign(c),{data:{provider:n,url:c},error:null}}async _recoverAndRefresh(){var n,o;const c="#_recoverAndRefresh()";this._debug(c,"begin");try{const g=await Cs(this.storage,this.storageKey);if(g&&this.userStorage){let x=await Cs(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!x&&(x={user:g.user},await fo(this.userStorage,this.storageKey+"-user",x)),g.user=(n=x==null?void 0:x.user)!==null&&n!==void 0?n:Jc()}else if(g&&!g.user&&!g.user){const x=await Cs(this.storage,this.storageKey+"-user");x&&(x!=null&&x.user)?(g.user=x.user,await Ar(this.storage,this.storageKey+"-user"),await fo(this.storage,this.storageKey,g)):g.user=Jc()}if(this._debug(c,"session from storage",g),!this._isValidSession(g)){this._debug(c,"session is not valid"),g!==null&&await this._removeSession();return}const f=((o=g.expires_at)!==null&&o!==void 0?o:1/0)*1e3-Date.now()<Zc;if(this._debug(c,`session has${f?"":" not"} expired with margin of ${Zc}s`),f){if(this.autoRefreshToken&&g.refresh_token){const{error:x}=await this._callRefreshToken(g.refresh_token);x&&(console.error(x),Yl(x)||(this._debug(c,"refresh failed with a non-retryable error, removing the session",x),await this._removeSession()))}}else if(g.user&&g.user.__isUserNotAvailableProxy===!0)try{const{data:x,error:C}=await this._getUser(g.access_token);!C&&(x!=null&&x.user)?(g.user=x.user,await this._saveSession(g),await this._notifyAllSubscribers("SIGNED_IN",g)):this._debug(c,"could not get user data, skipping SIGNED_IN notification")}catch(x){console.error("Error getting user data:",x),this._debug(c,"error getting user data, skipping SIGNED_IN notification",x)}else await this._notifyAllSubscribers("SIGNED_IN",g)}catch(g){this._debug(c,"error",g),console.error(g);return}finally{this._debug(c,"end")}}async _callRefreshToken(n){var o,c;if(!n)throw new Kr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const g=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(g,"begin");try{this.refreshingDeferred=new xu;const{data:f,error:x}=await this._refreshAccessToken(n);if(x)throw x;if(!f.session)throw new Kr;await this._saveSession(f.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",f.session);const C={data:f.session,error:null};return this.refreshingDeferred.resolve(C),C}catch(f){if(this._debug(g,"error",f),Pe(f)){const x={data:null,error:f};return Yl(f)||await this._removeSession(),(o=this.refreshingDeferred)===null||o===void 0||o.resolve(x),x}throw(c=this.refreshingDeferred)===null||c===void 0||c.reject(f),f}finally{this.refreshingDeferred=null,this._debug(g,"end")}}async _notifyAllSubscribers(n,o,c=!0){const g=`#_notifyAllSubscribers(${n})`;this._debug(g,"begin",o,`broadcast = ${c}`);try{this.broadcastChannel&&c&&this.broadcastChannel.postMessage({event:n,session:o});const f=[],x=Array.from(this.stateChangeEmitters.values()).map(async C=>{try{await C.callback(n,o)}catch(A){f.push(A)}});if(await Promise.all(x),f.length>0){for(let C=0;C<f.length;C+=1)console.error(f[C]);throw f[0]}}finally{this._debug(g,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await Ar(this.storage,`${this.storageKey}-code-verifier`);const o=Object.assign({},n),c=o.user&&o.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!c&&o.user&&await fo(this.userStorage,this.storageKey+"-user",{user:o.user});const g=Object.assign({},o);delete g.user;const f=c0(g);await fo(this.storage,this.storageKey,f)}else{const g=c0(o);await fo(this.storage,this.storageKey,g)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Ar(this.storage,this.storageKey),await Ar(this.storage,this.storageKey+"-code-verifier"),await Ar(this.storage,this.storageKey+"-user"),this.userStorage&&await Ar(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&br()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",n)}catch(o){console.error("removing visibilitychange callback failed",o)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const n=setInterval(()=>this._autoRefreshTokenTick(),ho);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const n=Date.now();try{return await this._useSession(async o=>{const{data:{session:c}}=o;if(!c||!c.refresh_token||!c.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const g=Math.floor((c.expires_at*1e3-n)/ho);this._debug("#_autoRefreshTokenTick()",`access token expires in ${g} ticks, a tick lasts ${ho}ms, refresh threshold is ${pd} ticks`),g<=pd&&await this._callRefreshToken(c.refresh_token)})}catch(o){console.error("Auto refresh tick failed with error. This is likely a transient error.",o)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof Md)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!br()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){const o=`#_onVisibilityChanged(${n})`;this._debug(o,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(o,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,o,c){const g=[`provider=${encodeURIComponent(o)}`];if(c!=null&&c.redirectTo&&g.push(`redirect_to=${encodeURIComponent(c.redirectTo)}`),c!=null&&c.scopes&&g.push(`scopes=${encodeURIComponent(c.scopes)}`),this.flowType==="pkce"){const[f,x]=await ao(this.storage,this.storageKey),C=new URLSearchParams({code_challenge:`${encodeURIComponent(f)}`,code_challenge_method:`${encodeURIComponent(x)}`});g.push(C.toString())}if(c!=null&&c.queryParams){const f=new URLSearchParams(c.queryParams);g.push(f.toString())}return c!=null&&c.skipBrowserRedirect&&g.push(`skip_http_redirect=${c.skipBrowserRedirect}`),`${n}?${g.join("&")}`}async _unenroll(n){try{return await this._useSession(async o=>{var c;const{data:g,error:f}=o;return f?this._returnResult({data:null,error:f}):await Ge(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token})})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}}async _enroll(n){try{return await this._useSession(async o=>{var c,g;const{data:f,error:x}=o;if(x)return this._returnResult({data:null,error:x});const C=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:A,error:E}=await Ge(this.fetch,"POST",`${this.url}/factors`,{body:C,headers:this.headers,jwt:(c=f==null?void 0:f.session)===null||c===void 0?void 0:c.access_token});return E?this._returnResult({data:null,error:E}):(n.factorType==="totp"&&A.type==="totp"&&(!((g=A==null?void 0:A.totp)===null||g===void 0)&&g.qr_code)&&(A.totp.qr_code=`data:image/svg+xml;utf-8,${A.totp.qr_code}`),this._returnResult({data:A,error:null}))})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}}async _verify(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var c;const{data:g,error:f}=o;if(f)return this._returnResult({data:null,error:f});const x=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?Vw(n.webauthn.credential_response):Ww(n.webauthn.credential_response)})}:{code:n.code}),{data:C,error:A}=await Ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:x,headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token});return A?this._returnResult({data:null,error:A}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+C.expires_in},C)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",C),this._returnResult({data:C,error:A}))})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}})}async _challenge(n){return this._acquireLock(-1,async()=>{try{return await this._useSession(async o=>{var c;const{data:g,error:f}=o;if(f)return this._returnResult({data:null,error:f});const x=await Ge(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(c=g==null?void 0:g.session)===null||c===void 0?void 0:c.access_token});if(x.error)return x;const{data:C}=x;if(C.type!=="webauthn")return{data:C,error:null};switch(C.webauthn.type){case"create":return{data:Object.assign(Object.assign({},C),{webauthn:Object.assign(Object.assign({},C.webauthn),{credential_options:Object.assign(Object.assign({},C.webauthn.credential_options),{publicKey:Fw(C.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},C),{webauthn:Object.assign(Object.assign({},C.webauthn),{credential_options:Object.assign(Object.assign({},C.webauthn.credential_options),{publicKey:Uw(C.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}})}async _challengeAndVerify(n){const{data:o,error:c}=await this._challenge({factorId:n.factorId});return c?this._returnResult({data:null,error:c}):await this._verify({factorId:n.factorId,challengeId:o.id,code:n.code})}async _listFactors(){var n;const{data:{user:o},error:c}=await this.getUser();if(c)return{data:null,error:c};const g={all:[],phone:[],totp:[],webauthn:[]};for(const f of(n=o==null?void 0:o.factors)!==null&&n!==void 0?n:[])g.all.push(f),f.status==="verified"&&g[f.factor_type].push(f);return{data:g,error:null}}async _getAuthenticatorAssuranceLevel(){var n,o;const{data:{session:c},error:g}=await this.getSession();if(g)return this._returnResult({data:null,error:g});if(!c)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:f}=Qc(c.access_token);let x=null;f.aal&&(x=f.aal);let C=x;((o=(n=c.user.factors)===null||n===void 0?void 0:n.filter(S=>S.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(C="aal2");const E=f.amr||[];return{data:{currentLevel:x,nextLevel:C,currentAuthenticationMethods:E},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async o=>{const{data:{session:c},error:g}=o;return g?this._returnResult({data:null,error:g}):c?await Ge(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:c.access_token,xform:f=>({data:f,error:null})}):this._returnResult({data:null,error:new Kr})})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}}async _approveAuthorization(n,o){try{return await this._useSession(async c=>{const{data:{session:g},error:f}=c;if(f)return this._returnResult({data:null,error:f});if(!g)return this._returnResult({data:null,error:new Kr});const x=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:g.access_token,body:{action:"approve"},xform:C=>({data:C,error:null})});return x.data&&x.data.redirect_url&&br()&&!(o!=null&&o.skipBrowserRedirect)&&window.location.assign(x.data.redirect_url),x})}catch(c){if(Pe(c))return this._returnResult({data:null,error:c});throw c}}async _denyAuthorization(n,o){try{return await this._useSession(async c=>{const{data:{session:g},error:f}=c;if(f)return this._returnResult({data:null,error:f});if(!g)return this._returnResult({data:null,error:new Kr});const x=await Ge(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:g.access_token,body:{action:"deny"},xform:C=>({data:C,error:null})});return x.data&&x.data.redirect_url&&br()&&!(o!=null&&o.skipBrowserRedirect)&&window.location.assign(x.data.redirect_url),x})}catch(c){if(Pe(c))return this._returnResult({data:null,error:c});throw c}}async _listOAuthGrants(){try{return await this._useSession(async n=>{const{data:{session:o},error:c}=n;return c?this._returnResult({data:null,error:c}):o?await Ge(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,xform:g=>({data:g,error:null})}):this._returnResult({data:null,error:new Kr})})}catch(n){if(Pe(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async o=>{const{data:{session:c},error:g}=o;return g?this._returnResult({data:null,error:g}):c?(await Ge(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:c.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Kr})})}catch(o){if(Pe(o))return this._returnResult({data:null,error:o});throw o}}async fetchJwk(n,o={keys:[]}){let c=o.keys.find(C=>C.kid===n);if(c)return c;const g=Date.now();if(c=this.jwks.keys.find(C=>C.kid===n),c&&this.jwks_cached_at+ew>g)return c;const{data:f,error:x}=await Ge(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(x)throw x;return!f.keys||f.keys.length===0||(this.jwks=f,this.jwks_cached_at=g,c=f.keys.find(C=>C.kid===n),!c)?null:c}async getClaims(n,o={}){try{let c=n;if(!c){const{data:P,error:U}=await this.getSession();if(U||!P.session)return this._returnResult({data:null,error:U});c=P.session.access_token}const{header:g,payload:f,signature:x,raw:{header:C,payload:A}}=Qc(c);o!=null&&o.allowExpired||yw(f.exp);const E=!g.alg||g.alg.startsWith("HS")||!g.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(g.kid,o!=null&&o.keys?{keys:o.keys}:o==null?void 0:o.jwks);if(!E){const{error:P}=await this.getUser(c);if(P)throw P;return{data:{claims:f,header:g,signature:x},error:null}}const S=vw(g.alg),N=await crypto.subtle.importKey("jwk",E,S,!0,["verify"]);if(!await crypto.subtle.verify(S,N,x,ow(`${C}.${A}`)))throw new iu("Invalid JWT signature");return{data:{claims:f,header:g,signature:x},error:null}}catch(c){if(Pe(c))return this._returnResult({data:null,error:c});throw c}}};Ld.nextInstanceID={};const Zw=Pd,Qw=Ld,Jw=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:Zw,AuthApiError:rg,AuthClient:Qw,AuthError:wo,AuthImplicitGrantRedirectError:xa,AuthInvalidCredentialsError:ma,AuthInvalidJwtError:iu,AuthInvalidTokenResponseError:As,AuthPKCEGrantCodeExchangeError:xd,AuthRetryableFetchError:nu,AuthSessionMissingError:Kr,AuthUnknownError:$i,AuthWeakPasswordError:wd,CustomAuthError:xi,GoTrueAdminApi:Pd,GoTrueClient:Ld,NavigatorLockAcquireTimeoutError:ug,SIGN_OUT_SCOPES:Zl,isAuthApiError:ng,isAuthError:Pe,isAuthImplicitGrantRedirectError:sg,isAuthRetryableFetchError:Yl,isAuthSessionMissingError:ig,isAuthWeakPasswordError:tw,lockInternals:Ss,navigatorLock:cg,processLock:Rw},Symbol.toStringTag,{value:"Module"})),fg=_a(Jw);var w0;function e2(){if(w0)return fa;w0=1,Object.defineProperty(fa,"__esModule",{value:!0}),fa.SupabaseAuthClient=void 0;const l=fg;let n=class extends l.AuthClient{constructor(c){super(c)}};return fa.SupabaseAuthClient=n,fa}var y0;function v0(){if(y0)return Bl;y0=1,Object.defineProperty(Bl,"__esModule",{value:!0});const l=b1,n=O1(),o=U1,c=Gx,g=Xx(),f=Kx(),x=qx(),C=e2();class A{constructor(S,N,D){var P,U,F;this.supabaseUrl=S,this.supabaseKey=N;const j=(0,x.validateSupabaseUrl)(S);if(!N)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",j),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",j),this.storageUrl=new URL("storage/v1",j),this.functionsUrl=new URL("functions/v1",j);const K=`sb-${j.hostname.split(".")[0]}-auth-token`,J={db:g.DEFAULT_DB_OPTIONS,realtime:g.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},g.DEFAULT_AUTH_OPTIONS),{storageKey:K}),global:g.DEFAULT_GLOBAL_OPTIONS},V=(0,x.applySettingDefaults)(D??{},J);this.storageKey=(P=V.auth.storageKey)!==null&&P!==void 0?P:"",this.headers=(U=V.global.headers)!==null&&U!==void 0?U:{},V.accessToken?(this.accessToken=V.accessToken,this.auth=new Proxy({},{get:(oe,_e)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(_e)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((F=V.auth)!==null&&F!==void 0?F:{},this.headers,V.global.fetch),this.fetch=(0,f.fetchWithAuth)(N,this._getAccessToken.bind(this),V.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},V.realtime)),this.accessToken&&this.accessToken().then(oe=>this.realtime.setAuth(oe)).catch(oe=>console.warn("Failed to set initial Realtime auth token:",oe)),this.rest=new n.PostgrestClient(new URL("rest/v1",j).href,{headers:this.headers,schema:V.db.schema,fetch:this.fetch}),this.storage=new c.StorageClient(this.storageUrl.href,this.headers,this.fetch,D==null?void 0:D.storage),V.accessToken||this._listenForAuthEvents()}get functions(){return new l.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(S){return this.rest.from(S)}schema(S){return this.rest.schema(S)}rpc(S,N={},D={head:!1,get:!1,count:void 0}){return this.rest.rpc(S,N,D)}channel(S,N={config:{}}){return this.realtime.channel(S,N)}getChannels(){return this.realtime.getChannels()}removeChannel(S){return this.realtime.removeChannel(S)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var S,N;if(this.accessToken)return await this.accessToken();const{data:D}=await this.auth.getSession();return(N=(S=D.session)===null||S===void 0?void 0:S.access_token)!==null&&N!==void 0?N:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:S,persistSession:N,detectSessionInUrl:D,storage:P,userStorage:U,storageKey:F,flowType:j,lock:K,debug:J,throwOnError:V},oe,_e){const xe={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new C.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},xe),oe),storageKey:F,autoRefreshToken:S,persistSession:N,detectSessionInUrl:D,storage:P,userStorage:U,flowType:j,lock:K,debug:J,throwOnError:V,fetch:_e,hasCustomAuthorizationHeader:Object.keys(this.headers).some(se=>se.toLowerCase()==="authorization")})}_initRealtimeClient(S){return new o.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},S),{params:Object.assign({apikey:this.supabaseKey},S==null?void 0:S.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((N,D)=>{this._handleTokenChanged(N,"CLIENT",D==null?void 0:D.access_token)})}_handleTokenChanged(S,N,D){(S==="TOKEN_REFRESHED"||S==="SIGNED_IN")&&this.changedAccessToken!==D?(this.changedAccessToken=D,this.realtime.setAuth(D)):S==="SIGNED_OUT"&&(this.realtime.setAuth(),N=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Bl.default=A,Bl}var E0;function t2(){return E0||(E0=1,(function(l){var n=di&&di.__createBinding||(Object.create?(function(S,N,D,P){P===void 0&&(P=D);var U=Object.getOwnPropertyDescriptor(N,D);(!U||("get"in U?!N.__esModule:U.writable||U.configurable))&&(U={enumerable:!0,get:function(){return N[D]}}),Object.defineProperty(S,P,U)}):(function(S,N,D,P){P===void 0&&(P=D),S[P]=N[D]})),o=di&&di.__exportStar||function(S,N){for(var D in S)D!=="default"&&!Object.prototype.hasOwnProperty.call(N,D)&&n(N,S,D)},c=di&&di.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(l,"__esModule",{value:!0}),l.createClient=l.SupabaseClient=l.FunctionRegion=l.FunctionsError=l.FunctionsRelayError=l.FunctionsFetchError=l.FunctionsHttpError=l.PostgrestError=void 0;const g=c(v0());o(fg,l);var f=O1();Object.defineProperty(l,"PostgrestError",{enumerable:!0,get:function(){return f.PostgrestError}});var x=b1;Object.defineProperty(l,"FunctionsHttpError",{enumerable:!0,get:function(){return x.FunctionsHttpError}}),Object.defineProperty(l,"FunctionsFetchError",{enumerable:!0,get:function(){return x.FunctionsFetchError}}),Object.defineProperty(l,"FunctionsRelayError",{enumerable:!0,get:function(){return x.FunctionsRelayError}}),Object.defineProperty(l,"FunctionsError",{enumerable:!0,get:function(){return x.FunctionsError}}),Object.defineProperty(l,"FunctionRegion",{enumerable:!0,get:function(){return x.FunctionRegion}}),o(U1,l);var C=v0();Object.defineProperty(l,"SupabaseClient",{enumerable:!0,get:function(){return c(C).default}});const A=(S,N,D)=>new g.default(S,N,D);l.createClient=A;function E(){if(typeof window<"u"||typeof process>"u")return!1;const S=process.version;if(S==null)return!1;const N=S.match(/^v(\d+)\./);return N?parseInt(N[1],10)<=18:!1}E()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(di)),di}var gg=t2();const pg=du(gg),r2=D0({__proto__:null,default:pg},[gg]),{PostgrestError:wy,FunctionsHttpError:yy,FunctionsFetchError:vy,FunctionsRelayError:Ey,FunctionsError:_y,FunctionRegion:Cy,SupabaseClient:Ay,createClient:n2,GoTrueAdminApi:by,GoTrueClient:Sy,AuthAdminApi:Iy,AuthClient:Ty,navigatorLock:Ny,NavigatorLockAcquireTimeoutError:Ry,lockInternals:Oy,processLock:ky,SIGN_OUT_SCOPES:Dy,AuthError:Py,AuthApiError:My,AuthUnknownError:Ly,CustomAuthError:By,AuthSessionMissingError:jy,AuthInvalidTokenResponseError:Fy,AuthInvalidCredentialsError:Uy,AuthImplicitGrantRedirectError:Vy,AuthPKCEGrantCodeExchangeError:Wy,AuthRetryableFetchError:Hy,AuthWeakPasswordError:zy,AuthInvalidJwtError:Gy,isAuthError:$y,isAuthApiError:Xy,isAuthSessionMissingError:Ky,isAuthImplicitGrantRedirectError:qy,isAuthRetryableFetchError:Yy,isAuthWeakPasswordError:Zy,RealtimePresence:Qy,RealtimeChannel:Jy,RealtimeClient:ev,REALTIME_LISTEN_TYPES:tv,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:rv,REALTIME_PRESENCE_LISTEN_EVENTS:nv,REALTIME_SUBSCRIBE_STATES:iv,REALTIME_CHANNEL_STATES:sv}=pg||r2,i2="https://suqmfxgohxxcyuorpelo.supabase.co",s2="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1cW1meGdvaHh4Y3l1b3JwZWxvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NDc1NDI0NiwiZXhwIjoyMDgwMzMwMjQ2fQ.yO530DU8-gWPCY4uoTqiQeO55T_UxKsFy8PXKXWj56I",_o=n2(i2,s2,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),o2=async(l,n)=>{try{const{data:o,error:c}=await _o.from("Admin").select("*").eq("phone",l).eq("password",n).limit(1);if(c)return console.error("Login verification failed:",c.message),{success:!1,error:c.message};if(!o||o.length===0)return{success:!1,error:"Invalid phone number or password."};const g=o[0],f=g.admin_id,x=g.name??g.Name??"Admin";return f==null?(console.error("User found but 'admin_id' column is missing or null on the record.",g),{success:!1,error:"Account configuration error: missing admin_id."}):{success:!0,name:x,id:String(f)}}catch(o){return console.error("Unexpected login error:",o),{success:!1,error:o.message||"An unexpected network error occurred."}}},ed=async l=>{const{error:n}=await _o.from("Swap_History").insert([l]);if(n)throw console.error("Failed to record swap history:",n.message),new Error(`History logging failed: ${n.message}`)},a2=async l=>{try{const{data:n,error:o}=await _o.from("Swap_History").select("*").eq("admin_id",l).order("Date",{ascending:!1});if(o)throw o;return n||[]}catch(n){throw console.error("Error fetching history:",n.message),n}},l2=async l=>{console.log("Attempting to insert Collection Record:",l);const{error:n}=await _o.from("Collection_History").insert([l]);if(n)throw console.error("Failed to record collection history. Supabase Error:",n),new Error(`Database Insert Failed: ${n.message} (${n.code})`)},u2=async l=>{try{const{data:n,error:o}=await _o.from("Collection_History").select("*").eq("Agent",l).order("Date",{ascending:!1});if(o)throw o;return n||[]}catch(n){throw console.error("Error fetching collection history:",n.message),n}},c2=async()=>{try{const{data:l,error:n}=await _o.from("Collection_History").select("*").order("Date",{ascending:!0});if(n)throw n;return l||[]}catch(l){throw console.error("Error fetching all collection history:",l.message),l}},qr=({children:l,variant:n="primary",isLoading:o,className:c="",disabled:g,...f})=>{const x="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",C={primary:"bg-pink-600 text-white hover:bg-pink-700 shadow-sm shadow-pink-200",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 shadow-sm",danger:"bg-red-600 text-white hover:bg-red-700 shadow-sm",ghost:"bg-transparent text-pink-600 hover:bg-pink-50"};return R.jsxs("button",{className:`${x} ${C[n]} ${c}`,disabled:g||o,...f,children:[o?R.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}):null,l]})};var Ae;(function(l){l[l.QR_CODE=0]="QR_CODE",l[l.AZTEC=1]="AZTEC",l[l.CODABAR=2]="CODABAR",l[l.CODE_39=3]="CODE_39",l[l.CODE_93=4]="CODE_93",l[l.CODE_128=5]="CODE_128",l[l.DATA_MATRIX=6]="DATA_MATRIX",l[l.MAXICODE=7]="MAXICODE",l[l.ITF=8]="ITF",l[l.EAN_13=9]="EAN_13",l[l.EAN_8=10]="EAN_8",l[l.PDF_417=11]="PDF_417",l[l.RSS_14=12]="RSS_14",l[l.RSS_EXPANDED=13]="RSS_EXPANDED",l[l.UPC_A=14]="UPC_A",l[l.UPC_E=15]="UPC_E",l[l.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ae||(Ae={}));var _0=new Map([[Ae.QR_CODE,"QR_CODE"],[Ae.AZTEC,"AZTEC"],[Ae.CODABAR,"CODABAR"],[Ae.CODE_39,"CODE_39"],[Ae.CODE_93,"CODE_93"],[Ae.CODE_128,"CODE_128"],[Ae.DATA_MATRIX,"DATA_MATRIX"],[Ae.MAXICODE,"MAXICODE"],[Ae.ITF,"ITF"],[Ae.EAN_13,"EAN_13"],[Ae.EAN_8,"EAN_8"],[Ae.PDF_417,"PDF_417"],[Ae.RSS_14,"RSS_14"],[Ae.RSS_EXPANDED,"RSS_EXPANDED"],[Ae.UPC_A,"UPC_A"],[Ae.UPC_E,"UPC_E"],[Ae.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),C0;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.URL=1]="URL"})(C0||(C0={}));function d2(l){return Object.values(Ae).includes(l)}var lu;(function(l){l[l.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",l[l.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(lu||(lu={}));var h2=(function(){function l(){}return l.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",l.SCAN_DEFAULT_FPS=2,l.DEFAULT_DISABLE_FLIP=!1,l.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,l.DEFAULT_SUPPORTED_SCAN_TYPE=[lu.SCAN_TYPE_CAMERA,lu.SCAN_TYPE_FILE],l})(),mg=(function(){function l(n,o){this.format=n,this.formatName=o}return l.prototype.toString=function(){return this.formatName},l.create=function(n){if(!_0.has(n))throw"".concat(n," not in html5QrcodeSupportedFormatsTextMap");return new l(n,_0.get(n))},l})(),A0=(function(){function l(){}return l.createFromText=function(n){var o={text:n};return{decodedText:n,result:o}},l.createFromQrcodeResult=function(n){return{decodedText:n.text,result:n}},l})(),vd;(function(l){l[l.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",l[l.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",l[l.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(vd||(vd={}));var f2=(function(){function l(){}return l.createFrom=function(n){return{errorMessage:n,type:vd.UNKWOWN_ERROR}},l})(),g2=(function(){function l(n){this.verbose=n}return l.prototype.log=function(n){this.verbose&&console.log(n)},l.prototype.warn=function(n){this.verbose&&console.warn(n)},l.prototype.logError=function(n,o){(this.verbose||o===!0)&&console.error(n)},l.prototype.logErrors=function(n){if(n.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(n)},l})();function fi(l){return typeof l>"u"||l===null}var go=(function(){function l(){}return l.codeParseError=function(n){return"QR code parse error, error = ".concat(n)},l.errorGettingUserMedia=function(n){return"Error getting userMedia, error = ".concat(n)},l.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},l.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},l.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},l.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},l.scannerPaused=function(){return"Scanner paused"},l})(),xg=(function(){function l(){}return l.isMediaStreamConstraintsValid=function(n,o){if(typeof n!="object"){var c=typeof n;return o.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(c,"."),!0),!1}for(var g=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],f=new Set(g),x=Object.keys(n),C=0,A=x;C<A.length;C++){var E=A[C];if(f.has(E))return o.logError("".concat(E," is not supported videoConstaints."),!0),!1}return!0},l})(),wa={exports:{}},p2=wa.exports,b0;function m2(){return b0||(b0=1,(function(l,n){(function(o,c){c(n)})(p2,(function(o){function c(I){return I==null}var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,e){I.__proto__=e}||function(I,e){for(var r in e)e.hasOwnProperty(r)&&(I[r]=e[r])};function f(I,e){g(I,e);function r(){this.constructor=I}I.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function x(I,e){var r=Object.setPrototypeOf;r?r(I,e):I.__proto__=e}function C(I,e){e===void 0&&(e=I.constructor);var r=Error.captureStackTrace;r&&r(I,e)}var A=(function(I){f(e,I);function e(r){var i=this.constructor,a=I.call(this,r)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1}),x(a,i.prototype),C(a),a}return e})(Error);class E extends A{constructor(e=void 0){super(e),this.message=e}getKind(){return this.constructor.kind}}E.kind="Exception";class S extends E{}S.kind="ArgumentException";class N extends E{}N.kind="IllegalArgumentException";class D{constructor(e){if(this.binarizer=e,e===null)throw new N("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(e,r){return this.binarizer.getBlackRow(e,r)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(e,r,i,a){const u=this.binarizer.getLuminanceSource().crop(e,r,i,a);return new D(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new D(this.binarizer.createBinarizer(e))}rotateCounterClockwise45(){const e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new D(this.binarizer.createBinarizer(e))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class P extends E{static getChecksumInstance(){return new P}}P.kind="ChecksumException";class U{constructor(e){this.source=e}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class F{static arraycopy(e,r,i,a,u){for(;u--;)i[a++]=e[r++]}static currentTimeMillis(){return Date.now()}}class j extends E{}j.kind="IndexOutOfBoundsException";class K extends j{constructor(e=void 0,r=void 0){super(r),this.index=e,this.message=r}}K.kind="ArrayIndexOutOfBoundsException";class J{static fill(e,r){for(let i=0,a=e.length;i<a;i++)e[i]=r}static fillWithin(e,r,i,a){J.rangeCheck(e.length,r,i);for(let u=r;u<i;u++)e[u]=a}static rangeCheck(e,r,i){if(r>i)throw new N("fromIndex("+r+") > toIndex("+i+")");if(r<0)throw new K(r);if(i>e)throw new K(i)}static asList(...e){return e}static create(e,r,i){return Array.from({length:e}).map(u=>Array.from({length:r}).fill(i))}static createInt32Array(e,r,i){return Array.from({length:e}).map(u=>Int32Array.from({length:r}).fill(i))}static equals(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(let i=0,a=e.length;i<a;i++)if(e[i]!==r[i])return!1;return!0}static hashCode(e){if(e===null)return 0;let r=1;for(const i of e)r=31*r+i;return r}static fillUint8Array(e,r){for(let i=0;i!==e.length;i++)e[i]=r}static copyOf(e,r){return e.slice(0,r)}static copyOfUint8Array(e,r){if(e.length<=r){const i=new Uint8Array(r);return i.set(e),i}return e.slice(0,r)}static copyOfRange(e,r,i){const a=i-r,u=new Int32Array(a);return F.arraycopy(e,r,u,0,a),u}static binarySearch(e,r,i){i===void 0&&(i=J.numberComparator);let a=0,u=e.length-1;for(;a<=u;){const d=u+a>>1,p=i(r,e[d]);if(p>0)a=d+1;else if(p<0)u=d-1;else return d}return-a-1}static numberComparator(e,r){return e-r}}class V{static numberOfTrailingZeros(e){let r;if(e===0)return 32;let i=31;return r=e<<16,r!==0&&(i-=16,e=r),r=e<<8,r!==0&&(i-=8,e=r),r=e<<4,r!==0&&(i-=4,e=r),r=e<<2,r!==0&&(i-=2,e=r),i-(e<<1>>>31)}static numberOfLeadingZeros(e){if(e===0)return 32;let r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r}static toHexString(e){return e.toString(16)}static toBinaryString(e){return String(parseInt(String(e),2))}static bitCount(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63}static truncDivision(e,r){return Math.trunc(e/r)}static parseInt(e,r=void 0){return parseInt(e,r)}}V.MIN_VALUE_32_BITS=-2147483648,V.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=oe.makeArray(e):this.bits=r)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(e){if(e>this.bits.length*32){const r=oe.makeArray(e);F.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}}get(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0}set(e){this.bits[Math.floor(e/32)]|=1<<(e&31)}flip(e){this.bits[Math.floor(e/32)]^=1<<(e&31)}getNextSet(e){const r=this.size;if(e>=r)return r;const i=this.bits;let a=Math.floor(e/32),u=i[a];u&=~((1<<(e&31))-1);const d=i.length;for(;u===0;){if(++a===d)return r;u=i[a]}const p=a*32+V.numberOfTrailingZeros(u);return p>r?r:p}getNextUnset(e){const r=this.size;if(e>=r)return r;const i=this.bits;let a=Math.floor(e/32),u=~i[a];u&=~((1<<(e&31))-1);const d=i.length;for(;u===0;){if(++a===d)return r;u=~i[a]}const p=a*32+V.numberOfTrailingZeros(u);return p>r?r:p}setBulk(e,r){this.bits[Math.floor(e/32)]=r}setRange(e,r){if(r<e||e<0||r>this.size)throw new N;if(r===e)return;r--;const i=Math.floor(e/32),a=Math.floor(r/32),u=this.bits;for(let d=i;d<=a;d++){const p=d>i?0:e&31,y=(2<<(d<a?31:r&31))-(1<<p);u[d]|=y}}clear(){const e=this.bits.length,r=this.bits;for(let i=0;i<e;i++)r[i]=0}isRange(e,r,i){if(r<e||e<0||r>this.size)throw new N;if(r===e)return!0;r--;const a=Math.floor(e/32),u=Math.floor(r/32),d=this.bits;for(let p=a;p<=u;p++){const w=p>a?0:e&31,b=(2<<(p<u?31:r&31))-(1<<w)&4294967295;if((d[p]&b)!==(i?b:0))return!1}return!0}appendBit(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(e,r){if(r<0||r>32)throw new N("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(let i=r;i>0;i--)this.appendBit((e>>i-1&1)===1)}appendBitArray(e){const r=e.size;this.ensureCapacity(this.size+r);for(let i=0;i<r;i++)this.appendBit(e.get(i))}xor(e){if(this.size!==e.size)throw new N("Sizes don't match");const r=this.bits;for(let i=0,a=r.length;i<a;i++)r[i]^=e.bits[i]}toBytes(e,r,i,a){for(let u=0;u<a;u++){let d=0;for(let p=0;p<8;p++)this.get(e)&&(d|=1<<7-p),e++;r[i+u]=d}}getBitArray(){return this.bits}reverse(){const e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),i=r+1,a=this.bits;for(let u=0;u<i;u++){let d=a[u];d=d>>1&1431655765|(d&1431655765)<<1,d=d>>2&858993459|(d&858993459)<<2,d=d>>4&252645135|(d&252645135)<<4,d=d>>8&16711935|(d&16711935)<<8,d=d>>16&65535|(d&65535)<<16,e[r-u]=d}if(this.size!==i*32){const u=i*32-this.size;let d=e[0]>>>u;for(let p=1;p<i;p++){const w=e[p];d|=w<<32-u,e[p-1]=d,d=w>>>u}e[i-1]=d}this.bits=e}static makeArray(e){return new Int32Array(Math.floor((e+31)/32))}equals(e){if(!(e instanceof oe))return!1;const r=e;return this.size===r.size&&J.equals(this.bits,r.bits)}hashCode(){return 31*this.size+J.hashCode(this.bits)}toString(){let e="";for(let r=0,i=this.size;r<i;r++)(r&7)===0&&(e+=" "),e+=this.get(r)?"X":".";return e}clone(){return new oe(this.size,this.bits.slice())}}var _e;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(_e||(_e={}));var xe=_e;class se extends E{static getFormatInstance(){return new se}}se.kind="FormatException";var he;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(he||(he={}));class ne{constructor(e,r,i,...a){this.valueIdentifier=e,this.name=i,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=a,ne.VALUE_IDENTIFIER_TO_ECI.set(e,this),ne.NAME_TO_ECI.set(i,this);const u=this.values;for(let d=0,p=u.length;d!==p;d++){const w=u[d];ne.VALUES_TO_ECI.set(w,this)}for(const d of a)ne.NAME_TO_ECI.set(d,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(e){if(e<0||e>=900)throw new se("incorect value");const r=ne.VALUES_TO_ECI.get(e);if(r===void 0)throw new se("incorect value");return r}static getCharacterSetECIByName(e){const r=ne.NAME_TO_ECI.get(e);if(r===void 0)throw new se("incorect value");return r}equals(e){if(!(e instanceof ne))return!1;const r=e;return this.getName()===r.getName()}}ne.VALUE_IDENTIFIER_TO_ECI=new Map,ne.VALUES_TO_ECI=new Map,ne.NAME_TO_ECI=new Map,ne.Cp437=new ne(he.Cp437,Int32Array.from([0,2]),"Cp437"),ne.ISO8859_1=new ne(he.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ne.ISO8859_2=new ne(he.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ne.ISO8859_3=new ne(he.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ne.ISO8859_4=new ne(he.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ne.ISO8859_5=new ne(he.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ne.ISO8859_6=new ne(he.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ne.ISO8859_7=new ne(he.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ne.ISO8859_8=new ne(he.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ne.ISO8859_9=new ne(he.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ne.ISO8859_10=new ne(he.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ne.ISO8859_11=new ne(he.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ne.ISO8859_13=new ne(he.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ne.ISO8859_14=new ne(he.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ne.ISO8859_15=new ne(he.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ne.ISO8859_16=new ne(he.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ne.SJIS=new ne(he.SJIS,20,"SJIS","Shift_JIS"),ne.Cp1250=new ne(he.Cp1250,21,"Cp1250","windows-1250"),ne.Cp1251=new ne(he.Cp1251,22,"Cp1251","windows-1251"),ne.Cp1252=new ne(he.Cp1252,23,"Cp1252","windows-1252"),ne.Cp1256=new ne(he.Cp1256,24,"Cp1256","windows-1256"),ne.UnicodeBigUnmarked=new ne(he.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ne.UTF8=new ne(he.UTF8,26,"UTF8","UTF-8"),ne.ASCII=new ne(he.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ne.Big5=new ne(he.Big5,28,"Big5"),ne.GB18030=new ne(he.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ne.EUC_KR=new ne(he.EUC_KR,30,"EUC_KR","EUC-KR");class Me extends E{}Me.kind="UnsupportedOperationException";class He{static decode(e,r){const i=this.encodingName(r);return this.customDecoder?this.customDecoder(e,i):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(i)?this.decodeFallback(e,i):new TextDecoder(i).decode(e)}static shouldDecodeOnFallback(e){return!He.isBrowser()&&e==="ISO-8859-1"}static encode(e,r){const i=this.encodingName(r);return this.customEncoder?this.customEncoder(e,i):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(e){return typeof e=="string"?e:e.getName()}static encodingCharacterSet(e){return e instanceof ne?e:ne.getCharacterSetECIByName(e)}static decodeFallback(e,r){const i=this.encodingCharacterSet(r);if(He.isDecodeFallbackSupported(i)){let a="";for(let u=0,d=e.length;u<d;u++){let p=e[u].toString(16);p.length<2&&(p="0"+p),a+="%"+p}return decodeURIComponent(a)}if(i.equals(ne.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new Me(`Encoding ${this.encodingName(r)} not supported by fallback.`)}static isDecodeFallbackSupported(e){return e.equals(ne.UTF8)||e.equals(ne.ISO8859_1)||e.equals(ne.ASCII)}static encodeFallback(e){const i=btoa(unescape(encodeURIComponent(e))).split(""),a=[];for(let u=0;u<i.length;u++)a.push(i[u].charCodeAt(0));return new Uint8Array(a)}}class ve{static castAsNonUtf8Char(e,r=null){const i=r?r.getName():this.ISO88591;return He.decode(new Uint8Array([e]),i)}static guessEncoding(e,r){if(r!=null&&r.get(xe.CHARACTER_SET)!==void 0)return r.get(xe.CHARACTER_SET).toString();const i=e.length;let a=!0,u=!0,d=!0,p=0,w=0,y=0,b=0,T=0,k=0,L=0,W=0,z=0,$=0,ee=0;const ge=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191;for(let pe=0;pe<i&&(a||u||d);pe++){const ce=e[pe]&255;d&&(p>0?(ce&128)===0?d=!1:p--:(ce&128)!==0&&((ce&64)===0?d=!1:(p++,(ce&32)===0?w++:(p++,(ce&16)===0?y++:(p++,(ce&8)===0?b++:d=!1))))),a&&(ce>127&&ce<160?a=!1:ce>159&&(ce<192||ce===215||ce===247)&&ee++),u&&(T>0?ce<64||ce===127||ce>252?u=!1:T--:ce===128||ce===160||ce>239?u=!1:ce>160&&ce<224?(k++,W=0,L++,L>z&&(z=L)):ce>127?(T++,L=0,W++,W>$&&($=W)):(L=0,W=0))}return d&&p>0&&(d=!1),u&&T>0&&(u=!1),d&&(ge||w+y+b>0)?ve.UTF8:u&&(ve.ASSUME_SHIFT_JIS||z>=3||$>=3)?ve.SHIFT_JIS:a&&u?z===2&&k===2||ee*10>=i?ve.SHIFT_JIS:ve.ISO88591:a?ve.ISO88591:u?ve.SHIFT_JIS:d?ve.UTF8:ve.PLATFORM_DEFAULT_ENCODING}static format(e,...r){let i=-1;function a(d,p,w,y,b,T){if(d==="%%")return"%";if(r[++i]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,L;switch(T){case"s":L=r[i];break;case"c":L=r[i][0];break;case"f":L=parseFloat(r[i]).toFixed(d);break;case"p":L=parseFloat(r[i]).toPrecision(d);break;case"e":L=parseFloat(r[i]).toExponential(d);break;case"x":L=parseInt(r[i]).toString(k||16);break;case"d":L=parseFloat(parseInt(r[i],k||10).toPrecision(d)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let W=parseInt(w),z=w&&w[0]+""=="0"?"0":" ";for(;L.length<W;)L=p!==void 0?L+z:z+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,a)}static getBytes(e,r){return He.encode(e,r)}static getCharCode(e,r=0){return e.charCodeAt(r)}static getCharAt(e){return String.fromCharCode(e)}}ve.SHIFT_JIS=ne.SJIS.getName(),ve.GB2312="GB2312",ve.ISO88591=ne.ISO8859_1.getName(),ve.EUC_JP="EUC_JP",ve.UTF8=ne.UTF8.getName(),ve.PLATFORM_DEFAULT_ENCODING=ve.UTF8,ve.ASSUME_SHIFT_JIS=!1;class $e{constructor(e=""){this.value=e}enableDecoding(e){return this.encoding=e,this}append(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=ve.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this}appendChars(e,r,i){for(let a=r;r<r+i;a++)this.append(e[a]);return this}length(){return this.value.length}charAt(e){return this.value.charAt(e)}deleteCharAt(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)}setCharAt(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)}substring(e,r){return this.value.substring(e,r)}setLengthToZero(){this.value=""}toString(){return this.value}insert(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+r.length)}}class ct{constructor(e,r,i,a){if(this.width=e,this.height=r,this.rowSize=i,this.bits=a,r==null&&(r=e),this.height=r,e<1||r<1)throw new N("Both dimensions must be greater than 0");i==null&&(i=Math.floor((e+31)/32)),this.rowSize=i,a==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(e){const r=e.length,i=e[0].length,a=new ct(i,r);for(let u=0;u<r;u++){const d=e[u];for(let p=0;p<i;p++)d[p]&&a.set(p,u)}return a}static parseFromString(e,r,i){if(e===null)throw new N("stringRepresentation cannot be null");const a=new Array(e.length);let u=0,d=0,p=-1,w=0,y=0;for(;y<e.length;)if(e.charAt(y)===`
`||e.charAt(y)==="\r"){if(u>d){if(p===-1)p=u-d;else if(u-d!==p)throw new N("row lengths do not match");d=u,w++}y++}else if(e.substring(y,y+r.length)===r)y+=r.length,a[u]=!0,u++;else if(e.substring(y,y+i.length)===i)y+=i.length,a[u]=!1,u++;else throw new N("illegal character encountered: "+e.substring(y));if(u>d){if(p===-1)p=u-d;else if(u-d!==p)throw new N("row lengths do not match");w++}const b=new ct(p,w);for(let T=0;T<u;T++)a[T]&&b.set(Math.floor(T%p),Math.floor(T/p));return b}get(e,r){const i=r*this.rowSize+Math.floor(e/32);return(this.bits[i]>>>(e&31)&1)!==0}set(e,r){const i=r*this.rowSize+Math.floor(e/32);this.bits[i]|=1<<(e&31)&4294967295}unset(e,r){const i=r*this.rowSize+Math.floor(e/32);this.bits[i]&=~(1<<(e&31)&4294967295)}flip(e,r){const i=r*this.rowSize+Math.floor(e/32);this.bits[i]^=1<<(e&31)&4294967295}xor(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new N("input matrix dimensions do not match");const r=new oe(Math.floor(this.width/32)+1),i=this.rowSize,a=this.bits;for(let u=0,d=this.height;u<d;u++){const p=u*i,w=e.getRow(u,r).getBitArray();for(let y=0;y<i;y++)a[p+y]^=w[y]}}clear(){const e=this.bits,r=e.length;for(let i=0;i<r;i++)e[i]=0}setRegion(e,r,i,a){if(r<0||e<0)throw new N("Left and top must be nonnegative");if(a<1||i<1)throw new N("Height and width must be at least 1");const u=e+i,d=r+a;if(d>this.height||u>this.width)throw new N("The region must fit inside the matrix");const p=this.rowSize,w=this.bits;for(let y=r;y<d;y++){const b=y*p;for(let T=e;T<u;T++)w[b+Math.floor(T/32)]|=1<<(T&31)&4294967295}}getRow(e,r){r==null||r.getSize()<this.width?r=new oe(this.width):r.clear();const i=this.rowSize,a=this.bits,u=e*i;for(let d=0;d<i;d++)r.setBulk(d*32,a[u+d]);return r}setRow(e,r){F.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)}rotate180(){const e=this.getWidth(),r=this.getHeight();let i=new oe(e),a=new oe(e);for(let u=0,d=Math.floor((r+1)/2);u<d;u++)i=this.getRow(u,i),a=this.getRow(r-1-u,a),i.reverse(),a.reverse(),this.setRow(u,a),this.setRow(r-1-u,i)}getEnclosingRectangle(){const e=this.width,r=this.height,i=this.rowSize,a=this.bits;let u=e,d=r,p=-1,w=-1;for(let y=0;y<r;y++)for(let b=0;b<i;b++){const T=a[y*i+b];if(T!==0){if(y<d&&(d=y),y>w&&(w=y),b*32<u){let k=0;for(;(T<<31-k&4294967295)===0;)k++;b*32+k<u&&(u=b*32+k)}if(b*32+31>p){let k=31;for(;!(T>>>k);)k--;b*32+k>p&&(p=b*32+k)}}}return p<u||w<d?null:Int32Array.from([u,d,p-u+1,w-d+1])}getTopLeftOnBit(){const e=this.rowSize,r=this.bits;let i=0;for(;i<r.length&&r[i]===0;)i++;if(i===r.length)return null;const a=i/e;let u=i%e*32;const d=r[i];let p=0;for(;(d<<31-p&4294967295)===0;)p++;return u+=p,Int32Array.from([u,a])}getBottomRightOnBit(){const e=this.rowSize,r=this.bits;let i=r.length-1;for(;i>=0&&r[i]===0;)i--;if(i<0)return null;const a=Math.floor(i/e);let u=Math.floor(i%e)*32;const d=r[i];let p=31;for(;!(d>>>p);)p--;return u+=p,Int32Array.from([u,a])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(e){if(!(e instanceof ct))return!1;const r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&J.equals(this.bits,r.bits)}hashCode(){let e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+J.hashCode(this.bits),e}toString(e="X ",r="  ",i=`
`){return this.buildToString(e,r,i)}buildToString(e,r,i){let a=new $e;for(let u=0,d=this.height;u<d;u++){for(let p=0,w=this.width;p<w;p++)a.append(this.get(p,u)?e:r);a.append(i)}return a.toString()}clone(){return new ct(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends E{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class dt extends U{constructor(e){super(e),this.luminances=dt.EMPTY,this.buckets=new Int32Array(dt.LUMINANCE_BUCKETS)}getBlackRow(e,r){const i=this.getLuminanceSource(),a=i.getWidth();r==null||r.getSize()<a?r=new oe(a):r.clear(),this.initArrays(a);const u=i.getRow(e,this.luminances),d=this.buckets;for(let w=0;w<a;w++)d[(u[w]&255)>>dt.LUMINANCE_SHIFT]++;const p=dt.estimateBlackPoint(d);if(a<3)for(let w=0;w<a;w++)(u[w]&255)<p&&r.set(w);else{let w=u[0]&255,y=u[1]&255;for(let b=1;b<a-1;b++){const T=u[b+1]&255;(y*4-w-T)/2<p&&r.set(b),w=y,y=T}}return r}getBlackMatrix(){const e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight(),a=new ct(r,i);this.initArrays(r);const u=this.buckets;for(let w=1;w<5;w++){const y=Math.floor(i*w/5),b=e.getRow(y,this.luminances),T=Math.floor(r*4/5);for(let k=Math.floor(r/5);k<T;k++){const L=b[k]&255;u[L>>dt.LUMINANCE_SHIFT]++}}const d=dt.estimateBlackPoint(u),p=e.getMatrix();for(let w=0;w<i;w++){const y=w*r;for(let b=0;b<r;b++)(p[y+b]&255)<d&&a.set(b,w)}return a}createBinarizer(e){return new dt(e)}initArrays(e){this.luminances.length<e&&(this.luminances=new Uint8ClampedArray(e));const r=this.buckets;for(let i=0;i<dt.LUMINANCE_BUCKETS;i++)r[i]=0}static estimateBlackPoint(e){const r=e.length;let i=0,a=0,u=0;for(let b=0;b<r;b++)e[b]>u&&(a=b,u=e[b]),e[b]>i&&(i=e[b]);let d=0,p=0;for(let b=0;b<r;b++){const T=b-a,k=e[b]*T*T;k>p&&(d=b,p=k)}if(a>d){const b=a;a=d,d=b}if(d-a<=r/16)throw new ie;let w=d-1,y=-1;for(let b=d-1;b>a;b--){const T=b-a,k=T*T*(d-b)*(i-e[b]);k>y&&(w=b,y=k)}return w<<dt.LUMINANCE_SHIFT}}dt.LUMINANCE_BITS=5,dt.LUMINANCE_SHIFT=8-dt.LUMINANCE_BITS,dt.LUMINANCE_BUCKETS=1<<dt.LUMINANCE_BITS,dt.EMPTY=Uint8ClampedArray.from([0]);class Oe extends dt{constructor(e){super(e),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const e=this.getLuminanceSource(),r=e.getWidth(),i=e.getHeight();if(r>=Oe.MINIMUM_DIMENSION&&i>=Oe.MINIMUM_DIMENSION){const a=e.getMatrix();let u=r>>Oe.BLOCK_SIZE_POWER;(r&Oe.BLOCK_SIZE_MASK)!==0&&u++;let d=i>>Oe.BLOCK_SIZE_POWER;(i&Oe.BLOCK_SIZE_MASK)!==0&&d++;const p=Oe.calculateBlackPoints(a,u,d,r,i),w=new ct(r,i);Oe.calculateThresholdForBlock(a,u,d,r,i,p,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(e){return new Oe(e)}static calculateThresholdForBlock(e,r,i,a,u,d,p){const w=u-Oe.BLOCK_SIZE,y=a-Oe.BLOCK_SIZE;for(let b=0;b<i;b++){let T=b<<Oe.BLOCK_SIZE_POWER;T>w&&(T=w);const k=Oe.cap(b,2,i-3);for(let L=0;L<r;L++){let W=L<<Oe.BLOCK_SIZE_POWER;W>y&&(W=y);const z=Oe.cap(L,2,r-3);let $=0;for(let ge=-2;ge<=2;ge++){const pe=d[k+ge];$+=pe[z-2]+pe[z-1]+pe[z]+pe[z+1]+pe[z+2]}const ee=$/25;Oe.thresholdBlock(e,W,T,ee,a,p)}}}static cap(e,r,i){return e<r?r:e>i?i:e}static thresholdBlock(e,r,i,a,u,d){for(let p=0,w=i*u+r;p<Oe.BLOCK_SIZE;p++,w+=u)for(let y=0;y<Oe.BLOCK_SIZE;y++)(e[w+y]&255)<=a&&d.set(r+y,i+p)}static calculateBlackPoints(e,r,i,a,u){const d=u-Oe.BLOCK_SIZE,p=a-Oe.BLOCK_SIZE,w=new Array(i);for(let y=0;y<i;y++){w[y]=new Int32Array(r);let b=y<<Oe.BLOCK_SIZE_POWER;b>d&&(b=d);for(let T=0;T<r;T++){let k=T<<Oe.BLOCK_SIZE_POWER;k>p&&(k=p);let L=0,W=255,z=0;for(let ee=0,ge=b*a+k;ee<Oe.BLOCK_SIZE;ee++,ge+=a){for(let pe=0;pe<Oe.BLOCK_SIZE;pe++){const ce=e[ge+pe]&255;L+=ce,ce<W&&(W=ce),ce>z&&(z=ce)}if(z-W>Oe.MIN_DYNAMIC_RANGE)for(ee++,ge+=a;ee<Oe.BLOCK_SIZE;ee++,ge+=a)for(let pe=0;pe<Oe.BLOCK_SIZE;pe++)L+=e[ge+pe]&255}let $=L>>Oe.BLOCK_SIZE_POWER*2;if(z-W<=Oe.MIN_DYNAMIC_RANGE&&($=W/2,y>0&&T>0)){const ee=(w[y-1][T]+2*w[y][T-1]+w[y-1][T-1])/4;W<ee&&($=ee)}w[y][T]=$}}return w}}Oe.BLOCK_SIZE_POWER=3,Oe.BLOCK_SIZE=1<<Oe.BLOCK_SIZE_POWER,Oe.BLOCK_SIZE_MASK=Oe.BLOCK_SIZE-1,Oe.MINIMUM_DIMENSION=Oe.BLOCK_SIZE*5,Oe.MIN_DYNAMIC_RANGE=24;class Ee{constructor(e,r){this.width=e,this.height=r}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(e,r,i,a){throw new Me("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Me("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Me("This luminance source does not support rotation by 45 degrees.")}toString(){const e=new Uint8ClampedArray(this.width);let r=new $e;for(let i=0;i<this.height;i++){const a=this.getRow(i,e);for(let u=0;u<this.width;u++){const d=a[u]&255;let p;d<64?p="#":d<128?p="+":d<192?p=".":p=" ",r.append(p)}r.append(`
`)}return r.toString()}}class Le extends Ee{constructor(e){super(e.getWidth(),e.getHeight()),this.delegate=e}getRow(e,r){const i=this.delegate.getRow(e,r),a=this.getWidth();for(let u=0;u<a;u++)i[u]=255-(i[u]&255);return i}getMatrix(){const e=this.delegate.getMatrix(),r=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(r);for(let a=0;a<r;a++)i[a]=255-(e[a]&255);return i}isCropSupported(){return this.delegate.isCropSupported()}crop(e,r,i,a){return new Le(this.delegate.crop(e,r,i,a))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Le(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Le(this.delegate.rotateCounterClockwise45())}}class Ce extends Ee{constructor(e){super(e.width,e.height),this.canvas=e,this.tempCanvasElement=null,this.buffer=Ce.makeBufferFromCanvasImageData(e)}static makeBufferFromCanvasImageData(e){const r=e.getContext("2d").getImageData(0,0,e.width,e.height);return Ce.toGrayscaleBuffer(r.data,e.width,e.height)}static toGrayscaleBuffer(e,r,i){const a=new Uint8ClampedArray(r*i);for(let u=0,d=0,p=e.length;u<p;u+=4,d++){let w;if(e[u+3]===0)w=255;else{const b=e[u],T=e[u+1],k=e[u+2];w=306*b+601*T+117*k+512>>10}a[d]=w}return a}getRow(e,r){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth(),a=e*i;return r===null?r=this.buffer.slice(a,a+i):(r.length<i&&(r=new Uint8ClampedArray(i)),r.set(this.buffer.slice(a,a+i))),r}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(e,r,i,a){return super.crop(e,r,i,a),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const e=this.canvas.ownerDocument.createElement("canvas");e.width=this.canvas.width,e.height=this.canvas.height,this.tempCanvasElement=e}return this.tempCanvasElement}rotate(e){const r=this.getTempCanvasElement(),i=r.getContext("2d"),a=e*Ce.DEGREE_TO_RADIANS,u=this.canvas.width,d=this.canvas.height,p=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*d),w=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*d);return r.width=p,r.height=w,i.translate(p/2,w/2),i.rotate(a),i.drawImage(this.canvas,u/-2,d/-2),this.buffer=Ce.makeBufferFromCanvasImageData(r),this}invert(){return new Le(this)}}Ce.DEGREE_TO_RADIANS=Math.PI/180;class X{constructor(e,r,i){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=i||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ae=(globalThis||Pl||self||window||void 0)&&(globalThis||Pl||self||window||void 0).__awaiter||function(I,e,r,i){function a(u){return u instanceof r?u:new r(function(d){d(u)})}return new(r||(r=Promise))(function(u,d){function p(b){try{y(i.next(b))}catch(T){d(T)}}function w(b){try{y(i.throw(b))}catch(T){d(T)}}function y(b){b.done?u(b.value):a(b.value).then(p,w)}y((i=i.apply(I,e||[])).next())})};class Ke{constructor(e,r=500,i){this.reader=e,this.timeBetweenScansMillis=r,this._hints=i,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(e){this._timeBetweenDecodingAttempts=e<0?0:e}set hints(e){this._hints=e||null}get hints(){return this._hints}listVideoInputDevices(){return ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const e=yield navigator.mediaDevices.enumerateDevices(),r=[];for(const i of e){const a=i.kind==="video"?"videoinput":i.kind;if(a!=="videoinput")continue;const u=i.deviceId||i.id,d=i.label||`Video device ${r.length+1}`,p=i.groupId,w={deviceId:u,label:d,kind:a,groupId:p};r.push(w)}return r})}getVideoInputDevices(){return ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(r=>new X(r.deviceId,r.label))})}findDeviceById(e){return ae(this,void 0,void 0,function*(){const r=yield this.listVideoInputDevices();return r?r.find(i=>i.deviceId===e):null})}decodeFromInputVideoDevice(e,r){return ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(e,r)})}decodeOnceFromVideoDevice(e,r){return ae(this,void 0,void 0,function*(){this.reset();let i;e?i={deviceId:{exact:e}}:i={facingMode:"environment"};const a={video:i};return yield this.decodeOnceFromConstraints(a,r)})}decodeOnceFromConstraints(e,r){return ae(this,void 0,void 0,function*(){const i=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeOnceFromStream(i,r)})}decodeOnceFromStream(e,r){return ae(this,void 0,void 0,function*(){this.reset();const i=yield this.attachStreamToVideo(e,r);return yield this.decodeOnce(i)})}decodeFromInputVideoDeviceContinuously(e,r,i){return ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(e,r,i)})}decodeFromVideoDevice(e,r,i){return ae(this,void 0,void 0,function*(){let a;e?a={deviceId:{exact:e}}:a={facingMode:"environment"};const u={video:a};return yield this.decodeFromConstraints(u,r,i)})}decodeFromConstraints(e,r,i){return ae(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(e);return yield this.decodeFromStream(a,r,i)})}decodeFromStream(e,r,i){return ae(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(e,r);return yield this.decodeContinuously(a,i)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(e,r){return ae(this,void 0,void 0,function*(){const i=this.prepareVideoElement(r);return this.addVideoSource(i,e),this.videoElement=i,this.stream=e,yield this.playVideoOnLoadAsync(i),i})}playVideoOnLoadAsync(e){return new Promise((r,i)=>this.playVideoOnLoad(e,()=>r()))}playVideoOnLoad(e,r){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(e),e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)}isVideoPlaying(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2}tryPlayVideo(e){return ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(e)){console.warn("Trying to play video that is already playing.");return}try{yield e.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(e,r){const i=document.getElementById(e);if(!i)throw new S(`element with id '${e}' not found`);if(i.nodeName.toLowerCase()!==r.toLowerCase())throw new S(`element with id '${e}' must be an ${r} element`);return i}decodeFromImage(e,r){if(!e&&!r)throw new S("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)}decodeFromVideo(e,r){if(!e&&!r)throw new S("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)}decodeFromVideoContinuously(e,r,i){if(e===void 0&&r===void 0)throw new S("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,i):this.decodeFromVideoElementContinuously(e,i)}decodeFromImageElement(e){if(!e)throw new S("An image element must be provided.");this.reset();const r=this.prepareImageElement(e);this.imageElement=r;let i;return this.isImageLoaded(r)?i=this.decodeOnce(r,!1,!0):i=this._decodeOnLoadImage(r),i}decodeFromVideoElement(e){const r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)}decodeFromVideoElementContinuously(e,r){const i=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(i,r)}_decodeFromVideoElementSetup(e){if(!e)throw new S("A video element must be provided.");this.reset();const r=this.prepareVideoElement(e);return this.videoElement=r,r}decodeFromImageUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const r=this.prepareImageElement();this.imageElement=r;const i=this._decodeOnLoadImage(r);return r.src=e,i}decodeFromVideoUrl(e){if(!e)throw new S("An URL must be provided.");this.reset();const r=this.prepareVideoElement(),i=this.decodeFromVideoElement(r);return r.src=e,i}decodeFromVideoUrlContinuously(e,r){if(!e)throw new S("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElementContinuously(i,r);return i.src=e,a}_decodeOnLoadImage(e){return new Promise((r,i)=>{this.imageLoadedListener=()=>this.decodeOnce(e,!1,!0).then(r,i),e.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(e){return ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(e),yield this.decodeOnce(e)})}_decodeOnLoadVideoContinuously(e,r){return ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(e),this.decodeContinuously(e,r)})}isImageLoaded(e){return!(!e.complete||e.naturalWidth===0)}prepareImageElement(e){let r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r}prepareVideoElement(e){let r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r}decodeOnce(e,r=!0,i=!0){this._stopAsyncDecode=!1;const a=(u,d)=>{if(this._stopAsyncDecode){d(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const p=this.decode(e);u(p)}catch(p){const w=r&&p instanceof ie,b=(p instanceof P||p instanceof se)&&i;if(w||b)return setTimeout(a,this._timeBetweenDecodingAttempts,u,d);d(p)}};return new Promise((u,d)=>a(u,d))}decodeContinuously(e,r){this._stopContinuousDecode=!1;const i=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const a=this.decode(e);r(a,null),setTimeout(i,this.timeBetweenScansMillis)}catch(a){r(null,a);const u=a instanceof P||a instanceof se,d=a instanceof ie;(u||d)&&setTimeout(i,this._timeBetweenDecodingAttempts)}};i()}decode(e){const r=this.createBinaryBitmap(e);return this.decodeBitmap(r)}_isHTMLVideoElement(e){return e.videoWidth!==0}drawFrameOnCanvas(e,r,i){r||(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}drawImageOnCanvas(e,r,i=this.captureCanvasContext){r||(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),i||(i=this.captureCanvasContext),i.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)}createBinaryBitmap(e){this.getCaptureCanvasContext(e),this._isHTMLVideoElement(e)?this.drawFrameOnCanvas(e):this.drawImageOnCanvas(e);const r=this.getCaptureCanvas(e),i=new Ce(r),a=new Oe(i);return new D(a)}getCaptureCanvasContext(e){if(!this.captureCanvasContext){const i=this.getCaptureCanvas(e).getContext("2d");this.captureCanvasContext=i}return this.captureCanvasContext}getCaptureCanvas(e){if(!this.captureCanvas){const r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas}decodeBitmap(e){return this.reader.decode(e,this._hints)}createCaptureCanvas(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const r=document.createElement("canvas");let i,a;return typeof e<"u"&&(e instanceof HTMLVideoElement?(i=e.videoWidth,a=e.videoHeight):e instanceof HTMLImageElement&&(i=e.naturalWidth||e.width,a=e.naturalHeight||e.height)),r.style.width=i+"px",r.style.height=a+"px",r.width=i,r.height=a,r}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(e=>e.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}}cleanVideoSource(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")}}class Fe{constructor(e,r,i=r==null?0:8*r.length,a,u,d=F.currentTimeMillis()){this.text=e,this.rawBytes=r,this.numBits=i,this.resultPoints=a,this.format=u,this.timestamp=d,this.text=e,this.rawBytes=r,i==null?this.numBits=r==null?0:8*r.length:this.numBits=i,this.resultPoints=a,this.format=u,this.resultMetadata=null,d==null?this.timestamp=F.currentTimeMillis():this.timestamp=d}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)}putAllMetadata(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))}addResultPoints(e){const r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){const i=new Array(r.length+e.length);F.arraycopy(r,0,i,0,r.length),F.arraycopy(e,0,i,r.length,e.length),this.resultPoints=i}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ot;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ot||(ot={}));var we=ot,xt;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(xt||(xt={}));var Xe=xt;class wt{constructor(e,r,i,a,u=-1,d=-1){this.rawBytes=e,this.text=r,this.byteSegments=i,this.ecLevel=a,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=d,this.numBits=e==null?0:8*e.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(e){this.numBits=e}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(e){this.errorsCorrected=e}getErasures(){return this.erasures}setErasures(e){this.erasures=e}getOther(){return this.other}setOther(e){this.other=e}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class nr{exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}static addOrSubtract(e,r){return e^r}}class ir{constructor(e,r){if(r.length===0)throw new N;this.field=e;const i=r.length;if(i>1&&r[0]===0){let a=1;for(;a<i&&r[a]===0;)a++;a===i?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(i-a),F.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);const r=this.coefficients;let i;if(e===1){i=0;for(let d=0,p=r.length;d!==p;d++){const w=r[d];i=nr.addOrSubtract(i,w)}return i}i=r[0];const a=r.length,u=this.field;for(let d=1;d<a;d++)i=nr.addOrSubtract(u.multiply(e,i),r[d]);return i}addOrSubtract(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,i=e.coefficients;if(r.length>i.length){const d=r;r=i,i=d}let a=new Int32Array(i.length);const u=i.length-r.length;F.arraycopy(i,0,a,0,u);for(let d=u;d<i.length;d++)a[d]=nr.addOrSubtract(r[d-u],i[d]);return new ir(this.field,a)}multiply(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();const r=this.coefficients,i=r.length,a=e.coefficients,u=a.length,d=new Int32Array(i+u-1),p=this.field;for(let w=0;w<i;w++){const y=r[w];for(let b=0;b<u;b++)d[w+b]=nr.addOrSubtract(d[w+b],p.multiply(y,a[b]))}return new ir(p,d)}multiplyScalar(e){if(e===0)return this.field.getZero();if(e===1)return this;const r=this.coefficients.length,i=this.field,a=new Int32Array(r),u=this.coefficients;for(let d=0;d<r;d++)a[d]=i.multiply(u[d],e);return new ir(i,a)}multiplyByMonomial(e,r){if(e<0)throw new N;if(r===0)return this.field.getZero();const i=this.coefficients,a=i.length,u=new Int32Array(a+e),d=this.field;for(let p=0;p<a;p++)u[p]=d.multiply(i[p],r);return new ir(d,u)}divide(e){if(!this.field.equals(e.field))throw new N("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new N("Divide by 0");const r=this.field;let i=r.getZero(),a=this;const u=e.getCoefficient(e.getDegree()),d=r.inverse(u);for(;a.getDegree()>=e.getDegree()&&!a.isZero();){const p=a.getDegree()-e.getDegree(),w=r.multiply(a.getCoefficient(a.getDegree()),d),y=e.multiplyByMonomial(p,w),b=r.buildMonomial(p,w);i=i.addOrSubtract(b),a=a.addOrSubtract(y)}return[i,a]}toString(){let e="";for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);if(i!==0){if(i<0?(e+=" - ",i=-i):e.length>0&&(e+=" + "),r===0||i!==1){const a=this.field.log(i);a===0?e+="1":a===1?e+="a":(e+="a^",e+=a)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e}}class Yi extends E{}Yi.kind="ArithmeticException";class at extends nr{constructor(e,r,i){super(),this.primitive=e,this.size=r,this.generatorBase=i;const a=new Int32Array(r);let u=1;for(let p=0;p<r;p++)a[p]=u,u*=2,u>=r&&(u^=e,u&=r-1);this.expTable=a;const d=new Int32Array(r);for(let p=0;p<r-1;p++)d[a[p]]=p;this.logTable=d,this.zero=new ir(this,Int32Array.from([0])),this.one=new ir(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new N;if(r===0)return this.zero;const i=new Int32Array(e+1);return i[0]=r,new ir(this,i)}inverse(e){if(e===0)throw new Yi;return this.expTable[this.size-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+V.toHexString(this.primitive)+","+this.size+")"}equals(e){return e===this}}at.AZTEC_DATA_12=new at(4201,4096,1),at.AZTEC_DATA_10=new at(1033,1024,1),at.AZTEC_DATA_6=new at(67,64,1),at.AZTEC_PARAM=new at(19,16,1),at.QR_CODE_FIELD_256=new at(285,256,0),at.DATA_MATRIX_FIELD_256=new at(301,256,1),at.AZTEC_DATA_8=at.DATA_MATRIX_FIELD_256,at.MAXICODE_FIELD_64=at.AZTEC_DATA_6;class Fn extends E{}Fn.kind="ReedSolomonException";class Zr extends E{}Zr.kind="IllegalStateException";class wi{constructor(e){this.field=e}decode(e,r){const i=this.field,a=new ir(i,e),u=new Int32Array(r);let d=!0;for(let L=0;L<r;L++){const W=a.evaluateAt(i.exp(L+i.getGeneratorBase()));u[u.length-1-L]=W,W!==0&&(d=!1)}if(d)return;const p=new ir(i,u),w=this.runEuclideanAlgorithm(i.buildMonomial(r,1),p,r),y=w[0],b=w[1],T=this.findErrorLocations(y),k=this.findErrorMagnitudes(b,T);for(let L=0;L<T.length;L++){const W=e.length-1-i.log(T[L]);if(W<0)throw new Fn("Bad error location");e[W]=at.addOrSubtract(e[W],k[L])}}runEuclideanAlgorithm(e,r,i){if(e.getDegree()<r.getDegree()){const L=e;e=r,r=L}const a=this.field;let u=e,d=r,p=a.getZero(),w=a.getOne();for(;d.getDegree()>=(i/2|0);){let L=u,W=p;if(u=d,p=w,u.isZero())throw new Fn("r_{i-1} was zero");d=L;let z=a.getZero();const $=u.getCoefficient(u.getDegree()),ee=a.inverse($);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){const ge=d.getDegree()-u.getDegree(),pe=a.multiply(d.getCoefficient(d.getDegree()),ee);z=z.addOrSubtract(a.buildMonomial(ge,pe)),d=d.addOrSubtract(u.multiplyByMonomial(ge,pe))}if(w=z.multiply(p).addOrSubtract(W),d.getDegree()>=u.getDegree())throw new Zr("Division algorithm failed to reduce polynomial?")}const y=w.getCoefficient(0);if(y===0)throw new Fn("sigmaTilde(0) was zero");const b=a.inverse(y),T=w.multiplyScalar(b),k=d.multiplyScalar(b);return[T,k]}findErrorLocations(e){const r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);const i=new Int32Array(r);let a=0;const u=this.field;for(let d=1;d<u.getSize()&&a<r;d++)e.evaluateAt(d)===0&&(i[a]=u.inverse(d),a++);if(a!==r)throw new Fn("Error locator degree does not match number of roots");return i}findErrorMagnitudes(e,r){const i=r.length,a=new Int32Array(i),u=this.field;for(let d=0;d<i;d++){const p=u.inverse(r[d]);let w=1;for(let y=0;y<i;y++)if(d!==y){const b=u.multiply(r[y],p),T=(b&1)===0?b|1:b&-2;w=u.multiply(w,T)}a[d]=u.multiply(e.evaluateAt(p),u.inverse(w)),u.getGeneratorBase()!==0&&(a[d]=u.multiply(a[d],p))}return a}}var Xt;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(Xt||(Xt={}));class Et{decode(e){this.ddata=e;let r=e.getBits(),i=this.extractBits(r),a=this.correctBits(i),u=Et.convertBoolArrayToByteArray(a),d=Et.getEncodedData(a),p=new wt(u,d,null,null);return p.setNumBits(a.length),p}static highLevelDecode(e){return this.getEncodedData(e)}static getEncodedData(e){let r=e.length,i=Xt.UPPER,a=Xt.UPPER,u="",d=0;for(;d<r;)if(a===Xt.BINARY){if(r-d<5)break;let p=Et.readCode(e,d,5);if(d+=5,p===0){if(r-d<11)break;p=Et.readCode(e,d,11)+31,d+=11}for(let w=0;w<p;w++){if(r-d<8){d=r;break}const y=Et.readCode(e,d,8);u+=ve.castAsNonUtf8Char(y),d+=8}a=i}else{let p=a===Xt.DIGIT?4:5;if(r-d<p)break;let w=Et.readCode(e,d,p);d+=p;let y=Et.getCharacter(a,w);y.startsWith("CTRL_")?(i=a,a=Et.getTable(y.charAt(5)),y.charAt(6)==="L"&&(i=a)):(u+=y,a=i)}return u}static getTable(e){switch(e){case"L":return Xt.LOWER;case"P":return Xt.PUNCT;case"M":return Xt.MIXED;case"D":return Xt.DIGIT;case"B":return Xt.BINARY;case"U":default:return Xt.UPPER}}static getCharacter(e,r){switch(e){case Xt.UPPER:return Et.UPPER_TABLE[r];case Xt.LOWER:return Et.LOWER_TABLE[r];case Xt.MIXED:return Et.MIXED_TABLE[r];case Xt.PUNCT:return Et.PUNCT_TABLE[r];case Xt.DIGIT:return Et.DIGIT_TABLE[r];default:throw new Zr("Bad table")}}correctBits(e){let r,i;this.ddata.getNbLayers()<=2?(i=6,r=at.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(i=8,r=at.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(i=10,r=at.AZTEC_DATA_10):(i=12,r=at.AZTEC_DATA_12);let a=this.ddata.getNbDatablocks(),u=e.length/i;if(u<a)throw new se;let d=e.length%i,p=new Int32Array(u);for(let k=0;k<u;k++,d+=i)p[k]=Et.readCode(e,d,i);try{new wi(r).decode(p,u-a)}catch(k){throw new se(k)}let w=(1<<i)-1,y=0;for(let k=0;k<a;k++){let L=p[k];if(L===0||L===w)throw new se;(L===1||L===w-1)&&y++}let b=new Array(a*i-y),T=0;for(let k=0;k<a;k++){let L=p[k];if(L===1||L===w-1)b.fill(L>1,T,T+i-1),T+=i-1;else for(let W=i-1;W>=0;--W)b[T++]=(L&1<<W)!==0}return b}extractBits(e){let r=this.ddata.isCompact(),i=this.ddata.getNbLayers(),a=(r?11:14)+i*4,u=new Int32Array(a),d=new Array(this.totalBitsInLayer(i,r));if(r)for(let p=0;p<u.length;p++)u[p]=p;else{let p=a+1+2*V.truncDivision(V.truncDivision(a,2)-1,15),w=a/2,y=V.truncDivision(p,2);for(let b=0;b<w;b++){let T=b+V.truncDivision(b,15);u[w-b-1]=y-T-1,u[w+b]=y+T+1}}for(let p=0,w=0;p<i;p++){let y=(i-p)*4+(r?9:12),b=p*2,T=a-1-b;for(let k=0;k<y;k++){let L=k*2;for(let W=0;W<2;W++)d[w+L+W]=e.get(u[b+W],u[b+k]),d[w+2*y+L+W]=e.get(u[b+k],u[T-W]),d[w+4*y+L+W]=e.get(u[T-W],u[T-k]),d[w+6*y+L+W]=e.get(u[T-k],u[b+W])}w+=y*8}return d}static readCode(e,r,i){let a=0;for(let u=r;u<r+i;u++)a<<=1,e[u]&&(a|=1);return a}static readByte(e,r){let i=e.length-r;return i>=8?Et.readCode(e,r,8):Et.readCode(e,r,i)<<8-i}static convertBoolArrayToByteArray(e){let r=new Uint8Array((e.length+7)/8);for(let i=0;i<r.length;i++)r[i]=Et.readByte(e,8*i);return r}totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}Et.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Et.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Et.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Et.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Et.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class it{constructor(){}static round(e){return e===NaN?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0}static distance(e,r,i,a){const u=e-i,d=r-a;return Math.sqrt(u*u+d*d)}static sum(e){let r=0;for(let i=0,a=e.length;i!==a;i++){const u=e[i];r+=u}return r}}class Un{static floatToIntBits(e){return e}}Un.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ie{constructor(e,r){this.x=e,this.y=r}getX(){return this.x}getY(){return this.y}equals(e){if(e instanceof Ie){const r=e;return this.x===r.x&&this.y===r.y}return!1}hashCode(){return 31*Un.floatToIntBits(this.x)+Un.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(e){const r=this.distance(e[0],e[1]),i=this.distance(e[1],e[2]),a=this.distance(e[0],e[2]);let u,d,p;if(i>=r&&i>=a?(d=e[0],u=e[1],p=e[2]):a>=i&&a>=r?(d=e[1],u=e[0],p=e[2]):(d=e[2],u=e[0],p=e[1]),this.crossProductZ(u,d,p)<0){const w=u;u=p,p=w}e[0]=u,e[1]=d,e[2]=p}static distance(e,r){return it.distance(e.x,e.y,r.x,r.y)}static crossProductZ(e,r,i){const a=r.x,u=r.y;return(i.x-a)*(e.y-u)-(i.y-u)*(e.x-a)}}class yi{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Co extends yi{constructor(e,r,i,a,u){super(e,r),this.compact=i,this.nbDatablocks=a,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class hn{constructor(e,r,i,a){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=hn.INIT_SIZE),i==null&&(i=e.getWidth()/2|0),a==null&&(a=e.getHeight()/2|0);const u=r/2|0;if(this.leftInit=i-u,this.rightInit=i+u,this.upInit=a-u,this.downInit=a+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let e=this.leftInit,r=this.rightInit,i=this.upInit,a=this.downInit,u=!1,d=!0,p=!1,w=!1,y=!1,b=!1,T=!1;const k=this.width,L=this.height;for(;d;){d=!1;let W=!0;for(;(W||!w)&&r<k;)W=this.containsBlackPoint(i,a,r,!1),W?(r++,d=!0,w=!0):w||r++;if(r>=k){u=!0;break}let z=!0;for(;(z||!y)&&a<L;)z=this.containsBlackPoint(e,r,a,!0),z?(a++,d=!0,y=!0):y||a++;if(a>=L){u=!0;break}let $=!0;for(;($||!b)&&e>=0;)$=this.containsBlackPoint(i,a,e,!1),$?(e--,d=!0,b=!0):b||e--;if(e<0){u=!0;break}let ee=!0;for(;(ee||!T)&&i>=0;)ee=this.containsBlackPoint(e,r,i,!0),ee?(i--,d=!0,T=!0):T||i--;if(i<0){u=!0;break}d&&(p=!0)}if(!u&&p){const W=r-e;let z=null;for(let pe=1;z===null&&pe<W;pe++)z=this.getBlackPointOnSegment(e,a-pe,e+pe,a);if(z==null)throw new ie;let $=null;for(let pe=1;$===null&&pe<W;pe++)$=this.getBlackPointOnSegment(e,i+pe,e+pe,i);if($==null)throw new ie;let ee=null;for(let pe=1;ee===null&&pe<W;pe++)ee=this.getBlackPointOnSegment(r,i+pe,r-pe,i);if(ee==null)throw new ie;let ge=null;for(let pe=1;ge===null&&pe<W;pe++)ge=this.getBlackPointOnSegment(r,a-pe,r-pe,a);if(ge==null)throw new ie;return this.centerEdges(ge,z,ee,$)}else throw new ie}getBlackPointOnSegment(e,r,i,a){const u=it.round(it.distance(e,r,i,a)),d=(i-e)/u,p=(a-r)/u,w=this.image;for(let y=0;y<u;y++){const b=it.round(e+y*d),T=it.round(r+y*p);if(w.get(b,T))return new Ie(b,T)}return null}centerEdges(e,r,i,a){const u=e.getX(),d=e.getY(),p=r.getX(),w=r.getY(),y=i.getX(),b=i.getY(),T=a.getX(),k=a.getY(),L=hn.CORR;return u<this.width/2?[new Ie(T-L,k+L),new Ie(p+L,w+L),new Ie(y-L,b-L),new Ie(u+L,d-L)]:[new Ie(T+L,k+L),new Ie(p+L,w-L),new Ie(y-L,b+L),new Ie(u-L,d-L)]}containsBlackPoint(e,r,i,a){const u=this.image;if(a){for(let d=e;d<=r;d++)if(u.get(d,i))return!0}else for(let d=e;d<=r;d++)if(u.get(i,d))return!0;return!1}}hn.INIT_SIZE=10,hn.CORR=1;class Os{static checkAndNudgePoints(e,r){const i=e.getWidth(),a=e.getHeight();let u=!0;for(let d=0;d<r.length&&u;d+=2){const p=Math.floor(r[d]),w=Math.floor(r[d+1]);if(p<-1||p>i||w<-1||w>a)throw new ie;u=!1,p===-1?(r[d]=0,u=!0):p===i&&(r[d]=i-1,u=!0),w===-1?(r[d+1]=0,u=!0):w===a&&(r[d+1]=a-1,u=!0)}u=!0;for(let d=r.length-2;d>=0&&u;d-=2){const p=Math.floor(r[d]),w=Math.floor(r[d+1]);if(p<-1||p>i||w<-1||w>a)throw new ie;u=!1,p===-1?(r[d]=0,u=!0):p===i&&(r[d]=i-1,u=!0),w===-1?(r[d+1]=0,u=!0):w===a&&(r[d+1]=a-1,u=!0)}}}class jr{constructor(e,r,i,a,u,d,p,w,y){this.a11=e,this.a21=r,this.a31=i,this.a12=a,this.a22=u,this.a32=d,this.a13=p,this.a23=w,this.a33=y}static quadrilateralToQuadrilateral(e,r,i,a,u,d,p,w,y,b,T,k,L,W,z,$){const ee=jr.quadrilateralToSquare(e,r,i,a,u,d,p,w);return jr.squareToQuadrilateral(y,b,T,k,L,W,z,$).times(ee)}transformPoints(e){const r=e.length,i=this.a11,a=this.a12,u=this.a13,d=this.a21,p=this.a22,w=this.a23,y=this.a31,b=this.a32,T=this.a33;for(let k=0;k<r;k+=2){const L=e[k],W=e[k+1],z=u*L+w*W+T;e[k]=(i*L+d*W+y)/z,e[k+1]=(a*L+p*W+b)/z}}transformPointsWithValues(e,r){const i=this.a11,a=this.a12,u=this.a13,d=this.a21,p=this.a22,w=this.a23,y=this.a31,b=this.a32,T=this.a33,k=e.length;for(let L=0;L<k;L++){const W=e[L],z=r[L],$=u*W+w*z+T;e[L]=(i*W+d*z+y)/$,r[L]=(a*W+p*z+b)/$}}static squareToQuadrilateral(e,r,i,a,u,d,p,w){const y=e-i+u-p,b=r-a+d-w;if(y===0&&b===0)return new jr(i-e,u-i,e,a-r,d-a,r,0,0,1);{const T=i-u,k=p-u,L=a-d,W=w-d,z=T*W-k*L,$=(y*W-k*b)/z,ee=(T*b-y*L)/z;return new jr(i-e+$*i,p-e+ee*p,e,a-r+$*a,w-r+ee*w,r,$,ee,1)}}static quadrilateralToSquare(e,r,i,a,u,d,p,w){return jr.squareToQuadrilateral(e,r,i,a,u,d,p,w).buildAdjoint()}buildAdjoint(){return new jr(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(e){return new jr(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)}}class ks extends Os{sampleGrid(e,r,i,a,u,d,p,w,y,b,T,k,L,W,z,$,ee,ge,pe){const ce=jr.quadrilateralToQuadrilateral(a,u,d,p,w,y,b,T,k,L,W,z,$,ee,ge,pe);return this.sampleGridWithTransform(e,r,i,ce)}sampleGridWithTransform(e,r,i,a){if(r<=0||i<=0)throw new ie;const u=new ct(r,i),d=new Float32Array(2*r);for(let p=0;p<i;p++){const w=d.length,y=p+.5;for(let b=0;b<w;b+=2)d[b]=b/2+.5,d[b+1]=y;a.transformPoints(d),Os.checkAndNudgePoints(e,d);try{for(let b=0;b<w;b+=2)e.get(Math.floor(d[b]),Math.floor(d[b+1]))&&u.set(b/2,p)}catch{throw new ie}}return u}}class Qr{static setGridSampler(e){Qr.gridSampler=e}static getInstance(){return Qr.gridSampler}}Qr.gridSampler=new ks;class hr{constructor(e,r){this.x=e,this.y=r}toResultPoint(){return new Ie(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class vi{constructor(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}detect(){return this.detectMirror(!1)}detectMirror(e){let r=this.getMatrixCenter(),i=this.getBullsEyeCorners(r);if(e){let d=i[0];i[0]=i[2],i[2]=d}this.extractParameters(i);let a=this.sampleGrid(this.image,i[this.shift%4],i[(this.shift+1)%4],i[(this.shift+2)%4],i[(this.shift+3)%4]),u=this.getMatrixCornerPoints(i);return new Co(a,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new ie;let r=2*this.nbCenterLayers,i=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(i,r);let a=0;for(let d=0;d<4;d++){let p=i[(this.shift+d)%4];this.compact?(a<<=7,a+=p>>1&127):(a<<=10,a+=(p>>2&992)+(p>>1&31))}let u=this.getCorrectedParameterData(a,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(e,r){let i=0;e.forEach((a,u,d)=>{let p=(a>>r-2<<1)+(a&1);i=(i<<3)+p}),i=((i&1)<<11)+(i>>1);for(let a=0;a<4;a++)if(V.bitCount(i^this.EXPECTED_CORNER_BITS[a])<=2)return a;throw new ie}getCorrectedParameterData(e,r){let i,a;r?(i=7,a=2):(i=10,a=4);let u=i-a,d=new Int32Array(i);for(let w=i-1;w>=0;--w)d[w]=e&15,e>>=4;try{new wi(at.AZTEC_PARAM).decode(d,u)}catch{throw new ie}let p=0;for(let w=0;w<a;w++)p=(p<<4)+d[w];return p}getBullsEyeCorners(e){let r=e,i=e,a=e,u=e,d=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let T=this.getFirstDifferent(r,d,1,-1),k=this.getFirstDifferent(i,d,1,1),L=this.getFirstDifferent(a,d,-1,1),W=this.getFirstDifferent(u,d,-1,-1);if(this.nbCenterLayers>2){let z=this.distancePoint(W,T)*this.nbCenterLayers/(this.distancePoint(u,r)*(this.nbCenterLayers+2));if(z<.75||z>1.25||!this.isWhiteOrBlackRectangle(T,k,L,W))break}r=T,i=k,a=L,u=W,d=!d}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let p=new Ie(r.getX()+.5,r.getY()-.5),w=new Ie(i.getX()+.5,i.getY()+.5),y=new Ie(a.getX()-.5,a.getY()+.5),b=new Ie(u.getX()-.5,u.getY()-.5);return this.expandSquare([p,w,y,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let e,r,i,a;try{let p=new hn(this.image).detect();e=p[0],r=p[1],i=p[2],a=p[3]}catch{let w=this.image.getWidth()/2,y=this.image.getHeight()/2;e=this.getFirstDifferent(new hr(w+7,y-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new hr(w+7,y+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new hr(w-7,y+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new hr(w-7,y-7),!1,-1,-1).toResultPoint()}let u=it.round((e.getX()+a.getX()+r.getX()+i.getX())/4),d=it.round((e.getY()+a.getY()+r.getY()+i.getY())/4);try{let p=new hn(this.image,15,u,d).detect();e=p[0],r=p[1],i=p[2],a=p[3]}catch{e=this.getFirstDifferent(new hr(u+7,d-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new hr(u+7,d+7),!1,1,1).toResultPoint(),i=this.getFirstDifferent(new hr(u-7,d+7),!1,-1,1).toResultPoint(),a=this.getFirstDifferent(new hr(u-7,d-7),!1,-1,-1).toResultPoint()}return u=it.round((e.getX()+a.getX()+r.getX()+i.getX())/4),d=it.round((e.getY()+a.getY()+r.getY()+i.getY())/4),new hr(u,d)}getMatrixCornerPoints(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())}sampleGrid(e,r,i,a,u){let d=Qr.getInstance(),p=this.getDimension(),w=p/2-this.nbCenterLayers,y=p/2+this.nbCenterLayers;return d.sampleGrid(e,p,p,w,w,y,w,y,y,w,y,r.getX(),r.getY(),i.getX(),i.getY(),a.getX(),a.getY(),u.getX(),u.getY())}sampleLine(e,r,i){let a=0,u=this.distanceResultPoint(e,r),d=u/i,p=e.getX(),w=e.getY(),y=d*(r.getX()-e.getX())/u,b=d*(r.getY()-e.getY())/u;for(let T=0;T<i;T++)this.image.get(it.round(p+T*y),it.round(w+T*b))&&(a|=1<<i-T-1);return a}isWhiteOrBlackRectangle(e,r,i,a){let u=3;e=new hr(e.getX()-u,e.getY()+u),r=new hr(r.getX()-u,r.getY()-u),i=new hr(i.getX()+u,i.getY()-u),a=new hr(a.getX()+u,a.getY()+u);let d=this.getColor(a,e);if(d===0)return!1;let p=this.getColor(e,r);return p!==d||(p=this.getColor(r,i),p!==d)?!1:(p=this.getColor(i,a),p===d)}getColor(e,r){let i=this.distancePoint(e,r),a=(r.getX()-e.getX())/i,u=(r.getY()-e.getY())/i,d=0,p=e.getX(),w=e.getY(),y=this.image.get(e.getX(),e.getY()),b=Math.ceil(i);for(let k=0;k<b;k++)p+=a,w+=u,this.image.get(it.round(p),it.round(w))!==y&&d++;let T=d/i;return T>.1&&T<.9?0:T<=.1===y?1:-1}getFirstDifferent(e,r,i,a){let u=e.getX()+i,d=e.getY()+a;for(;this.isValid(u,d)&&this.image.get(u,d)===r;)u+=i,d+=a;for(u-=i,d-=a;this.isValid(u,d)&&this.image.get(u,d)===r;)u+=i;for(u-=i;this.isValid(u,d)&&this.image.get(u,d)===r;)d+=a;return d-=a,new hr(u,d)}expandSquare(e,r,i){let a=i/(2*r),u=e[0].getX()-e[2].getX(),d=e[0].getY()-e[2].getY(),p=(e[0].getX()+e[2].getX())/2,w=(e[0].getY()+e[2].getY())/2,y=new Ie(p+a*u,w+a*d),b=new Ie(p-a*u,w-a*d);u=e[1].getX()-e[3].getX(),d=e[1].getY()-e[3].getY(),p=(e[1].getX()+e[3].getX())/2,w=(e[1].getY()+e[3].getY())/2;let T=new Ie(p+a*u,w+a*d),k=new Ie(p-a*u,w-a*d);return[y,T,b,k]}isValid(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()}isValidPoint(e){let r=it.round(e.getX()),i=it.round(e.getY());return this.isValid(r,i)}distancePoint(e,r){return it.distance(e.getX(),e.getY(),r.getX(),r.getY())}distanceResultPoint(e,r){return it.distance(e.getX(),e.getY(),r.getX(),r.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(V.truncDivision(this.nbLayers-4,8)+1)+15}}class Vn{decode(e,r=null){let i=null,a=new vi(e.getBlackMatrix()),u=null,d=null;try{let b=a.detectMirror(!1);u=b.getPoints(),this.reportFoundResultPoints(r,u),d=new Et().decode(b)}catch(b){i=b}if(d==null)try{let b=a.detectMirror(!0);u=b.getPoints(),this.reportFoundResultPoints(r,u),d=new Et().decode(b)}catch(b){throw i??b}let p=new Fe(d.getText(),d.getRawBytes(),d.getNumBits(),u,we.AZTEC,F.currentTimeMillis()),w=d.getByteSegments();w!=null&&p.putMetadata(Xe.BYTE_SEGMENTS,w);let y=d.getECLevel();return y!=null&&p.putMetadata(Xe.ERROR_CORRECTION_LEVEL,y),p}reportFoundResultPoints(e,r){if(e!=null){let i=e.get(xe.NEED_RESULT_POINT_CALLBACK);i!=null&&r.forEach((a,u,d)=>{i.foundPossibleResultPoint(a)})}}reset(){}}class wu extends Ke{constructor(e=500){super(new Vn,e)}}class jt{decode(e,r){try{return this.doDecode(e,r)}catch{if(r&&r.get(xe.TRY_HARDER)===!0&&e.isRotateSupported()){const u=e.rotateCounterClockwise(),d=this.doDecode(u,r),p=d.getResultMetadata();let w=270;p!==null&&p.get(Xe.ORIENTATION)===!0&&(w=w+p.get(Xe.ORIENTATION)%360),d.putMetadata(Xe.ORIENTATION,w);const y=d.getResultPoints();if(y!==null){const b=u.getHeight();for(let T=0;T<y.length;T++)y[T]=new Ie(b-y[T].getY()-1,y[T].getX())}return d}else throw new ie}}reset(){}doDecode(e,r){const i=e.getWidth(),a=e.getHeight();let u=new oe(i);const d=r&&r.get(xe.TRY_HARDER)===!0,p=Math.max(1,a>>(d?8:5));let w;d?w=a:w=15;const y=Math.trunc(a/2);for(let b=0;b<w;b++){const T=Math.trunc((b+1)/2),k=(b&1)===0,L=y+p*(k?T:-T);if(L<0||L>=a)break;try{u=e.getBlackRow(L,u)}catch{continue}for(let W=0;W<2;W++){if(W===1&&(u.reverse(),r&&r.get(xe.NEED_RESULT_POINT_CALLBACK)===!0)){const z=new Map;r.forEach(($,ee)=>z.set(ee,$)),z.delete(xe.NEED_RESULT_POINT_CALLBACK),r=z}try{const z=this.decodeRow(L,u,r);if(W===1){z.putMetadata(Xe.ORIENTATION,180);const $=z.getResultPoints();$!==null&&($[0]=new Ie(i-$[0].getX()-1,$[0].getY()),$[1]=new Ie(i-$[1].getX()-1,$[1].getY()))}return z}catch{}}}throw new ie}static recordPattern(e,r,i){const a=i.length;for(let y=0;y<a;y++)i[y]=0;const u=e.getSize();if(r>=u)throw new ie;let d=!e.get(r),p=0,w=r;for(;w<u;){if(e.get(w)!==d)i[p]++;else{if(++p===a)break;i[p]=1,d=!d}w++}if(!(p===a||p===a-1&&w===u))throw new ie}static recordPatternInReverse(e,r,i){let a=i.length,u=e.get(r);for(;r>0&&a>=0;)e.get(--r)!==u&&(a--,u=!u);if(a>=0)throw new ie;jt.recordPattern(e,r+1,i)}static patternMatchVariance(e,r,i){const a=e.length;let u=0,d=0;for(let y=0;y<a;y++)u+=e[y],d+=r[y];if(u<d)return Number.POSITIVE_INFINITY;const p=u/d;i*=p;let w=0;for(let y=0;y<a;y++){const b=e[y],T=r[y]*p,k=b>T?b-T:T-b;if(k>i)return Number.POSITIVE_INFINITY;w+=k}return w/u}}class ye extends jt{static findStartPattern(e){const r=e.getSize(),i=e.getNextSet(0);let a=0,u=Int32Array.from([0,0,0,0,0,0]),d=i,p=!1;const w=6;for(let y=i;y<r;y++)if(e.get(y)!==p)u[a]++;else{if(a===w-1){let b=ye.MAX_AVG_VARIANCE,T=-1;for(let k=ye.CODE_START_A;k<=ye.CODE_START_C;k++){const L=jt.patternMatchVariance(u,ye.CODE_PATTERNS[k],ye.MAX_INDIVIDUAL_VARIANCE);L<b&&(b=L,T=k)}if(T>=0&&e.isRange(Math.max(0,d-(y-d)/2),d,!1))return Int32Array.from([d,y,T]);d+=u[0]+u[1],u=u.slice(2,u.length-1),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,p=!p}throw new ie}static decodeCode(e,r,i){jt.recordPattern(e,i,r);let a=ye.MAX_AVG_VARIANCE,u=-1;for(let d=0;d<ye.CODE_PATTERNS.length;d++){const p=ye.CODE_PATTERNS[d],w=this.patternMatchVariance(r,p,ye.MAX_INDIVIDUAL_VARIANCE);w<a&&(a=w,u=d)}if(u>=0)return u;throw new ie}decodeRow(e,r,i){const a=i&&i.get(xe.ASSUME_GS1)===!0,u=ye.findStartPattern(r),d=u[2];let p=0;const w=new Uint8Array(20);w[p++]=d;let y;switch(d){case ye.CODE_START_A:y=ye.CODE_CODE_A;break;case ye.CODE_START_B:y=ye.CODE_CODE_B;break;case ye.CODE_START_C:y=ye.CODE_CODE_C;break;default:throw new se}let b=!1,T=!1,k="",L=u[0],W=u[1];const z=Int32Array.from([0,0,0,0,0,0]);let $=0,ee=0,ge=d,pe=0,ce=!0,tt=!1,Ze=!1;for(;!b;){const Nn=T;switch(T=!1,$=ee,ee=ye.decodeCode(r,z,W),w[p++]=ee,ee!==ye.CODE_STOP&&(ce=!0),ee!==ye.CODE_STOP&&(pe++,ge+=pe*ee),L=W,W+=z.reduce((Oi,zo)=>Oi+zo,0),ee){case ye.CODE_START_A:case ye.CODE_START_B:case ye.CODE_START_C:throw new se}switch(y){case ye.CODE_CODE_A:if(ee<64)Ze===tt?k+=String.fromCharCode(32+ee):k+=String.fromCharCode(32+ee+128),Ze=!1;else if(ee<96)Ze===tt?k+=String.fromCharCode(ee-64):k+=String.fromCharCode(ee+64),Ze=!1;else switch(ee!==ye.CODE_STOP&&(ce=!1),ee){case ye.CODE_FNC_1:a&&(k.length===0?k+="]C1":k+="");break;case ye.CODE_FNC_2:case ye.CODE_FNC_3:break;case ye.CODE_FNC_4_A:!tt&&Ze?(tt=!0,Ze=!1):tt&&Ze?(tt=!1,Ze=!1):Ze=!0;break;case ye.CODE_SHIFT:T=!0,y=ye.CODE_CODE_B;break;case ye.CODE_CODE_B:y=ye.CODE_CODE_B;break;case ye.CODE_CODE_C:y=ye.CODE_CODE_C;break;case ye.CODE_STOP:b=!0;break}break;case ye.CODE_CODE_B:if(ee<96)Ze===tt?k+=String.fromCharCode(32+ee):k+=String.fromCharCode(32+ee+128),Ze=!1;else switch(ee!==ye.CODE_STOP&&(ce=!1),ee){case ye.CODE_FNC_1:a&&(k.length===0?k+="]C1":k+="");break;case ye.CODE_FNC_2:case ye.CODE_FNC_3:break;case ye.CODE_FNC_4_B:!tt&&Ze?(tt=!0,Ze=!1):tt&&Ze?(tt=!1,Ze=!1):Ze=!0;break;case ye.CODE_SHIFT:T=!0,y=ye.CODE_CODE_A;break;case ye.CODE_CODE_A:y=ye.CODE_CODE_A;break;case ye.CODE_CODE_C:y=ye.CODE_CODE_C;break;case ye.CODE_STOP:b=!0;break}break;case ye.CODE_CODE_C:if(ee<100)ee<10&&(k+="0"),k+=ee;else switch(ee!==ye.CODE_STOP&&(ce=!1),ee){case ye.CODE_FNC_1:a&&(k.length===0?k+="]C1":k+="");break;case ye.CODE_CODE_A:y=ye.CODE_CODE_A;break;case ye.CODE_CODE_B:y=ye.CODE_CODE_B;break;case ye.CODE_STOP:b=!0;break}break}Nn&&(y=y===ye.CODE_CODE_A?ye.CODE_CODE_B:ye.CODE_CODE_A)}const Nr=W-L;if(W=r.getNextUnset(W),!r.isRange(W,Math.min(r.getSize(),W+(W-L)/2),!1))throw new ie;if(ge-=pe*$,ge%103!==$)throw new P;const on=k.length;if(on===0)throw new ie;on>0&&ce&&(y===ye.CODE_CODE_C?k=k.substring(0,on-2):k=k.substring(0,on-1));const Zt=(u[1]+u[0])/2,mt=L+Nr/2,Ft=w.length,Er=new Uint8Array(Ft);for(let Nn=0;Nn<Ft;Nn++)Er[Nn]=w[Nn];const ri=[new Ie(Zt,e),new Ie(mt,e)];return new Fe(k,Er,0,ri,we.CODE_128,new Date().getTime())}}ye.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ye.MAX_AVG_VARIANCE=.25,ye.MAX_INDIVIDUAL_VARIANCE=.7,ye.CODE_SHIFT=98,ye.CODE_CODE_C=99,ye.CODE_CODE_B=100,ye.CODE_CODE_A=101,ye.CODE_FNC_1=102,ye.CODE_FNC_2=97,ye.CODE_FNC_3=96,ye.CODE_FNC_4_A=101,ye.CODE_FNC_4_B=100,ye.CODE_START_A=103,ye.CODE_START_B=104,ye.CODE_START_C=105,ye.CODE_STOP=106;class Kt extends jt{constructor(e=!1,r=!1){super(),this.usingCheckDigit=e,this.extendedMode=r,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(e,r,i){let a=this.counters;a.fill(0),this.decodeRowResult="";let u=Kt.findAsteriskPattern(r,a),d=r.getNextSet(u[1]),p=r.getSize(),w,y;do{Kt.recordPattern(r,d,a);let z=Kt.toNarrowWidePattern(a);if(z<0)throw new ie;w=Kt.patternToChar(z),this.decodeRowResult+=w,y=d;for(let $ of a)d+=$;d=r.getNextSet(d)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let z of a)b+=z;let T=d-y-b;if(d!==p&&T*2<b)throw new ie;if(this.usingCheckDigit){let z=this.decodeRowResult.length-1,$=0;for(let ee=0;ee<z;ee++)$+=Kt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(ee));if(this.decodeRowResult.charAt(z)!==Kt.ALPHABET_STRING.charAt($%43))throw new P;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new ie;let k;this.extendedMode?k=Kt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let L=(u[1]+u[0])/2,W=y+b/2;return new Fe(k,null,0,[new Ie(L,e),new Ie(W,e)],we.CODE_39,new Date().getTime())}static findAsteriskPattern(e,r){let i=e.getSize(),a=e.getNextSet(0),u=0,d=a,p=!1,w=r.length;for(let y=a;y<i;y++)if(e.get(y)!==p)r[u]++;else{if(u===w-1){if(this.toNarrowWidePattern(r)===Kt.ASTERISK_ENCODING&&e.isRange(Math.max(0,d-Math.floor((y-d)/2)),d,!1))return[d,y];d+=r[0]+r[1],r.copyWithin(0,2,2+u-1),r[u-1]=0,r[u]=0,u--}else u++;r[u]=1,p=!p}throw new ie}static toNarrowWidePattern(e){let r=e.length,i=0,a;do{let u=2147483647;for(let w of e)w<u&&w>i&&(u=w);i=u,a=0;let d=0,p=0;for(let w=0;w<r;w++){let y=e[w];y>i&&(p|=1<<r-1-w,a++,d+=y)}if(a===3){for(let w=0;w<r&&a>0;w++){let y=e[w];if(y>i&&(a--,y*2>=d))return-1}return p}}while(a>3);return-1}static patternToChar(e){for(let r=0;r<Kt.CHARACTER_ENCODINGS.length;r++)if(Kt.CHARACTER_ENCODINGS[r]===e)return Kt.ALPHABET_STRING.charAt(r);if(e===Kt.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(e){let r=e.length,i="";for(let a=0;a<r;a++){let u=e.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){let d=e.charAt(a+1),p="\0";switch(u){case"+":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)+32);else throw new se;break;case"$":if(d>="A"&&d<="Z")p=String.fromCharCode(d.charCodeAt(0)-64);else throw new se;break;case"%":if(d>="A"&&d<="E")p=String.fromCharCode(d.charCodeAt(0)-38);else if(d>="F"&&d<="J")p=String.fromCharCode(d.charCodeAt(0)-11);else if(d>="K"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)+16);else if(d>="P"&&d<="T")p=String.fromCharCode(d.charCodeAt(0)+43);else if(d==="U")p="\0";else if(d==="V")p="@";else if(d==="W")p="`";else if(d==="X"||d==="Y"||d==="Z")p="";else throw new se;break;case"/":if(d>="A"&&d<="O")p=String.fromCharCode(d.charCodeAt(0)-32);else if(d==="Z")p=":";else throw new se;break}i+=p,a++}else i+=u}return i}}Kt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Kt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Kt.ASTERISK_ENCODING=148;class pt extends jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(e,r,i){let a=this.decodeStart(r),u=this.decodeEnd(r),d=new $e;pt.decodeMiddle(r,a[1],u[0],d);let p=d.toString(),w=null;i!=null&&(w=i.get(xe.ALLOWED_LENGTHS)),w==null&&(w=pt.DEFAULT_ALLOWED_LENGTHS);let y=p.length,b=!1,T=0;for(let W of w){if(y===W){b=!0;break}W>T&&(T=W)}if(!b&&y>T&&(b=!0),!b)throw new se;const k=[new Ie(a[1],e),new Ie(u[0],e)];return new Fe(p,null,0,k,we.ITF,new Date().getTime())}static decodeMiddle(e,r,i,a){let u=new Int32Array(10),d=new Int32Array(5),p=new Int32Array(5);for(u.fill(0),d.fill(0),p.fill(0);r<i;){jt.recordPattern(e,r,u);for(let y=0;y<5;y++){let b=2*y;d[y]=u[b],p[y]=u[b+1]}let w=pt.decodeDigit(d);a.append(w.toString()),w=this.decodeDigit(p),a.append(w.toString()),u.forEach(function(y){r+=y})}}decodeStart(e){let r=pt.skipWhiteSpace(e),i=pt.findGuardPattern(e,r,pt.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(e,i[0]),i}validateQuietZone(e,r){let i=this.narrowLineWidth*10;i=i<r?i:r;for(let a=r-1;i>0&&a>=0&&!e.get(a);a--)i--;if(i!==0)throw new ie}static skipWhiteSpace(e){const r=e.getSize(),i=e.getNextSet(0);if(i===r)throw new ie;return i}decodeEnd(e){e.reverse();try{let r=pt.skipWhiteSpace(e),i;try{i=pt.findGuardPattern(e,r,pt.END_PATTERN_REVERSED[0])}catch(u){u instanceof ie&&(i=pt.findGuardPattern(e,r,pt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(e,i[0]);let a=i[0];return i[0]=e.getSize()-i[1],i[1]=e.getSize()-a,i}finally{e.reverse()}}static findGuardPattern(e,r,i){let a=i.length,u=new Int32Array(a),d=e.getSize(),p=!1,w=0,y=r;u.fill(0);for(let b=r;b<d;b++)if(e.get(b)!==p)u[w]++;else{if(w===a-1){if(jt.patternMatchVariance(u,i,pt.MAX_INDIVIDUAL_VARIANCE)<pt.MAX_AVG_VARIANCE)return[y,b];y+=u[0]+u[1],F.arraycopy(u,2,u,0,w-1),u[w-1]=0,u[w]=0,w--}else w++;u[w]=1,p=!p}throw new ie}static decodeDigit(e){let r=pt.MAX_AVG_VARIANCE,i=-1,a=pt.PATTERNS.length;for(let u=0;u<a;u++){let d=pt.PATTERNS[u],p=jt.patternMatchVariance(e,d,pt.MAX_INDIVIDUAL_VARIANCE);p<r?(r=p,i=u):p===r&&(i=-1)}if(i>=0)return i%10;throw new ie}}pt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],pt.MAX_AVG_VARIANCE=.38,pt.MAX_INDIVIDUAL_VARIANCE=.5,pt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],pt.START_PATTERN=Int32Array.from([1,1,1,1]),pt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class St extends jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(e){let r=!1,i,a=0,u=Int32Array.from([0,0,0]);for(;!r;){u=Int32Array.from([0,0,0]),i=St.findGuardPattern(e,a,!1,this.START_END_PATTERN,u);let d=i[0];a=i[1];let p=d-(a-d);p>=0&&(r=e.isRange(p,d,!1))}return i}static checkChecksum(e){return St.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let i=parseInt(e.charAt(r-1),10);return St.getStandardUPCEANChecksum(e.substring(0,r-1))===i}static getStandardUPCEANChecksum(e){let r=e.length,i=0;for(let a=r-1;a>=0;a-=2){let u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new se;i+=u}i*=3;for(let a=r-2;a>=0;a-=2){let u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new se;i+=u}return(1e3-i)%10}static decodeEnd(e,r){return St.findGuardPattern(e,r,!1,St.START_END_PATTERN,new Int32Array(St.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(e,r,i,a){return this.findGuardPattern(e,r,i,a,new Int32Array(a.length))}static findGuardPattern(e,r,i,a,u){let d=e.getSize();r=i?e.getNextUnset(r):e.getNextSet(r);let p=0,w=r,y=a.length,b=i;for(let T=r;T<d;T++)if(e.get(T)!==b)u[p]++;else{if(p===y-1){if(jt.patternMatchVariance(u,a,St.MAX_INDIVIDUAL_VARIANCE)<St.MAX_AVG_VARIANCE)return Int32Array.from([w,T]);w+=u[0]+u[1];let k=u.slice(2,u.length-1);for(let L=0;L<p-1;L++)u[L]=k[L];u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,b=!b}throw new ie}static decodeDigit(e,r,i,a){this.recordPattern(e,i,r);let u=this.MAX_AVG_VARIANCE,d=-1,p=a.length;for(let w=0;w<p;w++){let y=a[w],b=jt.patternMatchVariance(r,y,St.MAX_INDIVIDUAL_VARIANCE);b<u&&(u=b,d=w)}if(d>=0)return d;throw new ie}}St.MAX_AVG_VARIANCE=.48,St.MAX_INDIVIDUAL_VARIANCE=.7,St.START_END_PATTERN=Int32Array.from([1,1,1]),St.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),St.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),St.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Zn{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,i){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(r,i,a),d=a.toString(),p=Zn.parseExtensionString(d),w=[new Ie((i[0]+i[1])/2,e),new Ie(u,e)],y=new Fe(d,null,0,w,we.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(e,r,i){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=e.getSize(),d=r[1],p=0;for(let y=0;y<5&&d<u;y++){let b=St.decodeDigit(e,a,d,St.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);for(let T of a)d+=T;b>=10&&(p|=1<<4-y),y!==4&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(i.length!==5)throw new ie;let w=this.determineCheckDigit(p);if(Zn.extensionChecksum(i.toString())!==w)throw new ie;return d}static extensionChecksum(e){let r=e.length,i=0;for(let a=r-2;a>=0;a-=2)i+=e.charAt(a).charCodeAt(0)-48;i*=3;for(let a=r-1;a>=0;a-=2)i+=e.charAt(a).charCodeAt(0)-48;return i*=3,i%10}determineCheckDigit(e){for(let r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new ie}static parseExtensionString(e){if(e.length!==5)return null;let r=Zn.parseExtension5String(e);return r==null?null:new Map([[Xe.SUGGESTED_PRICE,r]])}static parseExtension5String(e){let r;switch(e.charAt(0)){case"0":r="";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}let i=parseInt(e.substring(1)),a=(i/100).toString(),u=i%100,d=u<10?"0"+u:u.toString();return r+a+"."+d}}class Zi{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(e,r,i){let a=this.decodeRowStringBuffer,u=this.decodeMiddle(r,i,a),d=a.toString(),p=Zi.parseExtensionString(d),w=[new Ie((i[0]+i[1])/2,e),new Ie(u,e)],y=new Fe(d,null,0,w,we.UPC_EAN_EXTENSION,new Date().getTime());return p!=null&&y.putAllMetadata(p),y}decodeMiddle(e,r,i){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=e.getSize(),d=r[1],p=0;for(let w=0;w<2&&d<u;w++){let y=St.decodeDigit(e,a,d,St.L_AND_G_PATTERNS);i+=String.fromCharCode(48+y%10);for(let b of a)d+=b;y>=10&&(p|=1<<1-w),w!==1&&(d=e.getNextSet(d),d=e.getNextUnset(d))}if(i.length!==2)throw new ie;if(parseInt(i.toString())%4!==p)throw new ie;return d}static parseExtensionString(e){return e.length!==2?null:new Map([[Xe.ISSUE_NUMBER,parseInt(e)]])}}class Ds{static decodeRow(e,r,i){let a=St.findGuardPattern(r,i,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Zn().decodeRow(e,r,a)}catch{return new Zi().decodeRow(e,r,a)}}}Ds.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class rt extends St{constructor(){super(),this.decodeRowStringBuffer="",rt.L_AND_G_PATTERNS=rt.L_PATTERNS.map(e=>Int32Array.from(e));for(let e=10;e<20;e++){let r=rt.L_PATTERNS[e-10],i=new Int32Array(r.length);for(let a=0;a<r.length;a++)i[a]=r[r.length-a-1];rt.L_AND_G_PATTERNS[e]=i}}decodeRow(e,r,i){let a=rt.findStartGuardPattern(r),u=i==null?null:i.get(xe.NEED_RESULT_POINT_CALLBACK);if(u!=null){const ce=new Ie((a[0]+a[1])/2,e);u.foundPossibleResultPoint(ce)}let d=this.decodeMiddle(r,a,this.decodeRowStringBuffer),p=d.rowOffset,w=d.resultString;if(u!=null){const ce=new Ie(p,e);u.foundPossibleResultPoint(ce)}let y=this.decodeEnd(r,p);if(u!=null){const ce=new Ie((y[0]+y[1])/2,e);u.foundPossibleResultPoint(ce)}let b=y[1],T=b+(b-y[0]);if(T>=r.getSize()||!r.isRange(b,T,!1))throw new ie;let k=w.toString();if(k.length<8)throw new se;if(!rt.checkChecksum(k))throw new P;let L=(a[1]+a[0])/2,W=(y[1]+y[0])/2,z=this.getBarcodeFormat(),$=[new Ie(L,e),new Ie(W,e)],ee=new Fe(k,null,0,$,z,new Date().getTime()),ge=0;try{let ce=Ds.decodeRow(e,r,y[1]);ee.putMetadata(Xe.UPC_EAN_EXTENSION,ce.getText()),ee.putAllMetadata(ce.getResultMetadata()),ee.addResultPoints(ce.getResultPoints()),ge=ce.getText().length}catch{}let pe=i==null?null:i.get(xe.ALLOWED_EAN_EXTENSIONS);if(pe!=null){let ce=!1;for(let tt in pe)if(ge.toString()===tt){ce=!0;break}if(!ce)throw new ie}return ee}decodeEnd(e,r){return rt.findGuardPattern(e,r,!1,rt.START_END_PATTERN,new Int32Array(rt.START_END_PATTERN.length).fill(0))}static checkChecksum(e){return rt.checkStandardUPCEANChecksum(e)}static checkStandardUPCEANChecksum(e){let r=e.length;if(r===0)return!1;let i=parseInt(e.charAt(r-1),10);return rt.getStandardUPCEANChecksum(e.substring(0,r-1))===i}static getStandardUPCEANChecksum(e){let r=e.length,i=0;for(let a=r-1;a>=0;a-=2){let u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new se;i+=u}i*=3;for(let a=r-2;a>=0;a-=2){let u=e.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new se;i+=u}return(1e3-i)%10}}class Fr extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,i){let a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=e.getSize(),d=r[1],p=0;for(let y=0;y<6&&d<u;y++){let b=rt.decodeDigit(e,a,d,rt.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);for(let T of a)d+=T;b>=10&&(p|=1<<5-y)}i=Fr.determineFirstDigit(i,p),d=rt.findGuardPattern(e,d,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<6&&d<u;y++){let b=rt.decodeDigit(e,a,d,rt.L_PATTERNS);i+=String.fromCharCode(48+b);for(let T of a)d+=T}return{rowOffset:d,resultString:i}}getBarcodeFormat(){return we.EAN_13}static determineFirstDigit(e,r){for(let i=0;i<10;i++)if(r===this.FIRST_DIGIT_ENCODINGS[i])return e=String.fromCharCode(48+i)+e,e;throw new ie}}Fr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Ao extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(e,r,i){const a=this.decodeMiddleCounters;a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=e.getSize(),d=r[1];for(let w=0;w<4&&d<u;w++){let y=rt.decodeDigit(e,a,d,rt.L_PATTERNS);i+=String.fromCharCode(48+y);for(let b of a)d+=b}d=rt.findGuardPattern(e,d,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&d<u;w++){let y=rt.decodeDigit(e,a,d,rt.L_PATTERNS);i+=String.fromCharCode(48+y);for(let b of a)d+=b}return{rowOffset:d,resultString:i}}getBarcodeFormat(){return we.EAN_8}}class bo extends rt{constructor(){super(...arguments),this.ean13Reader=new Fr}getBarcodeFormat(){return we.UPC_A}decode(e,r){return this.maybeReturnResult(this.ean13Reader.decode(e))}decodeRow(e,r,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(e,r,i))}decodeMiddle(e,r,i){return this.ean13Reader.decodeMiddle(e,r,i)}maybeReturnResult(e){let r=e.getText();if(r.charAt(0)==="0"){let i=new Fe(r.substring(1),null,null,e.getResultPoints(),we.UPC_A);return e.getResultMetadata()!=null&&i.putAllMetadata(e.getResultMetadata()),i}else throw new ie}reset(){this.ean13Reader.reset()}}class Ur extends rt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(e,r,i){const a=this.decodeMiddleCounters.map(y=>y);a[0]=0,a[1]=0,a[2]=0,a[3]=0;const u=e.getSize();let d=r[1],p=0;for(let y=0;y<6&&d<u;y++){const b=Ur.decodeDigit(e,a,d,Ur.L_AND_G_PATTERNS);i+=String.fromCharCode(48+b%10);for(let T of a)d+=T;b>=10&&(p|=1<<5-y)}let w=Ur.determineNumSysAndCheckDigit(i,p);return{rowOffset:d,resultString:w}}decodeEnd(e,r){return Ur.findGuardPatternWithoutCounters(e,r,!0,Ur.MIDDLE_END_PATTERN)}checkChecksum(e){return rt.checkChecksum(Ur.convertUPCEtoUPCA(e))}static determineNumSysAndCheckDigit(e,r){for(let i=0;i<=1;i++)for(let a=0;a<10;a++)if(r===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){let u=String.fromCharCode(48+i),d=String.fromCharCode(48+a);return u+e+d}throw ie.getNotFoundInstance()}getBarcodeFormat(){return we.UPC_E}static convertUPCEtoUPCA(e){const r=e.slice(1,7).split("").map(u=>u.charCodeAt(0)),i=new $e;i.append(e.charAt(0));let a=r[5];switch(a){case 0:case 1:case 2:i.appendChars(r,0,2),i.append(a),i.append("0000"),i.appendChars(r,2,3);break;case 3:i.appendChars(r,0,3),i.append("00000"),i.appendChars(r,3,2);break;case 4:i.appendChars(r,0,4),i.append("00000"),i.append(r[4]);break;default:i.appendChars(r,0,5),i.append("0000"),i.append(a);break}return e.length>=8&&i.append(e.charAt(7)),i.toString()}}Ur.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Ur.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Ps extends jt{constructor(e){super();let r=e==null?null:e.get(xe.POSSIBLE_FORMATS),i=[];c(r)?(i.push(new Fr),i.push(new bo),i.push(new Ao),i.push(new Ur)):(r.indexOf(we.EAN_13)>-1&&i.push(new Fr),r.indexOf(we.UPC_A)>-1&&i.push(new bo),r.indexOf(we.EAN_8)>-1&&i.push(new Ao),r.indexOf(we.UPC_E)>-1&&i.push(new Ur)),this.readers=i}decodeRow(e,r,i){for(let a of this.readers)try{const u=a.decodeRow(e,r,i),d=u.getBarcodeFormat()===we.EAN_13&&u.getText().charAt(0)==="0",p=i==null?null:i.get(xe.POSSIBLE_FORMATS),w=p==null||p.includes(we.UPC_A);if(d&&w){const y=u.getRawBytes(),b=new Fe(u.getText().substring(1),y,y?y.length:null,u.getResultPoints(),we.UPC_A);return b.putAllMetadata(u.getResultMetadata()),b}return u}catch{}throw new ie}reset(){for(let e of this.readers)e.reset()}}class sr extends jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(e,r){for(let i=0;i<r.length;i++)if(jt.patternMatchVariance(e,r[i],sr.MAX_INDIVIDUAL_VARIANCE)<sr.MAX_AVG_VARIANCE)return i;throw new ie}static count(e){return it.sum(new Int32Array(e))}static increment(e,r){let i=0,a=r[0];for(let u=1;u<e.length;u++)r[u]>a&&(a=r[u],i=u);e[i]++}static decrement(e,r){let i=0,a=r[0];for(let u=1;u<e.length;u++)r[u]<a&&(a=r[u],i=u);e[i]--}static isFinderPattern(e){let r=e[0]+e[1],i=r+e[2]+e[3],a=r/i;if(a>=sr.MIN_FINDER_PATTERN_RATIO&&a<=sr.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,d=Number.MIN_SAFE_INTEGER;for(let p of e)p>d&&(d=p),p<u&&(u=p);return d<10*u}return!1}}sr.MAX_AVG_VARIANCE=.2,sr.MAX_INDIVIDUAL_VARIANCE=.45,sr.MIN_FINDER_PATTERN_RATIO=9.5/12,sr.MAX_FINDER_PATTERN_RATIO=12.5/14;class Wn{constructor(e,r){this.value=e,this.checksumPortion=r}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(e){if(!(e instanceof Wn))return!1;const r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Qi{constructor(e,r,i,a,u){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new Ie(i,u)),this.resultPoints.push(new Ie(a,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(e){if(!(e instanceof Qi))return!1;const r=e;return this.value===r.value}hashCode(){return this.value}}class Sr{constructor(){}static getRSSvalue(e,r,i){let a=0;for(let w of e)a+=w;let u=0,d=0,p=e.length;for(let w=0;w<p-1;w++){let y;for(y=1,d|=1<<w;y<e[w];y++,d&=~(1<<w)){let b=Sr.combins(a-y-1,p-w-2);if(i&&d===0&&a-y-(p-w-1)>=p-w-1&&(b-=Sr.combins(a-y-(p-w),p-w-2)),p-w-1>1){let T=0;for(let k=a-y-(p-w-2);k>r;k--)T+=Sr.combins(a-y-k-1,p-w-3);b-=T*(p-1-w)}else a-y>r&&b--;u+=b}a-=y}return u}static combins(e,r){let i,a;e-r>r?(a=r,i=e-r):(a=e-r,i=r);let u=1,d=1;for(let p=e;p>i;p--)u*=p,d<=a&&(u/=d,d++);for(;d<=a;)u/=d,d++;return u}}class So{static buildBitArray(e){let r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);let i=12*r,a=new oe(i),u=0,p=e[0].getRightChar().getValue();for(let w=11;w>=0;--w)(p&1<<w)!=0&&a.set(u),u++;for(let w=1;w<e.length;++w){let y=e[w],b=y.getLeftChar().getValue();for(let T=11;T>=0;--T)(b&1<<T)!=0&&a.set(u),u++;if(y.getRightChar()!=null){let T=y.getRightChar().getValue();for(let k=11;k>=0;--k)(T&1<<k)!=0&&a.set(u),u++}}return a}}class Jr{constructor(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class Io{constructor(e){this.newPosition=e}getNewPosition(){return this.newPosition}}class Jt extends Io{constructor(e,r){super(e),this.value=r}getValue(){return this.value}isFNC1(){return this.value===Jt.FNC1}}Jt.FNC1="$";class fn extends Io{constructor(e,r,i){super(e),i?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=r}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class wr extends Io{constructor(e,r,i){if(super(e),r<0||r>10||i<0||i>10)throw new se;this.firstDigit=r,this.secondDigit=i}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===wr.FNC1}isSecondDigitFNC1(){return this.secondDigit===wr.FNC1}isAnyFNC1(){return this.firstDigit===wr.FNC1||this.secondDigit===wr.FNC1}}wr.FNC1=10;class be{constructor(){}static parseFieldsInGeneralPurpose(e){if(!e)return null;if(e.length<2)throw new ie;let r=e.substring(0,2);for(let u of be.TWO_DIGIT_DATA_LENGTH)if(u[0]===r)return u[1]===be.VARIABLE_LENGTH?be.processVariableAI(2,u[2],e):be.processFixedAI(2,u[1],e);if(e.length<3)throw new ie;let i=e.substring(0,3);for(let u of be.THREE_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===be.VARIABLE_LENGTH?be.processVariableAI(3,u[2],e):be.processFixedAI(3,u[1],e);for(let u of be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===be.VARIABLE_LENGTH?be.processVariableAI(4,u[2],e):be.processFixedAI(4,u[1],e);if(e.length<4)throw new ie;let a=e.substring(0,4);for(let u of be.FOUR_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===be.VARIABLE_LENGTH?be.processVariableAI(4,u[2],e):be.processFixedAI(4,u[1],e);throw new ie}static processFixedAI(e,r,i){if(i.length<e)throw new ie;let a=i.substring(0,e);if(i.length<e+r)throw new ie;let u=i.substring(e,e+r),d=i.substring(e+r),p="("+a+")"+u,w=be.parseFieldsInGeneralPurpose(d);return w==null?p:p+w}static processVariableAI(e,r,i){let a=i.substring(0,e),u;i.length<e+r?u=i.length:u=e+r;let d=i.substring(e,u),p=i.substring(u),w="("+a+")"+d,y=be.parseFieldsInGeneralPurpose(p);return y==null?w:w+y}}be.VARIABLE_LENGTH=[],be.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",be.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",be.VARIABLE_LENGTH,20],["22",be.VARIABLE_LENGTH,29],["30",be.VARIABLE_LENGTH,8],["37",be.VARIABLE_LENGTH,8],["90",be.VARIABLE_LENGTH,30],["91",be.VARIABLE_LENGTH,30],["92",be.VARIABLE_LENGTH,30],["93",be.VARIABLE_LENGTH,30],["94",be.VARIABLE_LENGTH,30],["95",be.VARIABLE_LENGTH,30],["96",be.VARIABLE_LENGTH,30],["97",be.VARIABLE_LENGTH,3],["98",be.VARIABLE_LENGTH,30],["99",be.VARIABLE_LENGTH,30]],be.THREE_DIGIT_DATA_LENGTH=[["240",be.VARIABLE_LENGTH,30],["241",be.VARIABLE_LENGTH,30],["242",be.VARIABLE_LENGTH,6],["250",be.VARIABLE_LENGTH,30],["251",be.VARIABLE_LENGTH,30],["253",be.VARIABLE_LENGTH,17],["254",be.VARIABLE_LENGTH,20],["400",be.VARIABLE_LENGTH,30],["401",be.VARIABLE_LENGTH,30],["402",17],["403",be.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",be.VARIABLE_LENGTH,20],["421",be.VARIABLE_LENGTH,15],["422",3],["423",be.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],be.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",be.VARIABLE_LENGTH,15],["391",be.VARIABLE_LENGTH,18],["392",be.VARIABLE_LENGTH,15],["393",be.VARIABLE_LENGTH,18],["703",be.VARIABLE_LENGTH,30]],be.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",be.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",be.VARIABLE_LENGTH,20],["8003",be.VARIABLE_LENGTH,30],["8004",be.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",be.VARIABLE_LENGTH,30],["8008",be.VARIABLE_LENGTH,12],["8018",18],["8020",be.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",be.VARIABLE_LENGTH,70],["8200",be.VARIABLE_LENGTH,70]];class Ei{constructor(e){this.buffer=new $e,this.information=e}decodeAllCodes(e,r){let i=r,a=null;do{let u=this.decodeGeneralPurposeField(i,a),d=be.parseFieldsInGeneralPurpose(u.getNewString());if(d!=null&&e.append(d),u.isRemaining()?a=""+u.getRemainingValue():a=null,i===u.getNewPosition())break;i=u.getNewPosition()}while(!0);return e.toString()}isStillNumeric(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(let r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)}decodeNumeric(e){if(e+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(e,4);return u===0?new wr(this.information.getSize(),wr.FNC1,wr.FNC1):new wr(this.information.getSize(),u-1,wr.FNC1)}let r=this.extractNumericValueFromBitArray(e,7),i=(r-8)/11,a=(r-8)%11;return new wr(e+7,i,a)}extractNumericValueFromBitArray(e,r){return Ei.extractNumericValueFromBitArray(this.information,e,r)}static extractNumericValueFromBitArray(e,r,i){let a=0;for(let u=0;u<i;++u)e.get(r+u)&&(a|=1<<i-u-1);return a}decodeGeneralPurposeField(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);let i=this.parseBlocks();return i!=null&&i.isRemaining()?new fn(this.current.getPosition(),this.buffer.toString(),i.getRemainingValue()):new fn(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let e,r;do{let i=this.current.getPosition();if(this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished()),!(i!==this.current.getPosition())&&!e)break}while(!e);return r.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){let r;return e.isSecondDigitFNC1()?r=new fn(this.current.getPosition(),this.buffer.toString()):r=new fn(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Jr(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){let r=new fn(this.current.getPosition(),this.buffer.toString());return new Jr(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Jr(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new fn(this.current.getPosition(),this.buffer.toString());return new Jr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Jr(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){let r=new fn(this.current.getPosition(),this.buffer.toString());return new Jr(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Jr(!1)}isStillIsoIec646(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<116)return!0;if(e+8>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(e,8);return a>=232&&a<253}decodeIsoIec646(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Jt(e+5,Jt.FNC1);if(r>=5&&r<15)return new Jt(e+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(e,7);if(i>=64&&i<90)return new Jt(e+7,""+(i+1));if(i>=90&&i<116)return new Jt(e+7,""+(i+7));let a=this.extractNumericValueFromBitArray(e,8),u;switch(a){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new se}return new Jt(e+8,u)}isStillAlpha(e){if(e+5>this.information.getSize())return!1;let r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(e,6);return i>=16&&i<63}decodeAlphanumeric(e){let r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new Jt(e+5,Jt.FNC1);if(r>=5&&r<15)return new Jt(e+5,"0"+(r-5));let i=this.extractNumericValueFromBitArray(e,6);if(i>=32&&i<58)return new Jt(e+6,""+(i+33));let a;switch(i){case 58:a="*";break;case 59:a=",";break;case 60:a="-";break;case 61:a=".";break;case 62:a="/";break;default:throw new Zr("Decoding invalid alphanumeric value: "+i)}return new Jt(e+6,a)}isAlphaTo646ToAlphaLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0}isAlphaOr646ToNumericLatch(e){if(e+3>this.information.getSize())return!1;for(let r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0}isNumericToAlphaNumericLatch(e){if(e+1>this.information.getSize())return!1;for(let r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0}}class To{constructor(e){this.information=e,this.generalDecoder=new Ei(e)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ir extends To{constructor(e){super(e)}encodeCompressedGtin(e,r){e.append("(01)");let i=e.length();e.append("9"),this.encodeCompressedGtinWithoutAI(e,r,i)}encodeCompressedGtinWithoutAI(e,r,i){for(let a=0;a<4;++a){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(r+10*a,10);u/100===0&&e.append("0"),u/10===0&&e.append("0"),e.append(u)}Ir.appendCheckDigit(e,i)}static appendCheckDigit(e,r){let i=0;for(let a=0;a<13;a++){let u=e.charAt(a+r).charCodeAt(0)-48;i+=(a&1)===0?3*u:u}i=10-i%10,i===10&&(i=0),e.append(i)}}Ir.GTIN_SIZE=40;class Vr extends Ir{constructor(e){super(e)}parseInformation(){let e=new $e;e.append("(01)");let r=e.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(Vr.HEADER_SIZE,4);return e.append(i),this.encodeCompressedGtinWithoutAI(e,Vr.HEADER_SIZE+4,r),this.getGeneralDecoder().decodeAllCodes(e,Vr.HEADER_SIZE+44)}}Vr.HEADER_SIZE=4;class Ji extends To{constructor(e){super(e)}parseInformation(){let e=new $e;return this.getGeneralDecoder().decodeAllCodes(e,Ji.HEADER_SIZE)}}Ji.HEADER_SIZE=5;class es extends Ir{constructor(e){super(e)}encodeCompressedWeight(e,r,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(r,i);this.addWeightCode(e,a);let u=this.checkWeight(a),d=1e5;for(let p=0;p<5;++p)u/d===0&&e.append("0"),d/=10;e.append(u)}}class gn extends es{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()!=gn.HEADER_SIZE+es.GTIN_SIZE+gn.WEIGHT_SIZE)throw new ie;let e=new $e;return this.encodeCompressedGtin(e,gn.HEADER_SIZE),this.encodeCompressedWeight(e,gn.HEADER_SIZE+es.GTIN_SIZE,gn.WEIGHT_SIZE),e.toString()}}gn.HEADER_SIZE=5,gn.WEIGHT_SIZE=15;class Ta extends gn{constructor(e){super(e)}addWeightCode(e,r){e.append("(3103)")}checkWeight(e){return e}}class Na extends gn{constructor(e){super(e)}addWeightCode(e,r){r<1e4?e.append("(3202)"):e.append("(3203)")}checkWeight(e){return e<1e4?e:e-1e4}}class en extends Ir{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<en.HEADER_SIZE+Ir.GTIN_SIZE)throw new ie;let e=new $e;this.encodeCompressedGtin(e,en.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(en.HEADER_SIZE+Ir.GTIN_SIZE,en.LAST_DIGIT_SIZE);e.append("(392"),e.append(r),e.append(")");let i=this.getGeneralDecoder().decodeGeneralPurposeField(en.HEADER_SIZE+Ir.GTIN_SIZE+en.LAST_DIGIT_SIZE,null);return e.append(i.getNewString()),e.toString()}}en.HEADER_SIZE=8,en.LAST_DIGIT_SIZE=2;class fr extends Ir{constructor(e){super(e)}parseInformation(){if(this.getInformation().getSize()<fr.HEADER_SIZE+Ir.GTIN_SIZE)throw new ie;let e=new $e;this.encodeCompressedGtin(e,fr.HEADER_SIZE);let r=this.getGeneralDecoder().extractNumericValueFromBitArray(fr.HEADER_SIZE+Ir.GTIN_SIZE,fr.LAST_DIGIT_SIZE);e.append("(393"),e.append(r),e.append(")");let i=this.getGeneralDecoder().extractNumericValueFromBitArray(fr.HEADER_SIZE+Ir.GTIN_SIZE+fr.LAST_DIGIT_SIZE,fr.FIRST_THREE_DIGITS_SIZE);i/100==0&&e.append("0"),i/10==0&&e.append("0"),e.append(i);let a=this.getGeneralDecoder().decodeGeneralPurposeField(fr.HEADER_SIZE+Ir.GTIN_SIZE+fr.LAST_DIGIT_SIZE+fr.FIRST_THREE_DIGITS_SIZE,null);return e.append(a.getNewString()),e.toString()}}fr.HEADER_SIZE=8,fr.LAST_DIGIT_SIZE=2,fr.FIRST_THREE_DIGITS_SIZE=10;class It extends es{constructor(e,r,i){super(e),this.dateCode=i,this.firstAIdigits=r}parseInformation(){if(this.getInformation().getSize()!=It.HEADER_SIZE+It.GTIN_SIZE+It.WEIGHT_SIZE+It.DATE_SIZE)throw new ie;let e=new $e;return this.encodeCompressedGtin(e,It.HEADER_SIZE),this.encodeCompressedWeight(e,It.HEADER_SIZE+It.GTIN_SIZE,It.WEIGHT_SIZE),this.encodeCompressedDate(e,It.HEADER_SIZE+It.GTIN_SIZE+It.WEIGHT_SIZE),e.toString()}encodeCompressedDate(e,r){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(r,It.DATE_SIZE);if(i==38400)return;e.append("("),e.append(this.dateCode),e.append(")");let a=i%32;i/=32;let u=i%12+1;i/=12;let d=i;d/10==0&&e.append("0"),e.append(d),u/10==0&&e.append("0"),e.append(u),a/10==0&&e.append("0"),e.append(a)}addWeightCode(e,r){e.append("("),e.append(this.firstAIdigits),e.append(r/1e5),e.append(")")}checkWeight(e){return e%1e5}}It.HEADER_SIZE=8,It.WEIGHT_SIZE=20,It.DATE_SIZE=16;function Ra(I){try{if(I.get(1))return new Vr(I);if(!I.get(2))return new Ji(I);switch(Ei.extractNumericValueFromBitArray(I,1,4)){case 4:return new Ta(I);case 5:return new Na(I)}switch(Ei.extractNumericValueFromBitArray(I,1,5)){case 12:return new en(I);case 13:return new fr(I)}switch(Ei.extractNumericValueFromBitArray(I,1,7)){case 56:return new It(I,"310","11");case 57:return new It(I,"320","11");case 58:return new It(I,"310","13");case 59:return new It(I,"320","13");case 60:return new It(I,"310","15");case 61:return new It(I,"320","15");case 62:return new It(I,"310","17");case 63:return new It(I,"320","17")}}catch(e){throw console.log(e),new Zr("unknown decoder: "+I)}}class yt{constructor(e,r,i,a){this.leftchar=e,this.rightchar=r,this.finderpattern=i,this.maybeLast=a}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(e,r){return e instanceof yt?yt.equalsOrNull(e.leftchar,r.leftchar)&&yt.equalsOrNull(e.rightchar,r.rightchar)&&yt.equalsOrNull(e.finderpattern,r.finderpattern):!1}static equalsOrNull(e,r){return e===null?r===null:yt.equals(e,r)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class No{constructor(e,r,i){this.pairs=e,this.rowNumber=r,this.wasReversed=i}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(e){return this.checkEqualitity(this,e)}toString(){return"{ "+this.pairs+" }"}equals(e,r){return e instanceof No?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1}checkEqualitity(e,r){if(!e||!r)return;let i;return e.forEach((a,u)=>{r.forEach(d=>{a.getLeftChar().getValue()===d.getLeftChar().getValue()&&a.getRightChar().getValue()===d.getRightChar().getValue()&&a.getFinderPatter().getValue()===d.getFinderPatter().getValue()&&(i=!0)})}),i}}class le extends sr{constructor(e){super(...arguments),this.pairs=new Array(le.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=e===!0}decodeRow(e,r,i){this.pairs.length=0,this.startFromEven=!1;try{return le.constructResult(this.decodeRow2pairs(e,r))}catch(a){this.verbose&&console.log(a)}return this.pairs.length=0,this.startFromEven=!0,le.constructResult(this.decodeRow2pairs(e,r))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(e,r){let i=!1;for(;!i;)try{this.pairs.push(this.retrieveNextPair(r,this.pairs,e))}catch(u){if(u instanceof ie){if(!this.pairs.length)throw new ie;i=!0}}if(this.checkChecksum())return this.pairs;let a;if(this.rows.length?a=!0:a=!1,this.storeRow(e,!1),a){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new ie}checkRowsBoolean(e){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,e&&(this.rows=this.rows.reverse());let r=null;try{r=this.checkRows(new Array,0)}catch(i){this.verbose&&console.log(i)}return e&&(this.rows=this.rows.reverse()),r}checkRows(e,r){for(let i=r;i<this.rows.length;i++){let a=this.rows[i];this.pairs.length=0;for(let d of e)this.pairs.push(d.getPairs());if(this.pairs.push(a.getPairs()),!le.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(e);u.push(a);try{return this.checkRows(u,i+1)}catch(d){this.verbose&&console.log(d)}}throw new ie}static isValidSequence(e){for(let r of le.FINDER_PATTERN_SEQUENCES){if(e.length>r.length)continue;let i=!0;for(let a=0;a<e.length;a++)if(e[a].getFinderPattern().getValue()!=r[a]){i=!1;break}if(i)return!0}return!1}storeRow(e,r){let i=0,a=!1,u=!1;for(;i<this.rows.length;){let d=this.rows[i];if(d.getRowNumber()>e){u=d.isEquivalent(this.pairs);break}a=d.isEquivalent(this.pairs),i++}u||a||le.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new No(this.pairs,e,r)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(e,r){for(let i of r)if(i.getPairs().length!==e.length){for(let a of i.getPairs())for(let u of e)if(yt.equals(a,u))break}}static isPartialRow(e,r){for(let i of r){let a=!0;for(let u of e){let d=!1;for(let p of i.getPairs())if(u.equals(p)){d=!0;break}if(!d){a=!1;break}}if(a)return!0}return!1}getRows(){return this.rows}static constructResult(e){let r=So.buildBitArray(e),a=Ra(r).parseInformation(),u=e[0].getFinderPattern().getResultPoints(),d=e[e.length-1].getFinderPattern().getResultPoints(),p=[u[0],u[1],d[0],d[1]];return new Fe(a,null,null,p,we.RSS_EXPANDED,null)}checkChecksum(){let e=this.pairs.get(0),r=e.getLeftChar(),i=e.getRightChar();if(i==null)return!1;let a=i.getChecksumPortion(),u=2;for(let p=1;p<this.pairs.size();++p){let w=this.pairs.get(p);a+=w.getLeftChar().getChecksumPortion(),u++;let y=w.getRightChar();y!=null&&(a+=y.getChecksumPortion(),u++)}return a%=211,211*(u-4)+a==r.getValue()}static getNextSecondBar(e,r){let i;return e.get(r)?(i=e.getNextUnset(r),i=e.getNextSet(i)):(i=e.getNextSet(r),i=e.getNextUnset(i)),i}retrieveNextPair(e,r,i){let a=r.length%2==0;this.startFromEven&&(a=!a);let u,d=!0,p=-1;do this.findNextPair(e,r,p),u=this.parseFoundFinderPattern(e,i,a),u==null?p=le.getNextSecondBar(e,this.startEnd[0]):d=!1;while(d);let w=this.decodeDataCharacter(e,u,a,!0);if(!this.isEmptyPair(r)&&r[r.length-1].mustBeLast())throw new ie;let y;try{y=this.decodeDataCharacter(e,u,a,!1)}catch(b){y=null,this.verbose&&console.log(b)}return new yt(w,y,u,!0)}isEmptyPair(e){return e.length===0}findNextPair(e,r,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let u=e.getSize(),d;i>=0?d=i:this.isEmptyPair(r)?d=0:d=r[r.length-1].getFinderPattern().getStartEnd()[1];let p=r.length%2!=0;this.startFromEven&&(p=!p);let w=!1;for(;d<u&&(w=!e.get(d),!!w);)d++;let y=0,b=d;for(let T=d;T<u;T++)if(e.get(T)!=w)a[y]++;else{if(y==3){if(p&&le.reverseCounters(a),le.isFinderPattern(a)){this.startEnd[0]=b,this.startEnd[1]=T;return}p&&le.reverseCounters(a),b+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,y--}else y++;a[y]=1,w=!w}throw new ie}static reverseCounters(e){let r=e.length;for(let i=0;i<r/2;++i){let a=e[i];e[i]=e[r-i-1],e[r-i-1]=a}}parseFoundFinderPattern(e,r,i){let a,u,d;if(i){let y=this.startEnd[0]-1;for(;y>=0&&!e.get(y);)y--;y++,a=this.startEnd[0]-y,u=y,d=this.startEnd[1]}else u=this.startEnd[0],d=e.getNextUnset(this.startEnd[1]+1),a=d-this.startEnd[1];let p=this.getDecodeFinderCounters();F.arraycopy(p,0,p,1,p.length-1),p[0]=a;let w;try{w=this.parseFinderValue(p,le.FINDER_PATTERNS)}catch{return null}return new Qi(w,[u,d],u,d,r)}decodeDataCharacter(e,r,i,a){let u=this.getDataCharacterCounters();for(let mt=0;mt<u.length;mt++)u[mt]=0;if(a)le.recordPatternInReverse(e,r.getStartEnd()[0],u);else{le.recordPattern(e,r.getStartEnd()[1],u);for(let mt=0,Ft=u.length-1;mt<Ft;mt++,Ft--){let Er=u[mt];u[mt]=u[Ft],u[Ft]=Er}}let d=17,p=it.sum(new Int32Array(u))/d,w=(r.getStartEnd()[1]-r.getStartEnd()[0])/15;if(Math.abs(p-w)/w>.3)throw new ie;let y=this.getOddCounts(),b=this.getEvenCounts(),T=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let mt=0;mt<u.length;mt++){let Ft=1*u[mt]/p,Er=Ft+.5;if(Er<1){if(Ft<.3)throw new ie;Er=1}else if(Er>8){if(Ft>8.7)throw new ie;Er=8}let ri=mt/2;(mt&1)==0?(y[ri]=Er,T[ri]=Ft-Er):(b[ri]=Er,k[ri]=Ft-Er)}this.adjustOddEvenCounts(d);let L=4*r.getValue()+(i?0:2)+(a?0:1)-1,W=0,z=0;for(let mt=y.length-1;mt>=0;mt--){if(le.isNotA1left(r,i,a)){let Ft=le.WEIGHTS[L][2*mt];z+=y[mt]*Ft}W+=y[mt]}let $=0;for(let mt=b.length-1;mt>=0;mt--)if(le.isNotA1left(r,i,a)){let Ft=le.WEIGHTS[L][2*mt+1];$+=b[mt]*Ft}let ee=z+$;if((W&1)!=0||W>13||W<4)throw new ie;let ge=(13-W)/2,pe=le.SYMBOL_WIDEST[ge],ce=9-pe,tt=Sr.getRSSvalue(y,pe,!0),Ze=Sr.getRSSvalue(b,ce,!1),Nr=le.EVEN_TOTAL_SUBSET[ge],on=le.GSUM[ge],Zt=tt*Nr+Ze+on;return new Wn(Zt,ee)}static isNotA1left(e,r,i){return!(e.getValue()==0&&r&&i)}adjustOddEvenCounts(e){let r=it.sum(new Int32Array(this.getOddCounts())),i=it.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;r>13?u=!0:r<4&&(a=!0);let d=!1,p=!1;i>13?p=!0:i<4&&(d=!0);let w=r+i-e,y=(r&1)==1,b=(i&1)==0;if(w==1)if(y){if(b)throw new ie;u=!0}else{if(!b)throw new ie;p=!0}else if(w==-1)if(y){if(b)throw new ie;a=!0}else{if(!b)throw new ie;d=!0}else if(w==0){if(y){if(!b)throw new ie;r<i?(a=!0,p=!0):(u=!0,d=!0)}else if(b)throw new ie}else throw new ie;if(a){if(u)throw new ie;le.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&le.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new ie;le.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&le.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}le.SYMBOL_WIDEST=[7,5,4,3,1],le.EVEN_TOTAL_SUBSET=[4,20,52,104,204],le.GSUM=[0,348,1388,2948,3988],le.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],le.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],le.FINDER_PAT_A=0,le.FINDER_PAT_B=1,le.FINDER_PAT_C=2,le.FINDER_PAT_D=3,le.FINDER_PAT_E=4,le.FINDER_PAT_F=5,le.FINDER_PATTERN_SEQUENCES=[[le.FINDER_PAT_A,le.FINDER_PAT_A],[le.FINDER_PAT_A,le.FINDER_PAT_B,le.FINDER_PAT_B],[le.FINDER_PAT_A,le.FINDER_PAT_C,le.FINDER_PAT_B,le.FINDER_PAT_D],[le.FINDER_PAT_A,le.FINDER_PAT_E,le.FINDER_PAT_B,le.FINDER_PAT_D,le.FINDER_PAT_C],[le.FINDER_PAT_A,le.FINDER_PAT_E,le.FINDER_PAT_B,le.FINDER_PAT_D,le.FINDER_PAT_D,le.FINDER_PAT_F],[le.FINDER_PAT_A,le.FINDER_PAT_E,le.FINDER_PAT_B,le.FINDER_PAT_D,le.FINDER_PAT_E,le.FINDER_PAT_F,le.FINDER_PAT_F],[le.FINDER_PAT_A,le.FINDER_PAT_A,le.FINDER_PAT_B,le.FINDER_PAT_B,le.FINDER_PAT_C,le.FINDER_PAT_C,le.FINDER_PAT_D,le.FINDER_PAT_D],[le.FINDER_PAT_A,le.FINDER_PAT_A,le.FINDER_PAT_B,le.FINDER_PAT_B,le.FINDER_PAT_C,le.FINDER_PAT_C,le.FINDER_PAT_D,le.FINDER_PAT_E,le.FINDER_PAT_E],[le.FINDER_PAT_A,le.FINDER_PAT_A,le.FINDER_PAT_B,le.FINDER_PAT_B,le.FINDER_PAT_C,le.FINDER_PAT_C,le.FINDER_PAT_D,le.FINDER_PAT_E,le.FINDER_PAT_F,le.FINDER_PAT_F],[le.FINDER_PAT_A,le.FINDER_PAT_A,le.FINDER_PAT_B,le.FINDER_PAT_B,le.FINDER_PAT_C,le.FINDER_PAT_D,le.FINDER_PAT_D,le.FINDER_PAT_E,le.FINDER_PAT_E,le.FINDER_PAT_F,le.FINDER_PAT_F]],le.MAX_PAIRS=11;class Oa extends Wn{constructor(e,r,i){super(e,r),this.count=0,this.finderPattern=i}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class At extends sr{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(e,r,i){const a=this.decodePair(r,!1,e,i);At.addOrTally(this.possibleLeftPairs,a),r.reverse();let u=this.decodePair(r,!0,e,i);At.addOrTally(this.possibleRightPairs,u),r.reverse();for(let d of this.possibleLeftPairs)if(d.getCount()>1){for(let p of this.possibleRightPairs)if(p.getCount()>1&&At.checkChecksum(d,p))return At.constructResult(d,p)}throw new ie}static addOrTally(e,r){if(r==null)return;let i=!1;for(let a of e)if(a.getValue()===r.getValue()){a.incrementCount(),i=!0;break}i||e.push(r)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(e,r){let i=4537077*e.getValue()+r.getValue(),a=new String(i).toString(),u=new $e;for(let y=13-a.length;y>0;y--)u.append("0");u.append(a);let d=0;for(let y=0;y<13;y++){let b=u.charAt(y).charCodeAt(0)-48;d+=(y&1)===0?3*b:b}d=10-d%10,d===10&&(d=0),u.append(d.toString());let p=e.getFinderPattern().getResultPoints(),w=r.getFinderPattern().getResultPoints();return new Fe(u.toString(),null,0,[p[0],p[1],w[0],w[1]],we.RSS_14,new Date().getTime())}static checkChecksum(e,r){let i=(e.getChecksumPortion()+16*r.getChecksumPortion())%79,a=9*e.getFinderPattern().getValue()+r.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a}decodePair(e,r,i,a){try{let u=this.findFinderPattern(e,r),d=this.parseFoundFinderPattern(e,i,r,u),p=a==null?null:a.get(xe.NEED_RESULT_POINT_CALLBACK);if(p!=null){let b=(u[0]+u[1])/2;r&&(b=e.getSize()-1-b),p.foundPossibleResultPoint(new Ie(b,i))}let w=this.decodeDataCharacter(e,d,!0),y=this.decodeDataCharacter(e,d,!1);return new Oa(1597*w.getValue()+y.getValue(),w.getChecksumPortion()+4*y.getChecksumPortion(),d)}catch{return null}}decodeDataCharacter(e,r,i){let a=this.getDataCharacterCounters();for(let $=0;$<a.length;$++)a[$]=0;if(i)jt.recordPatternInReverse(e,r.getStartEnd()[0],a);else{jt.recordPattern(e,r.getStartEnd()[1]+1,a);for(let $=0,ee=a.length-1;$<ee;$++,ee--){let ge=a[$];a[$]=a[ee],a[ee]=ge}}let u=i?16:15,d=it.sum(new Int32Array(a))/u,p=this.getOddCounts(),w=this.getEvenCounts(),y=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let $=0;$<a.length;$++){let ee=a[$]/d,ge=Math.floor(ee+.5);ge<1?ge=1:ge>8&&(ge=8);let pe=Math.floor($/2);($&1)===0?(p[pe]=ge,y[pe]=ee-ge):(w[pe]=ge,b[pe]=ee-ge)}this.adjustOddEvenCounts(i,u);let T=0,k=0;for(let $=p.length-1;$>=0;$--)k*=9,k+=p[$],T+=p[$];let L=0,W=0;for(let $=w.length-1;$>=0;$--)L*=9,L+=w[$],W+=w[$];let z=k+3*L;if(i){if((T&1)!==0||T>12||T<4)throw new ie;let $=(12-T)/2,ee=At.OUTSIDE_ODD_WIDEST[$],ge=9-ee,pe=Sr.getRSSvalue(p,ee,!1),ce=Sr.getRSSvalue(w,ge,!0),tt=At.OUTSIDE_EVEN_TOTAL_SUBSET[$],Ze=At.OUTSIDE_GSUM[$];return new Wn(pe*tt+ce+Ze,z)}else{if((W&1)!==0||W>10||W<4)throw new ie;let $=(10-W)/2,ee=At.INSIDE_ODD_WIDEST[$],ge=9-ee,pe=Sr.getRSSvalue(p,ee,!0),ce=Sr.getRSSvalue(w,ge,!1),tt=At.INSIDE_ODD_TOTAL_SUBSET[$],Ze=At.INSIDE_GSUM[$];return new Wn(ce*tt+pe+Ze,z)}}findFinderPattern(e,r){let i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;let a=e.getSize(),u=!1,d=0;for(;d<a&&(u=!e.get(d),r!==u);)d++;let p=0,w=d;for(let y=d;y<a;y++)if(e.get(y)!==u)i[p]++;else{if(p===3){if(sr.isFinderPattern(i))return[w,y];w+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,p--}else p++;i[p]=1,u=!u}throw new ie}parseFoundFinderPattern(e,r,i,a){let u=e.get(a[0]),d=a[0]-1;for(;d>=0&&u!==e.get(d);)d--;d++;const p=a[0]-d,w=this.getDecodeFinderCounters(),y=new Int32Array(w.length);F.arraycopy(w,0,y,1,w.length-1),y[0]=p;const b=this.parseFinderValue(y,At.FINDER_PATTERNS);let T=d,k=a[1];return i&&(T=e.getSize()-1-T,k=e.getSize()-1-k),new Qi(b,[d,a[1]],T,k,r)}adjustOddEvenCounts(e,r){let i=it.sum(new Int32Array(this.getOddCounts())),a=it.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1,p=!1,w=!1;e?(i>12?d=!0:i<4&&(u=!0),a>12?w=!0:a<4&&(p=!0)):(i>11?d=!0:i<5&&(u=!0),a>10?w=!0:a<4&&(p=!0));let y=i+a-r,b=(i&1)===(e?1:0),T=(a&1)===1;if(y===1)if(b){if(T)throw new ie;d=!0}else{if(!T)throw new ie;w=!0}else if(y===-1)if(b){if(T)throw new ie;u=!0}else{if(!T)throw new ie;p=!0}else if(y===0){if(b){if(!T)throw new ie;i<a?(u=!0,w=!0):(d=!0,p=!0)}else if(T)throw new ie}else throw new ie;if(u){if(d)throw new ie;sr.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&sr.decrement(this.getOddCounts(),this.getOddRoundingErrors()),p){if(w)throw new ie;sr.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&sr.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}At.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],At.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],At.OUTSIDE_GSUM=[0,161,961,2015,2715],At.INSIDE_GSUM=[0,336,1036,1516],At.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],At.INSIDE_ODD_WIDEST=[2,4,6,8],At.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class _i extends jt{constructor(e,r){super(),this.readers=[],this.verbose=r===!0;const i=e?e.get(xe.POSSIBLE_FORMATS):null,a=e&&e.get(xe.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;i?((i.includes(we.EAN_13)||i.includes(we.UPC_A)||i.includes(we.EAN_8)||i.includes(we.UPC_E))&&this.readers.push(new Ps(e)),i.includes(we.CODE_39)&&this.readers.push(new Kt(a)),i.includes(we.CODE_128)&&this.readers.push(new ye),i.includes(we.ITF)&&this.readers.push(new pt),i.includes(we.RSS_14)&&this.readers.push(new At),i.includes(we.RSS_EXPANDED)&&this.readers.push(new le(this.verbose))):(this.readers.push(new Ps(e)),this.readers.push(new Kt),this.readers.push(new Ps(e)),this.readers.push(new ye),this.readers.push(new pt),this.readers.push(new At),this.readers.push(new le(this.verbose)))}decodeRow(e,r,i){for(let a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(e,r,i)}catch{}throw new ie}reset(){this.readers.forEach(e=>e.reset())}}class ka extends Ke{constructor(e=500,r){super(new _i(r),e,r)}}class ut{constructor(e,r,i){this.ecCodewords=e,this.ecBlocks=[r],i&&this.ecBlocks.push(i)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Je{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class st{constructor(e,r,i,a,u,d){this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=i,this.dataRegionSizeRows=a,this.dataRegionSizeColumns=u,this.ecBlocks=d;let p=0;const w=d.getECCodewords(),y=d.getECBlocks();for(let b of y)p+=b.getCount()*(b.getDataCodewords()+w);this.totalCodewords=p}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(e,r){if((e&1)!==0||(r&1)!==0)throw new se;for(let i of st.VERSIONS)if(i.symbolSizeRows===e&&i.symbolSizeColumns===r)return i;throw new se}toString(){return""+this.versionNumber}static buildVersions(){return[new st(1,10,10,8,8,new ut(5,new Je(1,3))),new st(2,12,12,10,10,new ut(7,new Je(1,5))),new st(3,14,14,12,12,new ut(10,new Je(1,8))),new st(4,16,16,14,14,new ut(12,new Je(1,12))),new st(5,18,18,16,16,new ut(14,new Je(1,18))),new st(6,20,20,18,18,new ut(18,new Je(1,22))),new st(7,22,22,20,20,new ut(20,new Je(1,30))),new st(8,24,24,22,22,new ut(24,new Je(1,36))),new st(9,26,26,24,24,new ut(28,new Je(1,44))),new st(10,32,32,14,14,new ut(36,new Je(1,62))),new st(11,36,36,16,16,new ut(42,new Je(1,86))),new st(12,40,40,18,18,new ut(48,new Je(1,114))),new st(13,44,44,20,20,new ut(56,new Je(1,144))),new st(14,48,48,22,22,new ut(68,new Je(1,174))),new st(15,52,52,24,24,new ut(42,new Je(2,102))),new st(16,64,64,14,14,new ut(56,new Je(2,140))),new st(17,72,72,16,16,new ut(36,new Je(4,92))),new st(18,80,80,18,18,new ut(48,new Je(4,114))),new st(19,88,88,20,20,new ut(56,new Je(4,144))),new st(20,96,96,22,22,new ut(68,new Je(4,174))),new st(21,104,104,24,24,new ut(56,new Je(6,136))),new st(22,120,120,18,18,new ut(68,new Je(6,175))),new st(23,132,132,20,20,new ut(62,new Je(8,163))),new st(24,144,144,22,22,new ut(62,new Je(8,156),new Je(2,155))),new st(25,8,18,6,16,new ut(7,new Je(1,5))),new st(26,8,32,6,14,new ut(11,new Je(1,10))),new st(27,12,26,10,24,new ut(14,new Je(1,16))),new st(28,12,36,10,16,new ut(18,new Je(1,22))),new st(29,16,36,14,16,new ut(24,new Je(1,32))),new st(30,16,48,14,22,new ut(28,new Je(1,49)))]}}st.VERSIONS=st.buildVersions();class Mr{constructor(e){const r=e.getHeight();if(r<8||r>144||(r&1)!==0)throw new se;this.version=Mr.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new ct(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(e){const r=e.getHeight(),i=e.getWidth();return st.getVersionForDimensions(r,i)}readCodewords(){const e=new Int8Array(this.version.getTotalCodewords());let r=0,i=4,a=0;const u=this.mappingBitMatrix.getHeight(),d=this.mappingBitMatrix.getWidth();let p=!1,w=!1,y=!1,b=!1;do if(i===u&&a===0&&!p)e[r++]=this.readCorner1(u,d)&255,i-=2,a+=2,p=!0;else if(i===u-2&&a===0&&(d&3)!==0&&!w)e[r++]=this.readCorner2(u,d)&255,i-=2,a+=2,w=!0;else if(i===u+4&&a===2&&(d&7)===0&&!y)e[r++]=this.readCorner3(u,d)&255,i-=2,a+=2,y=!0;else if(i===u-2&&a===0&&(d&7)===4&&!b)e[r++]=this.readCorner4(u,d)&255,i-=2,a+=2,b=!0;else{do i<u&&a>=0&&!this.readMappingMatrix.get(a,i)&&(e[r++]=this.readUtah(i,a,u,d)&255),i-=2,a+=2;while(i>=0&&a<d);i+=1,a+=3;do i>=0&&a<d&&!this.readMappingMatrix.get(a,i)&&(e[r++]=this.readUtah(i,a,u,d)&255),i+=2,a-=2;while(i<u&&a>=0);i+=3,a+=1}while(i<u||a<d);if(r!==this.version.getTotalCodewords())throw new se;return e}readModule(e,r,i,a){return e<0&&(e+=i,r+=4-(i+4&7)),r<0&&(r+=a,e+=4-(a+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)}readUtah(e,r,i,a){let u=0;return this.readModule(e-2,r-2,i,a)&&(u|=1),u<<=1,this.readModule(e-2,r-1,i,a)&&(u|=1),u<<=1,this.readModule(e-1,r-2,i,a)&&(u|=1),u<<=1,this.readModule(e-1,r-1,i,a)&&(u|=1),u<<=1,this.readModule(e-1,r,i,a)&&(u|=1),u<<=1,this.readModule(e,r-2,i,a)&&(u|=1),u<<=1,this.readModule(e,r-1,i,a)&&(u|=1),u<<=1,this.readModule(e,r,i,a)&&(u|=1),u}readCorner1(e,r){let i=0;return this.readModule(e-1,0,e,r)&&(i|=1),i<<=1,this.readModule(e-1,1,e,r)&&(i|=1),i<<=1,this.readModule(e-1,2,e,r)&&(i|=1),i<<=1,this.readModule(0,r-2,e,r)&&(i|=1),i<<=1,this.readModule(0,r-1,e,r)&&(i|=1),i<<=1,this.readModule(1,r-1,e,r)&&(i|=1),i<<=1,this.readModule(2,r-1,e,r)&&(i|=1),i<<=1,this.readModule(3,r-1,e,r)&&(i|=1),i}readCorner2(e,r){let i=0;return this.readModule(e-3,0,e,r)&&(i|=1),i<<=1,this.readModule(e-2,0,e,r)&&(i|=1),i<<=1,this.readModule(e-1,0,e,r)&&(i|=1),i<<=1,this.readModule(0,r-4,e,r)&&(i|=1),i<<=1,this.readModule(0,r-3,e,r)&&(i|=1),i<<=1,this.readModule(0,r-2,e,r)&&(i|=1),i<<=1,this.readModule(0,r-1,e,r)&&(i|=1),i<<=1,this.readModule(1,r-1,e,r)&&(i|=1),i}readCorner3(e,r){let i=0;return this.readModule(e-1,0,e,r)&&(i|=1),i<<=1,this.readModule(e-1,r-1,e,r)&&(i|=1),i<<=1,this.readModule(0,r-3,e,r)&&(i|=1),i<<=1,this.readModule(0,r-2,e,r)&&(i|=1),i<<=1,this.readModule(0,r-1,e,r)&&(i|=1),i<<=1,this.readModule(1,r-3,e,r)&&(i|=1),i<<=1,this.readModule(1,r-2,e,r)&&(i|=1),i<<=1,this.readModule(1,r-1,e,r)&&(i|=1),i}readCorner4(e,r){let i=0;return this.readModule(e-3,0,e,r)&&(i|=1),i<<=1,this.readModule(e-2,0,e,r)&&(i|=1),i<<=1,this.readModule(e-1,0,e,r)&&(i|=1),i<<=1,this.readModule(0,r-2,e,r)&&(i|=1),i<<=1,this.readModule(0,r-1,e,r)&&(i|=1),i<<=1,this.readModule(1,r-1,e,r)&&(i|=1),i<<=1,this.readModule(2,r-1,e,r)&&(i|=1),i<<=1,this.readModule(3,r-1,e,r)&&(i|=1),i}extractDataRegion(e){const r=this.version.getSymbolSizeRows(),i=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new N("Dimension of bitMatrix must match the version size");const a=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),d=r/a|0,p=i/u|0,w=d*a,y=p*u,b=new ct(y,w);for(let T=0;T<d;++T){const k=T*a;for(let L=0;L<p;++L){const W=L*u;for(let z=0;z<a;++z){const $=T*(a+2)+1+z,ee=k+z;for(let ge=0;ge<u;++ge){const pe=L*(u+2)+1+ge;if(e.get(pe,$)){const ce=W+ge;b.set(ce,ee)}}}}}return b}}class Ro{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r){const i=r.getECBlocks();let a=0;const u=i.getECBlocks();for(let z of u)a+=z.getCount();const d=new Array(a);let p=0;for(let z of u)for(let $=0;$<z.getCount();$++){const ee=z.getDataCodewords(),ge=i.getECCodewords()+ee;d[p++]=new Ro(ee,new Uint8Array(ge))}const y=d[0].codewords.length-i.getECCodewords(),b=y-1;let T=0;for(let z=0;z<b;z++)for(let $=0;$<p;$++)d[$].codewords[z]=e[T++];const k=r.getVersionNumber()===24,L=k?8:p;for(let z=0;z<L;z++)d[z].codewords[y-1]=e[T++];const W=d[0].codewords.length;for(let z=y;z<W;z++)for(let $=0;$<p;$++){const ee=k?($+8)%p:$,ge=k&&ee>7?z-1:z;d[ee].codewords[ge]=e[T++]}if(T!==e.length)throw new N;return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Oo{constructor(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(e){if(e<1||e>32||e>this.available())throw new N(""+e);let r=0,i=this.bitOffset,a=this.byteOffset;const u=this.bytes;if(i>0){const d=8-i,p=e<d?e:d,w=d-p,y=255>>8-p<<w;r=(u[a]&y)>>w,e-=p,i+=p,i===8&&(i=0,a++)}if(e>0){for(;e>=8;)r=r<<8|u[a]&255,a++,e-=8;if(e>0){const d=8-e,p=255>>d<<d;r=r<<e|(u[a]&p)>>d,i+=e}}return this.bitOffset=i,this.byteOffset=a,r}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var qt;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(qt||(qt={}));class tn{static decode(e){const r=new Oo(e),i=new $e,a=new $e,u=new Array;let d=qt.ASCII_ENCODE;do if(d===qt.ASCII_ENCODE)d=this.decodeAsciiSegment(r,i,a);else{switch(d){case qt.C40_ENCODE:this.decodeC40Segment(r,i);break;case qt.TEXT_ENCODE:this.decodeTextSegment(r,i);break;case qt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,i);break;case qt.EDIFACT_ENCODE:this.decodeEdifactSegment(r,i);break;case qt.BASE256_ENCODE:this.decodeBase256Segment(r,i,u);break;default:throw new se}d=qt.ASCII_ENCODE}while(d!==qt.PAD_ENCODE&&r.available()>0);return a.length()>0&&i.append(a.toString()),new wt(e,i.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(e,r,i){let a=!1;do{let u=e.readBits(8);if(u===0)throw new se;if(u<=128)return a&&(u+=128),r.append(String.fromCharCode(u-1)),qt.ASCII_ENCODE;if(u===129)return qt.PAD_ENCODE;if(u<=229){const d=u-130;d<10&&r.append("0"),r.append(""+d)}else switch(u){case 230:return qt.C40_ENCODE;case 231:return qt.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:a=!0;break;case 236:r.append("[)>05"),i.insert(0,"");break;case 237:r.append("[)>06"),i.insert(0,"");break;case 238:return qt.ANSIX12_ENCODE;case 239:return qt.TEXT_ENCODE;case 240:return qt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||e.available()!==0)throw new se;break}}while(e.available()>0);return qt.ASCII_ENCODE}static decodeC40Segment(e,r){let i=!1;const a=[];let u=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),a);for(let p=0;p<3;p++){const w=a[p];switch(u){case 0:if(w<3)u=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const y=this.C40_BASIC_SET_CHARS[w];i?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),i=!1):r.append(y)}else throw new se;break;case 1:i?(r.append(String.fromCharCode(w+128)),i=!1):r.append(String.fromCharCode(w)),u=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const y=this.C40_SHIFT2_SET_CHARS[w];i?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),i=!1):r.append(y)}else switch(w){case 27:r.append("");break;case 30:i=!0;break;default:throw new se}u=0;break;case 3:i?(r.append(String.fromCharCode(w+224)),i=!1):r.append(String.fromCharCode(w+96)),u=0;break;default:throw new se}}}while(e.available()>0)}static decodeTextSegment(e,r){let i=!1,a=[],u=0;do{if(e.available()===8)return;const d=e.readBits(8);if(d===254)return;this.parseTwoBytes(d,e.readBits(8),a);for(let p=0;p<3;p++){const w=a[p];switch(u){case 0:if(w<3)u=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const y=this.TEXT_BASIC_SET_CHARS[w];i?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),i=!1):r.append(y)}else throw new se;break;case 1:i?(r.append(String.fromCharCode(w+128)),i=!1):r.append(String.fromCharCode(w)),u=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const y=this.TEXT_SHIFT2_SET_CHARS[w];i?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),i=!1):r.append(y)}else switch(w){case 27:r.append("");break;case 30:i=!0;break;default:throw new se}u=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const y=this.TEXT_SHIFT3_SET_CHARS[w];i?(r.append(String.fromCharCode(y.charCodeAt(0)+128)),i=!1):r.append(y),u=0}else throw new se;break;default:throw new se}}}while(e.available()>0)}static decodeAnsiX12Segment(e,r){const i=[];do{if(e.available()===8)return;const a=e.readBits(8);if(a===254)return;this.parseTwoBytes(a,e.readBits(8),i);for(let u=0;u<3;u++){const d=i[u];switch(d){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(d<14)r.append(String.fromCharCode(d+44));else if(d<40)r.append(String.fromCharCode(d+51));else throw new se;break}}}while(e.available()>0)}static parseTwoBytes(e,r,i){let a=(e<<8)+r-1,u=Math.floor(a/1600);i[0]=u,a-=u*1600,u=Math.floor(a/40),i[1]=u,i[2]=a-u*40}static decodeEdifactSegment(e,r){do{if(e.available()<=16)return;for(let i=0;i<4;i++){let a=e.readBits(6);if(a===31){const u=8-e.getBitOffset();u!==8&&e.readBits(u);return}(a&32)===0&&(a|=64),r.append(String.fromCharCode(a))}}while(e.available()>0)}static decodeBase256Segment(e,r,i){let a=1+e.getByteOffset();const u=this.unrandomize255State(e.readBits(8),a++);let d;if(u===0?d=e.available()/8|0:u<250?d=u:d=250*(u-249)+this.unrandomize255State(e.readBits(8),a++),d<0)throw new se;const p=new Uint8Array(d);for(let w=0;w<d;w++){if(e.available()<8)throw new se;p[w]=this.unrandomize255State(e.readBits(8),a++)}i.push(p);try{r.append(He.decode(p,ve.ISO88591))}catch(w){throw new Zr("Platform does not support required encoding: "+w.message)}}static unrandomize255State(e,r){const i=149*r%255+1,a=e-i;return a>=0?a:a+256}}tn.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],tn.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],tn.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],tn.TEXT_SHIFT2_SET_CHARS=tn.C40_SHIFT2_SET_CHARS,tn.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Ms{constructor(){this.rsDecoder=new wi(at.DATA_MATRIX_FIELD_256)}decode(e){const r=new Mr(e),i=r.getVersion(),a=r.readCodewords(),u=Ro.getDataBlocks(a,i);let d=0;for(let y of u)d+=y.getNumDataCodewords();const p=new Uint8Array(d),w=u.length;for(let y=0;y<w;y++){const b=u[y],T=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(T,k);for(let L=0;L<k;L++)p[L*w+y]=T[L]}return tn.decode(p)}correctErrors(e,r){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-r)}catch{throw new P}for(let a=0;a<r;a++)e[a]=i[a]}}class bt{constructor(e){this.image=e,this.rectangleDetector=new hn(this.image)}detect(){const e=this.rectangleDetector.detect();let r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new ie;r=this.shiftToModuleCenter(r);const i=r[0],a=r[1],u=r[2],d=r[3];let p=this.transitionsBetween(i,d)+1,w=this.transitionsBetween(u,d)+1;(p&1)===1&&(p+=1),(w&1)===1&&(w+=1),4*p<7*w&&4*w<7*p&&(p=w=Math.max(p,w));let y=bt.sampleGrid(this.image,i,a,u,d,p,w);return new yi(y,[i,a,u,d])}static shiftPoint(e,r,i){let a=(r.getX()-e.getX())/(i+1),u=(r.getY()-e.getY())/(i+1);return new Ie(e.getX()+a,e.getY()+u)}static moveAway(e,r,i){let a=e.getX(),u=e.getY();return a<r?a-=1:a+=1,u<i?u-=1:u+=1,new Ie(a,u)}detectSolid1(e){let r=e[0],i=e[1],a=e[3],u=e[2],d=this.transitionsBetween(r,i),p=this.transitionsBetween(i,a),w=this.transitionsBetween(a,u),y=this.transitionsBetween(u,r),b=d,T=[u,r,i,a];return b>p&&(b=p,T[0]=r,T[1]=i,T[2]=a,T[3]=u),b>w&&(b=w,T[0]=i,T[1]=a,T[2]=u,T[3]=r),b>y&&(T[0]=a,T[1]=u,T[2]=r,T[3]=i),T}detectSolid2(e){let r=e[0],i=e[1],a=e[2],u=e[3],d=this.transitionsBetween(r,u),p=bt.shiftPoint(i,a,(d+1)*4),w=bt.shiftPoint(a,i,(d+1)*4),y=this.transitionsBetween(p,r),b=this.transitionsBetween(w,u);return y<b?(e[0]=r,e[1]=i,e[2]=a,e[3]=u):(e[0]=i,e[1]=a,e[2]=u,e[3]=r),e}correctTopRight(e){let r=e[0],i=e[1],a=e[2],u=e[3],d=this.transitionsBetween(r,u),p=this.transitionsBetween(i,u),w=bt.shiftPoint(r,i,(p+1)*4),y=bt.shiftPoint(a,i,(d+1)*4);d=this.transitionsBetween(w,u),p=this.transitionsBetween(y,u);let b=new Ie(u.getX()+(a.getX()-i.getX())/(d+1),u.getY()+(a.getY()-i.getY())/(d+1)),T=new Ie(u.getX()+(r.getX()-i.getX())/(p+1),u.getY()+(r.getY()-i.getY())/(p+1));if(!this.isValid(b))return this.isValid(T)?T:null;if(!this.isValid(T))return b;let k=this.transitionsBetween(w,b)+this.transitionsBetween(y,b),L=this.transitionsBetween(w,T)+this.transitionsBetween(y,T);return k>L?b:T}shiftToModuleCenter(e){let r=e[0],i=e[1],a=e[2],u=e[3],d=this.transitionsBetween(r,u)+1,p=this.transitionsBetween(a,u)+1,w=bt.shiftPoint(r,i,p*4),y=bt.shiftPoint(a,i,d*4);d=this.transitionsBetween(w,u)+1,p=this.transitionsBetween(y,u)+1,(d&1)===1&&(d+=1),(p&1)===1&&(p+=1);let b=(r.getX()+i.getX()+a.getX()+u.getX())/4,T=(r.getY()+i.getY()+a.getY()+u.getY())/4;r=bt.moveAway(r,b,T),i=bt.moveAway(i,b,T),a=bt.moveAway(a,b,T),u=bt.moveAway(u,b,T);let k,L;return w=bt.shiftPoint(r,i,p*4),w=bt.shiftPoint(w,u,d*4),k=bt.shiftPoint(i,r,p*4),k=bt.shiftPoint(k,a,d*4),y=bt.shiftPoint(a,u,p*4),y=bt.shiftPoint(y,i,d*4),L=bt.shiftPoint(u,a,p*4),L=bt.shiftPoint(L,r,d*4),[w,k,y,L]}isValid(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()}static sampleGrid(e,r,i,a,u,d,p){return Qr.getInstance().sampleGrid(e,d,p,.5,.5,d-.5,.5,d-.5,p-.5,.5,p-.5,r.getX(),r.getY(),u.getX(),u.getY(),a.getX(),a.getY(),i.getX(),i.getY())}transitionsBetween(e,r){let i=Math.trunc(e.getX()),a=Math.trunc(e.getY()),u=Math.trunc(r.getX()),d=Math.trunc(r.getY()),p=Math.abs(d-a)>Math.abs(u-i);if(p){let z=i;i=a,a=z,z=u,u=d,d=z}let w=Math.abs(u-i),y=Math.abs(d-a),b=-w/2,T=a<d?1:-1,k=i<u?1:-1,L=0,W=this.image.get(p?a:i,p?i:a);for(let z=i,$=a;z!==u;z+=k){let ee=this.image.get(p?$:z,p?z:$);if(ee!==W&&(L++,W=ee),b+=y,b>0){if($===d)break;$+=T,b-=w}}return L}}class rn{constructor(){this.decoder=new Ms}decode(e,r=null){let i,a;if(r!=null&&r.has(xe.PURE_BARCODE)){const y=rn.extractPureBits(e.getBlackMatrix());i=this.decoder.decode(y),a=rn.NO_POINTS}else{const y=new bt(e.getBlackMatrix()).detect();i=this.decoder.decode(y.getBits()),a=y.getPoints()}const u=i.getRawBytes(),d=new Fe(i.getText(),u,8*u.length,a,we.DATA_MATRIX,F.currentTimeMillis()),p=i.getByteSegments();p!=null&&d.putMetadata(Xe.BYTE_SEGMENTS,p);const w=i.getECLevel();return w!=null&&d.putMetadata(Xe.ERROR_CORRECTION_LEVEL,w),d}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(r==null||i==null)throw new ie;const a=this.moduleSize(r,e);let u=r[1];const d=i[1];let p=r[0];const y=(i[0]-p+1)/a,b=(d-u+1)/a;if(y<=0||b<=0)throw new ie;const T=a/2;u+=T,p+=T;const k=new ct(y,b);for(let L=0;L<b;L++){const W=u+L*a;for(let z=0;z<y;z++)e.get(p+z*a,W)&&k.set(z,L)}return k}static moduleSize(e,r){const i=r.getWidth();let a=e[0];const u=e[1];for(;a<i&&r.get(a,u);)a++;if(a===i)throw new ie;const d=a-e[0];if(d===0)throw new ie;return d}}rn.NO_POINTS=[];class yu extends Ke{constructor(e=500){super(new rn,e)}}var Ci;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(Ci||(Ci={}));class vt{constructor(e,r,i){this.value=e,this.stringValue=r,this.bits=i,vt.FOR_BITS.set(i,this),vt.FOR_VALUE.set(e,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(e){switch(e){case"L":return vt.L;case"M":return vt.M;case"Q":return vt.Q;case"H":return vt.H;default:throw new S(e+"not available")}}toString(){return this.stringValue}equals(e){if(!(e instanceof vt))return!1;const r=e;return this.value===r.value}static forBits(e){if(e<0||e>=vt.FOR_BITS.size)throw new N;return vt.FOR_BITS.get(e)}}vt.FOR_BITS=new Map,vt.FOR_VALUE=new Map,vt.L=new vt(Ci.L,"L",1),vt.M=new vt(Ci.M,"M",0),vt.Q=new vt(Ci.Q,"Q",3),vt.H=new vt(Ci.H,"H",2);class or{constructor(e){this.errorCorrectionLevel=vt.forBits(e>>3&3),this.dataMask=e&7}static numBitsDiffering(e,r){return V.bitCount(e^r)}static decodeFormatInformation(e,r){const i=or.doDecodeFormatInformation(e,r);return i!==null?i:or.doDecodeFormatInformation(e^or.FORMAT_INFO_MASK_QR,r^or.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(e,r){let i=Number.MAX_SAFE_INTEGER,a=0;for(const u of or.FORMAT_INFO_DECODE_LOOKUP){const d=u[0];if(d===e||d===r)return new or(u[1]);let p=or.numBitsDiffering(e,d);p<i&&(a=u[1],i=p),e!==r&&(p=or.numBitsDiffering(r,d),p<i&&(a=u[1],i=p))}return i<=3?new or(a):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(e){if(!(e instanceof or))return!1;const r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask}}or.FORMAT_INFO_MASK_QR=21522,or.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class q{constructor(e,...r){this.ecCodewordsPerBlock=e,this.ecBlocks=r}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let e=0;const r=this.ecBlocks;for(const i of r)e+=i.getCount();return e}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(e,r){this.count=e,this.dataCodewords=r}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Be{constructor(e,r,...i){this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=i;let a=0;const u=i[0].getECCodewordsPerBlock(),d=i[0].getECBlocks();for(const p of d)a+=p.getCount()*(p.getDataCodewords()+u);this.totalCodewords=a}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(e){return this.ecBlocks[e.getValue()]}static getProvisionalVersionForDimension(e){if(e%4!==1)throw new se;try{return this.getVersionForNumber((e-17)/4)}catch{throw new se}}static getVersionForNumber(e){if(e<1||e>40)throw new N;return Be.VERSIONS[e-1]}static decodeVersionInformation(e){let r=Number.MAX_SAFE_INTEGER,i=0;for(let a=0;a<Be.VERSION_DECODE_INFO.length;a++){const u=Be.VERSION_DECODE_INFO[a];if(u===e)return Be.getVersionForNumber(a+7);const d=or.numBitsDiffering(e,u);d<r&&(i=a+7,r=d)}return r<=3?Be.getVersionForNumber(i):null}buildFunctionPattern(){const e=this.getDimensionForVersion(),r=new ct(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);const i=this.alignmentPatternCenters.length;for(let a=0;a<i;a++){const u=this.alignmentPatternCenters[a]-2;for(let d=0;d<i;d++)a===0&&(d===0||d===i-1)||a===i-1&&d===0||r.setRegion(this.alignmentPatternCenters[d]-2,u,5,5)}return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r}toString(){return""+this.versionNumber}}Be.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Be.VERSIONS=[new Be(1,new Int32Array(0),new q(7,new M(1,19)),new q(10,new M(1,16)),new q(13,new M(1,13)),new q(17,new M(1,9))),new Be(2,Int32Array.from([6,18]),new q(10,new M(1,34)),new q(16,new M(1,28)),new q(22,new M(1,22)),new q(28,new M(1,16))),new Be(3,Int32Array.from([6,22]),new q(15,new M(1,55)),new q(26,new M(1,44)),new q(18,new M(2,17)),new q(22,new M(2,13))),new Be(4,Int32Array.from([6,26]),new q(20,new M(1,80)),new q(18,new M(2,32)),new q(26,new M(2,24)),new q(16,new M(4,9))),new Be(5,Int32Array.from([6,30]),new q(26,new M(1,108)),new q(24,new M(2,43)),new q(18,new M(2,15),new M(2,16)),new q(22,new M(2,11),new M(2,12))),new Be(6,Int32Array.from([6,34]),new q(18,new M(2,68)),new q(16,new M(4,27)),new q(24,new M(4,19)),new q(28,new M(4,15))),new Be(7,Int32Array.from([6,22,38]),new q(20,new M(2,78)),new q(18,new M(4,31)),new q(18,new M(2,14),new M(4,15)),new q(26,new M(4,13),new M(1,14))),new Be(8,Int32Array.from([6,24,42]),new q(24,new M(2,97)),new q(22,new M(2,38),new M(2,39)),new q(22,new M(4,18),new M(2,19)),new q(26,new M(4,14),new M(2,15))),new Be(9,Int32Array.from([6,26,46]),new q(30,new M(2,116)),new q(22,new M(3,36),new M(2,37)),new q(20,new M(4,16),new M(4,17)),new q(24,new M(4,12),new M(4,13))),new Be(10,Int32Array.from([6,28,50]),new q(18,new M(2,68),new M(2,69)),new q(26,new M(4,43),new M(1,44)),new q(24,new M(6,19),new M(2,20)),new q(28,new M(6,15),new M(2,16))),new Be(11,Int32Array.from([6,30,54]),new q(20,new M(4,81)),new q(30,new M(1,50),new M(4,51)),new q(28,new M(4,22),new M(4,23)),new q(24,new M(3,12),new M(8,13))),new Be(12,Int32Array.from([6,32,58]),new q(24,new M(2,92),new M(2,93)),new q(22,new M(6,36),new M(2,37)),new q(26,new M(4,20),new M(6,21)),new q(28,new M(7,14),new M(4,15))),new Be(13,Int32Array.from([6,34,62]),new q(26,new M(4,107)),new q(22,new M(8,37),new M(1,38)),new q(24,new M(8,20),new M(4,21)),new q(22,new M(12,11),new M(4,12))),new Be(14,Int32Array.from([6,26,46,66]),new q(30,new M(3,115),new M(1,116)),new q(24,new M(4,40),new M(5,41)),new q(20,new M(11,16),new M(5,17)),new q(24,new M(11,12),new M(5,13))),new Be(15,Int32Array.from([6,26,48,70]),new q(22,new M(5,87),new M(1,88)),new q(24,new M(5,41),new M(5,42)),new q(30,new M(5,24),new M(7,25)),new q(24,new M(11,12),new M(7,13))),new Be(16,Int32Array.from([6,26,50,74]),new q(24,new M(5,98),new M(1,99)),new q(28,new M(7,45),new M(3,46)),new q(24,new M(15,19),new M(2,20)),new q(30,new M(3,15),new M(13,16))),new Be(17,Int32Array.from([6,30,54,78]),new q(28,new M(1,107),new M(5,108)),new q(28,new M(10,46),new M(1,47)),new q(28,new M(1,22),new M(15,23)),new q(28,new M(2,14),new M(17,15))),new Be(18,Int32Array.from([6,30,56,82]),new q(30,new M(5,120),new M(1,121)),new q(26,new M(9,43),new M(4,44)),new q(28,new M(17,22),new M(1,23)),new q(28,new M(2,14),new M(19,15))),new Be(19,Int32Array.from([6,30,58,86]),new q(28,new M(3,113),new M(4,114)),new q(26,new M(3,44),new M(11,45)),new q(26,new M(17,21),new M(4,22)),new q(26,new M(9,13),new M(16,14))),new Be(20,Int32Array.from([6,34,62,90]),new q(28,new M(3,107),new M(5,108)),new q(26,new M(3,41),new M(13,42)),new q(30,new M(15,24),new M(5,25)),new q(28,new M(15,15),new M(10,16))),new Be(21,Int32Array.from([6,28,50,72,94]),new q(28,new M(4,116),new M(4,117)),new q(26,new M(17,42)),new q(28,new M(17,22),new M(6,23)),new q(30,new M(19,16),new M(6,17))),new Be(22,Int32Array.from([6,26,50,74,98]),new q(28,new M(2,111),new M(7,112)),new q(28,new M(17,46)),new q(30,new M(7,24),new M(16,25)),new q(24,new M(34,13))),new Be(23,Int32Array.from([6,30,54,78,102]),new q(30,new M(4,121),new M(5,122)),new q(28,new M(4,47),new M(14,48)),new q(30,new M(11,24),new M(14,25)),new q(30,new M(16,15),new M(14,16))),new Be(24,Int32Array.from([6,28,54,80,106]),new q(30,new M(6,117),new M(4,118)),new q(28,new M(6,45),new M(14,46)),new q(30,new M(11,24),new M(16,25)),new q(30,new M(30,16),new M(2,17))),new Be(25,Int32Array.from([6,32,58,84,110]),new q(26,new M(8,106),new M(4,107)),new q(28,new M(8,47),new M(13,48)),new q(30,new M(7,24),new M(22,25)),new q(30,new M(22,15),new M(13,16))),new Be(26,Int32Array.from([6,30,58,86,114]),new q(28,new M(10,114),new M(2,115)),new q(28,new M(19,46),new M(4,47)),new q(28,new M(28,22),new M(6,23)),new q(30,new M(33,16),new M(4,17))),new Be(27,Int32Array.from([6,34,62,90,118]),new q(30,new M(8,122),new M(4,123)),new q(28,new M(22,45),new M(3,46)),new q(30,new M(8,23),new M(26,24)),new q(30,new M(12,15),new M(28,16))),new Be(28,Int32Array.from([6,26,50,74,98,122]),new q(30,new M(3,117),new M(10,118)),new q(28,new M(3,45),new M(23,46)),new q(30,new M(4,24),new M(31,25)),new q(30,new M(11,15),new M(31,16))),new Be(29,Int32Array.from([6,30,54,78,102,126]),new q(30,new M(7,116),new M(7,117)),new q(28,new M(21,45),new M(7,46)),new q(30,new M(1,23),new M(37,24)),new q(30,new M(19,15),new M(26,16))),new Be(30,Int32Array.from([6,26,52,78,104,130]),new q(30,new M(5,115),new M(10,116)),new q(28,new M(19,47),new M(10,48)),new q(30,new M(15,24),new M(25,25)),new q(30,new M(23,15),new M(25,16))),new Be(31,Int32Array.from([6,30,56,82,108,134]),new q(30,new M(13,115),new M(3,116)),new q(28,new M(2,46),new M(29,47)),new q(30,new M(42,24),new M(1,25)),new q(30,new M(23,15),new M(28,16))),new Be(32,Int32Array.from([6,34,60,86,112,138]),new q(30,new M(17,115)),new q(28,new M(10,46),new M(23,47)),new q(30,new M(10,24),new M(35,25)),new q(30,new M(19,15),new M(35,16))),new Be(33,Int32Array.from([6,30,58,86,114,142]),new q(30,new M(17,115),new M(1,116)),new q(28,new M(14,46),new M(21,47)),new q(30,new M(29,24),new M(19,25)),new q(30,new M(11,15),new M(46,16))),new Be(34,Int32Array.from([6,34,62,90,118,146]),new q(30,new M(13,115),new M(6,116)),new q(28,new M(14,46),new M(23,47)),new q(30,new M(44,24),new M(7,25)),new q(30,new M(59,16),new M(1,17))),new Be(35,Int32Array.from([6,30,54,78,102,126,150]),new q(30,new M(12,121),new M(7,122)),new q(28,new M(12,47),new M(26,48)),new q(30,new M(39,24),new M(14,25)),new q(30,new M(22,15),new M(41,16))),new Be(36,Int32Array.from([6,24,50,76,102,128,154]),new q(30,new M(6,121),new M(14,122)),new q(28,new M(6,47),new M(34,48)),new q(30,new M(46,24),new M(10,25)),new q(30,new M(2,15),new M(64,16))),new Be(37,Int32Array.from([6,28,54,80,106,132,158]),new q(30,new M(17,122),new M(4,123)),new q(28,new M(29,46),new M(14,47)),new q(30,new M(49,24),new M(10,25)),new q(30,new M(24,15),new M(46,16))),new Be(38,Int32Array.from([6,32,58,84,110,136,162]),new q(30,new M(4,122),new M(18,123)),new q(28,new M(13,46),new M(32,47)),new q(30,new M(48,24),new M(14,25)),new q(30,new M(42,15),new M(32,16))),new Be(39,Int32Array.from([6,26,54,82,110,138,166]),new q(30,new M(20,117),new M(4,118)),new q(28,new M(40,47),new M(7,48)),new q(30,new M(43,24),new M(22,25)),new q(30,new M(10,15),new M(67,16))),new Be(40,Int32Array.from([6,30,58,86,114,142,170]),new q(30,new M(19,118),new M(6,119)),new q(28,new M(18,47),new M(31,48)),new q(30,new M(34,24),new M(34,25)),new q(30,new M(20,15),new M(61,16)))];var Ht;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(Ht||(Ht={}));class et{constructor(e,r){this.value=e,this.isMasked=r}unmaskBitMatrix(e,r){for(let i=0;i<r;i++)for(let a=0;a<r;a++)this.isMasked(i,a)&&e.flip(a,i)}}et.values=new Map([[Ht.DATA_MASK_000,new et(Ht.DATA_MASK_000,(I,e)=>(I+e&1)===0)],[Ht.DATA_MASK_001,new et(Ht.DATA_MASK_001,(I,e)=>(I&1)===0)],[Ht.DATA_MASK_010,new et(Ht.DATA_MASK_010,(I,e)=>e%3===0)],[Ht.DATA_MASK_011,new et(Ht.DATA_MASK_011,(I,e)=>(I+e)%3===0)],[Ht.DATA_MASK_100,new et(Ht.DATA_MASK_100,(I,e)=>(Math.floor(I/2)+Math.floor(e/3)&1)===0)],[Ht.DATA_MASK_101,new et(Ht.DATA_MASK_101,(I,e)=>I*e%6===0)],[Ht.DATA_MASK_110,new et(Ht.DATA_MASK_110,(I,e)=>I*e%6<3)],[Ht.DATA_MASK_111,new et(Ht.DATA_MASK_111,(I,e)=>(I+e+I*e%3&1)===0)]]);class Da{constructor(e){const r=e.getHeight();if(r<21||(r&3)!==1)throw new se;this.bitMatrix=e}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let e=0;for(let u=0;u<6;u++)e=this.copyBit(u,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(let u=5;u>=0;u--)e=this.copyBit(8,u,e);const r=this.bitMatrix.getHeight();let i=0;const a=r-7;for(let u=r-1;u>=a;u--)i=this.copyBit(8,u,i);for(let u=r-8;u<r;u++)i=this.copyBit(u,8,i);if(this.parsedFormatInfo=or.decodeFormatInformation(e,i),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new se}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return Be.getVersionForNumber(r);let i=0;const a=e-11;for(let d=5;d>=0;d--)for(let p=e-9;p>=a;p--)i=this.copyBit(p,d,i);let u=Be.decodeVersionInformation(i);if(u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;i=0;for(let d=5;d>=0;d--)for(let p=e-9;p>=a;p--)i=this.copyBit(d,p,i);if(u=Be.decodeVersionInformation(i),u!==null&&u.getDimensionForVersion()===e)return this.parsedVersion=u,u;throw new se}copyBit(e,r,i){return(this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r))?i<<1|1:i<<1}readCodewords(){const e=this.readFormatInformation(),r=this.readVersion(),i=et.values.get(e.getDataMask()),a=this.bitMatrix.getHeight();i.unmaskBitMatrix(this.bitMatrix,a);const u=r.buildFunctionPattern();let d=!0;const p=new Uint8Array(r.getTotalCodewords());let w=0,y=0,b=0;for(let T=a-1;T>0;T-=2){T===6&&T--;for(let k=0;k<a;k++){const L=d?a-1-k:k;for(let W=0;W<2;W++)u.get(T-W,L)||(b++,y<<=1,this.bitMatrix.get(T-W,L)&&(y|=1),b===8&&(p[w++]=y,b=0,y=0))}d=!d}if(w!==r.getTotalCodewords())throw new se;return p}remask(){if(this.parsedFormatInfo===null)return;const e=et.values[this.parsedFormatInfo.getDataMask()],r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}setMirror(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e}mirror(){const e=this.bitMatrix;for(let r=0,i=e.getWidth();r<i;r++)for(let a=r+1,u=e.getHeight();a<u;a++)e.get(r,a)!==e.get(a,r)&&(e.flip(a,r),e.flip(r,a))}}class Ls{constructor(e,r){this.numDataCodewords=e,this.codewords=r}static getDataBlocks(e,r,i){if(e.length!==r.getTotalCodewords())throw new N;const a=r.getECBlocksForLevel(i);let u=0;const d=a.getECBlocks();for(const W of d)u+=W.getCount();const p=new Array(u);let w=0;for(const W of d)for(let z=0;z<W.getCount();z++){const $=W.getDataCodewords(),ee=a.getECCodewordsPerBlock()+$;p[w++]=new Ls($,new Uint8Array(ee))}const y=p[0].codewords.length;let b=p.length-1;for(;b>=0&&p[b].codewords.length!==y;)b--;b++;const T=y-a.getECCodewordsPerBlock();let k=0;for(let W=0;W<T;W++)for(let z=0;z<w;z++)p[z].codewords[W]=e[k++];for(let W=b;W<w;W++)p[W].codewords[T]=e[k++];const L=p[0].codewords.length;for(let W=T;W<L;W++)for(let z=0;z<w;z++){const $=z<b?W:W+1;p[z].codewords[$]=e[k++]}return p}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Tr;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(Tr||(Tr={}));class je{constructor(e,r,i,a){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=i,this.bits=a,je.FOR_BITS.set(a,this),je.FOR_VALUE.set(e,this)}static forBits(e){const r=je.FOR_BITS.get(e);if(r===void 0)throw new N;return r}getCharacterCountBits(e){const r=e.getVersionNumber();let i;return r<=9?i=0:r<=26?i=1:i=2,this.characterCountBitsForVersions[i]}getValue(){return this.value}getBits(){return this.bits}equals(e){if(!(e instanceof je))return!1;const r=e;return this.value===r.value}toString(){return this.stringValue}}je.FOR_BITS=new Map,je.FOR_VALUE=new Map,je.TERMINATOR=new je(Tr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),je.NUMERIC=new je(Tr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),je.ALPHANUMERIC=new je(Tr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),je.STRUCTURED_APPEND=new je(Tr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),je.BYTE=new je(Tr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),je.ECI=new je(Tr.ECI,"ECI",Int32Array.from([0,0,0]),7),je.KANJI=new je(Tr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),je.FNC1_FIRST_POSITION=new je(Tr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),je.FNC1_SECOND_POSITION=new je(Tr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),je.HANZI=new je(Tr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Tt{static decode(e,r,i,a){const u=new Oo(e);let d=new $e;const p=new Array;let w=-1,y=-1;try{let b=null,T=!1,k;do{if(u.available()<4)k=je.TERMINATOR;else{const L=u.readBits(4);k=je.forBits(L)}switch(k){case je.TERMINATOR:break;case je.FNC1_FIRST_POSITION:case je.FNC1_SECOND_POSITION:T=!0;break;case je.STRUCTURED_APPEND:if(u.available()<16)throw new se;w=u.readBits(8),y=u.readBits(8);break;case je.ECI:const L=Tt.parseECIValue(u);if(b=ne.getCharacterSetECIByValue(L),b===null)throw new se;break;case je.HANZI:const W=u.readBits(4),z=u.readBits(k.getCharacterCountBits(r));W===Tt.GB2312_SUBSET&&Tt.decodeHanziSegment(u,d,z);break;default:const $=u.readBits(k.getCharacterCountBits(r));switch(k){case je.NUMERIC:Tt.decodeNumericSegment(u,d,$);break;case je.ALPHANUMERIC:Tt.decodeAlphanumericSegment(u,d,$,T);break;case je.BYTE:Tt.decodeByteSegment(u,d,$,b,p,a);break;case je.KANJI:Tt.decodeKanjiSegment(u,d,$);break;default:throw new se}break}}while(k!==je.TERMINATOR)}catch{throw new se}return new wt(e,d.toString(),p.length===0?null:p,i===null?null:i.toString(),w,y)}static decodeHanziSegment(e,r,i){if(i*13>e.available())throw new se;const a=new Uint8Array(2*i);let u=0;for(;i>0;){const d=e.readBits(13);let p=d/96<<8&4294967295|d%96;p<959?p+=41377:p+=42657,a[u]=p>>8&255,a[u+1]=p&255,u+=2,i--}try{r.append(He.decode(a,ve.GB2312))}catch(d){throw new se(d)}}static decodeKanjiSegment(e,r,i){if(i*13>e.available())throw new se;const a=new Uint8Array(2*i);let u=0;for(;i>0;){const d=e.readBits(13);let p=d/192<<8&4294967295|d%192;p<7936?p+=33088:p+=49472,a[u]=p>>8,a[u+1]=p,u+=2,i--}try{r.append(He.decode(a,ve.SHIFT_JIS))}catch(d){throw new se(d)}}static decodeByteSegment(e,r,i,a,u,d){if(8*i>e.available())throw new se;const p=new Uint8Array(i);for(let y=0;y<i;y++)p[y]=e.readBits(8);let w;a===null?w=ve.guessEncoding(p,d):w=a.getName();try{r.append(He.decode(p,w))}catch(y){throw new se(y)}u.push(p)}static toAlphaNumericChar(e){if(e>=Tt.ALPHANUMERIC_CHARS.length)throw new se;return Tt.ALPHANUMERIC_CHARS[e]}static decodeAlphanumericSegment(e,r,i,a){const u=r.length();for(;i>1;){if(e.available()<11)throw new se;const d=e.readBits(11);r.append(Tt.toAlphaNumericChar(Math.floor(d/45))),r.append(Tt.toAlphaNumericChar(d%45)),i-=2}if(i===1){if(e.available()<6)throw new se;r.append(Tt.toAlphaNumericChar(e.readBits(6)))}if(a)for(let d=u;d<r.length();d++)r.charAt(d)==="%"&&(d<r.length()-1&&r.charAt(d+1)==="%"?r.deleteCharAt(d+1):r.setCharAt(d,""))}static decodeNumericSegment(e,r,i){for(;i>=3;){if(e.available()<10)throw new se;const a=e.readBits(10);if(a>=1e3)throw new se;r.append(Tt.toAlphaNumericChar(Math.floor(a/100))),r.append(Tt.toAlphaNumericChar(Math.floor(a/10)%10)),r.append(Tt.toAlphaNumericChar(a%10)),i-=3}if(i===2){if(e.available()<7)throw new se;const a=e.readBits(7);if(a>=100)throw new se;r.append(Tt.toAlphaNumericChar(Math.floor(a/10))),r.append(Tt.toAlphaNumericChar(a%10))}else if(i===1){if(e.available()<4)throw new se;const a=e.readBits(4);if(a>=10)throw new se;r.append(Tt.toAlphaNumericChar(a))}}static parseECIValue(e){const r=e.readBits(8);if((r&128)===0)return r&127;if((r&192)===128){const i=e.readBits(8);return(r&63)<<8&4294967295|i}if((r&224)===192){const i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new se}}Tt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Tt.GB2312_SUBSET=1;class ko{constructor(e){this.mirrored=e}isMirrored(){return this.mirrored}applyMirroredCorrection(e){if(!this.mirrored||e===null||e.length<3)return;const r=e[0];e[0]=e[2],e[2]=r}}class Do{constructor(){this.rsDecoder=new wi(at.QR_CODE_FIELD_256)}decodeBooleanArray(e,r){return this.decodeBitMatrix(ct.parseFromBooleanArray(e),r)}decodeBitMatrix(e,r){const i=new Da(e);let a=null;try{return this.decodeBitMatrixParser(i,r)}catch(u){a=u}try{i.remask(),i.setMirror(!0),i.readVersion(),i.readFormatInformation(),i.mirror();const u=this.decodeBitMatrixParser(i,r);return u.setOther(new ko(!0)),u}catch(u){throw a!==null?a:u}}decodeBitMatrixParser(e,r){const i=e.readVersion(),a=e.readFormatInformation().getErrorCorrectionLevel(),u=e.readCodewords(),d=Ls.getDataBlocks(u,i,a);let p=0;for(const b of d)p+=b.getNumDataCodewords();const w=new Uint8Array(p);let y=0;for(const b of d){const T=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(T,k);for(let L=0;L<k;L++)w[y++]=T[L]}return Tt.decode(w,i,a,r)}correctErrors(e,r){const i=new Int32Array(e);try{this.rsDecoder.decode(i,e.length-r)}catch{throw new P}for(let a=0;a<r;a++)e[a]=i[a]}}class Ai extends Ie{constructor(e,r,i){super(e,r),this.estimatedModuleSize=i}aboutEquals(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,r,i){const a=(this.getX()+r)/2,u=(this.getY()+e)/2,d=(this.estimatedModuleSize+i)/2;return new Ai(a,u,d)}}class nn{constructor(e,r,i,a,u,d,p){this.image=e,this.startX=r,this.startY=i,this.width=a,this.height=u,this.moduleSize=d,this.resultPointCallback=p,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const e=this.startX,r=this.height,i=this.width,a=e+i,u=this.startY+r/2,d=new Int32Array(3),p=this.image;for(let w=0;w<r;w++){const y=u+((w&1)===0?Math.floor((w+1)/2):-Math.floor((w+1)/2));d[0]=0,d[1]=0,d[2]=0;let b=e;for(;b<a&&!p.get(b,y);)b++;let T=0;for(;b<a;){if(p.get(b,y))if(T===1)d[1]++;else if(T===2){if(this.foundPatternCross(d)){const k=this.handlePossibleCenter(d,y,b);if(k!==null)return k}d[0]=d[2],d[1]=1,d[2]=0,T=1}else d[++T]++;else T===1&&T++,d[T]++;b++}if(this.foundPatternCross(d)){const k=this.handlePossibleCenter(d,y,a);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(e,r){return r-e[2]-e[1]/2}foundPatternCross(e){const r=this.moduleSize,i=r/2;for(let a=0;a<3;a++)if(Math.abs(r-e[a])>=i)return!1;return!0}crossCheckVertical(e,r,i,a){const u=this.image,d=u.getHeight(),p=this.crossCheckStateCount;p[0]=0,p[1]=0,p[2]=0;let w=e;for(;w>=0&&u.get(r,w)&&p[1]<=i;)p[1]++,w--;if(w<0||p[1]>i)return NaN;for(;w>=0&&!u.get(r,w)&&p[0]<=i;)p[0]++,w--;if(p[0]>i)return NaN;for(w=e+1;w<d&&u.get(r,w)&&p[1]<=i;)p[1]++,w++;if(w===d||p[1]>i)return NaN;for(;w<d&&!u.get(r,w)&&p[2]<=i;)p[2]++,w++;if(p[2]>i)return NaN;const y=p[0]+p[1]+p[2];return 5*Math.abs(y-a)>=2*a?NaN:this.foundPatternCross(p)?nn.centerFromEnd(p,w):NaN}handlePossibleCenter(e,r,i){const a=e[0]+e[1]+e[2],u=nn.centerFromEnd(e,i),d=this.crossCheckVertical(r,u,2*e[1],a);if(!isNaN(d)){const p=(e[0]+e[1]+e[2])/3;for(const y of this.possibleCenters)if(y.aboutEquals(p,d,u))return y.combineEstimate(d,u,p);const w=new Ai(u,d,p);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class pn extends Ie{constructor(e,r,i,a){super(e,r),this.estimatedModuleSize=i,this.count=a,a===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(e,r,i){if(Math.abs(r-this.getY())<=e&&Math.abs(i-this.getX())<=e){const a=Math.abs(e-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1}combineEstimate(e,r,i){const a=this.count+1,u=(this.count*this.getX()+r)/a,d=(this.count*this.getY()+e)/a,p=(this.count*this.estimatedModuleSize+i)/a;return new pn(u,d,p,a)}}class Hn{constructor(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Mt{constructor(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(e){const r=e!=null&&e.get(xe.TRY_HARDER)!==void 0,i=e!=null&&e.get(xe.PURE_BARCODE)!==void 0,a=this.image,u=a.getHeight(),d=a.getWidth();let p=Math.floor(3*u/(4*Mt.MAX_MODULES));(p<Mt.MIN_SKIP||r)&&(p=Mt.MIN_SKIP);let w=!1;const y=new Int32Array(5);for(let T=p-1;T<u&&!w;T+=p){y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0;let k=0;for(let L=0;L<d;L++)if(a.get(L,T))(k&1)===1&&k++,y[k]++;else if((k&1)===0)if(k===4)if(Mt.foundPatternCross(y)){if(this.handlePossibleCenter(y,T,L,i)===!0)if(p=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const z=this.findRowSkip();z>y[2]&&(T+=z-y[2]-p,L=d-1)}else{y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,k=3;continue}k=0,y[0]=0,y[1]=0,y[2]=0,y[3]=0,y[4]=0}else y[0]=y[2],y[1]=y[3],y[2]=y[4],y[3]=1,y[4]=0,k=3;else y[++k]++;else y[k]++;Mt.foundPatternCross(y)&&this.handlePossibleCenter(y,T,d,i)===!0&&(p=y[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return Ie.orderBestPatterns(b),new Hn(b)}static centerFromEnd(e,r){return r-e[4]-e[3]-e[2]/2}static foundPatternCross(e){let r=0;for(let u=0;u<5;u++){const d=e[u];if(d===0)return!1;r+=d}if(r<7)return!1;const i=r/7,a=i/2;return Math.abs(i-e[0])<a&&Math.abs(i-e[1])<a&&Math.abs(3*i-e[2])<3*a&&Math.abs(i-e[3])<a&&Math.abs(i-e[4])<a}getCrossCheckStateCount(){const e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e}crossCheckDiagonal(e,r,i,a){const u=this.getCrossCheckStateCount();let d=0;const p=this.image;for(;e>=d&&r>=d&&p.get(r-d,e-d);)u[2]++,d++;if(e<d||r<d)return!1;for(;e>=d&&r>=d&&!p.get(r-d,e-d)&&u[1]<=i;)u[1]++,d++;if(e<d||r<d||u[1]>i)return!1;for(;e>=d&&r>=d&&p.get(r-d,e-d)&&u[0]<=i;)u[0]++,d++;if(u[0]>i)return!1;const w=p.getHeight(),y=p.getWidth();for(d=1;e+d<w&&r+d<y&&p.get(r+d,e+d);)u[2]++,d++;if(e+d>=w||r+d>=y)return!1;for(;e+d<w&&r+d<y&&!p.get(r+d,e+d)&&u[3]<i;)u[3]++,d++;if(e+d>=w||r+d>=y||u[3]>=i)return!1;for(;e+d<w&&r+d<y&&p.get(r+d,e+d)&&u[4]<i;)u[4]++,d++;if(u[4]>=i)return!1;const b=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(b-a)<2*a&&Mt.foundPatternCross(u)}crossCheckVertical(e,r,i,a){const u=this.image,d=u.getHeight(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&u.get(r,w);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!u.get(r,w)&&p[1]<=i;)p[1]++,w--;if(w<0||p[1]>i)return NaN;for(;w>=0&&u.get(r,w)&&p[0]<=i;)p[0]++,w--;if(p[0]>i)return NaN;for(w=e+1;w<d&&u.get(r,w);)p[2]++,w++;if(w===d)return NaN;for(;w<d&&!u.get(r,w)&&p[3]<i;)p[3]++,w++;if(w===d||p[3]>=i)return NaN;for(;w<d&&u.get(r,w)&&p[4]<i;)p[4]++,w++;if(p[4]>=i)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=2*a?NaN:Mt.foundPatternCross(p)?Mt.centerFromEnd(p,w):NaN}crossCheckHorizontal(e,r,i,a){const u=this.image,d=u.getWidth(),p=this.getCrossCheckStateCount();let w=e;for(;w>=0&&u.get(w,r);)p[2]++,w--;if(w<0)return NaN;for(;w>=0&&!u.get(w,r)&&p[1]<=i;)p[1]++,w--;if(w<0||p[1]>i)return NaN;for(;w>=0&&u.get(w,r)&&p[0]<=i;)p[0]++,w--;if(p[0]>i)return NaN;for(w=e+1;w<d&&u.get(w,r);)p[2]++,w++;if(w===d)return NaN;for(;w<d&&!u.get(w,r)&&p[3]<i;)p[3]++,w++;if(w===d||p[3]>=i)return NaN;for(;w<d&&u.get(w,r)&&p[4]<i;)p[4]++,w++;if(p[4]>=i)return NaN;const y=p[0]+p[1]+p[2]+p[3]+p[4];return 5*Math.abs(y-a)>=a?NaN:Mt.foundPatternCross(p)?Mt.centerFromEnd(p,w):NaN}handlePossibleCenter(e,r,i,a){const u=e[0]+e[1]+e[2]+e[3]+e[4];let d=Mt.centerFromEnd(e,i),p=this.crossCheckVertical(r,Math.floor(d),e[2],u);if(!isNaN(p)&&(d=this.crossCheckHorizontal(Math.floor(d),Math.floor(p),e[2],u),!isNaN(d)&&(!a||this.crossCheckDiagonal(Math.floor(p),Math.floor(d),e[2],u)))){const w=u/7;let y=!1;const b=this.possibleCenters;for(let T=0,k=b.length;T<k;T++){const L=b[T];if(L.aboutEquals(w,p,d)){b[T]=L.combineEstimate(p,d,w),y=!0;break}}if(!y){const T=new pn(d,p,w);b.push(T),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(T)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let r=null;for(const i of this.possibleCenters)if(i.getCount()>=Mt.CENTER_QUORUM)if(r==null)r=i;else return this.hasSkipped=!0,Math.floor((Math.abs(r.getX()-i.getX())-Math.abs(r.getY()-i.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let e=0,r=0;const i=this.possibleCenters.length;for(const d of this.possibleCenters)d.getCount()>=Mt.CENTER_QUORUM&&(e++,r+=d.getEstimatedModuleSize());if(e<3)return!1;const a=r/i;let u=0;for(const d of this.possibleCenters)u+=Math.abs(d.getEstimatedModuleSize()-a);return u<=.05*r}selectBestPatterns(){const e=this.possibleCenters.length;if(e<3)throw new ie;const r=this.possibleCenters;let i;if(e>3){let a=0,u=0;for(const w of this.possibleCenters){const y=w.getEstimatedModuleSize();a+=y,u+=y*y}i=a/e;let d=Math.sqrt(u/e-i*i);r.sort((w,y)=>{const b=Math.abs(y.getEstimatedModuleSize()-i),T=Math.abs(w.getEstimatedModuleSize()-i);return b<T?-1:b>T?1:0});const p=Math.max(.2*i,d);for(let w=0;w<r.length&&r.length>3;w++){const y=r[w];Math.abs(y.getEstimatedModuleSize()-i)>p&&(r.splice(w,1),w--)}}if(r.length>3){let a=0;for(const u of r)a+=u.getEstimatedModuleSize();i=a/r.length,r.sort((u,d)=>{if(d.getCount()===u.getCount()){const p=Math.abs(d.getEstimatedModuleSize()-i),w=Math.abs(u.getEstimatedModuleSize()-i);return p<w?1:p>w?-1:0}else return d.getCount()-u.getCount()}),r.splice(3)}return[r[0],r[1],r[2]]}}Mt.CENTER_QUORUM=2,Mt.MIN_SKIP=3,Mt.MAX_MODULES=57;class Sn{constructor(e){this.image=e}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(e){this.resultPointCallback=e==null?null:e.get(xe.NEED_RESULT_POINT_CALLBACK);const i=new Mt(this.image,this.resultPointCallback).find(e);return this.processFinderPatternInfo(i)}processFinderPatternInfo(e){const r=e.getTopLeft(),i=e.getTopRight(),a=e.getBottomLeft(),u=this.calculateModuleSize(r,i,a);if(u<1)throw new ie("No pattern found in proccess finder.");const d=Sn.computeDimension(r,i,a,u),p=Be.getProvisionalVersionForDimension(d),w=p.getDimensionForVersion()-7;let y=null;if(p.getAlignmentPatternCenters().length>0){const L=i.getX()-r.getX()+a.getX(),W=i.getY()-r.getY()+a.getY(),z=1-3/w,$=Math.floor(r.getX()+z*(L-r.getX())),ee=Math.floor(r.getY()+z*(W-r.getY()));for(let ge=4;ge<=16;ge<<=1)try{y=this.findAlignmentInRegion(u,$,ee,ge);break}catch(pe){if(!(pe instanceof ie))throw pe}}const b=Sn.createTransform(r,i,a,y,d),T=Sn.sampleGrid(this.image,b,d);let k;return y===null?k=[a,r,i]:k=[a,r,i,y],new yi(T,k)}static createTransform(e,r,i,a,u){const d=u-3.5;let p,w,y,b;return a!==null?(p=a.getX(),w=a.getY(),y=d-3,b=y):(p=r.getX()-e.getX()+i.getX(),w=r.getY()-e.getY()+i.getY(),y=d,b=d),jr.quadrilateralToQuadrilateral(3.5,3.5,d,3.5,y,b,3.5,d,e.getX(),e.getY(),r.getX(),r.getY(),p,w,i.getX(),i.getY())}static sampleGrid(e,r,i){return Qr.getInstance().sampleGridWithTransform(e,i,i,r)}static computeDimension(e,r,i,a){const u=it.round(Ie.distance(e,r)/a),d=it.round(Ie.distance(e,i)/a);let p=Math.floor((u+d)/2)+7;switch(p&3){case 0:p++;break;case 2:p--;break;case 3:throw new ie("Dimensions could be not found.")}return p}calculateModuleSize(e,r,i){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,i))/2}calculateModuleSizeOneWay(e,r){const i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(i)?a/7:isNaN(a)?i/7:(i+a)/14}sizeOfBlackWhiteBlackRunBothWays(e,r,i,a){let u=this.sizeOfBlackWhiteBlackRun(e,r,i,a),d=1,p=e-(i-e);p<0?(d=e/(e-p),p=0):p>=this.image.getWidth()&&(d=(this.image.getWidth()-1-e)/(p-e),p=this.image.getWidth()-1);let w=Math.floor(r-(a-r)*d);return d=1,w<0?(d=r/(r-w),w=0):w>=this.image.getHeight()&&(d=(this.image.getHeight()-1-r)/(w-r),w=this.image.getHeight()-1),p=Math.floor(e+(p-e)*d),u+=this.sizeOfBlackWhiteBlackRun(e,r,p,w),u-1}sizeOfBlackWhiteBlackRun(e,r,i,a){const u=Math.abs(a-r)>Math.abs(i-e);if(u){let L=e;e=r,r=L,L=i,i=a,a=L}const d=Math.abs(i-e),p=Math.abs(a-r);let w=-d/2;const y=e<i?1:-1,b=r<a?1:-1;let T=0;const k=i+y;for(let L=e,W=r;L!==k;L+=y){const z=u?W:L,$=u?L:W;if(T===1===this.image.get(z,$)){if(T===2)return it.distance(L,W,e,r);T++}if(w+=p,w>0){if(W===a)break;W+=b,w-=d}}return T===2?it.distance(i+y,a,e,r):NaN}findAlignmentInRegion(e,r,i,a){const u=Math.floor(a*e),d=Math.max(0,r-u),p=Math.min(this.image.getWidth()-1,r+u);if(p-d<e*3)throw new ie("Alignment top exceeds estimated module size.");const w=Math.max(0,i-u),y=Math.min(this.image.getHeight()-1,i+u);if(y-w<e*3)throw new ie("Alignment bottom exceeds estimated module size.");return new nn(this.image,d,w,p-d,y-w,e,this.resultPointCallback).find()}}class yr{constructor(){this.decoder=new Do}getDecoder(){return this.decoder}decode(e,r){let i,a;if(r!=null&&r.get(xe.PURE_BARCODE)!==void 0){const w=yr.extractPureBits(e.getBlackMatrix());i=this.decoder.decodeBitMatrix(w,r),a=yr.NO_POINTS}else{const w=new Sn(e.getBlackMatrix()).detect(r);i=this.decoder.decodeBitMatrix(w.getBits(),r),a=w.getPoints()}i.getOther()instanceof ko&&i.getOther().applyMirroredCorrection(a);const u=new Fe(i.getText(),i.getRawBytes(),void 0,a,we.QR_CODE,void 0),d=i.getByteSegments();d!==null&&u.putMetadata(Xe.BYTE_SEGMENTS,d);const p=i.getECLevel();return p!==null&&u.putMetadata(Xe.ERROR_CORRECTION_LEVEL,p),i.hasStructuredAppend()&&(u.putMetadata(Xe.STRUCTURED_APPEND_SEQUENCE,i.getStructuredAppendSequenceNumber()),u.putMetadata(Xe.STRUCTURED_APPEND_PARITY,i.getStructuredAppendParity())),u}reset(){}static extractPureBits(e){const r=e.getTopLeftOnBit(),i=e.getBottomRightOnBit();if(r===null||i===null)throw new ie;const a=this.moduleSize(r,e);let u=r[1],d=i[1],p=r[0],w=i[0];if(p>=w||u>=d)throw new ie;if(d-u!==w-p&&(w=p+(d-u),w>=e.getWidth()))throw new ie;const y=Math.round((w-p+1)/a),b=Math.round((d-u+1)/a);if(y<=0||b<=0)throw new ie;if(b!==y)throw new ie;const T=Math.floor(a/2);u+=T,p+=T;const k=p+Math.floor((y-1)*a)-w;if(k>0){if(k>T)throw new ie;p-=k}const L=u+Math.floor((b-1)*a)-d;if(L>0){if(L>T)throw new ie;u-=L}const W=new ct(y,b);for(let z=0;z<b;z++){const $=u+Math.floor(z*a);for(let ee=0;ee<y;ee++)e.get(p+Math.floor(ee*a),$)&&W.set(ee,z)}return W}static moduleSize(e,r){const i=r.getHeight(),a=r.getWidth();let u=e[0],d=e[1],p=!0,w=0;for(;u<a&&d<i;){if(p!==r.get(u,d)){if(++w===5)break;p=!p}u++,d++}if(u===a||d===i)throw new ie;return(u-e[0])/7}}yr.NO_POINTS=new Array;class ze{PDF417Common(){}static getBitCountSum(e){return it.sum(e)}static toIntArray(e){if(e==null||!e.length)return ze.EMPTY_INT_ARRAY;const r=new Int32Array(e.length);let i=0;for(const a of e)r[i++]=a;return r}static getCodeword(e){const r=J.binarySearch(ze.SYMBOL_TABLE,e&262143);return r<0?-1:(ze.CODEWORD_TABLE[r]-1)%ze.NUMBER_OF_CODEWORDS}}ze.NUMBER_OF_CODEWORDS=929,ze.MAX_CODEWORDS_IN_BARCODE=ze.NUMBER_OF_CODEWORDS-1,ze.MIN_ROWS_IN_BARCODE=3,ze.MAX_ROWS_IN_BARCODE=90,ze.MODULES_IN_CODEWORD=17,ze.MODULES_IN_STOP_PATTERN=18,ze.BARS_IN_MODULE=8,ze.EMPTY_INT_ARRAY=new Int32Array([]),ze.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ze.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Pa{constructor(e,r){this.bits=e,this.points=r}getBits(){return this.bits}getPoints(){return this.points}}class Ye{static detectMultiple(e,r,i){let a=e.getBlackMatrix(),u=Ye.detect(i,a);return u.length||(a=a.clone(),a.rotate180(),u=Ye.detect(i,a)),new Pa(a,u)}static detect(e,r){const i=new Array;let a=0,u=0,d=!1;for(;a<r.getHeight();){const p=Ye.findVertices(r,a,u);if(p[0]==null&&p[3]==null){if(!d)break;d=!1,u=0;for(const w of i)w[1]!=null&&(a=Math.trunc(Math.max(a,w[1].getY()))),w[3]!=null&&(a=Math.max(a,Math.trunc(w[3].getY())));a+=Ye.ROW_STEP;continue}if(d=!0,i.push(p),!e)break;p[2]!=null?(u=Math.trunc(p[2].getX()),a=Math.trunc(p[2].getY())):(u=Math.trunc(p[4].getX()),a=Math.trunc(p[4].getY()))}return i}static findVertices(e,r,i){const a=e.getHeight(),u=e.getWidth(),d=new Array(8);return Ye.copyToResult(d,Ye.findRowsWithPattern(e,a,u,r,i,Ye.START_PATTERN),Ye.INDEXES_START_PATTERN),d[4]!=null&&(i=Math.trunc(d[4].getX()),r=Math.trunc(d[4].getY())),Ye.copyToResult(d,Ye.findRowsWithPattern(e,a,u,r,i,Ye.STOP_PATTERN),Ye.INDEXES_STOP_PATTERN),d}static copyToResult(e,r,i){for(let a=0;a<i.length;a++)e[i[a]]=r[a]}static findRowsWithPattern(e,r,i,a,u,d){const p=new Array(4);let w=!1;const y=new Int32Array(d.length);for(;a<r;a+=Ye.ROW_STEP){let T=Ye.findGuardPattern(e,u,a,i,!1,d,y);if(T!=null){for(;a>0;){const k=Ye.findGuardPattern(e,u,--a,i,!1,d,y);if(k!=null)T=k;else{a++;break}}p[0]=new Ie(T[0],a),p[1]=new Ie(T[1],a),w=!0;break}}let b=a+1;if(w){let T=0,k=Int32Array.from([Math.trunc(p[0].getX()),Math.trunc(p[1].getX())]);for(;b<r;b++){const L=Ye.findGuardPattern(e,k[0],b,i,!1,d,y);if(L!=null&&Math.abs(k[0]-L[0])<Ye.MAX_PATTERN_DRIFT&&Math.abs(k[1]-L[1])<Ye.MAX_PATTERN_DRIFT)k=L,T=0;else{if(T>Ye.SKIPPED_ROW_COUNT_MAX)break;T++}}b-=T+1,p[2]=new Ie(k[0],b),p[3]=new Ie(k[1],b)}return b-a<Ye.BARCODE_MIN_HEIGHT&&J.fill(p,null),p}static findGuardPattern(e,r,i,a,u,d,p){J.fillWithin(p,0,p.length,0);let w=r,y=0;for(;e.get(w,i)&&w>0&&y++<Ye.MAX_PIXEL_DRIFT;)w--;let b=w,T=0,k=d.length;for(let L=u;b<a;b++)if(e.get(b,i)!==L)p[T]++;else{if(T===k-1){if(Ye.patternMatchVariance(p,d,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE)return new Int32Array([w,b]);w+=p[0]+p[1],F.arraycopy(p,2,p,0,T-1),p[T-1]=0,p[T]=0,T--}else T++;p[T]=1,L=!L}return T===k-1&&Ye.patternMatchVariance(p,d,Ye.MAX_INDIVIDUAL_VARIANCE)<Ye.MAX_AVG_VARIANCE?new Int32Array([w,b-1]):null}static patternMatchVariance(e,r,i){let a=e.length,u=0,d=0;for(let y=0;y<a;y++)u+=e[y],d+=r[y];if(u<d)return 1/0;let p=u/d;i*=p;let w=0;for(let y=0;y<a;y++){let b=e[y],T=r[y]*p,k=b>T?b-T:T-b;if(k>i)return 1/0;w+=k}return w/u}}Ye.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ye.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ye.MAX_AVG_VARIANCE=.42,Ye.MAX_INDIVIDUAL_VARIANCE=.8,Ye.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ye.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ye.MAX_PIXEL_DRIFT=3,Ye.MAX_PATTERN_DRIFT=5,Ye.SKIPPED_ROW_COUNT_MAX=25,Ye.ROW_STEP=5,Ye.BARCODE_MIN_HEIGHT=10;class ar{constructor(e,r){if(r.length===0)throw new N;this.field=e;let i=r.length;if(i>1&&r[0]===0){let a=1;for(;a<i&&r[a]===0;)a++;a===i?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(i-a),F.arraycopy(r,a,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(e){return this.coefficients[this.coefficients.length-1-e]}evaluateAt(e){if(e===0)return this.getCoefficient(0);if(e===1){let a=0;for(let u of this.coefficients)a=this.field.add(a,u);return a}let r=this.coefficients[0],i=this.coefficients.length;for(let a=1;a<i;a++)r=this.field.add(this.field.multiply(e,r),this.coefficients[a]);return r}add(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;let r=this.coefficients,i=e.coefficients;if(r.length>i.length){let d=r;r=i,i=d}let a=new Int32Array(i.length),u=i.length-r.length;F.arraycopy(i,0,a,0,u);for(let d=u;d<i.length;d++)a[d]=this.field.add(r[d-u],i[d]);return new ar(this.field,a)}subtract(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())}multiply(e){return e instanceof ar?this.multiplyOther(e):this.multiplyScalar(e)}multiplyOther(e){if(!this.field.equals(e.field))throw new N("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new ar(this.field,new Int32Array([0]));let r=this.coefficients,i=r.length,a=e.coefficients,u=a.length,d=new Int32Array(i+u-1);for(let p=0;p<i;p++){let w=r[p];for(let y=0;y<u;y++)d[p+y]=this.field.add(d[p+y],this.field.multiply(w,a[y]))}return new ar(this.field,d)}negative(){let e=this.coefficients.length,r=new Int32Array(e);for(let i=0;i<e;i++)r[i]=this.field.subtract(0,this.coefficients[i]);return new ar(this.field,r)}multiplyScalar(e){if(e===0)return new ar(this.field,new Int32Array([0]));if(e===1)return this;let r=this.coefficients.length,i=new Int32Array(r);for(let a=0;a<r;a++)i[a]=this.field.multiply(this.coefficients[a],e);return new ar(this.field,i)}multiplyByMonomial(e,r){if(e<0)throw new N;if(r===0)return new ar(this.field,new Int32Array([0]));let i=this.coefficients.length,a=new Int32Array(i+e);for(let u=0;u<i;u++)a[u]=this.field.multiply(this.coefficients[u],r);return new ar(this.field,a)}toString(){let e=new $e;for(let r=this.getDegree();r>=0;r--){let i=this.getCoefficient(r);i!==0&&(i<0?(e.append(" - "),i=-i):e.length()>0&&e.append(" + "),(r===0||i!==1)&&e.append(i),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()}}class Ma{add(e,r){return(e+r)%this.modulus}subtract(e,r){return(this.modulus+e-r)%this.modulus}exp(e){return this.expTable[e]}log(e){if(e===0)throw new N;return this.logTable[e]}inverse(e){if(e===0)throw new Yi;return this.expTable[this.modulus-this.logTable[e]-1]}multiply(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]}getSize(){return this.modulus}equals(e){return e===this}}class bi extends Ma{constructor(e,r){super(),this.modulus=e,this.expTable=new Int32Array(e),this.logTable=new Int32Array(e);let i=1;for(let a=0;a<e;a++)this.expTable[a]=i,i=i*r%e;for(let a=0;a<e-1;a++)this.logTable[this.expTable[a]]=a;this.zero=new ar(this,new Int32Array([0])),this.one=new ar(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(e,r){if(e<0)throw new N;if(r===0)return this.zero;let i=new Int32Array(e+1);return i[0]=r,new ar(this,i)}}bi.PDF417_GF=new bi(ze.NUMBER_OF_CODEWORDS,3);class Po{constructor(){this.field=bi.PDF417_GF}decode(e,r,i){let a=new ar(this.field,e),u=new Int32Array(r),d=!1;for(let W=r;W>0;W--){let z=a.evaluateAt(this.field.exp(W));u[r-W]=z,z!==0&&(d=!0)}if(!d)return 0;let p=this.field.getOne();if(i!=null)for(const W of i){let z=this.field.exp(e.length-1-W),$=new ar(this.field,new Int32Array([this.field.subtract(0,z),1]));p=p.multiply($)}let w=new ar(this.field,u),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),w,r),b=y[0],T=y[1],k=this.findErrorLocations(b),L=this.findErrorMagnitudes(T,b,k);for(let W=0;W<k.length;W++){let z=e.length-1-this.field.log(k[W]);if(z<0)throw P.getChecksumInstance();e[z]=this.field.subtract(e[z],L[W])}return k.length}runEuclideanAlgorithm(e,r,i){if(e.getDegree()<r.getDegree()){let k=e;e=r,r=k}let a=e,u=r,d=this.field.getZero(),p=this.field.getOne();for(;u.getDegree()>=Math.round(i/2);){let k=a,L=d;if(a=u,d=p,a.isZero())throw P.getChecksumInstance();u=k;let W=this.field.getZero(),z=a.getCoefficient(a.getDegree()),$=this.field.inverse(z);for(;u.getDegree()>=a.getDegree()&&!u.isZero();){let ee=u.getDegree()-a.getDegree(),ge=this.field.multiply(u.getCoefficient(u.getDegree()),$);W=W.add(this.field.buildMonomial(ee,ge)),u=u.subtract(a.multiplyByMonomial(ee,ge))}p=W.multiply(d).subtract(L).negative()}let w=p.getCoefficient(0);if(w===0)throw P.getChecksumInstance();let y=this.field.inverse(w),b=p.multiply(y),T=u.multiply(y);return[b,T]}findErrorLocations(e){let r=e.getDegree(),i=new Int32Array(r),a=0;for(let u=1;u<this.field.getSize()&&a<r;u++)e.evaluateAt(u)===0&&(i[a]=this.field.inverse(u),a++);if(a!==r)throw P.getChecksumInstance();return i}findErrorMagnitudes(e,r,i){let a=r.getDegree(),u=new Int32Array(a);for(let y=1;y<=a;y++)u[a-y]=this.field.multiply(y,r.getCoefficient(y));let d=new ar(this.field,u),p=i.length,w=new Int32Array(p);for(let y=0;y<p;y++){let b=this.field.inverse(i[y]),T=this.field.subtract(0,e.evaluateAt(b)),k=this.field.inverse(d.evaluateAt(b));w[y]=this.field.multiply(T,k)}return w}}class Qn{constructor(e,r,i,a,u){e instanceof Qn?this.constructor_2(e):this.constructor_1(e,r,i,a,u)}constructor_1(e,r,i,a,u){const d=r==null||i==null,p=a==null||u==null;if(d&&p)throw new ie;d?(r=new Ie(0,a.getY()),i=new Ie(0,u.getY())):p&&(a=new Ie(e.getWidth()-1,r.getY()),u=new Ie(e.getWidth()-1,i.getY())),this.image=e,this.topLeft=r,this.bottomLeft=i,this.topRight=a,this.bottomRight=u,this.minX=Math.trunc(Math.min(r.getX(),i.getX())),this.maxX=Math.trunc(Math.max(a.getX(),u.getX())),this.minY=Math.trunc(Math.min(r.getY(),a.getY())),this.maxY=Math.trunc(Math.max(i.getY(),u.getY()))}constructor_2(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()}static merge(e,r){return e==null?r:r==null?e:new Qn(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)}addMissingRows(e,r,i){let a=this.topLeft,u=this.bottomLeft,d=this.topRight,p=this.bottomRight;if(e>0){let w=i?this.topLeft:this.topRight,y=Math.trunc(w.getY()-e);y<0&&(y=0);let b=new Ie(w.getX(),y);i?a=b:d=b}if(r>0){let w=i?this.bottomLeft:this.bottomRight,y=Math.trunc(w.getY()+r);y>=this.image.getHeight()&&(y=this.image.getHeight()-1);let b=new Ie(w.getX(),y);i?u=b:p=b}return new Qn(this.image,a,u,d,p)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class ts{constructor(e,r,i,a){this.columnCount=e,this.errorCorrectionLevel=a,this.rowCountUpperPart=r,this.rowCountLowerPart=i,this.rowCount=r+i}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class In{constructor(){this.buffer=""}static form(e,r){let i=-1;function a(d,p,w,y,b,T){if(d==="%%")return"%";if(r[++i]===void 0)return;d=y?parseInt(y.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,L;switch(T){case"s":L=r[i];break;case"c":L=r[i][0];break;case"f":L=parseFloat(r[i]).toFixed(d);break;case"p":L=parseFloat(r[i]).toPrecision(d);break;case"e":L=parseFloat(r[i]).toExponential(d);break;case"x":L=parseInt(r[i]).toString(k||16);break;case"d":L=parseFloat(parseInt(r[i],k||10).toPrecision(d)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let W=parseInt(w),z=w&&w[0]+""=="0"?"0":" ";for(;L.length<W;)L=p!==void 0?L+z:z+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,a)}format(e,...r){this.buffer+=In.form(e,r)}toString(){return this.buffer}}class mn{constructor(e){this.boundingBox=new Qn(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}getCodewordNearby(e){let r=this.getCodeword(e);if(r!=null)return r;for(let i=1;i<mn.MAX_NEARBY_DISTANCE;i++){let a=this.imageRowToCodewordIndex(e)-i;if(a>=0&&(r=this.codewords[a],r!=null)||(a=this.imageRowToCodewordIndex(e)+i,a<this.codewords.length&&(r=this.codewords[a],r!=null)))return r}return null}imageRowToCodewordIndex(e){return e-this.boundingBox.getMinY()}setCodeword(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r}getCodeword(e){return this.codewords[this.imageRowToCodewordIndex(e)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const e=new In;let r=0;for(const i of this.codewords){if(i==null){e.format("%3d:    |   %n",r++);continue}e.format("%3d: %3d|%3d%n",r++,i.getRowNumber(),i.getValue())}return e.toString()}}mn.MAX_NEARBY_DISTANCE=5;class zn{constructor(){this.values=new Map}setValue(e){e=Math.trunc(e);let r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)}getValue(){let e=-1,r=new Array;for(const[i,a]of this.values.entries()){const u={getKey:()=>i,getValue:()=>a};u.getValue()>e?(e=u.getValue(),r=[],r.push(u.getKey())):u.getValue()===e&&r.push(u.getKey())}return ze.toIntArray(r)}getConfidence(e){return this.values.get(e)}}class La extends mn{constructor(e,r){super(e),this._isLeft=r}setRowNumbers(){for(let e of this.getCodewords())e!=null&&e.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(e){let r=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(r,e);let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.imageRowToCodewordIndex(Math.trunc(u.getY())),w=-1,y=1,b=0;for(let T=d;T<p;T++){if(r[T]==null)continue;let k=r[T],L=k.getRowNumber()-w;if(L===0)b++;else if(L===1)y=Math.max(y,b),b=1,w=k.getRowNumber();else if(L<0||k.getRowNumber()>=e.getRowCount()||L>T)r[T]=null;else{let W;y>2?W=(y-2)*L:W=L;let z=W>=T;for(let $=1;$<=W&&!z;$++)z=r[T-$]!=null;z?r[T]=null:(w=k.getRowNumber(),b=1)}}}getRowHeights(){let e=this.getBarcodeMetadata();if(e==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(e);let r=new Int32Array(e.getRowCount());for(let i of this.getCodewords())if(i!=null){let a=i.getRowNumber();if(a>=r.length)continue;r[a]++}return r}adjustIncompleteIndicatorColumnRowNumbers(e){let r=this.getBoundingBox(),i=this._isLeft?r.getTopLeft():r.getTopRight(),a=this._isLeft?r.getBottomLeft():r.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(i.getY())),d=this.imageRowToCodewordIndex(Math.trunc(a.getY())),p=this.getCodewords(),w=-1;for(let y=u;y<d;y++){if(p[y]==null)continue;let b=p[y];b.setRowNumberAsRowIndicatorColumn();let T=b.getRowNumber()-w;T===0||(T===1?w=b.getRowNumber():b.getRowNumber()>=e.getRowCount()?p[y]=null:w=b.getRowNumber())}}getBarcodeMetadata(){let e=this.getCodewords(),r=new zn,i=new zn,a=new zn,u=new zn;for(let p of e){if(p==null)continue;p.setRowNumberAsRowIndicatorColumn();let w=p.getValue()%30,y=p.getRowNumber();switch(this._isLeft||(y+=2),y%3){case 0:i.setValue(w*3+1);break;case 1:u.setValue(w/3),a.setValue(w%3);break;case 2:r.setValue(w+1);break}}if(r.getValue().length===0||i.getValue().length===0||a.getValue().length===0||u.getValue().length===0||r.getValue()[0]<1||i.getValue()[0]+a.getValue()[0]<ze.MIN_ROWS_IN_BARCODE||i.getValue()[0]+a.getValue()[0]>ze.MAX_ROWS_IN_BARCODE)return null;let d=new ts(r.getValue()[0],i.getValue()[0],a.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(e,d),d}removeIncorrectCodewords(e,r){for(let i=0;i<e.length;i++){let a=e[i];if(e[i]==null)continue;let u=a.getValue()%30,d=a.getRowNumber();if(d>r.getRowCount()){e[i]=null;continue}switch(this._isLeft||(d+=2),d%3){case 0:u*3+1!==r.getRowCountUpperPart()&&(e[i]=null);break;case 1:(Math.trunc(u/3)!==r.getErrorCorrectionLevel()||u%3!==r.getRowCountLowerPart())&&(e[i]=null);break;case 2:u+1!==r.getColumnCount()&&(e[i]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class rs{constructor(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let e=ze.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(e){e!=null&&e.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let e=this.adjustRowNumbersByRow();if(e===0)return 0;for(let r=1;r<this.barcodeColumnCount+1;r++){let i=this.detectionResultColumns[r].getCodewords();for(let a=0;a<i.length;a++)i[a]!=null&&(i[a].hasValidRowNumber()||this.adjustRowNumbers(r,a,i))}return e}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<e.length;i++)if(e[i]!=null&&r[i]!=null&&e[i].getRowNumber()===r[i].getRowNumber())for(let a=1;a<=this.barcodeColumnCount;a++){let u=this.detectionResultColumns[a].getCodewords()[i];u!=null&&(u.setRowNumber(e[i].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[a].getCodewords()[i]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let a=r[i].getRowNumber(),u=0;for(let d=this.barcodeColumnCount+1;d>0&&u<this.ADJUST_ROW_NUMBER_SKIP;d--){let p=this.detectionResultColumns[d].getCodewords()[i];p!=null&&(u=rs.adjustRowNumberIfValid(a,u,p),p.hasValidRowNumber()||e++)}}return e}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let e=0,r=this.detectionResultColumns[0].getCodewords();for(let i=0;i<r.length;i++){if(r[i]==null)continue;let a=r[i].getRowNumber(),u=0;for(let d=1;d<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;d++){let p=this.detectionResultColumns[d].getCodewords()[i];p!=null&&(u=rs.adjustRowNumberIfValid(a,u,p),p.hasValidRowNumber()||e++)}}return e}static adjustRowNumberIfValid(e,r,i){return i==null||i.hasValidRowNumber()||(i.isValidRowNumber(e)?(i.setRowNumber(e),r=0):++r),r}adjustRowNumbers(e,r,i){if(!this.detectionResultColumns[e-1])return;let a=i[r],u=this.detectionResultColumns[e-1].getCodewords(),d=u;this.detectionResultColumns[e+1]!=null&&(d=this.detectionResultColumns[e+1].getCodewords());let p=new Array(14);p[2]=u[r],p[3]=d[r],r>0&&(p[0]=i[r-1],p[4]=u[r-1],p[5]=d[r-1]),r>1&&(p[8]=i[r-2],p[10]=u[r-2],p[11]=d[r-2]),r<i.length-1&&(p[1]=i[r+1],p[6]=u[r+1],p[7]=d[r+1]),r<i.length-2&&(p[9]=i[r+2],p[12]=u[r+2],p[13]=d[r+2]);for(let w of p)if(rs.adjustRowNumber(a,w))return}static adjustRowNumber(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(e){this.boundingBox=e}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(e,r){this.detectionResultColumns[e]=r}getDetectionResultColumn(e){return this.detectionResultColumns[e]}toString(){let e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);let r=new In;for(let i=0;i<e.getCodewords().length;i++){r.format("CW %3d:",i);for(let a=0;a<this.barcodeColumnCount+2;a++){if(this.detectionResultColumns[a]==null){r.format("    |   ");continue}let u=this.detectionResultColumns[a].getCodewords()[i];if(u==null){r.format("    |   ");continue}r.format(" %3d|%3d",u.getRowNumber(),u.getValue())}r.format("%n")}return r.toString()}}class Jn{constructor(e,r,i,a){this.rowNumber=Jn.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(i),this.value=Math.trunc(a)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(e){return e!==Jn.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(e){this.rowNumber=e}toString(){return this.rowNumber+"|"+this.value}}Jn.BARCODE_ROW_UNKNOWN=-1;class lr{static initialize(){for(let e=0;e<ze.SYMBOL_TABLE.length;e++){let r=ze.SYMBOL_TABLE[e],i=r&1;for(let a=0;a<ze.BARS_IN_MODULE;a++){let u=0;for(;(r&1)===i;)u+=1,r>>=1;i=r&1,lr.RATIOS_TABLE[e]||(lr.RATIOS_TABLE[e]=new Array(ze.BARS_IN_MODULE)),lr.RATIOS_TABLE[e][ze.BARS_IN_MODULE-a-1]=Math.fround(u/ze.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(e){let r=lr.getDecodedCodewordValue(lr.sampleBitCounts(e));return r!==-1?r:lr.getClosestDecodedValue(e)}static sampleBitCounts(e){let r=it.sum(e),i=new Int32Array(ze.BARS_IN_MODULE),a=0,u=0;for(let d=0;d<ze.MODULES_IN_CODEWORD;d++){let p=r/(2*ze.MODULES_IN_CODEWORD)+d*r/ze.MODULES_IN_CODEWORD;u+e[a]<=p&&(u+=e[a],a++),i[a]++}return i}static getDecodedCodewordValue(e){let r=lr.getBitValue(e);return ze.getCodeword(r)===-1?-1:r}static getBitValue(e){let r=0;for(let i=0;i<e.length;i++)for(let a=0;a<e[i];a++)r=r<<1|(i%2===0?1:0);return Math.trunc(r)}static getClosestDecodedValue(e){let r=it.sum(e),i=new Array(ze.BARS_IN_MODULE);if(r>1)for(let d=0;d<i.length;d++)i[d]=Math.fround(e[d]/r);let a=Un.MAX_VALUE,u=-1;this.bSymbolTableReady||lr.initialize();for(let d=0;d<lr.RATIOS_TABLE.length;d++){let p=0,w=lr.RATIOS_TABLE[d];for(let y=0;y<ze.BARS_IN_MODULE;y++){let b=Math.fround(w[y]-i[y]);if(p+=Math.fround(b*b),p>=a)break}p<a&&(a=p,u=ze.SYMBOL_TABLE[d])}return u}}lr.bSymbolTableReady=!1,lr.RATIOS_TABLE=new Array(ze.SYMBOL_TABLE.length).map(I=>new Array(ze.BARS_IN_MODULE));class Bs{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(e){this.segmentIndex=e}getFileId(){return this.fileId}setFileId(e){this.fileId=e}getOptionalData(){return this.optionalData}setOptionalData(e){this.optionalData=e}isLastSegment(){return this.lastSegment}setLastSegment(e){this.lastSegment=e}getSegmentCount(){return this.segmentCount}setSegmentCount(e){this.segmentCount=e}getSender(){return this.sender||null}setSender(e){this.sender=e}getAddressee(){return this.addressee||null}setAddressee(e){this.addressee=e}getFileName(){return this.fileName}setFileName(e){this.fileName=e}getFileSize(){return this.fileSize}setFileSize(e){this.fileSize=e}getChecksum(){return this.checksum}setChecksum(e){this.checksum=e}getTimestamp(){return this.timestamp}setTimestamp(e){this.timestamp=e}}class Mo{static parseLong(e,r=void 0){return parseInt(e,r)}}class Tn extends E{}Tn.kind="NullPointerException";class Lo{writeBytes(e){this.writeBytesOffset(e,0,e.length)}writeBytesOffset(e,r,i){if(e==null)throw new Tn;if(r<0||r>e.length||i<0||r+i>e.length||r+i<0)throw new j;if(i===0)return;for(let a=0;a<i;a++)this.write(e[r+a])}flush(){}close(){}}class js extends E{}class Ba extends Lo{constructor(e=32){if(super(),this.count=0,e<0)throw new N("Negative initial size: "+e);this.buf=new Uint8Array(e)}ensureCapacity(e){e-this.buf.length>0&&this.grow(e)}grow(e){let i=this.buf.length<<1;if(i-e<0&&(i=e),i<0){if(e<0)throw new js;i=V.MAX_VALUE}this.buf=J.copyOfUint8Array(this.buf,i)}write(e){this.ensureCapacity(this.count+1),this.buf[this.count]=e,this.count+=1}writeBytesOffset(e,r,i){if(r<0||r>e.length||i<0||r+i-e.length>0)throw new j;this.ensureCapacity(this.count+i),F.arraycopy(e,r,this.buf,this.count,i),this.count+=i}writeTo(e){e.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return J.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(e){return e?typeof e=="string"?this.toString_string(e):this.toString_number(e):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(e){return new String(this.buf).toString()}toString_number(e){return new String(this.buf).toString()}close(){}}var ht;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(ht||(ht={}));function ns(){if(typeof window<"u")return window.BigInt||null;if(typeof Pl<"u")return Pl.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let is;function zt(I){if(typeof is>"u"&&(is=ns()),is===null)throw new Error("BigInt is not supported!");return is(I)}function Si(){let I=[];I[0]=zt(1);let e=zt(900);I[1]=e;for(let r=2;r<16;r++)I[r]=I[r-1]*e;return I}class te{static decode(e,r){let i=new $e(""),a=ne.ISO8859_1;i.enableDecoding(a);let u=1,d=e[u++],p=new Bs;for(;u<e[0];){switch(d){case te.TEXT_COMPACTION_MODE_LATCH:u=te.textCompaction(e,u,i);break;case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:u=te.byteCompaction(d,e,a,u,i);break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(e[u++]);break;case te.NUMERIC_COMPACTION_MODE_LATCH:u=te.numericCompaction(e,u,i);break;case te.ECI_CHARSET:ne.getCharacterSetECIByValue(e[u++]);break;case te.ECI_GENERAL_PURPOSE:u+=2;break;case te.ECI_USER_DEFINED:u++;break;case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=te.decodeMacroBlock(e,u,p);break;case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:throw new se;default:u--,u=te.textCompaction(e,u,i);break}if(u<e.length)d=e[u++];else throw se.getFormatInstance()}if(i.length()===0)throw se.getFormatInstance();let w=new wt(null,i.toString(),null,r);return w.setOther(p),w}static decodeMacroBlock(e,r,i){if(r+te.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw se.getFormatInstance();let a=new Int32Array(te.NUMBER_OF_SEQUENCE_CODEWORDS);for(let p=0;p<te.NUMBER_OF_SEQUENCE_CODEWORDS;p++,r++)a[p]=e[r];i.setSegmentIndex(V.parseInt(te.decodeBase900toBase10(a,te.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new $e;r=te.textCompaction(e,r,u),i.setFileId(u.toString());let d=-1;for(e[r]===te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(d=r+1);r<e[0];)switch(e[r]){case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let p=new $e;r=te.textCompaction(e,r+1,p),i.setFileName(p.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new $e;r=te.textCompaction(e,r+1,w),i.setSender(w.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let y=new $e;r=te.textCompaction(e,r+1,y),i.setAddressee(y.toString());break;case te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new $e;r=te.numericCompaction(e,r+1,b),i.setSegmentCount(V.parseInt(b.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let T=new $e;r=te.numericCompaction(e,r+1,T),i.setTimestamp(Mo.parseLong(T.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new $e;r=te.numericCompaction(e,r+1,k),i.setChecksum(V.parseInt(k.toString()));break;case te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new $e;r=te.numericCompaction(e,r+1,L),i.setFileSize(Mo.parseLong(L.toString()));break;default:throw se.getFormatInstance()}break;case te.MACRO_PDF417_TERMINATOR:r++,i.setLastSegment(!0);break;default:throw se.getFormatInstance()}if(d!==-1){let p=r-d;i.isLastSegment()&&p--,i.setOptionalData(J.copyOfRange(e,d,d+p))}return r}static textCompaction(e,r,i){let a=new Int32Array((e[0]-r)*2),u=new Int32Array((e[0]-r)*2),d=0,p=!1;for(;r<e[0]&&!p;){let w=e[r++];if(w<te.TEXT_COMPACTION_MODE_LATCH)a[d]=w/30,a[d+1]=w%30,d+=2;else switch(w){case te.TEXT_COMPACTION_MODE_LATCH:a[d++]=te.TEXT_COMPACTION_MODE_LATCH;break;case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:r--,p=!0;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a[d]=te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=e[r++],u[d]=w,d++;break}}return te.decodeTextCompaction(a,u,d,i),r}static decodeTextCompaction(e,r,i,a){let u=ht.ALPHA,d=ht.ALPHA,p=0;for(;p<i;){let w=e[p],y="";switch(u){case ht.ALPHA:if(w<26)y=String.fromCharCode(65+w);else switch(w){case 26:y=" ";break;case te.LL:u=ht.LOWER;break;case te.ML:u=ht.MIXED;break;case te.PS:d=u,u=ht.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ht.ALPHA;break}break;case ht.LOWER:if(w<26)y=String.fromCharCode(97+w);else switch(w){case 26:y=" ";break;case te.AS:d=u,u=ht.ALPHA_SHIFT;break;case te.ML:u=ht.MIXED;break;case te.PS:d=u,u=ht.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ht.ALPHA;break}break;case ht.MIXED:if(w<te.PL)y=te.MIXED_CHARS[w];else switch(w){case te.PL:u=ht.PUNCT;break;case 26:y=" ";break;case te.LL:u=ht.LOWER;break;case te.AL:u=ht.ALPHA;break;case te.PS:d=u,u=ht.PUNCT_SHIFT;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ht.ALPHA;break}break;case ht.PUNCT:if(w<te.PAL)y=te.PUNCT_CHARS[w];else switch(w){case te.PAL:u=ht.ALPHA;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ht.ALPHA;break}break;case ht.ALPHA_SHIFT:if(u=d,w<26)y=String.fromCharCode(65+w);else switch(w){case 26:y=" ";break;case te.TEXT_COMPACTION_MODE_LATCH:u=ht.ALPHA;break}break;case ht.PUNCT_SHIFT:if(u=d,w<te.PAL)y=te.PUNCT_CHARS[w];else switch(w){case te.PAL:u=ht.ALPHA;break;case te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[p]);break;case te.TEXT_COMPACTION_MODE_LATCH:u=ht.ALPHA;break}break}y!==""&&a.append(y),p++}}static byteCompaction(e,r,i,a,u){let d=new Ba,p=0,w=0,y=!1;switch(e){case te.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),T=r[a++];for(;a<r[0]&&!y;)switch(b[p++]=T,w=900*w+T,T=r[a++],T){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:a--,y=!0;break;default:if(p%5===0&&p>0){for(let k=0;k<6;++k)d.write(Number(zt(w)>>zt(8*(5-k))));w=0,p=0}break}a===r[0]&&T<te.TEXT_COMPACTION_MODE_LATCH&&(b[p++]=T);for(let k=0;k<p;k++)d.write(b[k]);break;case te.BYTE_COMPACTION_MODE_LATCH_6:for(;a<r[0]&&!y;){let k=r[a++];if(k<te.TEXT_COMPACTION_MODE_LATCH)p++,w=900*w+k;else switch(k){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.NUMERIC_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:a--,y=!0;break}if(p%5===0&&p>0){for(let L=0;L<6;++L)d.write(Number(zt(w)>>zt(8*(5-L))));w=0,p=0}}break}return u.append(He.decode(d.toByteArray(),i)),a}static numericCompaction(e,r,i){let a=0,u=!1,d=new Int32Array(te.MAX_NUMERIC_CODEWORDS);for(;r<e[0]&&!u;){let p=e[r++];if(r===e[0]&&(u=!0),p<te.TEXT_COMPACTION_MODE_LATCH)d[a]=p,a++;else switch(p){case te.TEXT_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH:case te.BYTE_COMPACTION_MODE_LATCH_6:case te.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case te.MACRO_PDF417_TERMINATOR:r--,u=!0;break}(a%te.MAX_NUMERIC_CODEWORDS===0||p===te.NUMERIC_COMPACTION_MODE_LATCH||u)&&a>0&&(i.append(te.decodeBase900toBase10(d,a)),a=0)}return r}static decodeBase900toBase10(e,r){let i=zt(0);for(let u=0;u<r;u++)i+=te.EXP900[r-u-1]*zt(e[u]);let a=i.toString();if(a.charAt(0)!=="1")throw new se;return a.substring(1)}}te.TEXT_COMPACTION_MODE_LATCH=900,te.BYTE_COMPACTION_MODE_LATCH=901,te.NUMERIC_COMPACTION_MODE_LATCH=902,te.BYTE_COMPACTION_MODE_LATCH_6=924,te.ECI_USER_DEFINED=925,te.ECI_GENERAL_PURPOSE=926,te.ECI_CHARSET=927,te.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,te.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,te.MACRO_PDF417_TERMINATOR=922,te.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,te.MAX_NUMERIC_CODEWORDS=15,te.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,te.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,te.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,te.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,te.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,te.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,te.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,te.PL=25,te.LL=27,te.AS=27,te.ML=28,te.AL=28,te.PS=29,te.PAL=29,te.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,te.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",te.EXP900=ns()?Si():[],te.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Qe{constructor(){}static decode(e,r,i,a,u,d,p){let w=new Qn(e,r,i,a,u),y=null,b=null,T;for(let W=!0;;W=!1){if(r!=null&&(y=Qe.getRowIndicatorColumn(e,w,r,!0,d,p)),a!=null&&(b=Qe.getRowIndicatorColumn(e,w,a,!1,d,p)),T=Qe.merge(y,b),T==null)throw ie.getNotFoundInstance();let z=T.getBoundingBox();if(W&&z!=null&&(z.getMinY()<w.getMinY()||z.getMaxY()>w.getMaxY()))w=z;else break}T.setBoundingBox(w);let k=T.getBarcodeColumnCount()+1;T.setDetectionResultColumn(0,y),T.setDetectionResultColumn(k,b);let L=y!=null;for(let W=1;W<=k;W++){let z=L?W:k-W;if(T.getDetectionResultColumn(z)!==void 0)continue;let $;z===0||z===k?$=new La(w,z===0):$=new mn(w),T.setDetectionResultColumn(z,$);let ee=-1,ge=ee;for(let pe=w.getMinY();pe<=w.getMaxY();pe++){if(ee=Qe.getStartColumn(T,z,pe,L),ee<0||ee>w.getMaxX()){if(ge===-1)continue;ee=ge}let ce=Qe.detectCodeword(e,w.getMinX(),w.getMaxX(),L,ee,pe,d,p);ce!=null&&($.setCodeword(pe,ce),ge=ee,d=Math.min(d,ce.getWidth()),p=Math.max(p,ce.getWidth()))}}return Qe.createDecoderResult(T)}static merge(e,r){if(e==null&&r==null)return null;let i=Qe.getBarcodeMetadata(e,r);if(i==null)return null;let a=Qn.merge(Qe.adjustBoundingBox(e),Qe.adjustBoundingBox(r));return new rs(i,a)}static adjustBoundingBox(e){if(e==null)return null;let r=e.getRowHeights();if(r==null)return null;let i=Qe.getMax(r),a=0;for(let p of r)if(a+=i-p,p>0)break;let u=e.getCodewords();for(let p=0;a>0&&u[p]==null;p++)a--;let d=0;for(let p=r.length-1;p>=0&&(d+=i-r[p],!(r[p]>0));p--);for(let p=u.length-1;d>0&&u[p]==null;p--)d--;return e.getBoundingBox().addMissingRows(a,d,e.isLeft())}static getMax(e){let r=-1;for(let i of e)r=Math.max(r,i);return r}static getBarcodeMetadata(e,r){let i;if(e==null||(i=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();let a;return r==null||(a=r.getBarcodeMetadata())==null?i:i.getColumnCount()!==a.getColumnCount()&&i.getErrorCorrectionLevel()!==a.getErrorCorrectionLevel()&&i.getRowCount()!==a.getRowCount()?null:i}static getRowIndicatorColumn(e,r,i,a,u,d){let p=new La(r,a);for(let w=0;w<2;w++){let y=w===0?1:-1,b=Math.trunc(Math.trunc(i.getX()));for(let T=Math.trunc(Math.trunc(i.getY()));T<=r.getMaxY()&&T>=r.getMinY();T+=y){let k=Qe.detectCodeword(e,0,e.getWidth(),a,b,T,u,d);k!=null&&(p.setCodeword(T,k),a?b=k.getStartX():b=k.getEndX())}}return p}static adjustCodewordCount(e,r){let i=r[0][1],a=i.getValue(),u=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-Qe.getNumberOfECCodeWords(e.getBarcodeECLevel());if(a.length===0){if(u<1||u>ze.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();i.setValue(u)}else a[0]!==u&&i.setValue(u)}static createDecoderResult(e){let r=Qe.createBarcodeMatrix(e);Qe.adjustCodewordCount(e,r);let i=new Array,a=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),u=[],d=new Array;for(let w=0;w<e.getBarcodeRowCount();w++)for(let y=0;y<e.getBarcodeColumnCount();y++){let b=r[w][y+1].getValue(),T=w*e.getBarcodeColumnCount()+y;b.length===0?i.push(T):b.length===1?a[T]=b[0]:(d.push(T),u.push(b))}let p=new Array(u.length);for(let w=0;w<p.length;w++)p[w]=u[w];return Qe.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),a,ze.toIntArray(i),ze.toIntArray(d),p)}static createDecoderResultFromAmbiguousValues(e,r,i,a,u){let d=new Int32Array(a.length),p=100;for(;p-- >0;){for(let w=0;w<d.length;w++)r[a[w]]=u[w][d[w]];try{return Qe.decodeCodewords(r,e,i)}catch(w){if(!(w instanceof P))throw w}if(d.length===0)throw P.getChecksumInstance();for(let w=0;w<d.length;w++)if(d[w]<u[w].length-1){d[w]++;break}else if(d[w]=0,w===d.length-1)throw P.getChecksumInstance()}throw P.getChecksumInstance()}static createBarcodeMatrix(e){let r=Array.from({length:e.getBarcodeRowCount()},()=>new Array(e.getBarcodeColumnCount()+2));for(let a=0;a<r.length;a++)for(let u=0;u<r[a].length;u++)r[a][u]=new zn;let i=0;for(let a of e.getDetectionResultColumns()){if(a!=null){for(let u of a.getCodewords())if(u!=null){let d=u.getRowNumber();if(d>=0){if(d>=r.length)continue;r[d][i].setValue(u.getValue())}}}i++}return r}static isValidBarcodeColumn(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1}static getStartColumn(e,r,i,a){let u=a?1:-1,d=null;if(Qe.isValidBarcodeColumn(e,r-u)&&(d=e.getDetectionResultColumn(r-u).getCodeword(i)),d!=null)return a?d.getEndX():d.getStartX();if(d=e.getDetectionResultColumn(r).getCodewordNearby(i),d!=null)return a?d.getStartX():d.getEndX();if(Qe.isValidBarcodeColumn(e,r-u)&&(d=e.getDetectionResultColumn(r-u).getCodewordNearby(i)),d!=null)return a?d.getEndX():d.getStartX();let p=0;for(;Qe.isValidBarcodeColumn(e,r-u);){r-=u;for(let w of e.getDetectionResultColumn(r).getCodewords())if(w!=null)return(a?w.getEndX():w.getStartX())+u*p*(w.getEndX()-w.getStartX());p++}return a?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()}static detectCodeword(e,r,i,a,u,d,p,w){u=Qe.adjustCodewordStartColumn(e,r,i,a,u,d);let y=Qe.getModuleBitCount(e,r,i,a,u,d);if(y==null)return null;let b,T=it.sum(y);if(a)b=u+T;else{for(let W=0;W<y.length/2;W++){let z=y[W];y[W]=y[y.length-1-W],y[y.length-1-W]=z}b=u,u=b-T}if(!Qe.checkCodewordSkew(T,p,w))return null;let k=lr.getDecodedValue(y),L=ze.getCodeword(k);return L===-1?null:new Jn(u,b,Qe.getCodewordBucketNumber(k),L)}static getModuleBitCount(e,r,i,a,u,d){let p=u,w=new Int32Array(8),y=0,b=a?1:-1,T=a;for(;(a?p<i:p>=r)&&y<w.length;)e.get(p,d)===T?(w[y]++,p+=b):(y++,T=!T);return y===w.length||p===(a?i:r)&&y===w.length-1?w:null}static getNumberOfECCodeWords(e){return 2<<e}static adjustCodewordStartColumn(e,r,i,a,u,d){let p=u,w=a?-1:1;for(let y=0;y<2;y++){for(;(a?p>=r:p<i)&&a===e.get(p,d);){if(Math.abs(u-p)>Qe.CODEWORD_SKEW_SIZE)return u;p+=w}w=-w,a=!a}return p}static checkCodewordSkew(e,r,i){return r-Qe.CODEWORD_SKEW_SIZE<=e&&e<=i+Qe.CODEWORD_SKEW_SIZE}static decodeCodewords(e,r,i){if(e.length===0)throw se.getFormatInstance();let a=1<<r+1,u=Qe.correctErrors(e,i,a);Qe.verifyCodewordCount(e,a);let d=te.decode(e,""+r);return d.setErrorsCorrected(u),d.setErasures(i.length),d}static correctErrors(e,r,i){if(r!=null&&r.length>i/2+Qe.MAX_ERRORS||i<0||i>Qe.MAX_EC_CODEWORDS)throw P.getChecksumInstance();return Qe.errorCorrection.decode(e,i,r)}static verifyCodewordCount(e,r){if(e.length<4)throw se.getFormatInstance();let i=e[0];if(i>e.length)throw se.getFormatInstance();if(i===0)if(r<e.length)e[0]=e.length-r;else throw se.getFormatInstance()}static getBitCountForCodeword(e){let r=new Int32Array(8),i=0,a=r.length-1;for(;!((e&1)!==i&&(i=e&1,a--,a<0));)r[a]++,e>>=1;return r}static getCodewordBucketNumber(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)}static getCodewordBucketNumber_number(e){return Qe.getCodewordBucketNumber(Qe.getBitCountForCodeword(e))}static getCodewordBucketNumber_Int32Array(e){return(e[0]-e[2]+e[4]-e[6]+9)%9}static toString(e){let r=new In;for(let i=0;i<e.length;i++){r.format("Row %2d: ",i);for(let a=0;a<e[i].length;a++){let u=e[i][a];u.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}r.format("%n")}return r.toString()}}Qe.CODEWORD_SKEW_SIZE=2,Qe.MAX_ERRORS=3,Qe.MAX_EC_CODEWORDS=512,Qe.errorCorrection=new Po;class ur{decode(e,r=null){let i=ur.decode(e,r,!1);if(i==null||i.length===0||i[0]==null)throw ie.getNotFoundInstance();return i[0]}decodeMultiple(e,r=null){try{return ur.decode(e,r,!0)}catch(i){throw i instanceof se||i instanceof P?ie.getNotFoundInstance():i}}static decode(e,r,i){const a=new Array,u=Ye.detectMultiple(e,r,i);for(const d of u.getPoints()){const p=Qe.decode(u.getBits(),d[4],d[5],d[6],d[7],ur.getMinCodewordWidth(d),ur.getMaxCodewordWidth(d)),w=new Fe(p.getText(),p.getRawBytes(),void 0,d,we.PDF_417);w.putMetadata(Xe.ERROR_CORRECTION_LEVEL,p.getECLevel());const y=p.getOther();y!=null&&w.putMetadata(Xe.PDF417_EXTRA_METADATA,y),a.push(w)}return a.map(d=>d)}static getMaxWidth(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMinWidth(e,r){return e==null||r==null?V.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))}static getMaxCodewordWidth(e){return Math.floor(Math.max(Math.max(ur.getMaxWidth(e[0],e[4]),ur.getMaxWidth(e[6],e[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.max(ur.getMaxWidth(e[1],e[5]),ur.getMaxWidth(e[7],e[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(e){return Math.floor(Math.min(Math.min(ur.getMinWidth(e[0],e[4]),ur.getMinWidth(e[6],e[2])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN),Math.min(ur.getMinWidth(e[1],e[5]),ur.getMinWidth(e[7],e[3])*ze.MODULES_IN_CODEWORD/ze.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ii extends E{}Ii.kind="ReaderException";class Fs{constructor(e,r){this.verbose=e===!0,r&&this.setHints(r)}decode(e,r){return r&&this.setHints(r),this.decodeInternal(e)}decodeWithState(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)}setHints(e){this.hints=e;const r=!c(e)&&e.get(xe.TRY_HARDER)===!0,i=c(e)?null:e.get(xe.POSSIBLE_FORMATS),a=new Array;if(!c(i)){const u=i.some(d=>d===we.UPC_A||d===we.UPC_E||d===we.EAN_13||d===we.EAN_8||d===we.CODABAR||d===we.CODE_39||d===we.CODE_93||d===we.CODE_128||d===we.ITF||d===we.RSS_14||d===we.RSS_EXPANDED);u&&!r&&a.push(new _i(e,this.verbose)),i.includes(we.QR_CODE)&&a.push(new yr),i.includes(we.DATA_MATRIX)&&a.push(new rn),i.includes(we.AZTEC)&&a.push(new Vn),i.includes(we.PDF_417)&&a.push(new ur),u&&r&&a.push(new _i(e,this.verbose))}a.length===0&&(r||a.push(new _i(e,this.verbose)),a.push(new yr),a.push(new rn),a.push(new Vn),a.push(new ur),r&&a.push(new _i(e,this.verbose))),this.readers=a}reset(){if(this.readers!==null)for(const e of this.readers)e.reset()}decodeInternal(e){if(this.readers===null)throw new Ii("No readers where selected, nothing can be read.");for(const r of this.readers)try{return r.decode(e,this.hints)}catch(i){if(i instanceof Ii)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class ss extends Ke{constructor(e=null,r=500){const i=new Fs;i.setHints(e),super(i,r)}decodeBitmap(e){return this.reader.decodeWithState(e)}}class Us extends Ke{constructor(e=500){super(new ur,e)}}class ja extends Ke{constructor(e=500){super(new yr,e)}}var Bo;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(Bo||(Bo={}));var Yt=Bo;class jo{constructor(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new ir(e,Int32Array.from([1])))}buildGenerator(e){const r=this.cachedGenerators;if(e>=r.length){let i=r[r.length-1];const a=this.field;for(let u=r.length;u<=e;u++){const d=i.multiply(new ir(a,Int32Array.from([1,a.exp(u-1+a.getGeneratorBase())])));r.push(d),i=d}}return r[e]}encode(e,r){if(r===0)throw new N("No error correction bytes");const i=e.length-r;if(i<=0)throw new N("No data bytes provided");const a=this.buildGenerator(r),u=new Int32Array(i);F.arraycopy(e,0,u,0,i);let d=new ir(this.field,u);d=d.multiplyByMonomial(r,1);const w=d.divide(a)[1].getCoefficients(),y=r-w.length;for(let b=0;b<y;b++)e[i+b]=0;F.arraycopy(w,0,e,i+y,w.length)}}class Nt{constructor(){}static applyMaskPenaltyRule1(e){return Nt.applyMaskPenaltyRule1Internal(e,!0)+Nt.applyMaskPenaltyRule1Internal(e,!1)}static applyMaskPenaltyRule2(e){let r=0;const i=e.getArray(),a=e.getWidth(),u=e.getHeight();for(let d=0;d<u-1;d++){const p=i[d];for(let w=0;w<a-1;w++){const y=p[w];y===p[w+1]&&y===i[d+1][w]&&y===i[d+1][w+1]&&r++}}return Nt.N2*r}static applyMaskPenaltyRule3(e){let r=0;const i=e.getArray(),a=e.getWidth(),u=e.getHeight();for(let d=0;d<u;d++)for(let p=0;p<a;p++){const w=i[d];p+6<a&&w[p]===1&&w[p+1]===0&&w[p+2]===1&&w[p+3]===1&&w[p+4]===1&&w[p+5]===0&&w[p+6]===1&&(Nt.isWhiteHorizontal(w,p-4,p)||Nt.isWhiteHorizontal(w,p+7,p+11))&&r++,d+6<u&&i[d][p]===1&&i[d+1][p]===0&&i[d+2][p]===1&&i[d+3][p]===1&&i[d+4][p]===1&&i[d+5][p]===0&&i[d+6][p]===1&&(Nt.isWhiteVertical(i,p,d-4,d)||Nt.isWhiteVertical(i,p,d+7,d+11))&&r++}return r*Nt.N3}static isWhiteHorizontal(e,r,i){r=Math.max(r,0),i=Math.min(i,e.length);for(let a=r;a<i;a++)if(e[a]===1)return!1;return!0}static isWhiteVertical(e,r,i,a){i=Math.max(i,0),a=Math.min(a,e.length);for(let u=i;u<a;u++)if(e[u][r]===1)return!1;return!0}static applyMaskPenaltyRule4(e){let r=0;const i=e.getArray(),a=e.getWidth(),u=e.getHeight();for(let w=0;w<u;w++){const y=i[w];for(let b=0;b<a;b++)y[b]===1&&r++}const d=e.getHeight()*e.getWidth();return Math.floor(Math.abs(r*2-d)*10/d)*Nt.N4}static getDataMaskBit(e,r,i){let a,u;switch(e){case 0:a=i+r&1;break;case 1:a=i&1;break;case 2:a=r%3;break;case 3:a=(i+r)%3;break;case 4:a=Math.floor(i/2)+Math.floor(r/3)&1;break;case 5:u=i*r,a=(u&1)+u%3;break;case 6:u=i*r,a=(u&1)+u%3&1;break;case 7:u=i*r,a=u%3+(i+r&1)&1;break;default:throw new N("Invalid mask pattern: "+e)}return a===0}static applyMaskPenaltyRule1Internal(e,r){let i=0;const a=r?e.getHeight():e.getWidth(),u=r?e.getWidth():e.getHeight(),d=e.getArray();for(let p=0;p<a;p++){let w=0,y=-1;for(let b=0;b<u;b++){const T=r?d[p][b]:d[b][p];T===y?w++:(w>=5&&(i+=Nt.N1+(w-5)),w=1,y=T)}w>=5&&(i+=Nt.N1+(w-5))}return i}}Nt.N1=3,Nt.N2=3,Nt.N3=40,Nt.N4=10;class Vs{constructor(e,r){this.width=e,this.height=r;const i=new Array(r);for(let a=0;a!==r;a++)i[a]=new Uint8Array(e);this.bytes=i}getHeight(){return this.height}getWidth(){return this.width}get(e,r){return this.bytes[r][e]}getArray(){return this.bytes}setNumber(e,r,i){this.bytes[r][e]=i}setBoolean(e,r,i){this.bytes[r][e]=i?1:0}clear(e){for(const r of this.bytes)J.fill(r,e)}equals(e){if(!(e instanceof Vs))return!1;const r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(let i=0,a=this.height;i<a;++i){const u=this.bytes[i],d=r.bytes[i];for(let p=0,w=this.width;p<w;++p)if(u[p]!==d[p])return!1}return!0}toString(){const e=new $e;for(let r=0,i=this.height;r<i;++r){const a=this.bytes[r];for(let u=0,d=this.width;u<d;++u)switch(a[u]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()}}class ei{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const e=new $e;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()}setMode(e){this.mode=e}setECLevel(e){this.ecLevel=e}setVersion(e){this.version=e}setMaskPattern(e){this.maskPattern=e}setMatrix(e){this.matrix=e}static isValidMaskPattern(e){return e>=0&&e<ei.NUM_MASK_PATTERNS}}ei.NUM_MASK_PATTERNS=8;class _t extends E{}_t.kind="WriterException";class Ue{constructor(){}static clearMatrix(e){e.clear(255)}static buildMatrix(e,r,i,a,u){Ue.clearMatrix(u),Ue.embedBasicPatterns(i,u),Ue.embedTypeInfo(r,a,u),Ue.maybeEmbedVersionInfo(i,u),Ue.embedDataBits(e,a,u)}static embedBasicPatterns(e,r){Ue.embedPositionDetectionPatternsAndSeparators(r),Ue.embedDarkDotAtLeftBottomCorner(r),Ue.maybeEmbedPositionAdjustmentPatterns(e,r),Ue.embedTimingPatterns(r)}static embedTypeInfo(e,r,i){const a=new oe;Ue.makeTypeInfoBits(e,r,a);for(let u=0,d=a.getSize();u<d;++u){const p=a.get(a.getSize()-1-u),w=Ue.TYPE_INFO_COORDINATES[u],y=w[0],b=w[1];if(i.setBoolean(y,b,p),u<8){const T=i.getWidth()-u-1;i.setBoolean(T,8,p)}else{const k=i.getHeight()-7+(u-8);i.setBoolean(8,k,p)}}}static maybeEmbedVersionInfo(e,r){if(e.getVersionNumber()<7)return;const i=new oe;Ue.makeVersionInfoBits(e,i);let a=17;for(let u=0;u<6;++u)for(let d=0;d<3;++d){const p=i.get(a);a--,r.setBoolean(u,r.getHeight()-11+d,p),r.setBoolean(r.getHeight()-11+d,u,p)}}static embedDataBits(e,r,i){let a=0,u=-1,d=i.getWidth()-1,p=i.getHeight()-1;for(;d>0;){for(d===6&&(d-=1);p>=0&&p<i.getHeight();){for(let w=0;w<2;++w){const y=d-w;if(!Ue.isEmpty(i.get(y,p)))continue;let b;a<e.getSize()?(b=e.get(a),++a):b=!1,r!==255&&Nt.getDataMaskBit(r,y,p)&&(b=!b),i.setBoolean(y,p,b)}p+=u}u=-u,p+=u,d-=2}if(a!==e.getSize())throw new _t("Not all bits consumed: "+a+"/"+e.getSize())}static findMSBSet(e){return 32-V.numberOfLeadingZeros(e)}static calculateBCHCode(e,r){if(r===0)throw new N("0 polynomial");const i=Ue.findMSBSet(r);for(e<<=i-1;Ue.findMSBSet(e)>=i;)e^=r<<Ue.findMSBSet(e)-i;return e}static makeTypeInfoBits(e,r,i){if(!ei.isValidMaskPattern(r))throw new _t("Invalid mask pattern");const a=e.getBits()<<3|r;i.appendBits(a,5);const u=Ue.calculateBCHCode(a,Ue.TYPE_INFO_POLY);i.appendBits(u,10);const d=new oe;if(d.appendBits(Ue.TYPE_INFO_MASK_PATTERN,15),i.xor(d),i.getSize()!==15)throw new _t("should not happen but we got: "+i.getSize())}static makeVersionInfoBits(e,r){r.appendBits(e.getVersionNumber(),6);const i=Ue.calculateBCHCode(e.getVersionNumber(),Ue.VERSION_INFO_POLY);if(r.appendBits(i,12),r.getSize()!==18)throw new _t("should not happen but we got: "+r.getSize())}static isEmpty(e){return e===255}static embedTimingPatterns(e){for(let r=8;r<e.getWidth()-8;++r){const i=(r+1)%2;Ue.isEmpty(e.get(r,6))&&e.setNumber(r,6,i),Ue.isEmpty(e.get(6,r))&&e.setNumber(6,r,i)}}static embedDarkDotAtLeftBottomCorner(e){if(e.get(8,e.getHeight()-8)===0)throw new _t;e.setNumber(8,e.getHeight()-8,1)}static embedHorizontalSeparationPattern(e,r,i){for(let a=0;a<8;++a){if(!Ue.isEmpty(i.get(e+a,r)))throw new _t;i.setNumber(e+a,r,0)}}static embedVerticalSeparationPattern(e,r,i){for(let a=0;a<7;++a){if(!Ue.isEmpty(i.get(e,r+a)))throw new _t;i.setNumber(e,r+a,0)}}static embedPositionAdjustmentPattern(e,r,i){for(let a=0;a<5;++a){const u=Ue.POSITION_ADJUSTMENT_PATTERN[a];for(let d=0;d<5;++d)i.setNumber(e+d,r+a,u[d])}}static embedPositionDetectionPattern(e,r,i){for(let a=0;a<7;++a){const u=Ue.POSITION_DETECTION_PATTERN[a];for(let d=0;d<7;++d)i.setNumber(e+d,r+a,u[d])}}static embedPositionDetectionPatternsAndSeparators(e){const r=Ue.POSITION_DETECTION_PATTERN[0].length;Ue.embedPositionDetectionPattern(0,0,e),Ue.embedPositionDetectionPattern(e.getWidth()-r,0,e),Ue.embedPositionDetectionPattern(0,e.getWidth()-r,e);const i=8;Ue.embedHorizontalSeparationPattern(0,i-1,e),Ue.embedHorizontalSeparationPattern(e.getWidth()-i,i-1,e),Ue.embedHorizontalSeparationPattern(0,e.getWidth()-i,e);const a=7;Ue.embedVerticalSeparationPattern(a,0,e),Ue.embedVerticalSeparationPattern(e.getHeight()-a-1,0,e),Ue.embedVerticalSeparationPattern(a,e.getHeight()-a,e)}static maybeEmbedPositionAdjustmentPatterns(e,r){if(e.getVersionNumber()<2)return;const i=e.getVersionNumber()-1,a=Ue.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[i];for(let u=0,d=a.length;u!==d;u++){const p=a[u];if(p>=0)for(let w=0;w!==d;w++){const y=a[w];y>=0&&Ue.isEmpty(r.get(y,p))&&Ue.embedPositionAdjustmentPattern(y-2,p-2,r)}}}}Ue.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ue.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ue.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ue.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ue.VERSION_INFO_POLY=7973,Ue.TYPE_INFO_POLY=1335,Ue.TYPE_INFO_MASK_PATTERN=21522;class vu{constructor(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Ct{constructor(){}static calculateMaskPenalty(e){return Nt.applyMaskPenaltyRule1(e)+Nt.applyMaskPenaltyRule2(e)+Nt.applyMaskPenaltyRule3(e)+Nt.applyMaskPenaltyRule4(e)}static encode(e,r,i=null){let a=Ct.DEFAULT_BYTE_MODE_ENCODING;const u=i!==null&&i.get(Yt.CHARACTER_SET)!==void 0;u&&(a=i.get(Yt.CHARACTER_SET).toString());const d=this.chooseMode(e,a),p=new oe;if(d===je.BYTE&&(u||Ct.DEFAULT_BYTE_MODE_ENCODING!==a)){const pe=ne.getCharacterSetECIByName(a);pe!==void 0&&this.appendECI(pe,p)}this.appendModeInfo(d,p);const w=new oe;this.appendBytes(e,d,w,a);let y;if(i!==null&&i.get(Yt.QR_VERSION)!==void 0){const pe=Number.parseInt(i.get(Yt.QR_VERSION).toString(),10);y=Be.getVersionForNumber(pe);const ce=this.calculateBitsNeeded(d,p,w,y);if(!this.willFit(ce,y,r))throw new _t("Data too big for requested version")}else y=this.recommendVersion(r,d,p,w);const b=new oe;b.appendBitArray(p);const T=d===je.BYTE?w.getSizeInBytes():e.length;this.appendLengthInfo(T,y,d,b),b.appendBitArray(w);const k=y.getECBlocksForLevel(r),L=y.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(L,b);const W=this.interleaveWithECBytes(b,y.getTotalCodewords(),L,k.getNumBlocks()),z=new ei;z.setECLevel(r),z.setMode(d),z.setVersion(y);const $=y.getDimensionForVersion(),ee=new Vs($,$),ge=this.chooseMaskPattern(W,r,y,ee);return z.setMaskPattern(ge),Ue.buildMatrix(W,r,y,ge,ee),z.setMatrix(ee),z}static recommendVersion(e,r,i,a){const u=this.calculateBitsNeeded(r,i,a,Be.getVersionForNumber(1)),d=this.chooseVersion(u,e),p=this.calculateBitsNeeded(r,i,a,d);return this.chooseVersion(p,e)}static calculateBitsNeeded(e,r,i,a){return r.getSize()+e.getCharacterCountBits(a)+i.getSize()}static getAlphanumericCode(e){return e<Ct.ALPHANUMERIC_TABLE.length?Ct.ALPHANUMERIC_TABLE[e]:-1}static chooseMode(e,r=null){if(ne.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return je.KANJI;let i=!1,a=!1;for(let u=0,d=e.length;u<d;++u){const p=e.charAt(u);if(Ct.isDigit(p))i=!0;else if(this.getAlphanumericCode(p.charCodeAt(0))!==-1)a=!0;else return je.BYTE}return a?je.ALPHANUMERIC:i?je.NUMERIC:je.BYTE}static isOnlyDoubleByteKanji(e){let r;try{r=He.encode(e,ne.SJIS)}catch{return!1}const i=r.length;if(i%2!==0)return!1;for(let a=0;a<i;a+=2){const u=r[a]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(e,r,i,a){let u=Number.MAX_SAFE_INTEGER,d=-1;for(let p=0;p<ei.NUM_MASK_PATTERNS;p++){Ue.buildMatrix(e,r,i,p,a);let w=this.calculateMaskPenalty(a);w<u&&(u=w,d=p)}return d}static chooseVersion(e,r){for(let i=1;i<=40;i++){const a=Be.getVersionForNumber(i);if(Ct.willFit(e,a,r))return a}throw new _t("Data too big")}static willFit(e,r,i){const a=r.getTotalCodewords(),d=r.getECBlocksForLevel(i).getTotalECCodewords(),p=a-d,w=(e+7)/8;return p>=w}static terminateBits(e,r){const i=e*8;if(r.getSize()>i)throw new _t("data bits cannot fit in the QR Code"+r.getSize()+" > "+i);for(let d=0;d<4&&r.getSize()<i;++d)r.appendBit(!1);const a=r.getSize()&7;if(a>0)for(let d=a;d<8;d++)r.appendBit(!1);const u=e-r.getSizeInBytes();for(let d=0;d<u;++d)r.appendBits((d&1)===0?236:17,8);if(r.getSize()!==i)throw new _t("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(e,r,i,a,u,d){if(a>=i)throw new _t("Block ID too large");const p=e%i,w=i-p,y=Math.floor(e/i),b=y+1,T=Math.floor(r/i),k=T+1,L=y-T,W=b-k;if(L!==W)throw new _t("EC bytes mismatch");if(i!==w+p)throw new _t("RS blocks mismatch");if(e!==(T+L)*w+(k+W)*p)throw new _t("Total bytes mismatch");a<w?(u[0]=T,d[0]=L):(u[0]=k,d[0]=W)}static interleaveWithECBytes(e,r,i,a){if(e.getSizeInBytes()!==i)throw new _t("Number of bits and data bytes does not match");let u=0,d=0,p=0;const w=new Array;for(let b=0;b<a;++b){const T=new Int32Array(1),k=new Int32Array(1);Ct.getNumDataBytesAndNumECBytesForBlockID(r,i,a,b,T,k);const L=T[0],W=new Uint8Array(L);e.toBytes(8*u,W,0,L);const z=Ct.generateECBytes(W,k[0]);w.push(new vu(W,z)),d=Math.max(d,L),p=Math.max(p,z.length),u+=T[0]}if(i!==u)throw new _t("Data bytes does not match offset");const y=new oe;for(let b=0;b<d;++b)for(const T of w){const k=T.getDataBytes();b<k.length&&y.appendBits(k[b],8)}for(let b=0;b<p;++b)for(const T of w){const k=T.getErrorCorrectionBytes();b<k.length&&y.appendBits(k[b],8)}if(r!==y.getSizeInBytes())throw new _t("Interleaving error: "+r+" and "+y.getSizeInBytes()+" differ.");return y}static generateECBytes(e,r){const i=e.length,a=new Int32Array(i+r);for(let d=0;d<i;d++)a[d]=e[d]&255;new jo(at.QR_CODE_FIELD_256).encode(a,r);const u=new Uint8Array(r);for(let d=0;d<r;d++)u[d]=a[i+d];return u}static appendModeInfo(e,r){r.appendBits(e.getBits(),4)}static appendLengthInfo(e,r,i,a){const u=i.getCharacterCountBits(r);if(e>=1<<u)throw new _t(e+" is bigger than "+((1<<u)-1));a.appendBits(e,u)}static appendBytes(e,r,i,a){switch(r){case je.NUMERIC:Ct.appendNumericBytes(e,i);break;case je.ALPHANUMERIC:Ct.appendAlphanumericBytes(e,i);break;case je.BYTE:Ct.append8BitBytes(e,i,a);break;case je.KANJI:Ct.appendKanjiBytes(e,i);break;default:throw new _t("Invalid mode: "+r)}}static getDigit(e){return e.charCodeAt(0)-48}static isDigit(e){const r=Ct.getDigit(e);return r>=0&&r<=9}static appendNumericBytes(e,r){const i=e.length;let a=0;for(;a<i;){const u=Ct.getDigit(e.charAt(a));if(a+2<i){const d=Ct.getDigit(e.charAt(a+1)),p=Ct.getDigit(e.charAt(a+2));r.appendBits(u*100+d*10+p,10),a+=3}else if(a+1<i){const d=Ct.getDigit(e.charAt(a+1));r.appendBits(u*10+d,7),a+=2}else r.appendBits(u,4),a++}}static appendAlphanumericBytes(e,r){const i=e.length;let a=0;for(;a<i;){const u=Ct.getAlphanumericCode(e.charCodeAt(a));if(u===-1)throw new _t;if(a+1<i){const d=Ct.getAlphanumericCode(e.charCodeAt(a+1));if(d===-1)throw new _t;r.appendBits(u*45+d,11),a+=2}else r.appendBits(u,6),a++}}static append8BitBytes(e,r,i){let a;try{a=He.encode(e,i)}catch(u){throw new _t(u)}for(let u=0,d=a.length;u!==d;u++){const p=a[u];r.appendBits(p,8)}}static appendKanjiBytes(e,r){let i;try{i=He.encode(e,ne.SJIS)}catch(u){throw new _t(u)}const a=i.length;for(let u=0;u<a;u+=2){const d=i[u]&255,p=i[u+1]&255,w=d<<8&4294967295|p;let y=-1;if(w>=33088&&w<=40956?y=w-33088:w>=57408&&w<=60351&&(y=w-49472),y===-1)throw new _t("Invalid byte sequence");const b=(y>>8)*192+(y&255);r.appendBits(b,13)}}static appendECI(e,r){r.appendBits(je.ECI.getBits(),4),r.appendBits(e.getValue(),8)}}Ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Ct.DEFAULT_BYTE_MODE_ENCODING=ne.UTF8.getName();class ti{write(e,r,i,a=null){if(e.length===0)throw new N("Found empty contents");if(r<0||i<0)throw new N("Requested dimensions are too small: "+r+"x"+i);let u=vt.L,d=ti.QUIET_ZONE_SIZE;a!==null&&(a.get(Yt.ERROR_CORRECTION)!==void 0&&(u=vt.fromString(a.get(Yt.ERROR_CORRECTION).toString())),a.get(Yt.MARGIN)!==void 0&&(d=Number.parseInt(a.get(Yt.MARGIN).toString(),10)));const p=Ct.encode(e,u,a);return this.renderResult(p,r,i,d)}writeToDom(e,r,i,a,u=null){typeof e=="string"&&(e=document.querySelector(e));const d=this.write(r,i,a,u);e&&e.appendChild(d)}renderResult(e,r,i,a){const u=e.getMatrix();if(u===null)throw new Zr;const d=u.getWidth(),p=u.getHeight(),w=d+a*2,y=p+a*2,b=Math.max(r,w),T=Math.max(i,y),k=Math.min(Math.floor(b/w),Math.floor(T/y)),L=Math.floor((b-d*k)/2),W=Math.floor((T-p*k)/2),z=this.createSVGElement(b,T);for(let $=0,ee=W;$<p;$++,ee+=k)for(let ge=0,pe=L;ge<d;ge++,pe+=k)if(u.get(ge,$)===1){const ce=this.createSvgRectElement(pe,ee,k,k);z.appendChild(ce)}return z}createSVGElement(e,r){const i=document.createElementNS(ti.SVG_NS,"svg");return i.setAttributeNS(null,"height",e.toString()),i.setAttributeNS(null,"width",r.toString()),i}createSvgRectElement(e,r,i,a){const u=document.createElementNS(ti.SVG_NS,"rect");return u.setAttributeNS(null,"x",e.toString()),u.setAttributeNS(null,"y",r.toString()),u.setAttributeNS(null,"height",i.toString()),u.setAttributeNS(null,"width",a.toString()),u.setAttributeNS(null,"fill","#000000"),u}}ti.QUIET_ZONE_SIZE=4,ti.SVG_NS="http://www.w3.org/2000/svg";class Ti{encode(e,r,i,a,u){if(e.length===0)throw new N("Found empty contents");if(r!==we.QR_CODE)throw new N("Can only encode QR_CODE, but got "+r);if(i<0||a<0)throw new N(`Requested dimensions are too small: ${i}x${a}`);let d=vt.L,p=Ti.QUIET_ZONE_SIZE;u!==null&&(u.get(Yt.ERROR_CORRECTION)!==void 0&&(d=vt.fromString(u.get(Yt.ERROR_CORRECTION).toString())),u.get(Yt.MARGIN)!==void 0&&(p=Number.parseInt(u.get(Yt.MARGIN).toString(),10)));const w=Ct.encode(e,d,u);return Ti.renderResult(w,i,a,p)}static renderResult(e,r,i,a){const u=e.getMatrix();if(u===null)throw new Zr;const d=u.getWidth(),p=u.getHeight(),w=d+a*2,y=p+a*2,b=Math.max(r,w),T=Math.max(i,y),k=Math.min(Math.floor(b/w),Math.floor(T/y)),L=Math.floor((b-d*k)/2),W=Math.floor((T-p*k)/2),z=new ct(b,T);for(let $=0,ee=W;$<p;$++,ee+=k)for(let ge=0,pe=L;ge<d;ge++,pe+=k)u.get(ge,$)===1&&z.setRegion(pe,ee,k,k);return z}}Ti.QUIET_ZONE_SIZE=4;class Eu{encode(e,r,i,a,u){let d;switch(r){case we.QR_CODE:d=new Ti;break;default:throw new N("No encoder available for format "+r)}return d.encode(e,r,i,a,u)}}class xn extends Ee{constructor(e,r,i,a,u,d,p,w){if(super(d,p),this.yuvData=e,this.dataWidth=r,this.dataHeight=i,this.left=a,this.top=u,a+d>r||u+p>i)throw new N("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(d,p)}getRow(e,r){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const a=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.yuvData,a,r,0,i),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.yuvData;const i=e*r,a=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.yuvData,u,a,0,i),a;for(let d=0;d<r;d++){const p=d*e;F.arraycopy(this.yuvData,u,a,p,e),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,r,i,a){return new xn(this.yuvData,this.dataWidth,this.dataHeight,this.left+e,this.top+r,i,a,!1)}renderThumbnail(){const e=this.getWidth()/xn.THUMBNAIL_SCALE_FACTOR,r=this.getHeight()/xn.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(e*r),a=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let d=0;d<r;d++){const p=d*e;for(let w=0;w<e;w++){const y=a[u+w*xn.THUMBNAIL_SCALE_FACTOR]&255;i[p+w]=4278190080|y*65793}u+=this.dataWidth*xn.THUMBNAIL_SCALE_FACTOR}return i}getThumbnailWidth(){return this.getWidth()/xn.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/xn.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(e,r){const i=this.yuvData;for(let a=0,u=this.top*this.dataWidth+this.left;a<r;a++,u+=this.dataWidth){const d=u+e/2;for(let p=u,w=u+e-1;p<d;p++,w--){const y=i[p];i[p]=i[w],i[w]=y}}}invert(){return new Le(this)}}xn.THUMBNAIL_SCALE_FACTOR=2;class os extends Ee{constructor(e,r,i,a,u,d,p){if(super(r,i),this.dataWidth=a,this.dataHeight=u,this.left=d,this.top=p,e.BYTES_PER_ELEMENT===4){const w=r*i,y=new Uint8ClampedArray(w);for(let b=0;b<w;b++){const T=e[b],k=T>>16&255,L=T>>7&510,W=T&255;y[b]=(k+L+W)/4&255}this.luminances=y}else this.luminances=e;if(a===void 0&&(this.dataWidth=r),u===void 0&&(this.dataHeight=i),d===void 0&&(this.left=0),p===void 0&&(this.top=0),this.left+r>this.dataWidth||this.top+i>this.dataHeight)throw new N("Crop rectangle does not fit within image data.")}getRow(e,r){if(e<0||e>=this.getHeight())throw new N("Requested row is outside the image: "+e);const i=this.getWidth();(r==null||r.length<i)&&(r=new Uint8ClampedArray(i));const a=(e+this.top)*this.dataWidth+this.left;return F.arraycopy(this.luminances,a,r,0,i),r}getMatrix(){const e=this.getWidth(),r=this.getHeight();if(e===this.dataWidth&&r===this.dataHeight)return this.luminances;const i=e*r,a=new Uint8ClampedArray(i);let u=this.top*this.dataWidth+this.left;if(e===this.dataWidth)return F.arraycopy(this.luminances,u,a,0,i),a;for(let d=0;d<r;d++){const p=d*e;F.arraycopy(this.luminances,u,a,p,e),u+=this.dataWidth}return a}isCropSupported(){return!0}crop(e,r,i,a){return new os(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+e,this.top+r)}invert(){return new Le(this)}}class Fa extends ne{static forName(e){return this.getCharacterSetECIByName(e)}}class Fo{}Fo.ISO_8859_1=ne.ISO8859_1;class Ua{isCompact(){return this.compact}setCompact(e){this.compact=e}getSize(){return this.size}setSize(e){this.size=e}getLayers(){return this.layers}setLayers(e){this.layers=e}getCodeWords(){return this.codeWords}setCodeWords(e){this.codeWords=e}getMatrix(){return this.matrix}setMatrix(e){this.matrix=e}}class Uo{static singletonList(e){return[e]}static min(e,r){return e.sort(r)[0]}}class _u{constructor(e){this.previous=e}getPrevious(){return this.previous}}class Ni extends _u{constructor(e,r,i){super(e),this.value=r,this.bitCount=i}appendTo(e,r){e.appendBits(this.value,this.bitCount)}add(e,r){return new Ni(this,e,r)}addBinaryShift(e,r){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new Ni(this,e,r)}toString(){let e=this.value&(1<<this.bitCount)-1;return e|=1<<this.bitCount,"<"+V.toBinaryString(e|1<<this.bitCount).substring(1)+">"}}class Vo extends Ni{constructor(e,r,i){super(e,0,0),this.binaryShiftStart=r,this.binaryShiftByteCount=i}appendTo(e,r){for(let i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(e.appendBits(31,5),this.binaryShiftByteCount>62?e.appendBits(this.binaryShiftByteCount-31,16):i===0?e.appendBits(Math.min(this.binaryShiftByteCount,31),5):e.appendBits(this.binaryShiftByteCount-31,5)),e.appendBits(r[this.binaryShiftStart+i],8)}addBinaryShift(e,r){return new Vo(this,e,r)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Cu(I,e,r){return new Vo(I,e,r)}function as(I,e,r){return new Ni(I,e,r)}const Au=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Gn=0,Ri=1,gr=2,Va=3,sn=4,Wa=new Ni(null,0,0),Ws=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Ha(I){for(let e of I)J.fill(e,-1);return I[Gn][sn]=0,I[Ri][sn]=0,I[Ri][Gn]=28,I[Va][sn]=0,I[gr][sn]=0,I[gr][Gn]=15,I}const Wo=Ha(J.createInt32Array(6,6));class vr{constructor(e,r,i,a){this.token=e,this.mode=r,this.binaryShiftByteCount=i,this.bitCount=a}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(e,r){let i=this.bitCount,a=this.token;if(e!==this.mode){let d=Ws[this.mode][e];a=as(a,d&65535,d>>16),i+=d>>16}let u=e===gr?4:5;return a=as(a,r,u),new vr(a,e,0,i+u)}shiftAndAppend(e,r){let i=this.token,a=this.mode===gr?4:5;return i=as(i,Wo[this.mode][e],a),i=as(i,r,5),new vr(i,this.mode,0,this.bitCount+a+5)}addBinaryShiftChar(e){let r=this.token,i=this.mode,a=this.bitCount;if(this.mode===sn||this.mode===gr){let p=Ws[i][Gn];r=as(r,p&65535,p>>16),a+=p>>16,i=Gn}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,d=new vr(r,i,this.binaryShiftByteCount+1,a+u);return d.binaryShiftByteCount===2078&&(d=d.endBinaryShift(e+1)),d}endBinaryShift(e){if(this.binaryShiftByteCount===0)return this;let r=this.token;return r=Cu(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new vr(r,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(e){let r=this.bitCount+(Ws[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=vr.calculateBinaryShiftCost(e)-vr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount}toBitArray(e){let r=[];for(let a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())r.unshift(a);let i=new oe;for(const a of r)a.appendTo(i,e);return i}toString(){return ve.format("%s bits=%d bytes=%d",Au[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0}}vr.INITIAL_STATE=new vr(Wa,Gn,0,0);function bu(I){const e=ve.getCharCode(" "),r=ve.getCharCode("."),i=ve.getCharCode(",");I[Gn][e]=1;const a=ve.getCharCode("Z"),u=ve.getCharCode("A");for(let k=u;k<=a;k++)I[Gn][k]=k-u+2;I[Ri][e]=1;const d=ve.getCharCode("z"),p=ve.getCharCode("a");for(let k=p;k<=d;k++)I[Ri][k]=k-p+2;I[gr][e]=1;const w=ve.getCharCode("9"),y=ve.getCharCode("0");for(let k=y;k<=w;k++)I[gr][k]=k-y+2;I[gr][i]=12,I[gr][r]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<b.length;k++)I[Va][ve.getCharCode(b[k])]=k;const T=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<T.length;k++)ve.getCharCode(T[k])>0&&(I[sn][ve.getCharCode(T[k])]=k);return I}const Ho=bu(J.createInt32Array(5,256));class ls{constructor(e){this.text=e}encode(){const e=ve.getCharCode(" "),r=ve.getCharCode(`
`);let i=Uo.singletonList(vr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let d,p=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ve.getCharCode("\r"):d=p===r?2:0;break;case ve.getCharCode("."):d=p===e?3:0;break;case ve.getCharCode(","):d=p===e?4:0;break;case ve.getCharCode(":"):d=p===e?5:0;break;default:d=0}d>0?(i=ls.updateStateListForPair(i,u,d),u++):i=this.updateStateListForChar(i,u)}return Uo.min(i,(u,d)=>u.getBitCount()-d.getBitCount()).toBitArray(this.text)}updateStateListForChar(e,r){const i=[];for(let a of e)this.updateStateForChar(a,r,i);return ls.simplifyStates(i)}updateStateForChar(e,r,i){let a=this.text[r]&255,u=Ho[e.getMode()][a]>0,d=null;for(let p=0;p<=sn;p++){let w=Ho[p][a];if(w>0){if(d==null&&(d=e.endBinaryShift(r)),!u||p===e.getMode()||p===gr){const y=d.latchAndAppend(p,w);i.push(y)}if(!u&&Wo[e.getMode()][p]>=0){const y=d.shiftAndAppend(p,w);i.push(y)}}}if(e.getBinaryShiftByteCount()>0||Ho[e.getMode()][a]===0){let p=e.addBinaryShiftChar(r);i.push(p)}}static updateStateListForPair(e,r,i){const a=[];for(let u of e)this.updateStateForPair(u,r,i,a);return this.simplifyStates(a)}static updateStateForPair(e,r,i,a){let u=e.endBinaryShift(r);if(a.push(u.latchAndAppend(sn,i)),e.getMode()!==sn&&a.push(u.shiftAndAppend(sn,i)),i===3||i===4){let d=u.latchAndAppend(gr,16-i).latchAndAppend(gr,1);a.push(d)}if(e.getBinaryShiftByteCount()>0){let d=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);a.push(d)}}static simplifyStates(e){let r=[];for(const i of e){let a=!0;for(const u of r){if(u.isBetterThanOrEqualTo(i)){a=!1;break}i.isBetterThanOrEqualTo(u)&&(r=r.filter(d=>d!==u))}a&&r.push(i)}return r}}class lt{constructor(){}static encodeBytes(e){return lt.encode(e,lt.DEFAULT_EC_PERCENT,lt.DEFAULT_AZTEC_LAYERS)}static encode(e,r,i){let a=new ls(e).encode(),u=V.truncDivision(a.getSize()*r,100)+11,d=a.getSize()+u,p,w,y,b,T;if(i!==lt.DEFAULT_AZTEC_LAYERS){if(p=i<0,w=Math.abs(i),w>(p?lt.MAX_NB_BITS_COMPACT:lt.MAX_NB_BITS))throw new N(ve.format("Illegal value %s for layers",i));y=lt.totalBitsInLayer(w,p),b=lt.WORD_SIZE[w];let ce=y-y%b;if(T=lt.stuffBits(a,b),T.getSize()+u>ce)throw new N("Data to large for user specified layer");if(p&&T.getSize()>b*64)throw new N("Data to large for user specified layer")}else{b=0,T=null;for(let ce=0;;ce++){if(ce>lt.MAX_NB_BITS)throw new N("Data too large for an Aztec code");if(p=ce<=3,w=p?ce+1:ce,y=lt.totalBitsInLayer(w,p),d>y)continue;(T==null||b!==lt.WORD_SIZE[w])&&(b=lt.WORD_SIZE[w],T=lt.stuffBits(a,b));let tt=y-y%b;if(!(p&&T.getSize()>b*64)&&T.getSize()+u<=tt)break}}let k=lt.generateCheckWords(T,y,b),L=T.getSize()/b,W=lt.generateModeMessage(p,w,L),z=(p?11:14)+w*4,$=new Int32Array(z),ee;if(p){ee=z;for(let ce=0;ce<$.length;ce++)$[ce]=ce}else{ee=z+1+2*V.truncDivision(V.truncDivision(z,2)-1,15);let ce=V.truncDivision(z,2),tt=V.truncDivision(ee,2);for(let Ze=0;Ze<ce;Ze++){let Nr=Ze+V.truncDivision(Ze,15);$[ce-Ze-1]=tt-Nr-1,$[ce+Ze]=tt+Nr+1}}let ge=new ct(ee);for(let ce=0,tt=0;ce<w;ce++){let Ze=(w-ce)*4+(p?9:12);for(let Nr=0;Nr<Ze;Nr++){let on=Nr*2;for(let Zt=0;Zt<2;Zt++)k.get(tt+on+Zt)&&ge.set($[ce*2+Zt],$[ce*2+Nr]),k.get(tt+Ze*2+on+Zt)&&ge.set($[ce*2+Nr],$[z-1-ce*2-Zt]),k.get(tt+Ze*4+on+Zt)&&ge.set($[z-1-ce*2-Zt],$[z-1-ce*2-Nr]),k.get(tt+Ze*6+on+Zt)&&ge.set($[z-1-ce*2-Nr],$[ce*2+Zt])}tt+=Ze*8}if(lt.drawModeMessage(ge,p,ee,W),p)lt.drawBullsEye(ge,V.truncDivision(ee,2),5);else{lt.drawBullsEye(ge,V.truncDivision(ee,2),7);for(let ce=0,tt=0;ce<V.truncDivision(z,2)-1;ce+=15,tt+=16)for(let Ze=V.truncDivision(ee,2)&1;Ze<ee;Ze+=2)ge.set(V.truncDivision(ee,2)-tt,Ze),ge.set(V.truncDivision(ee,2)+tt,Ze),ge.set(Ze,V.truncDivision(ee,2)-tt),ge.set(Ze,V.truncDivision(ee,2)+tt)}let pe=new Ua;return pe.setCompact(p),pe.setSize(ee),pe.setLayers(w),pe.setCodeWords(L),pe.setMatrix(ge),pe}static drawBullsEye(e,r,i){for(let a=0;a<i;a+=2)for(let u=r-a;u<=r+a;u++)e.set(u,r-a),e.set(u,r+a),e.set(r-a,u),e.set(r+a,u);e.set(r-i,r-i),e.set(r-i+1,r-i),e.set(r-i,r-i+1),e.set(r+i,r-i),e.set(r+i,r-i+1),e.set(r+i,r+i-1)}static generateModeMessage(e,r,i){let a=new oe;return e?(a.appendBits(r-1,2),a.appendBits(i-1,6),a=lt.generateCheckWords(a,28,4)):(a.appendBits(r-1,5),a.appendBits(i-1,11),a=lt.generateCheckWords(a,40,4)),a}static drawModeMessage(e,r,i,a){let u=V.truncDivision(i,2);if(r)for(let d=0;d<7;d++){let p=u-3+d;a.get(d)&&e.set(p,u-5),a.get(d+7)&&e.set(u+5,p),a.get(20-d)&&e.set(p,u+5),a.get(27-d)&&e.set(u-5,p)}else for(let d=0;d<10;d++){let p=u-5+d+V.truncDivision(d,5);a.get(d)&&e.set(p,u-7),a.get(d+10)&&e.set(u+7,p),a.get(29-d)&&e.set(p,u+7),a.get(39-d)&&e.set(u-7,p)}}static generateCheckWords(e,r,i){let a=e.getSize()/i,u=new jo(lt.getGF(i)),d=V.truncDivision(r,i),p=lt.bitsToWords(e,i,d);u.encode(p,d-a);let w=r%i,y=new oe;y.appendBits(0,w);for(const b of Array.from(p))y.appendBits(b,i);return y}static bitsToWords(e,r,i){let a=new Int32Array(i),u,d;for(u=0,d=e.getSize()/r;u<d;u++){let p=0;for(let w=0;w<r;w++)p|=e.get(u*r+w)?1<<r-w-1:0;a[u]=p}return a}static getGF(e){switch(e){case 4:return at.AZTEC_PARAM;case 6:return at.AZTEC_DATA_6;case 8:return at.AZTEC_DATA_8;case 10:return at.AZTEC_DATA_10;case 12:return at.AZTEC_DATA_12;default:throw new N("Unsupported word size "+e)}}static stuffBits(e,r){let i=new oe,a=e.getSize(),u=(1<<r)-2;for(let d=0;d<a;d+=r){let p=0;for(let w=0;w<r;w++)(d+w>=a||e.get(d+w))&&(p|=1<<r-1-w);(p&u)===u?(i.appendBits(p&u,r),d--):(p&u)===0?(i.appendBits(p|1,r),d--):i.appendBits(p,r)}return i}static totalBitsInLayer(e,r){return((r?88:112)+16*e)*e}}lt.DEFAULT_EC_PERCENT=33,lt.DEFAULT_AZTEC_LAYERS=0,lt.MAX_NB_BITS=32,lt.MAX_NB_BITS_COMPACT=4,lt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class us{encode(e,r,i,a){return this.encodeWithHints(e,r,i,a,null)}encodeWithHints(e,r,i,a,u){let d=Fo.ISO_8859_1,p=lt.DEFAULT_EC_PERCENT,w=lt.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Yt.CHARACTER_SET)&&(d=Fa.forName(u.get(Yt.CHARACTER_SET).toString())),u.has(Yt.ERROR_CORRECTION)&&(p=V.parseInt(u.get(Yt.ERROR_CORRECTION).toString())),u.has(Yt.AZTEC_LAYERS)&&(w=V.parseInt(u.get(Yt.AZTEC_LAYERS).toString()))),us.encodeLayers(e,r,i,a,d,p,w)}static encodeLayers(e,r,i,a,u,d,p){if(r!==we.AZTEC)throw new N("Can only encode AZTEC, but got "+r);let w=lt.encode(ve.getBytes(e,u),d,p);return us.renderResult(w,i,a)}static renderResult(e,r,i){let a=e.getMatrix();if(a==null)throw new Zr;let u=a.getWidth(),d=a.getHeight(),p=Math.max(r,u),w=Math.max(i,d),y=Math.min(p/u,w/d),b=(p-u*y)/2,T=(w-d*y)/2,k=new ct(p,w);for(let L=0,W=T;L<d;L++,W+=y)for(let z=0,$=b;z<u;z++,$+=y)a.get(z,L)&&k.setRegion($,W,y,y);return k}}o.AbstractExpandedDecoder=To,o.ArgumentException=S,o.ArithmeticException=Yi,o.AztecCode=Ua,o.AztecCodeReader=Vn,o.AztecCodeWriter=us,o.AztecDecoder=Et,o.AztecDetector=vi,o.AztecDetectorResult=Co,o.AztecEncoder=lt,o.AztecHighLevelEncoder=ls,o.AztecPoint=hr,o.BarcodeFormat=we,o.Binarizer=U,o.BinaryBitmap=D,o.BitArray=oe,o.BitMatrix=ct,o.BitSource=Oo,o.BrowserAztecCodeReader=wu,o.BrowserBarcodeReader=ka,o.BrowserCodeReader=Ke,o.BrowserDatamatrixCodeReader=yu,o.BrowserMultiFormatReader=ss,o.BrowserPDF417Reader=Us,o.BrowserQRCodeReader=ja,o.BrowserQRCodeSvgWriter=ti,o.CharacterSetECI=ne,o.ChecksumException=P,o.Code128Reader=ye,o.Code39Reader=Kt,o.DataMatrixDecodedBitStreamParser=tn,o.DataMatrixReader=rn,o.DecodeHintType=xe,o.DecoderResult=wt,o.DefaultGridSampler=ks,o.DetectorResult=yi,o.EAN13Reader=Fr,o.EncodeHintType=Yt,o.Exception=E,o.FormatException=se,o.GenericGF=at,o.GenericGFPoly=ir,o.GlobalHistogramBinarizer=dt,o.GridSampler=Os,o.GridSamplerInstance=Qr,o.HTMLCanvasElementLuminanceSource=Ce,o.HybridBinarizer=Oe,o.ITFReader=pt,o.IllegalArgumentException=N,o.IllegalStateException=Zr,o.InvertedLuminanceSource=Le,o.LuminanceSource=Ee,o.MathUtils=it,o.MultiFormatOneDReader=_i,o.MultiFormatReader=Fs,o.MultiFormatWriter=Eu,o.NotFoundException=ie,o.OneDReader=jt,o.PDF417DecodedBitStreamParser=te,o.PDF417DecoderErrorCorrection=Po,o.PDF417Reader=ur,o.PDF417ResultMetadata=Bs,o.PerspectiveTransform=jr,o.PlanarYUVLuminanceSource=xn,o.QRCodeByteMatrix=Vs,o.QRCodeDataMask=et,o.QRCodeDecodedBitStreamParser=Tt,o.QRCodeDecoderErrorCorrectionLevel=vt,o.QRCodeDecoderFormatInformation=or,o.QRCodeEncoder=Ct,o.QRCodeEncoderQRCode=ei,o.QRCodeMaskUtil=Nt,o.QRCodeMatrixUtil=Ue,o.QRCodeMode=je,o.QRCodeReader=yr,o.QRCodeVersion=Be,o.QRCodeWriter=Ti,o.RGBLuminanceSource=os,o.RSS14Reader=At,o.RSSExpandedReader=le,o.ReaderException=Ii,o.ReedSolomonDecoder=wi,o.ReedSolomonEncoder=jo,o.ReedSolomonException=Fn,o.Result=Fe,o.ResultMetadataType=Xe,o.ResultPoint=Ie,o.StringUtils=ve,o.UnsupportedOperationException=Me,o.VideoInputDevice=X,o.WhiteRectangleDetector=hn,o.WriterException=_t,o.ZXingArrays=J,o.ZXingCharset=Fa,o.ZXingInteger=V,o.ZXingStandardCharsets=Fo,o.ZXingStringBuilder=$e,o.ZXingStringEncoding=He,o.ZXingSystem=F,o.createAbstractExpandedDecoder=Ra,Object.defineProperty(o,"__esModule",{value:!0})}))})(wa,wa.exports)),wa.exports}var Pt=m2();const x2=du(Pt),w2=D0({__proto__:null,default:x2},[Pt]);var S0=(function(){function l(n,o,c){if(this.formatMap=new Map([[Ae.QR_CODE,Pt.BarcodeFormat.QR_CODE],[Ae.AZTEC,Pt.BarcodeFormat.AZTEC],[Ae.CODABAR,Pt.BarcodeFormat.CODABAR],[Ae.CODE_39,Pt.BarcodeFormat.CODE_39],[Ae.CODE_93,Pt.BarcodeFormat.CODE_93],[Ae.CODE_128,Pt.BarcodeFormat.CODE_128],[Ae.DATA_MATRIX,Pt.BarcodeFormat.DATA_MATRIX],[Ae.MAXICODE,Pt.BarcodeFormat.MAXICODE],[Ae.ITF,Pt.BarcodeFormat.ITF],[Ae.EAN_13,Pt.BarcodeFormat.EAN_13],[Ae.EAN_8,Pt.BarcodeFormat.EAN_8],[Ae.PDF_417,Pt.BarcodeFormat.PDF_417],[Ae.RSS_14,Pt.BarcodeFormat.RSS_14],[Ae.RSS_EXPANDED,Pt.BarcodeFormat.RSS_EXPANDED],[Ae.UPC_A,Pt.BarcodeFormat.UPC_A],[Ae.UPC_E,Pt.BarcodeFormat.UPC_E],[Ae.UPC_EAN_EXTENSION,Pt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!w2)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=o,this.logger=c;var g=this.createZXingFormats(n),f=new Map;f.set(Pt.DecodeHintType.POSSIBLE_FORMATS,g),f.set(Pt.DecodeHintType.TRY_HARDER,!1),this.hints=f}return l.prototype.decodeAsync=function(n){var o=this;return new Promise(function(c,g){try{c(o.decode(n))}catch(f){g(f)}})},l.prototype.decode=function(n){var o=new Pt.MultiFormatReader(this.verbose,this.hints),c=new Pt.HTMLCanvasElementLuminanceSource(n),g=new Pt.BinaryBitmap(new Pt.HybridBinarizer(c)),f=o.decode(g);return{text:f.text,format:mg.create(this.toHtml5QrcodeSupportedFormats(f.format)),debugData:this.createDebugData()}},l.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(o,c,g){n.set(o,c)}),n},l.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},l.prototype.createZXingFormats=function(n){for(var o=[],c=0,g=n;c<g.length;c++){var f=g[c];this.formatMap.has(f)?o.push(this.formatMap.get(f)):this.logger.logError("".concat(f," is not supported by")+"ZXingHtml5QrcodeShim")}return o},l.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},l})(),y2=function(l,n,o,c){function g(f){return f instanceof o?f:new o(function(x){x(f)})}return new(o||(o=Promise))(function(f,x){function C(S){try{E(c.next(S))}catch(N){x(N)}}function A(S){try{E(c.throw(S))}catch(N){x(N)}}function E(S){S.done?f(S.value):g(S.value).then(C,A)}E((c=c.apply(l,n||[])).next())})},v2=function(l,n){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,g,f,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(E){return function(S){return A([E,S])}}function A(E){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(o=0)),o;)try{if(c=1,g&&(f=E[0]&2?g.return:E[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,E[1])).done)return f;switch(g=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,g=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){o.label=E[1];break}if(E[0]===6&&o.label<f[1]){o.label=f[1],f=E;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(E);break}f[2]&&o.ops.pop(),o.trys.pop();continue}E=n.call(l,o)}catch(S){E=[6,S],g=0}finally{c=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},I0=(function(){function l(n,o,c){if(this.formatMap=new Map([[Ae.QR_CODE,"qr_code"],[Ae.AZTEC,"aztec"],[Ae.CODABAR,"codabar"],[Ae.CODE_39,"code_39"],[Ae.CODE_93,"code_93"],[Ae.CODE_128,"code_128"],[Ae.DATA_MATRIX,"data_matrix"],[Ae.ITF,"itf"],[Ae.EAN_13,"ean_13"],[Ae.EAN_8,"ean_8"],[Ae.PDF_417,"pdf417"],[Ae.UPC_A,"upc_a"],[Ae.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!l.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=o,this.logger=c;var g=this.createBarcodeDetectorFormats(n);if(this.detector=new BarcodeDetector(g),!this.detector)throw"BarcodeDetector detector not supported"}return l.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var n=new BarcodeDetector({formats:["qr_code"]});return typeof n<"u"},l.prototype.decodeAsync=function(n){return y2(this,void 0,void 0,function(){var o,c;return v2(this,function(g){switch(g.label){case 0:return[4,this.detector.detect(n)];case 1:if(o=g.sent(),!o||o.length===0)throw"No barcode or QR code detected.";return c=this.selectLargestBarcode(o),[2,{text:c.rawValue,format:mg.create(this.toHtml5QrcodeSupportedFormats(c.format)),debugData:this.createDebugData()}]}})})},l.prototype.selectLargestBarcode=function(n){for(var o=null,c=0,g=0,f=n;g<f.length;g++){var x=f[g],C=x.boundingBox.width*x.boundingBox.height;C>c&&(c=C,o=x)}if(!o)throw"No largest barcode found";return o},l.prototype.createBarcodeDetectorFormats=function(n){for(var o=[],c=0,g=n;c<g.length;c++){var f=g[c];this.formatMap.has(f)?o.push(this.formatMap.get(f)):this.logger.warn("".concat(f," is not supported by")+"BarcodeDetectorDelegate")}return{formats:o}},l.prototype.toHtml5QrcodeSupportedFormats=function(n){if(!this.reverseFormatMap.has(n))throw"reverseFormatMap doesn't have ".concat(n);return this.reverseFormatMap.get(n)},l.prototype.createReverseFormatMap=function(){var n=new Map;return this.formatMap.forEach(function(o,c,g){n.set(o,c)}),n},l.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},l})(),T0=function(l,n,o,c){function g(f){return f instanceof o?f:new o(function(x){x(f)})}return new(o||(o=Promise))(function(f,x){function C(S){try{E(c.next(S))}catch(N){x(N)}}function A(S){try{E(c.throw(S))}catch(N){x(N)}}function E(S){S.done?f(S.value):g(S.value).then(C,A)}E((c=c.apply(l,n||[])).next())})},N0=function(l,n){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,g,f,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(E){return function(S){return A([E,S])}}function A(E){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(o=0)),o;)try{if(c=1,g&&(f=E[0]&2?g.return:E[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,E[1])).done)return f;switch(g=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,g=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){o.label=E[1];break}if(E[0]===6&&o.label<f[1]){o.label=f[1],f=E;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(E);break}f[2]&&o.ops.pop(),o.trys.pop();continue}E=n.call(l,o)}catch(S){E=[6,S],g=0}finally{c=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},E2=(function(){function l(n,o,c,g){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=c,o&&I0.isSupported()?(this.primaryDecoder=new I0(n,c,g),this.secondaryDecoder=new S0(n,c,g)):this.primaryDecoder=new S0(n,c,g)}return l.prototype.decodeAsync=function(n){return T0(this,void 0,void 0,function(){var o;return N0(this,function(c){switch(c.label){case 0:o=performance.now(),c.label=1;case 1:return c.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(n)];case 2:return[2,c.sent()];case 3:return this.possiblyLogPerformance(o),[7];case 4:return[2]}})})},l.prototype.decodeRobustlyAsync=function(n){return T0(this,void 0,void 0,function(){var o,c;return N0(this,function(g){switch(g.label){case 0:o=performance.now(),g.label=1;case 1:return g.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(n)];case 2:return[2,g.sent()];case 3:if(c=g.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(n)];throw c;case 4:return this.possiblyLogPerformance(o),[7];case 5:return[2]}})})},l.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},l.prototype.possiblyLogPerformance=function(n){if(this.verbose){var o=performance.now()-n;this.executionResults.push(o),this.executions++,this.possiblyFlushPerformanceReport()}},l.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var n=0,o=0,c=this.executionResults;o<c.length;o++){var g=c[o];n+=g}var f=n/this.executionResults.length;console.log("".concat(f," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},l})(),Bd=(function(){var l=function(n,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])},l(n,o)};return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");l(n,o);function c(){this.constructor=n}n.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),uu=function(l,n,o,c){function g(f){return f instanceof o?f:new o(function(x){x(f)})}return new(o||(o=Promise))(function(f,x){function C(S){try{E(c.next(S))}catch(N){x(N)}}function A(S){try{E(c.throw(S))}catch(N){x(N)}}function E(S){S.done?f(S.value):g(S.value).then(C,A)}E((c=c.apply(l,n||[])).next())})},cu=function(l,n){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,g,f,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(E){return function(S){return A([E,S])}}function A(E){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(o=0)),o;)try{if(c=1,g&&(f=E[0]&2?g.return:E[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,E[1])).done)return f;switch(g=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,g=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){o.label=E[1];break}if(E[0]===6&&o.label<f[1]){o.label=f[1],f=E;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(E);break}f[2]&&o.ops.pop(),o.trys.pop();continue}E=n.call(l,o)}catch(S){E=[6,S],g=0}finally{c=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},wg=(function(){function l(n,o){this.name=n,this.track=o}return l.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},l.prototype.apply=function(n){var o={};o[this.name]=n;var c={advanced:[o]};return this.track.applyConstraints(c)},l.prototype.value=function(){var n=this.track.getSettings();if(this.name in n){var o=n[this.name];return o}return null},l})(),_2=(function(l){Bd(n,l);function n(o,c){return l.call(this,o,c)||this}return n.prototype.min=function(){return this.getCapabilities().min},n.prototype.max=function(){return this.getCapabilities().max},n.prototype.step=function(){return this.getCapabilities().step},n.prototype.apply=function(o){var c={};c[this.name]=o;var g={advanced:[c]};return this.track.applyConstraints(g)},n.prototype.getCapabilities=function(){this.failIfNotSupported();var o=this.track.getCapabilities(),c=o[this.name];return{min:c.min,max:c.max,step:c.step}},n.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},n})(wg),C2=(function(l){Bd(n,l);function n(o){return l.call(this,"zoom",o)||this}return n})(_2),A2=(function(l){Bd(n,l);function n(o){return l.call(this,"torch",o)||this}return n})(wg),b2=(function(){function l(n){this.track=n}return l.prototype.zoomFeature=function(){return new C2(this.track)},l.prototype.torchFeature=function(){return new A2(this.track)},l})(),S2=(function(){function l(n,o,c){this.isClosed=!1,this.parentElement=n,this.mediaStream=o,this.callbacks=c,this.surface=this.createVideoElement(this.parentElement.clientWidth),n.append(this.surface)}return l.prototype.createVideoElement=function(n){var o=document.createElement("video");return o.style.width="".concat(n,"px"),o.style.display="block",o.muted=!0,o.setAttribute("muted","true"),o.playsInline=!0,o},l.prototype.setupSurface=function(){var n=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var o=function(){var c=n.surface.clientWidth,g=n.surface.clientHeight;n.callbacks.onRenderSurfaceReady(c,g),n.surface.removeEventListener("playing",o)};this.surface.addEventListener("playing",o),this.surface.srcObject=this.mediaStream,this.surface.play()},l.create=function(n,o,c,g){return uu(this,void 0,void 0,function(){var f,x;return cu(this,function(C){switch(C.label){case 0:return f=new l(n,o,g),c.aspectRatio?(x={aspectRatio:c.aspectRatio},[4,f.getFirstTrackOrFail().applyConstraints(x)]):[3,2];case 1:C.sent(),C.label=2;case 2:return f.setupSurface(),[2,f]}})})},l.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},l.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},l.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},l.prototype.resume=function(n){this.failIfClosed();var o=this,c=function(){setTimeout(n,200),o.surface.removeEventListener("playing",c)};this.surface.addEventListener("playing",c),this.surface.play()},l.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},l.prototype.getSurface=function(){return this.failIfClosed(),this.surface},l.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},l.prototype.applyVideoConstraints=function(n){return uu(this,void 0,void 0,function(){return cu(this,function(o){if("aspectRatio"in n)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(n)]})})},l.prototype.close=function(){if(this.isClosed)return Promise.resolve();var n=this;return new Promise(function(o,c){var g=n.mediaStream.getVideoTracks(),f=g.length,x=0;n.mediaStream.getVideoTracks().forEach(function(C){n.mediaStream.removeTrack(C),C.stop(),++x,x>=f&&(n.isClosed=!0,n.parentElement.removeChild(n.surface),o())})})},l.prototype.getCapabilities=function(){return new b2(this.getFirstTrackOrFail())},l})(),I2=(function(){function l(n){this.mediaStream=n}return l.prototype.render=function(n,o,c){return uu(this,void 0,void 0,function(){return cu(this,function(g){return[2,S2.create(n,this.mediaStream,o,c)]})})},l.create=function(n){return uu(this,void 0,void 0,function(){var o,c;return cu(this,function(g){switch(g.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return o={audio:!1,video:n},[4,navigator.mediaDevices.getUserMedia(o)];case 1:return c=g.sent(),[2,new l(c)]}})})},l})(),R0=function(l,n,o,c){function g(f){return f instanceof o?f:new o(function(x){x(f)})}return new(o||(o=Promise))(function(f,x){function C(S){try{E(c.next(S))}catch(N){x(N)}}function A(S){try{E(c.throw(S))}catch(N){x(N)}}function E(S){S.done?f(S.value):g(S.value).then(C,A)}E((c=c.apply(l,n||[])).next())})},O0=function(l,n){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,g,f,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(E){return function(S){return A([E,S])}}function A(E){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(o=0)),o;)try{if(c=1,g&&(f=E[0]&2?g.return:E[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,E[1])).done)return f;switch(g=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,g=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){o.label=E[1];break}if(E[0]===6&&o.label<f[1]){o.label=f[1],f=E;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(E);break}f[2]&&o.ops.pop(),o.trys.pop();continue}E=n.call(l,o)}catch(S){E=[6,S],g=0}finally{c=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},T2=(function(){function l(){}return l.failIfNotSupported=function(){return R0(this,void 0,void 0,function(){return O0(this,function(n){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new l]})})},l.prototype.create=function(n){return R0(this,void 0,void 0,function(){return O0(this,function(o){return[2,I2.create(n)]})})},l})(),N2=function(l,n,o,c){function g(f){return f instanceof o?f:new o(function(x){x(f)})}return new(o||(o=Promise))(function(f,x){function C(S){try{E(c.next(S))}catch(N){x(N)}}function A(S){try{E(c.throw(S))}catch(N){x(N)}}function E(S){S.done?f(S.value):g(S.value).then(C,A)}E((c=c.apply(l,n||[])).next())})},R2=function(l,n){var o={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},c,g,f,x;return x={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function C(E){return function(S){return A([E,S])}}function A(E){if(c)throw new TypeError("Generator is already executing.");for(;x&&(x=0,E[0]&&(o=0)),o;)try{if(c=1,g&&(f=E[0]&2?g.return:E[0]?g.throw||((f=g.return)&&f.call(g),0):g.next)&&!(f=f.call(g,E[1])).done)return f;switch(g=0,f&&(E=[E[0]&2,f.value]),E[0]){case 0:case 1:f=E;break;case 4:return o.label++,{value:E[1],done:!1};case 5:o.label++,g=E[1],E=[0];continue;case 7:E=o.ops.pop(),o.trys.pop();continue;default:if(f=o.trys,!(f=f.length>0&&f[f.length-1])&&(E[0]===6||E[0]===2)){o=0;continue}if(E[0]===3&&(!f||E[1]>f[0]&&E[1]<f[3])){o.label=E[1];break}if(E[0]===6&&o.label<f[1]){o.label=f[1],f=E;break}if(f&&o.label<f[2]){o.label=f[2],o.ops.push(E);break}f[2]&&o.ops.pop(),o.trys.pop();continue}E=n.call(l,o)}catch(S){E=[6,S],g=0}finally{c=f=0}if(E[0]&5)throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}},O2=(function(){function l(){}return l.retrieve=function(){if(navigator.mediaDevices)return l.getCamerasFromMediaDevices();var n=MediaStreamTrack;return MediaStreamTrack&&n.getSources?l.getCamerasFromMediaStreamTrack():l.rejectWithError()},l.rejectWithError=function(){var n=go.unableToQuerySupportedDevices();return l.isHttpsOrLocalhost()||(n=go.insecureContextCameraQueryError()),Promise.reject(n)},l.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var n=location.host.split(":")[0];return n==="127.0.0.1"||n==="localhost"},l.getCamerasFromMediaDevices=function(){return N2(this,void 0,void 0,function(){var n,o,c,g,f,x,C;return R2(this,function(A){switch(A.label){case 0:return n=function(E){for(var S=E.getVideoTracks(),N=0,D=S;N<D.length;N++){var P=D[N];P.enabled=!1,P.stop(),E.removeTrack(P)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return o=A.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(c=A.sent(),g=[],f=0,x=c;f<x.length;f++)C=x[f],C.kind==="videoinput"&&g.push({id:C.deviceId,label:C.label});return n(o),[2,g]}})})},l.getCamerasFromMediaStreamTrack=function(){return new Promise(function(n,o){var c=function(f){for(var x=[],C=0,A=f;C<A.length;C++){var E=A[C];E.kind==="video"&&x.push({id:E.id,label:E.label})}n(x)},g=MediaStreamTrack;g.getSources(c)})},l})(),$t;(function(l){l[l.UNKNOWN=0]="UNKNOWN",l[l.NOT_STARTED=1]="NOT_STARTED",l[l.SCANNING=2]="SCANNING",l[l.PAUSED=3]="PAUSED"})($t||($t={}));var k2=(function(){function l(){this.state=$t.NOT_STARTED,this.onGoingTransactionNewState=$t.UNKNOWN}return l.prototype.directTransition=function(n){this.failIfTransitionOngoing(),this.validateTransition(n),this.state=n},l.prototype.startTransition=function(n){return this.failIfTransitionOngoing(),this.validateTransition(n),this.onGoingTransactionNewState=n,this},l.prototype.execute=function(){if(this.onGoingTransactionNewState===$t.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var n=this.onGoingTransactionNewState;this.onGoingTransactionNewState=$t.UNKNOWN,this.directTransition(n)},l.prototype.cancel=function(){if(this.onGoingTransactionNewState===$t.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=$t.UNKNOWN},l.prototype.getState=function(){return this.state},l.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==$t.UNKNOWN)throw"Cannot transition to a new state, already under transition"},l.prototype.validateTransition=function(n){switch(this.state){case $t.UNKNOWN:throw"Transition from unknown is not allowed";case $t.NOT_STARTED:this.failIfNewStateIs(n,[$t.PAUSED]);break;case $t.SCANNING:break;case $t.PAUSED:break}},l.prototype.failIfNewStateIs=function(n,o){for(var c=0,g=o;c<g.length;c++){var f=g[c];if(n===f)throw"Cannot transition from ".concat(this.state," to ").concat(n)}},l})(),D2=(function(){function l(n){this.stateManager=n}return l.prototype.startTransition=function(n){return this.stateManager.startTransition(n)},l.prototype.directTransition=function(n){this.stateManager.directTransition(n)},l.prototype.getState=function(){return this.stateManager.getState()},l.prototype.canScanFile=function(){return this.stateManager.getState()===$t.NOT_STARTED},l.prototype.isScanning=function(){return this.stateManager.getState()!==$t.NOT_STARTED},l.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===$t.SCANNING},l.prototype.isPaused=function(){return this.stateManager.getState()===$t.PAUSED},l})(),P2=(function(){function l(){}return l.create=function(){return new D2(new k2)},l})(),M2=(function(){var l=function(n,o){return l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,g){c.__proto__=g}||function(c,g){for(var f in g)Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])},l(n,o)};return function(n,o){if(typeof o!="function"&&o!==null)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");l(n,o);function c(){this.constructor=n}n.prototype=o===null?Object.create(o):(c.prototype=o.prototype,new c)}})(),cn=(function(l){M2(n,l);function n(){return l!==null&&l.apply(this,arguments)||this}return n.DEFAULT_WIDTH=300,n.DEFAULT_WIDTH_OFFSET=2,n.FILE_SCAN_MIN_HEIGHT=300,n.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,n.MIN_QR_BOX_SIZE=50,n.SHADED_LEFT=1,n.SHADED_RIGHT=2,n.SHADED_TOP=3,n.SHADED_BOTTOM=4,n.SHADED_REGION_ELEMENT_ID="qr-shaded-region",n.VERBOSE=!1,n.BORDER_SHADER_DEFAULT_COLOR="#ffffff",n.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",n})(h2),L2=(function(){function l(n,o){this.logger=o,this.fps=cn.SCAN_DEFAULT_FPS,n?(n.fps&&(this.fps=n.fps),this.disableFlip=n.disableFlip===!0,this.qrbox=n.qrbox,this.aspectRatio=n.aspectRatio,this.videoConstraints=n.videoConstraints):this.disableFlip=cn.DEFAULT_DISABLE_FLIP}return l.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?xg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},l.prototype.isShadedBoxEnabled=function(){return!fi(this.qrbox)},l.create=function(n,o){return new l(n,o)},l})(),B2=(function(){function l(n,o){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(n))throw"HTML Element with id=".concat(n," not found");this.elementId=n,this.verbose=!1;var c;typeof o=="boolean"?this.verbose=o===!0:o&&(c=o,this.verbose=c.verbose===!0,c.experimentalFeatures),this.logger=new g2(this.verbose),this.qrcode=new E2(this.getSupportedFormats(o),this.getUseBarCodeDetectorIfSupported(c),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=P2.create()}return l.prototype.start=function(n,o,c,g){var f=this;if(!n)throw"cameraIdOrConfig is required";if(!c||typeof c!="function")throw"qrCodeSuccessCallback is required and should be a function.";var x;g?x=g:x=this.verbose?this.logger.log:function(){};var C=L2.create(o,this.logger);this.clearElement();var A=!1;C.videoConstraints&&(C.isMediaStreamConstraintsValid()?A=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var E=A,S=document.getElementById(this.elementId);S.clientWidth?S.clientWidth:cn.DEFAULT_WIDTH,S.style.position="relative",this.shouldScan=!0,this.element=S;var N=this,D=this.stateManagerProxy.startTransition($t.SCANNING);return new Promise(function(P,U){var F=E?C.videoConstraints:N.createVideoConstraints(n);if(!F){D.cancel(),U("videoConstraints should be defined");return}var j={};(!E||C.aspectRatio)&&(j.aspectRatio=C.aspectRatio);var K={onRenderSurfaceReady:function(J,V){N.setupUi(J,V,C),N.isScanning=!0,N.foreverScan(C,c,x)}};T2.failIfNotSupported().then(function(J){J.create(F).then(function(V){return V.render(f.element,j,K).then(function(oe){N.renderedCamera=oe,D.execute(),P(null)}).catch(function(oe){D.cancel(),U(oe)})}).catch(function(V){D.cancel(),U(go.errorGettingUserMedia(V))})}).catch(function(J){D.cancel(),U(go.cameraStreamingNotSupported())})})},l.prototype.pause=function(n){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition($t.PAUSED),this.showPausedState(),(fi(n)||n!==!0)&&(n=!1),n&&this.renderedCamera&&this.renderedCamera.pause()},l.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var n=this,o=function(){n.stateManagerProxy.directTransition($t.SCANNING),n.hidePausedState()};if(!this.renderedCamera.isPaused()){o();return}this.renderedCamera.resume(function(){o()})},l.prototype.getState=function(){return this.stateManagerProxy.getState()},l.prototype.stop=function(){var n=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var o=this.stateManagerProxy.startTransition($t.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var c=function(){if(n.element){var f=document.getElementById(cn.SHADED_REGION_ELEMENT_ID);f&&n.element.removeChild(f)}},g=this;return this.renderedCamera.close().then(function(){return g.renderedCamera=null,g.element&&(g.element.removeChild(g.canvasElement),g.canvasElement=null),c(),g.qrRegion&&(g.qrRegion=null),g.context&&(g.context=null),o.execute(),g.hidePausedState(),g.isScanning=!1,Promise.resolve()})},l.prototype.scanFile=function(n,o){return this.scanFileV2(n,o).then(function(c){return c.decodedText})},l.prototype.scanFileV2=function(n,o){var c=this;if(!n||!(n instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(fi(o)&&(o=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(g,f){c.possiblyCloseLastScanImageFile(),c.clearElement(),c.lastScanImageFile=URL.createObjectURL(n);var x=new Image;x.onload=function(){var C=x.width,A=x.height,E=document.getElementById(c.elementId),S=E.clientWidth?E.clientWidth:cn.DEFAULT_WIDTH,N=Math.max(E.clientHeight?E.clientHeight:A,cn.FILE_SCAN_MIN_HEIGHT),D=c.computeCanvasDrawConfig(C,A,S,N);if(o){var P=c.createCanvasElement(S,N,"qr-canvas-visible");P.style.display="inline-block",E.appendChild(P);var U=P.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=S,U.canvas.height=N,U.drawImage(x,0,0,C,A,D.x,D.y,D.width,D.height)}var F=cn.FILE_SCAN_HIDDEN_CANVAS_PADDING,j=Math.max(x.width,D.width),K=Math.max(x.height,D.height),J=j+2*F,V=K+2*F,oe=c.createCanvasElement(J,V);E.appendChild(oe);var _e=oe.getContext("2d");if(!_e)throw"Unable to get 2d context from canvas";_e.canvas.width=J,_e.canvas.height=V,_e.drawImage(x,0,0,C,A,F,F,j,K);try{c.qrcode.decodeRobustlyAsync(oe).then(function(xe){g(A0.createFromQrcodeResult(xe))}).catch(f)}catch(xe){f("QR code parse error, error = ".concat(xe))}},x.onerror=f,x.onabort=f,x.onstalled=f,x.onsuspend=f,x.src=URL.createObjectURL(n)})},l.prototype.clear=function(){this.clearElement()},l.getCameras=function(){return O2.retrieve()},l.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},l.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},l.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},l.prototype.applyVideoConstraints=function(n){if(n){if(!xg.isMediaStreamConstraintsValid(n,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(n)},l.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},l.prototype.getSupportedFormats=function(n){var o=[Ae.QR_CODE,Ae.AZTEC,Ae.CODABAR,Ae.CODE_39,Ae.CODE_93,Ae.CODE_128,Ae.DATA_MATRIX,Ae.MAXICODE,Ae.ITF,Ae.EAN_13,Ae.EAN_8,Ae.PDF_417,Ae.RSS_14,Ae.RSS_EXPANDED,Ae.UPC_A,Ae.UPC_E,Ae.UPC_EAN_EXTENSION];if(!n||typeof n=="boolean"||!n.formatsToSupport)return o;if(!Array.isArray(n.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(n.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var c=[],g=0,f=n.formatsToSupport;g<f.length;g++){var x=f[g];d2(x)?c.push(x):this.logger.warn("Invalid format: ".concat(x," passed in config, ignoring."))}if(c.length===0)throw"None of formatsToSupport match supported values.";return c},l.prototype.getUseBarCodeDetectorIfSupported=function(n){if(fi(n))return!0;if(!fi(n.useBarCodeDetectorIfSupported))return n.useBarCodeDetectorIfSupported!==!1;if(fi(n.experimentalFeatures))return!0;var o=n.experimentalFeatures;return fi(o.useBarCodeDetectorIfSupported)?!0:o.useBarCodeDetectorIfSupported!==!1},l.prototype.validateQrboxSize=function(n,o,c){var g=this,f=c.qrbox;this.validateQrboxConfig(f);var x=this.toQrdimensions(n,o,f),C=function(E){if(E<cn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(cn.MIN_QR_BOX_SIZE,"px.")},A=function(E){return E>n&&(g.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),E=n),E};C(x.width),C(x.height),x.width=A(x.width)},l.prototype.validateQrboxConfig=function(n){if(typeof n!="number"&&typeof n!="function"&&(n.width===void 0||n.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},l.prototype.toQrdimensions=function(n,o,c){if(typeof c=="number")return{width:c,height:c};if(typeof c=="function")try{return c(n,o)}catch(g){throw new Error("qrbox config was passed as a function but it failed with unknown error"+g)}return c},l.prototype.setupUi=function(n,o,c){c.isShadedBoxEnabled()&&this.validateQrboxSize(n,o,c);var g=fi(c.qrbox)?{width:n,height:o}:c.qrbox;this.validateQrboxConfig(g);var f=this.toQrdimensions(n,o,g);f.height>o&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var x=c.isShadedBoxEnabled()&&f.height<=o,C={x:0,y:0,width:n,height:o},A=x?this.getShadedRegionBounds(n,o,f):C,E=this.createCanvasElement(A.width,A.height),S={willReadFrequently:!0},N=E.getContext("2d",S);N.canvas.width=A.width,N.canvas.height=A.height,this.element.append(E),x&&this.possiblyInsertShadingElement(this.element,n,o,f),this.createScannerPausedUiElement(this.element),this.qrRegion=A,this.context=N,this.canvasElement=E},l.prototype.createScannerPausedUiElement=function(n){var o=document.createElement("div");o.innerText=go.scannerPaused(),o.style.display="none",o.style.position="absolute",o.style.top="0px",o.style.zIndex="1",o.style.background="rgba(9, 9, 9, 0.46)",o.style.color="#FFECEC",o.style.textAlign="center",o.style.width="100%",n.appendChild(o),this.scannerPausedUiElement=o},l.prototype.scanContext=function(n,o){var c=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(g){return n(g.text,A0.createFromQrcodeResult(g)),c.possiblyUpdateShaders(!0),!0}).catch(function(g){c.possiblyUpdateShaders(!1);var f=go.codeParseError(g);return o(f,f2.createFrom(f)),!1})},l.prototype.foreverScan=function(n,o,c){var g=this;if(this.shouldScan&&this.renderedCamera){var f=this.renderedCamera.getSurface(),x=f.videoWidth/f.clientWidth,C=f.videoHeight/f.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var A=this.qrRegion.width*x,E=this.qrRegion.height*C,S=this.qrRegion.x*x,N=this.qrRegion.y*C;this.context.drawImage(f,S,N,A,E,0,0,this.qrRegion.width,this.qrRegion.height);var D=function(){g.foreverScanTimeout=setTimeout(function(){g.foreverScan(n,o,c)},g.getTimeoutFps(n.fps))};this.scanContext(o,c).then(function(P){!P&&n.disableFlip!==!0?(g.context.translate(g.context.canvas.width,0),g.context.scale(-1,1),g.scanContext(o,c).finally(function(){D()})):D()}).catch(function(P){g.logger.logError("Error happend while scanning context",P),D()})}},l.prototype.createVideoConstraints=function(n){if(typeof n=="string")return{deviceId:{exact:n}};if(typeof n=="object"){var o="facingMode",c="deviceId",g={user:!0,environment:!0},f="exact",x=function(U){if(U in g)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(U,"'")},C=Object.keys(n);if(C.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(C.length," keys");var A=Object.keys(n)[0];if(A!==o&&A!==c)throw"Only '".concat(o,"' and '").concat(c,"' ")+" are supported for 'cameraIdOrConfig'";if(A===o){var E=n.facingMode;if(typeof E=="string"){if(x(E))return{facingMode:E}}else if(typeof E=="object")if(f in E){if(x(E["".concat(f)]))return{facingMode:{exact:E["".concat(f)]}}}else throw"'facingMode' should be string or object with"+" ".concat(f," as key.");else{var S=typeof E;throw"Invalid type of 'facingMode' = ".concat(S)}}else{var N=n.deviceId;if(typeof N=="string")return{deviceId:N};if(typeof N=="object"){if(f in N)return{deviceId:{exact:N["".concat(f)]}};throw"'deviceId' should be string or object with"+" ".concat(f," as key.")}else{var D=typeof N;throw"Invalid type of 'deviceId' = ".concat(D)}}}var P=typeof n;throw"Invalid type of 'cameraIdOrConfig' = ".concat(P)},l.prototype.computeCanvasDrawConfig=function(n,o,c,g){if(n<=c&&o<=g){var f=(c-n)/2,x=(g-o)/2;return{x:f,y:x,width:n,height:o}}else{var C=n,A=o;return n>c&&(o=c/n*o,n=c),o>g&&(n=g/o*n,o=g),this.logger.log("Image downsampled from "+"".concat(C,"X").concat(A)+" to ".concat(n,"X").concat(o,".")),this.computeCanvasDrawConfig(n,o,c,g)}},l.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var n=document.getElementById(this.elementId);n&&(n.innerHTML="")},l.prototype.possiblyUpdateShaders=function(n){this.qrMatch!==n&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(o){o.style.backgroundColor=n?cn.BORDER_SHADER_MATCH_COLOR:cn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=n)},l.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},l.prototype.createCanvasElement=function(n,o,c){var g=n,f=o,x=document.createElement("canvas");return x.style.width="".concat(g,"px"),x.style.height="".concat(f,"px"),x.style.display="none",x.id=fi(c)?"qr-canvas":c,x},l.prototype.getShadedRegionBounds=function(n,o,c){if(c.width>n||c.height>o)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(n-c.width)/2,y:(o-c.height)/2,width:c.width,height:c.height}},l.prototype.possiblyInsertShadingElement=function(n,o,c,g){if(!(o-g.width<1||c-g.height<1)){var f=document.createElement("div");f.style.position="absolute";var x=(o-g.width)/2,C=(c-g.height)/2;if(f.style.borderLeft="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderRight="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderTop="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),f.style.borderBottom="".concat(C,"px solid rgba(0, 0, 0, 0.48)"),f.style.boxSizing="border-box",f.style.top="0px",f.style.bottom="0px",f.style.left="0px",f.style.right="0px",f.id="".concat(cn.SHADED_REGION_ELEMENT_ID),o-g.width<11||c-g.height<11)this.hasBorderShaders=!1;else{var A=5,E=40;this.insertShaderBorders(f,E,A,-A,null,0,!0),this.insertShaderBorders(f,E,A,-A,null,0,!1),this.insertShaderBorders(f,E,A,null,-A,0,!0),this.insertShaderBorders(f,E,A,null,-A,0,!1),this.insertShaderBorders(f,A,E+A,-A,null,-A,!0),this.insertShaderBorders(f,A,E+A,null,-A,-A,!0),this.insertShaderBorders(f,A,E+A,-A,null,-A,!1),this.insertShaderBorders(f,A,E+A,null,-A,-A,!1),this.hasBorderShaders=!0}n.append(f)}},l.prototype.insertShaderBorders=function(n,o,c,g,f,x,C){var A=document.createElement("div");A.style.position="absolute",A.style.backgroundColor=cn.BORDER_SHADER_DEFAULT_COLOR,A.style.width="".concat(o,"px"),A.style.height="".concat(c,"px"),g!==null&&(A.style.top="".concat(g,"px")),f!==null&&(A.style.bottom="".concat(f,"px")),C?A.style.left="".concat(x,"px"):A.style.right="".concat(x,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(A),n.appendChild(A)},l.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},l.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},l.prototype.getTimeoutFps=function(n){return 1e3/n},l})(),k0;(function(l){l[l.STATUS_DEFAULT=0]="STATUS_DEFAULT",l[l.STATUS_SUCCESS=1]="STATUS_SUCCESS",l[l.STATUS_WARNING=2]="STATUS_WARNING",l[l.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(k0||(k0={}));const Ed=({onScan:l,label:n="Scan Device ID",placeholder:o="Click to focus & scan..."})=>{const[c,g]=Z.useState(""),[f,x]=Z.useState(!1),[C,A]=Z.useState(null),E=Z.useRef(null),S=Z.useRef(`scanner-${Math.random().toString(36).substr(2,9)}`).current,N=Z.useRef(null);Z.useEffect(()=>{var P;(P=E.current)==null||P.focus()},[]);const D=P=>{P.preventDefault(),c.trim()&&(l(c.trim()),g(""))};return Z.useEffect(()=>{if(f){A(null);const P=setTimeout(()=>{const U=new B2(S);N.current=U;const F={fps:10,qrbox:{width:250,height:250},aspectRatio:1};Ae.QR_CODE,Ae.CODE_128,Ae.CODE_39,Ae.EAN_13,Ae.UPC_A,U.start({facingMode:"environment"},F,j=>{console.log("Scanned:",j),l(j),U.stop().then(()=>{U.clear(),x(!1)}).catch(K=>console.error("Failed to stop scanner",K))},j=>{}).catch(j=>{console.error("Error starting scanner",j),A("Could not access camera. Please ensure permissions are granted.")})},100);return()=>clearTimeout(P)}else N.current&&N.current.isScanning&&(N.current.stop().then(()=>{var P;return(P=N.current)==null?void 0:P.clear()}).catch(console.error),N.current=null);return()=>{N.current&&N.current.isScanning&&N.current.stop().then(()=>{var P;return(P=N.current)==null?void 0:P.clear()}).catch(console.error)}},[f,S,l]),R.jsxs("div",{className:"w-full space-y-4",children:[R.jsxs("div",{className:"flex justify-between items-end",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:n}),R.jsx("button",{onClick:()=>x(!f),type:"button",className:"text-sm text-cyan-600 hover:text-cyan-800 font-medium transition-colors",children:f?"Close Camera":"Use Camera"})]}),f?R.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden shadow-lg",style:{minHeight:"300px"},children:[R.jsx("div",{id:S,className:"w-full h-full"}),R.jsx("div",{className:"absolute inset-0 pointer-events-none flex items-center justify-center",children:R.jsxs("div",{className:"w-64 h-48 border-2 border-cyan-400/80 rounded-lg relative",children:[R.jsx("div",{className:"absolute top-0 left-0 w-4 h-4 border-t-4 border-l-4 border-cyan-400 -mt-1 -ml-1"}),R.jsx("div",{className:"absolute top-0 right-0 w-4 h-4 border-t-4 border-r-4 border-cyan-400 -mt-1 -mr-1"}),R.jsx("div",{className:"absolute bottom-0 left-0 w-4 h-4 border-b-4 border-l-4 border-cyan-400 -mb-1 -ml-1"}),R.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 border-b-4 border-r-4 border-cyan-400 -mb-1 -mr-1"}),R.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-red-500/50"})]})}),C&&R.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/80 text-white p-6 text-center",children:R.jsx("p",{children:C})})]}):R.jsxs("form",{onSubmit:D,className:"flex gap-2",children:[R.jsxs("div",{className:"relative flex-1",children:[R.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:R.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),R.jsx("input",{ref:E,type:"text",value:c,onChange:P=>g(P.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors shadow-sm outline-none",placeholder:o})]}),R.jsx(qr,{type:"submit",disabled:!c,className:"h-full",children:"Enter"})]}),R.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[R.jsx("span",{className:"inline-block w-4 h-4 bg-gray-100 border rounded text-center leading-none font-mono",children:""}),"Press Enter or use a handheld scanner"]})]})},j2=({hasToken:l,adminId:n,adminName:o,onOpenSettings:c})=>{const[g,f]=Z.useState({step:"select-customer",selectedCustomer:null,oldDevice:null,newDevice:null}),[x,C]=Z.useState([]),[A,E]=Z.useState([]),[S,N]=Z.useState(!1),[D,P]=Z.useState(null),[U,F]=Z.useState(""),[j,K]=Z.useState([]),J=async()=>{N(!0),P(null);try{let he=[];l?he=await An.getCustomers():(await new Promise(He=>setTimeout(He,600)),he=Q0),C(he);const ne=U.toLowerCase(),Me=he.filter(He=>{var ve,$e,ct,ie;return((ve=He.name)==null?void 0:ve.toLowerCase().includes(ne))||(($e=He.first_name)==null?void 0:$e.toLowerCase().includes(ne))||((ct=He.last_name)==null?void 0:ct.toLowerCase().includes(ne))||((ie=He.email)==null?void 0:ie.toLowerCase().includes(ne))});K(Me)}catch(he){P(he.message||"Failed to fetch customers")}finally{N(!1)}},V=async he=>{N(!0);try{let ne=[];l?ne=await An.getInventory():ne=pa;const Me=ne.filter(He=>He.customer_id===he.id&&He.status==="assigned");E(Me),f(He=>({...He,selectedCustomer:he,step:"select-old-device"}))}catch{P("Could not fetch customer inventory")}finally{N(!1)}},oe=he=>{f(ne=>({...ne,oldDevice:he,step:"scan-new-device"}))},_e=async he=>{N(!0),P(null);try{let ne=[];l?ne=await An.getInventory():(await new Promise($e=>setTimeout($e,800)),pa.find($e=>$e.deviceId===he)?ne=pa:ne=[...pa,{id:"new_gen",deviceId:he,status:"in_stock",customer_id:void 0,model:"Gen 3 Device"}]);const Me=he.trim().toLowerCase(),He=ne.find(ve=>String(ve.deviceId).trim().toLowerCase()===Me||String(ve.id).trim().toLowerCase()===Me||ve.iccid&&String(ve.iccid).trim().toLowerCase()===Me||ve.imei&&String(ve.imei).trim().toLowerCase()===Me||ve.barcode&&String(ve.barcode).trim().toLowerCase()===Me||ve.serialNumber&&String(ve.serialNumber).trim().toLowerCase()===Me);if(!He)throw new Error(`Device with Barcode/ID ${he} not found in inventory.`);if(He.status==="assigned"&&He.customer_id)throw new Error(`Device ${He.deviceId} is already assigned to another customer.`);if(He.status==="defective")throw new Error(`Device ${He.deviceId} is marked as defective.`);f(ve=>({...ve,newDevice:He,step:"confirm"}))}catch(ne){if(P(ne.message),g.selectedCustomer&&g.oldDevice&&n){const Me=parseInt(n,10),He=!isNaN(Me)&&Me!==0?Me:n;ed({Customer_ID:g.selectedCustomer.customer_Id||g.selectedCustomer.id,Customer_Name:`${g.selectedCustomer.first_name||""} ${g.selectedCustomer.last_name||""}`.trim()||g.selectedCustomer.name||"Unknown",admin_id:He,Admin_Name:o,Old_Device:g.oldDevice.barcode||g.oldDevice.deviceId,New_Device:he,Date:new Date().toISOString(),status:ne.message}).catch(ve=>console.error("Failed to log validation error to history:",ve))}}finally{N(!1)}},xe=async()=>{if(!g.oldDevice||!g.newDevice||!g.selectedCustomer)return;if(!n||n==="undefined"){alert("Session Error: Admin ID missing. Please refresh the page or log out and log in again.");return}N(!0);const ne=(()=>{const Me=parseInt(n,10);return!isNaN(Me)&&Me!==0?Me:n})();try{if(!l)await new Promise(Me=>setTimeout(Me,2e3));else{await An.returnDevice(g.oldDevice.id);const Me=g.selectedCustomer.customer_Id||g.selectedCustomer.id;await An.assignDevice(g.newDevice.id,Me),await ed({Customer_ID:Me,Customer_Name:`${g.selectedCustomer.first_name||""} ${g.selectedCustomer.last_name||""}`.trim()||g.selectedCustomer.name||"Unknown",admin_id:ne,Admin_Name:o,Old_Device:g.oldDevice.barcode||g.oldDevice.deviceId,New_Device:g.newDevice.barcode||g.newDevice.deviceId,Date:new Date().toISOString(),status:"success"})}alert(`Swap Successful!
Old Device Returned: ${g.oldDevice.deviceId}
New Device Assigned: ${g.newDevice.deviceId}

Transaction logged to history.`),f({step:"select-customer",selectedCustomer:null,oldDevice:null,newDevice:null}),F(""),K([]),C([])}catch(Me){try{await ed({Customer_ID:g.selectedCustomer.customer_Id||g.selectedCustomer.id,Customer_Name:`${g.selectedCustomer.first_name||""} ${g.selectedCustomer.last_name||""}`.trim()||g.selectedCustomer.name||"Unknown",admin_id:ne,Admin_Name:o,Old_Device:g.oldDevice.barcode||g.oldDevice.deviceId,New_Device:g.newDevice.barcode||g.newDevice.deviceId,Date:new Date().toISOString(),status:Me.message||"Unknown Error"})}catch(He){console.error("Failed to log failure record to DB",He)}Me.message&&Me.message.includes("foreign key constraint")?P(`Database Error: Your login session ID (${n}) does not match an active Admin record. Please Log Out and Sign In again.`):P(`Swap failed: ${Me.message}`)}finally{N(!1)}},se=()=>R.jsxs("div",{className:"flex items-center text-sm mb-8 overflow-x-auto pb-2",children:[R.jsxs("div",{className:`flex items-center ${g.step==="select-customer"?"text-pink-600 font-bold":"text-gray-500"}`,children:[R.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${g.step==="select-customer"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"1"}),"Find Customer"]}),R.jsx("div",{className:"mx-4 text-gray-300",children:"/"}),R.jsxs("div",{className:`flex items-center ${g.step==="select-old-device"?"text-pink-600 font-bold":"text-gray-500"}`,children:[R.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${g.step==="select-old-device"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"2"}),"Select Old"]}),R.jsx("div",{className:"mx-4 text-gray-300",children:"/"}),R.jsxs("div",{className:`flex items-center ${g.step==="scan-new-device"?"text-pink-600 font-bold":"text-gray-500"}`,children:[R.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${g.step==="scan-new-device"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"3"}),"Scan New"]}),R.jsx("div",{className:"mx-4 text-gray-300",children:"/"}),R.jsxs("div",{className:`flex items-center ${g.step==="confirm"?"text-pink-600 font-bold":"text-gray-500"}`,children:[R.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${g.step==="confirm"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"4"}),"Confirm"]})]});return R.jsxs("div",{children:[se(),D&&R.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-r-lg flex justify-between items-center",children:[R.jsxs("div",{className:"flex",children:[R.jsx("div",{className:"flex-shrink-0",children:R.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:R.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),R.jsx("div",{className:"ml-3",children:R.jsx("p",{className:"text-sm text-red-700",children:D})})]}),R.jsx("button",{onClick:()=>P(null),className:"text-red-500 hover:text-red-700",children:""})]}),g.step==="select-customer"&&R.jsx("div",{className:"max-w-2xl mx-auto",children:R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Find Customer"}),R.jsx("p",{className:"text-gray-500 mb-6",children:"Search by name, email, or customer ID to begin the swap process."}),R.jsxs("div",{className:"flex gap-2 mb-6",children:[R.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all",placeholder:"Search customers...",value:U,onChange:he=>F(he.target.value),onKeyDown:he=>he.key==="Enter"&&J()}),R.jsx(qr,{onClick:J,isLoading:S,children:"Search"})]}),R.jsxs("div",{className:"space-y-2",children:[j.length>0?j.map(he=>R.jsxs("div",{className:"p-4 border rounded-lg hover:border-pink-500 hover:bg-pink-50 cursor-pointer transition-all flex justify-between items-center group",onClick:()=>V(he),children:[R.jsxs("div",{children:[R.jsxs("p",{className:"font-medium text-gray-900",children:[he.first_name," ",he.last_name," ",he.name]}),R.jsx("p",{className:"text-sm text-gray-500",children:he.email})]}),R.jsx("div",{className:"text-pink-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Select "})]},he.id)):U&&!S&&R.jsx("div",{className:"text-center text-gray-500 py-8",children:"No customers found."}),!l&&!S&&j.length===0&&R.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[R.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Using Mock Data Mode"}),R.jsx(qr,{variant:"secondary",onClick:()=>{F("John"),J()},children:'Try Searching "John"'}),R.jsx("p",{className:"text-xs text-gray-400 mt-2 cursor-pointer hover:underline",onClick:c,children:"Or Configure API Token"})]})]})]})}),g.step==="select-old-device"&&g.selectedCustomer&&R.jsx("div",{className:"max-w-2xl mx-auto",children:R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[R.jsxs("div",{className:"flex justify-between items-start mb-6",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Select Device to Return"}),R.jsxs("p",{className:"text-gray-500",children:["Which device is ",g.selectedCustomer.first_name||g.selectedCustomer.name," returning?"]})]}),R.jsx(qr,{variant:"secondary",onClick:()=>f(he=>({...he,step:"select-customer"})),children:"Change Customer"})]}),A.length===0?R.jsxs("div",{className:"text-center py-12 bg-yellow-50 rounded-lg border border-yellow-100",children:[R.jsx("p",{className:"text-yellow-800 font-medium mb-2",children:"No assigned devices found"}),R.jsx("p",{className:"text-sm text-yellow-600",children:"This customer has no active inventory assigned."})]}):R.jsx("div",{className:"grid gap-3",children:A.map(he=>R.jsxs("div",{onClick:()=>oe(he),className:"p-4 border border-gray-200 rounded-lg flex justify-between items-center cursor-pointer hover:border-red-400 hover:bg-red-50 transition-all group",children:[R.jsxs("div",{className:"flex items-center gap-4",children:[R.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 group-hover:bg-white",children:R.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),R.jsxs("div",{children:[R.jsx("p",{className:"font-bold text-gray-900 text-lg",children:he.deviceId||"No Barcode"}),he.model&&R.jsx("p",{className:"text-sm text-gray-500",children:he.model}),!he.model&&R.jsx("p",{className:"text-xs text-gray-400",children:"Standard Device"})]})]}),R.jsx("div",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Active"})]},he.id))})]})}),g.step==="scan-new-device"&&g.oldDevice&&R.jsx("div",{className:"max-w-2xl mx-auto",children:R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[R.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-100",children:[R.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[R.jsx("span",{children:"Returning:"}),R.jsx("span",{className:"font-mono bg-red-100 text-red-700 px-2 rounded",children:g.oldDevice.deviceId})]}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan New Device"}),R.jsx("p",{className:"text-gray-500",children:"Scan the barcode (ICCID/IMEI/Serial) of the replacement unit."})]}),R.jsx(Ed,{onScan:_e}),S&&R.jsx("p",{className:"text-center text-pink-600 mt-4 animate-pulse",children:"Verifying inventory..."}),R.jsx("div",{className:"mt-6 pt-6 border-t border-gray-100 flex justify-between",children:R.jsx(qr,{variant:"secondary",onClick:()=>f(he=>({...he,step:"select-old-device"})),children:"Back"})})]})}),g.step==="confirm"&&g.oldDevice&&g.newDevice&&g.selectedCustomer&&R.jsxs("div",{className:"max-w-3xl mx-auto",children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Confirm Swap Transaction"}),R.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[R.jsxs("div",{className:"bg-white p-6 rounded-xl border border-red-200 shadow-sm relative overflow-hidden",children:[R.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:R.jsx("svg",{className:"w-24 h-24 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),R.jsx("h3",{className:"text-red-600 font-bold uppercase tracking-wider text-sm mb-4",children:"Inbound (Return)"}),R.jsxs("div",{className:"space-y-3 relative z-10",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-xs text-gray-500",children:"Device Barcode"}),R.jsx("p",{className:"text-xl font-mono font-bold text-gray-900",children:g.oldDevice.deviceId})]}),R.jsxs("div",{children:[R.jsx("label",{className:"text-xs text-gray-500",children:"Current Status"}),R.jsx("p",{className:"text-gray-700",children:g.oldDevice.status})]}),R.jsxs("div",{children:[R.jsx("label",{className:"text-xs text-gray-500",children:"New Status"}),R.jsx("p",{className:"text-red-600 font-bold",children:"Returned"})]})]})]}),R.jsxs("div",{className:"bg-white p-6 rounded-xl border border-green-200 shadow-sm relative overflow-hidden",children:[R.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:R.jsx("svg",{className:"w-24 h-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),R.jsx("h3",{className:"text-green-600 font-bold uppercase tracking-wider text-sm mb-4",children:"Outbound (Assign)"}),R.jsxs("div",{className:"space-y-3 relative z-10",children:[R.jsxs("div",{children:[R.jsx("label",{className:"text-xs text-gray-500",children:"Device Barcode"}),R.jsx("p",{className:"text-xl font-mono font-bold text-gray-900",children:g.newDevice.deviceId})]}),R.jsxs("div",{children:[R.jsx("label",{className:"text-xs text-gray-500",children:"Customer"}),R.jsxs("p",{className:"text-gray-900 font-medium",children:[g.selectedCustomer.first_name," ",g.selectedCustomer.last_name]}),R.jsx("p",{className:"text-xs text-gray-400",children:g.selectedCustomer.id})]}),R.jsxs("div",{children:[R.jsx("label",{className:"text-xs text-gray-500",children:"New Status"}),R.jsx("p",{className:"text-green-600 font-bold",children:"Assigned"})]})]})]})]}),R.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-6 rounded-xl",children:[R.jsx(qr,{variant:"secondary",onClick:()=>f(he=>({...he,step:"scan-new-device"})),children:"Back"}),R.jsxs("div",{className:"flex gap-4",children:[!l&&R.jsx("p",{className:"text-xs text-orange-500 self-center max-w-[200px] text-right",children:"Running in demo mode (simulated API calls)."}),R.jsx(qr,{onClick:xe,isLoading:S,className:"w-48 shadow-lg shadow-pink-200",children:"Confirm Swap"})]})]})]})]})},F2=({onLoginSuccess:l})=>{const[n,o]=Z.useState(""),[c,g]=Z.useState(""),[f,x]=Z.useState(!1),[C,A]=Z.useState(null),E=async S=>{if(S.preventDefault(),!(!n||!c)){x(!0),A(null);try{const N=await o2(n,c);N.success&&N.name&&N.id?l(N.name,N.id):A(N.error||"Invalid phone number or password.")}catch(N){A(N.message||"An error occurred during login. Please try again.")}finally{x(!1)}}};return R.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:R.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 border border-gray-100",children:[R.jsxs("div",{className:"flex flex-col items-center mb-8",children:[R.jsx("img",{src:"https://thabisot33.github.io/logo/Umoja%20Logo%20Web_320x86_png.png",alt:"Umoja Logo",className:"h-16 w-auto mb-4"}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Login"}),R.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please sign in to access inventory swap."})]}),C&&R.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 flex items-center",children:[R.jsx("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:R.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),C]}),R.jsxs("form",{onSubmit:E,className:"space-y-6",children:[R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),R.jsx("input",{type:"text",value:n,onChange:S=>o(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all",placeholder:"Enter your phone number",required:!0})]}),R.jsxs("div",{children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),R.jsx("input",{type:"password",value:c,onChange:S=>g(S.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all",placeholder:"Enter your password",required:!0})]}),R.jsx(qr,{type:"submit",isLoading:f,className:"w-full shadow-lg shadow-pink-200",children:"Sign In"})]}),R.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:"Umoja Inventory System v2.0"})]})})},U2=({adminId:l,adminName:n})=>{const[o,c]=Z.useState("swap"),[g,f]=Z.useState([]),[x,C]=Z.useState([]),[A,E]=Z.useState(!0),[S,N]=Z.useState(null);return Z.useEffect(()=>{l&&(async()=>{if(o==="swap")try{E(!0),N(null);const P=parseInt(l,10),U=!isNaN(P)&&P!==0?P:l,F=await a2(U);f(F)}catch{N("Failed to load swap history.")}finally{E(!1)}})()},[l,o]),Z.useEffect(()=>{n&&(async()=>{if(o==="collection")try{E(!0),N(null);const P=await u2(n);C(P)}catch{N("Failed to load collection history.")}finally{E(!1)}})()},[n,o]),R.jsxs("div",{className:"max-w-6xl mx-auto",children:[R.jsxs("div",{className:"flex justify-between items-center mb-6",children:[R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Transaction History"}),R.jsx("p",{className:"text-gray-500",children:"View records of your device swaps and collections."})]}),R.jsx(Ki,{to:"/",className:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 px-4 py-2 rounded-lg font-medium shadow-sm transition-colors",children:" Back to Dashboard"})]}),R.jsx("div",{className:"border-b border-gray-200 mb-6",children:R.jsxs("nav",{className:"-mb-px flex space-x-8",children:[R.jsx("button",{onClick:()=>c("swap"),className:`
              whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${o==="swap"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:"Swap History"}),R.jsx("button",{onClick:()=>c("collection"),className:`
              whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${o==="collection"?"border-cyan-500 text-cyan-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:"Collection History"})]})}),A?R.jsx("div",{className:"flex justify-center py-12",children:R.jsx("span",{className:`w-8 h-8 border-4 rounded-full animate-spin ${o==="swap"?"border-pink-200 border-t-pink-600":"border-cyan-200 border-t-cyan-600"}`})}):S?R.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-100",children:S}):R.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:R.jsxs("div",{className:"overflow-x-auto",children:[o==="swap"&&R.jsx(R.Fragment,{children:g.length===0?R.jsx("div",{className:"p-12 text-center text-gray-500",children:"No swap records found."}):R.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Returned"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map((D,P)=>R.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(D.Date).toLocaleString()}),R.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.Customer_Name}),R.jsx("div",{className:"text-xs text-gray-400 font-mono",children:D.Customer_ID})]}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 font-mono",children:D.Old_Device})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:R.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 font-mono",children:D.New_Device})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.status==="success"?R.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Success"}):R.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 max-w-[200px] truncate",title:D.status,children:"Failed"})})]},P))})]})}),o==="collection"&&R.jsx(R.Fragment,{children:x.length===0?R.jsx("div",{className:"p-12 text-center text-gray-500",children:"No collection records found."}):R.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[R.jsx("thead",{className:"bg-gray-50",children:R.jsxs("tr",{children:[R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Router"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SIM"}),R.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Province"})]})}),R.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map((D,P)=>R.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(D.Date).toLocaleString()}),R.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[R.jsx("div",{className:"text-sm font-medium text-gray-900",children:D["Full Name"]}),R.jsx("div",{className:"text-xs text-gray-400 font-mono",children:D["Customer ID"]||"-"})]}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.Barcode?R.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-pink-100 text-pink-800 font-mono",children:D.Barcode}):R.jsx("span",{className:"text-gray-300",children:"-"})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:D.SIM?R.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-100 text-cyan-800 font-mono",children:D.SIM}):R.jsx("span",{className:"text-gray-300",children:"-"})}),R.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:D.Province})]},P))})]})})]})})]})},V2=({hasToken:l,adminName:n})=>{const[o,c]=Z.useState(!1),[g,f]=Z.useState([]),[x,C]=Z.useState(null),[A,E]=Z.useState(null),S=(F,j,K)=>{f(J=>[{id:Math.random().toString(36).substr(2,9),timestamp:new Date,message:F,type:j,details:K},...J])},N=async F=>{let j=[];l?j=await An.getInventory():(await new Promise(V=>setTimeout(V,600)),j=pa);const K=F.trim().toLowerCase(),J=j.find(V=>String(V.deviceId).trim().toLowerCase()===K||String(V.id).trim().toLowerCase()===K||V.iccid&&String(V.iccid).trim().toLowerCase()===K||V.imei&&String(V.imei).trim().toLowerCase()===K||V.barcode&&String(V.barcode).trim().toLowerCase()===K||V.serialNumber&&String(V.serialNumber).trim().toLowerCase()===K);if(!J)throw new Error(`Device ${F} not found in inventory.`);return J},D=async F=>{c(!0);try{const j=await N(F);if(!!j.iccid||j.model&&j.model.toLowerCase().includes("sim"))throw new Error(`Scanned item (${j.deviceId}) appears to be a SIM, not a Router.`);C(j)}catch(j){S(`Router Scan Error: ${j.message}`,"error")}finally{c(!1)}},P=async F=>{c(!0);try{const j=await N(F);E(j)}catch(j){S(`SIM Scan Error: ${j.message}`,"error")}finally{c(!1)}},U=async()=>{if(!x&&!A)return;c(!0);let F="",j="Unknown",K=x?x.barcode||x.deviceId:"",J=A?A.barcode||A.deviceId:"";x&&x.customer_id?F=x.customer_id:A&&A.customer_id&&(F=A.customer_id);try{if(F)if(l){const _e=await An.getCustomer(F);_e&&(j=`${_e.first_name||""} ${_e.last_name||""}`.trim()||_e.name||"Unknown")}else{const _e=Q0.find(xe=>xe.id===F);_e&&(j=`${_e.first_name} ${_e.last_name}`)}x&&(S(`Processing Router: ${x.deviceId}...`,"info"),l&&await An.returnDevice(x.id),S(`Router (${x.deviceId}) marked as RETURNED.`,"success"),x.customer_id?(l&&await An.disableCustomer(x.customer_id),S(`Customer (ID: ${x.customer_id}) status set to DISABLED.`,"success")):S(`No customer linked to Router ${x.deviceId}.`,"info")),A&&(S(`Processing SIM: ${A.deviceId}...`,"info"),l&&await An.returnDevice(A.id),S(`SIM (${A.deviceId}) marked as RETURNED.`,"success"));const V=n;let oe="Gauteng";(V==="Neo"||V==="Ngoako David Railo")&&(oe="Limpopo"),await l2({"Customer ID":F||"N/A","Full Name":j,Barcode:K,SIM:J,Agent:V,Province:oe,Date:new Date().toISOString()}),S("Transaction logged to Collection History.","success"),C(null),E(null),S("Collection transaction completed successfully.","success")}catch(V){S("Transaction Failed","error",V.message)}finally{c(!1)}};return R.jsxs("div",{className:"max-w-5xl mx-auto",children:[R.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[R.jsx("div",{className:"p-3 bg-pink-100 rounded-full text-pink-600",children:R.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),R.jsxs("div",{children:[R.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Device Collection"}),R.jsx("p",{className:"text-gray-500",children:"Scan items to return them to inventory and disable associated customer accounts."})]})]}),R.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[R.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[R.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-6 transition-all ${x?"border-green-200 bg-green-50":"border-gray-200"}`,children:[R.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[R.jsx("span",{className:"w-6 h-6 rounded-full bg-pink-100 text-pink-600 text-xs flex items-center justify-center",children:"1"}),"Router / CPE"]}),x?R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-green-700 font-bold mb-1",children:" Router Identified"}),R.jsx("p",{className:"text-xl font-mono text-gray-900",children:x.deviceId}),R.jsx("p",{className:"text-sm text-gray-500",children:x.model||"Unknown Model"}),x.customer_id&&R.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["Customer ID: ",x.customer_id," (Will be disabled)"]})]}),R.jsx(qr,{variant:"secondary",onClick:()=>C(null),className:"text-sm",children:"Remove"})]}):R.jsx(Ed,{onScan:D,label:"Scan Router Barcode",placeholder:"Focus here to scan router..."})]}),R.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-6 transition-all ${A?"border-green-200 bg-green-50":"border-gray-200"}`,children:[R.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[R.jsx("span",{className:"w-6 h-6 rounded-full bg-cyan-100 text-cyan-600 text-xs flex items-center justify-center",children:"2"}),"SIM Card"]}),A?R.jsxs("div",{className:"flex justify-between items-center",children:[R.jsxs("div",{children:[R.jsx("p",{className:"text-sm text-green-700 font-bold mb-1",children:" SIM Identified"}),R.jsx("p",{className:"text-xl font-mono text-gray-900",children:A.deviceId}),R.jsxs("p",{className:"text-sm text-gray-500",children:["ICCID: ",A.iccid||"N/A"]})]}),R.jsx(qr,{variant:"secondary",onClick:()=>E(null),className:"text-sm",children:"Remove"})]}):R.jsx(Ed,{onScan:P,label:"Scan SIM Barcode",placeholder:"Focus here to scan SIM..."})]}),R.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 flex justify-between items-center",children:[R.jsx("div",{className:"text-sm text-gray-500",children:!x&&!A?"Scan at least one item to proceed.":"Ready to process collection."}),R.jsx(qr,{onClick:U,disabled:!x&&!A||o,isLoading:o,className:"w-48 shadow-lg shadow-pink-200",children:"Confirm Collection"})]})]}),R.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden lg:h-[600px] flex flex-col",children:[R.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[R.jsx("h3",{className:"font-semibold text-gray-700",children:"Activity Log"}),R.jsx(qr,{variant:"ghost",onClick:()=>f([]),disabled:g.length===0,className:"text-xs",children:"Clear"})]}),R.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:g.length===0?R.jsxs("div",{className:"p-8 text-center text-gray-400 text-sm mt-12",children:[R.jsx("div",{className:"mb-2",children:""}),"No activity yet.",R.jsx("br",{}),"Scan a device to begin."]}):R.jsx("div",{className:"divide-y divide-gray-100",children:g.map(F=>R.jsxs("div",{className:"p-4 flex gap-3 hover:bg-gray-50 transition-colors",children:[R.jsxs("div",{className:"flex-shrink-0 mt-1.5",children:[F.type==="success"&&R.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 ring-2 ring-green-100"}),F.type==="error"&&R.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 ring-2 ring-red-100"}),F.type==="info"&&R.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 ring-2 ring-blue-100"})]}),R.jsxs("div",{className:"flex-1 min-w-0",children:[R.jsx("p",{className:`text-sm font-medium break-words ${F.type==="error"?"text-red-700":"text-gray-900"}`,children:F.message}),F.details&&R.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:F.details}),R.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:F.timestamp.toLocaleTimeString()})]})]},F.id))})})]})]})]})},W2=({userName:l})=>R.jsxs("div",{className:"max-w-4xl mx-auto",children:[R.jsxs("div",{className:"text-center mb-12",children:[R.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome, ",R.jsx("span",{className:"text-pink-600",children:l})]}),R.jsx("p",{className:"text-gray-500",children:"What would you like to manage today?"})]}),R.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[R.jsxs(Ki,{to:"/swap",className:"group bg-white rounded-2xl shadow-sm border border-gray-200 p-8 hover:shadow-xl hover:border-pink-300 transition-all duration-300 text-center",children:[R.jsx("div",{className:"w-20 h-20 bg-pink-50 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-pink-100 transition-colors",children:R.jsx("svg",{className:"w-10 h-10 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Swap Device"}),R.jsx("p",{className:"text-gray-500 text-sm",children:"Return an old device and assign a new one to a customer."}),R.jsx("div",{className:"mt-8",children:R.jsx("span",{className:"text-pink-600 font-medium group-hover:underline underline-offset-4",children:"Start Swap "})})]}),R.jsxs(Ki,{to:"/collection",className:"group bg-white rounded-2xl shadow-sm border border-gray-200 p-8 hover:shadow-xl hover:border-cyan-300 transition-all duration-300 text-center",children:[R.jsx("div",{className:"w-20 h-20 bg-cyan-50 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-cyan-100 transition-colors",children:R.jsx("svg",{className:"w-10 h-10 text-cyan-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:R.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),R.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Device Collection"}),R.jsx("p",{className:"text-gray-500 text-sm",children:"Collect returned Routers and SIMs, and update customer status."}),R.jsx("div",{className:"mt-8",children:R.jsx("span",{className:"text-cyan-600 font-medium group-hover:underline underline-offset-4",children:"Start Collection "})})]})]}),R.jsx("div",{className:"mt-12 text-center",children:R.jsx(Ki,{to:"/history",className:"text-sm text-gray-400 hover:text-gray-600 transition-colors",children:"View My Transaction History"})})]}),H2=()=>{const[l,n]=Z.useState([]),[o,c]=Z.useState(!0),[g,f]=Z.useState(null),[x,C]=Z.useState("Initializing...");if(Z.useEffect(()=>{(async()=>{try{c(!0);const P=await c2();C(`Loaded ${P.length} records.`),console.log("Raw Records:",P);const U=new Map;P.forEach(j=>{const K=j.Date||j.date||j.created_at,J=j.Province||j.province;if(!K)return;const V=String(K).replace(" ","T"),oe=new Date(V);if(isNaN(oe.getTime()))return;const _e=oe.toLocaleString("default",{month:"short"}),xe=oe.getFullYear(),se=`${_e} ${xe}`,he=xe*100+oe.getMonth();U.has(se)||U.set(se,{label:se,Gauteng:0,Limpopo:0,sortKey:he});const ne=U.get(se),Me=String(J||"").trim().toLowerCase();Me.includes("gauteng")?ne.Gauteng+=1:Me.includes("limpopo")?ne.Limpopo+=1:ne.Gauteng+=1});const F=Array.from(U.values()).sort((j,K)=>j.sortKey-K.sortKey);console.log("Chart Data:",F),n(F)}catch(P){console.error("Stats Error:",P),f("Failed to load data."),C(`Error: ${P.message}`)}finally{c(!1)}})()},[]),o)return R.jsx("div",{className:"flex justify-center items-center h-96",children:R.jsx("div",{className:"w-10 h-10 border-4 border-pink-200 border-t-pink-600 rounded-full animate-spin"})});if(g)return R.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-100 max-w-2xl mx-auto mt-8",children:g});const A=l.reduce((D,P)=>D+P.Gauteng,0),E=l.reduce((D,P)=>D+P.Limpopo,0),S=A+E,N=Math.max(...l.map(D=>Math.max(D.Gauteng,D.Limpopo)),5);return R.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[R.jsxs("div",{className:"text-center mb-8",children:[R.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Collection Statistics"}),R.jsx("p",{className:"text-gray-500",children:"Monthly breakdown by province"}),R.jsx("p",{className:"text-xs text-gray-400 mt-2 font-mono bg-gray-100 inline-block px-2 py-1 rounded",children:x})]}),R.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-200",children:[R.jsxs("div",{className:"flex justify-between items-center mb-8",children:[R.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Collections per Month"}),R.jsxs("div",{className:"flex gap-4 text-sm",children:[R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded"}),R.jsx("span",{children:"Gauteng"})]}),R.jsxs("div",{className:"flex items-center gap-2",children:[R.jsx("div",{className:"w-3 h-3 bg-cyan-500 rounded"}),R.jsx("span",{children:"Limpopo"})]})]})]}),l.length===0?R.jsx("div",{className:"h-64 flex flex-col items-center justify-center bg-gray-50 rounded border border-dashed border-gray-300 text-gray-400",children:R.jsx("p",{children:"No data found."})}):R.jsxs("div",{className:"relative h-80 w-full border-b border-l border-gray-200 bg-gray-50/50",children:[R.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none",children:[1,.75,.5,.25,0].map(D=>R.jsx("div",{className:"w-full border-t border-gray-200 relative h-0",children:R.jsx("span",{className:"absolute -left-8 -top-2 text-xs text-gray-400 w-6 text-right",children:Math.round(N*D)})},D))}),R.jsx("div",{className:"absolute inset-0 flex items-end justify-around px-4 pt-4 pb-0",children:l.map(D=>R.jsxs("div",{className:"flex flex-col items-center gap-2 w-24 h-full justify-end group",children:[R.jsxs("div",{className:"flex gap-1 w-full justify-center items-end h-full",children:[R.jsx("div",{className:"w-1/2 bg-pink-500 rounded-t shadow-sm transition-all duration-500 relative hover:bg-pink-400",style:{height:`${D.Gauteng/N*100}%`,minHeight:"4px"},children:R.jsxs("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:["GP: ",D.Gauteng]})}),R.jsx("div",{className:"w-1/2 bg-cyan-500 rounded-t shadow-sm transition-all duration-500 relative hover:bg-cyan-400",style:{height:`${D.Limpopo/N*100}%`,minHeight:"4px"},children:R.jsxs("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:["LP: ",D.Limpopo]})})]}),R.jsxs("div",{className:"mt-2 text-xs font-medium text-gray-600 text-center leading-tight",children:[D.label.split(" ")[0],R.jsx("span",{className:"block text-[10px] text-gray-400",children:D.label.split(" ")[1]})]})]},D.label))})]})]}),R.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[R.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-pink-100",children:[R.jsx("p",{className:"text-xs font-bold text-pink-600 uppercase tracking-wider",children:"Total Gauteng"}),R.jsx("p",{className:"text-3xl font-extrabold text-gray-900 mt-2",children:A})]}),R.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-cyan-100",children:[R.jsx("p",{className:"text-xs font-bold text-cyan-600 uppercase tracking-wider",children:"Total Limpopo"}),R.jsx("p",{className:"text-3xl font-extrabold text-gray-900 mt-2",children:E})]}),R.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[R.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Grand Total"}),R.jsx("p",{className:"text-3xl font-extrabold text-gray-900 mt-2",children:S})]})]})]})},z2=({onClose:l,onSave:n})=>{const[o,c]=Z.useState("");return Z.useEffect(()=>{const g=localStorage.getItem("umoja_token");c(g||Z0)},[]),R.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:R.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 m-4 animate-in fade-in zoom-in duration-200",children:[R.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"System Configuration"}),R.jsxs("div",{className:"mb-4",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Endpoint"}),R.jsx("div",{className:"p-2 bg-gray-100 rounded text-xs font-mono text-gray-600 break-all",children:Y0}),R.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Defined in system constants."})]}),R.jsxs("div",{className:"mb-6",children:[R.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Basic Token"}),R.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all font-mono text-xs",placeholder:"Base64 encoded string",value:o,onChange:g=>c(g.target.value)}),R.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Required to authenticate API requests. Please enter your Basic Auth hash (Base64)."})]}),R.jsxs("div",{className:"flex justify-end gap-3",children:[R.jsx(qr,{variant:"secondary",onClick:l,children:"Cancel"}),R.jsx(qr,{onClick:()=>n(o),children:"Save Configuration"})]})]})})},ga=({to:l,children:n})=>{const c=qi().pathname===l;return R.jsx(Ki,{to:l,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${c?"bg-pink-50 text-pink-700":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"}`,children:n})},G2=({userName:l,adminId:n,handleLogout:o,setShowSettings:c,hasToken:g})=>R.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[R.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:R.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:R.jsxs("div",{className:"flex justify-between h-16",children:[R.jsxs("div",{className:"flex",children:[R.jsxs(Ki,{to:"/",className:"flex-shrink-0 flex items-center gap-2 mr-6 hover:opacity-80 transition-opacity",children:[R.jsx("img",{src:"https://thabisot33.github.io/logo/Umoja%20Logo%20Web_320x86_png.png",alt:"Umoja Logo",className:"h-10 w-auto",onError:f=>{var x;f.target.style.display="none",(x=f.target.nextElementSibling)==null||x.classList.remove("hidden")}}),R.jsx("span",{className:"hidden font-bold text-2xl text-pink-600 tracking-tight font-serif italic",children:"Umoja"})]}),R.jsxs("div",{className:"hidden sm:flex sm:space-x-2 items-center",children:[R.jsx(ga,{to:"/",children:"Dashboard"}),R.jsx(ga,{to:"/swap",children:"Swap Device"}),R.jsx(ga,{to:"/collection",children:"Device Collection"}),R.jsx(ga,{to:"/stats",children:"Statistics"}),R.jsx(ga,{to:"/history",children:"My History"})]})]}),R.jsxs("div",{className:"flex items-center space-x-4",children:[l&&R.jsxs("span",{className:"text-sm font-medium text-gray-700 hidden md:block",children:["Welcome, ",R.jsx("span",{className:"text-pink-600",children:l})]}),R.jsx("button",{onClick:o,className:"text-sm font-medium text-gray-500 hover:text-pink-600 transition-colors",children:"Logout"})]})]})})}),R.jsx("main",{className:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full",children:R.jsxs(gm,{children:[R.jsx(co,{path:"/",element:R.jsx(W2,{userName:l})}),R.jsx(co,{path:"/swap",element:R.jsx(j2,{hasToken:g,adminId:n,adminName:l,onOpenSettings:()=>c(!0)})}),R.jsx(co,{path:"/collection",element:R.jsx(V2,{hasToken:g,adminName:l})}),R.jsx(co,{path:"/stats",element:R.jsx(H2,{})}),R.jsx(co,{path:"/history",element:R.jsx(U2,{adminId:n,adminName:l})})]})})]}),$2=()=>{const[l,n]=Z.useState(!1),[o,c]=Z.useState(!0),[g,f]=Z.useState(!1),[x,C]=Z.useState(!0),[A,E]=Z.useState(""),[S,N]=Z.useState("");Z.useEffect(()=>{const F=localStorage.getItem("umoja_token");F&&An.setToken(F);const j=localStorage.getItem("umoja_auth_session"),K=localStorage.getItem("umoja_auth_name"),J=localStorage.getItem("umoja_auth_id");j==="true"&&(J&&J!=="undefined"&&J!=="null"?(f(!0),K&&E(K),N(J)):(console.warn("Session found but no valid Admin ID. Forcing logout."),U())),C(!1)},[]);const D=F=>{localStorage.setItem("umoja_token",F),An.setToken(F),c(!0),n(!1)},P=(F,j)=>{localStorage.setItem("umoja_auth_session","true"),localStorage.setItem("umoja_auth_name",F),localStorage.setItem("umoja_auth_id",j),E(F),N(j),f(!0)},U=()=>{localStorage.removeItem("umoja_auth_session"),localStorage.removeItem("umoja_auth_name"),localStorage.removeItem("umoja_auth_id"),E(""),N(""),f(!1)};return x?R.jsx("div",{className:"min-h-screen flex items-center justify-center text-pink-600",children:"Loading..."}):g?R.jsxs(Bm,{children:[R.jsx(G2,{userName:A,adminId:S,handleLogout:U,setShowSettings:n,hasToken:o}),l&&R.jsx(z2,{onClose:()=>n(!1),onSave:D})]}):R.jsx(F2,{onLoginSuccess:P})},yg=document.getElementById("root");if(!yg)throw new Error("Could not find root element to mount to");const X2=Ep.createRoot(yg);X2.render(R.jsx(gp.StrictMode,{children:R.jsx($2,{})}));
