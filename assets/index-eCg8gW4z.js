function Dg(i,r){for(var n=0;n<r.length;n++){const o=r[n];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in i)){const u=Object.getOwnPropertyDescriptor(o,a);u&&Object.defineProperty(i,a,u.get?u:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const u of a)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const u={};return a.integrity&&(u.integrity=a.integrity),a.referrerPolicy&&(u.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?u.credentials="include":a.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(a){if(a.ep)return;a.ep=!0;const u=n(a);fetch(a.href,u)}})();function ru(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function Os(i){if(Object.prototype.hasOwnProperty.call(i,"__esModule"))return i;var r=i.default;if(typeof r=="function"){var n=function o(){return this instanceof o?Reflect.construct(r,arguments,this.constructor):r.apply(this,arguments)};n.prototype=r.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var a=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(n,o,a.get?a:{enumerable:!0,get:function(){return i[o]}})}),n}var _l={exports:{}},_s={},xl={exports:{}},ue={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hh;function Ug(){if(hh)return ue;hh=1;var i=Symbol.for("react.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),c=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),w=Symbol.iterator;function _(R){return R===null||typeof R!="object"?null:(R=w&&R[w]||R["@@iterator"],typeof R=="function"?R:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,b={};function E(R,D,le){this.props=R,this.context=D,this.refs=b,this.updater=le||x}E.prototype.isReactComponent={},E.prototype.setState=function(R,D){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,R,D,"setState")},E.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function A(){}A.prototype=E.prototype;function L(R,D,le){this.props=R,this.context=D,this.refs=b,this.updater=le||x}var T=L.prototype=new A;T.constructor=L,j(T,E.prototype),T.isPureReactComponent=!0;var B=Array.isArray,H=Object.prototype.hasOwnProperty,Z={current:null},ee={key:!0,ref:!0,__self:!0,__source:!0};function V(R,D,le){var ce,pe={},me=null,we=null;if(D!=null)for(ce in D.ref!==void 0&&(we=D.ref),D.key!==void 0&&(me=""+D.key),D)H.call(D,ce)&&!ee.hasOwnProperty(ce)&&(pe[ce]=D[ce]);var ve=arguments.length-2;if(ve===1)pe.children=le;else if(1<ve){for(var ke=Array(ve),ht=0;ht<ve;ht++)ke[ht]=arguments[ht+2];pe.children=ke}if(R&&R.defaultProps)for(ce in ve=R.defaultProps,ve)pe[ce]===void 0&&(pe[ce]=ve[ce]);return{$$typeof:i,type:R,key:me,ref:we,props:pe,_owner:Z.current}}function te(R,D){return{$$typeof:i,type:R.type,key:D,ref:R.ref,props:R.props,_owner:R._owner}}function se(R){return typeof R=="object"&&R!==null&&R.$$typeof===i}function de(R){var D={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(le){return D[le]})}var fe=/\/+/g;function Ie(R,D){return typeof R=="object"&&R!==null&&R.key!=null?de(""+R.key):D.toString(36)}function tt(R,D,le,ce,pe){var me=typeof R;(me==="undefined"||me==="boolean")&&(R=null);var we=!1;if(R===null)we=!0;else switch(me){case"string":case"number":we=!0;break;case"object":switch(R.$$typeof){case i:case r:we=!0}}if(we)return we=R,pe=pe(we),R=ce===""?"."+Ie(we,0):ce,B(pe)?(le="",R!=null&&(le=R.replace(fe,"$&/")+"/"),tt(pe,D,le,"",function(ht){return ht})):pe!=null&&(se(pe)&&(pe=te(pe,le+(!pe.key||we&&we.key===pe.key?"":(""+pe.key).replace(fe,"$&/")+"/")+R)),D.push(pe)),1;if(we=0,ce=ce===""?".":ce+":",B(R))for(var ve=0;ve<R.length;ve++){me=R[ve];var ke=ce+Ie(me,ve);we+=tt(me,D,le,ke,pe)}else if(ke=_(R),typeof ke=="function")for(R=ke.call(R),ve=0;!(me=R.next()).done;)me=me.value,ke=ce+Ie(me,ve++),we+=tt(me,D,le,ke,pe);else if(me==="object")throw D=String(R),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return we}function dt(R,D,le){if(R==null)return R;var ce=[],pe=0;return tt(R,ce,"","",function(me){return D.call(le,me,pe++)}),ce}function rt(R){if(R._status===-1){var D=R._result;D=D(),D.then(function(le){(R._status===0||R._status===-1)&&(R._status=1,R._result=le)},function(le){(R._status===0||R._status===-1)&&(R._status=2,R._result=le)}),R._status===-1&&(R._status=0,R._result=D)}if(R._status===1)return R._result.default;throw R._result}var Ne={current:null},z={transition:null},oe={ReactCurrentDispatcher:Ne,ReactCurrentBatchConfig:z,ReactCurrentOwner:Z};function K(){throw Error("act(...) is not supported in production builds of React.")}return ue.Children={map:dt,forEach:function(R,D,le){dt(R,function(){D.apply(this,arguments)},le)},count:function(R){var D=0;return dt(R,function(){D++}),D},toArray:function(R){return dt(R,function(D){return D})||[]},only:function(R){if(!se(R))throw Error("React.Children.only expected to receive a single React element child.");return R}},ue.Component=E,ue.Fragment=n,ue.Profiler=a,ue.PureComponent=L,ue.StrictMode=o,ue.Suspense=p,ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,ue.act=K,ue.cloneElement=function(R,D,le){if(R==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+R+".");var ce=j({},R.props),pe=R.key,me=R.ref,we=R._owner;if(D!=null){if(D.ref!==void 0&&(me=D.ref,we=Z.current),D.key!==void 0&&(pe=""+D.key),R.type&&R.type.defaultProps)var ve=R.type.defaultProps;for(ke in D)H.call(D,ke)&&!ee.hasOwnProperty(ke)&&(ce[ke]=D[ke]===void 0&&ve!==void 0?ve[ke]:D[ke])}var ke=arguments.length-2;if(ke===1)ce.children=le;else if(1<ke){ve=Array(ke);for(var ht=0;ht<ke;ht++)ve[ht]=arguments[ht+2];ce.children=ve}return{$$typeof:i,type:R.type,key:pe,ref:me,props:ce,_owner:we}},ue.createContext=function(R){return R={$$typeof:c,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},R.Provider={$$typeof:u,_context:R},R.Consumer=R},ue.createElement=V,ue.createFactory=function(R){var D=V.bind(null,R);return D.type=R,D},ue.createRef=function(){return{current:null}},ue.forwardRef=function(R){return{$$typeof:f,render:R}},ue.isValidElement=se,ue.lazy=function(R){return{$$typeof:y,_payload:{_status:-1,_result:R},_init:rt}},ue.memo=function(R,D){return{$$typeof:m,type:R,compare:D===void 0?null:D}},ue.startTransition=function(R){var D=z.transition;z.transition={};try{R()}finally{z.transition=D}},ue.unstable_act=K,ue.useCallback=function(R,D){return Ne.current.useCallback(R,D)},ue.useContext=function(R){return Ne.current.useContext(R)},ue.useDebugValue=function(){},ue.useDeferredValue=function(R){return Ne.current.useDeferredValue(R)},ue.useEffect=function(R,D){return Ne.current.useEffect(R,D)},ue.useId=function(){return Ne.current.useId()},ue.useImperativeHandle=function(R,D,le){return Ne.current.useImperativeHandle(R,D,le)},ue.useInsertionEffect=function(R,D){return Ne.current.useInsertionEffect(R,D)},ue.useLayoutEffect=function(R,D){return Ne.current.useLayoutEffect(R,D)},ue.useMemo=function(R,D){return Ne.current.useMemo(R,D)},ue.useReducer=function(R,D,le){return Ne.current.useReducer(R,D,le)},ue.useRef=function(R){return Ne.current.useRef(R)},ue.useState=function(R){return Ne.current.useState(R)},ue.useSyncExternalStore=function(R,D,le){return Ne.current.useSyncExternalStore(R,D,le)},ue.useTransition=function(){return Ne.current.useTransition()},ue.version="18.3.1",ue}var fh;function nu(){return fh||(fh=1,xl.exports=Ug()),xl.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph;function Mg(){if(ph)return _s;ph=1;var i=nu(),r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u={key:!0,ref:!0,__self:!0,__source:!0};function c(f,p,m){var y,w={},_=null,x=null;m!==void 0&&(_=""+m),p.key!==void 0&&(_=""+p.key),p.ref!==void 0&&(x=p.ref);for(y in p)o.call(p,y)&&!u.hasOwnProperty(y)&&(w[y]=p[y]);if(f&&f.defaultProps)for(y in p=f.defaultProps,p)w[y]===void 0&&(w[y]=p[y]);return{$$typeof:r,type:f,key:_,ref:x,props:w,_owner:a.current}}return _s.Fragment=n,_s.jsx=c,_s.jsxs=c,_s}var mh;function Bg(){return mh||(mh=1,_l.exports=Mg()),_l.exports}var g=Bg(),P=nu();const Fg=ru(P);var Ki={},Sl={exports:{}},lt={},El={exports:{}},kl={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gh;function zg(){return gh||(gh=1,(function(i){function r(z,oe){var K=z.length;z.push(oe);e:for(;0<K;){var R=K-1>>>1,D=z[R];if(0<a(D,oe))z[R]=oe,z[K]=D,K=R;else break e}}function n(z){return z.length===0?null:z[0]}function o(z){if(z.length===0)return null;var oe=z[0],K=z.pop();if(K!==oe){z[0]=K;e:for(var R=0,D=z.length,le=D>>>1;R<le;){var ce=2*(R+1)-1,pe=z[ce],me=ce+1,we=z[me];if(0>a(pe,K))me<D&&0>a(we,pe)?(z[R]=we,z[me]=K,R=me):(z[R]=pe,z[ce]=K,R=ce);else if(me<D&&0>a(we,K))z[R]=we,z[me]=K,R=me;else break e}}return oe}function a(z,oe){var K=z.sortIndex-oe.sortIndex;return K!==0?K:z.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var c=Date,f=c.now();i.unstable_now=function(){return c.now()-f}}var p=[],m=[],y=1,w=null,_=3,x=!1,j=!1,b=!1,E=typeof setTimeout=="function"?setTimeout:null,A=typeof clearTimeout=="function"?clearTimeout:null,L=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(z){for(var oe=n(m);oe!==null;){if(oe.callback===null)o(m);else if(oe.startTime<=z)o(m),oe.sortIndex=oe.expirationTime,r(p,oe);else break;oe=n(m)}}function B(z){if(b=!1,T(z),!j)if(n(p)!==null)j=!0,rt(H);else{var oe=n(m);oe!==null&&Ne(B,oe.startTime-z)}}function H(z,oe){j=!1,b&&(b=!1,A(V),V=-1),x=!0;var K=_;try{for(T(oe),w=n(p);w!==null&&(!(w.expirationTime>oe)||z&&!de());){var R=w.callback;if(typeof R=="function"){w.callback=null,_=w.priorityLevel;var D=R(w.expirationTime<=oe);oe=i.unstable_now(),typeof D=="function"?w.callback=D:w===n(p)&&o(p),T(oe)}else o(p);w=n(p)}if(w!==null)var le=!0;else{var ce=n(m);ce!==null&&Ne(B,ce.startTime-oe),le=!1}return le}finally{w=null,_=K,x=!1}}var Z=!1,ee=null,V=-1,te=5,se=-1;function de(){return!(i.unstable_now()-se<te)}function fe(){if(ee!==null){var z=i.unstable_now();se=z;var oe=!0;try{oe=ee(!0,z)}finally{oe?Ie():(Z=!1,ee=null)}}else Z=!1}var Ie;if(typeof L=="function")Ie=function(){L(fe)};else if(typeof MessageChannel<"u"){var tt=new MessageChannel,dt=tt.port2;tt.port1.onmessage=fe,Ie=function(){dt.postMessage(null)}}else Ie=function(){E(fe,0)};function rt(z){ee=z,Z||(Z=!0,Ie())}function Ne(z,oe){V=E(function(){z(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(z){z.callback=null},i.unstable_continueExecution=function(){j||x||(j=!0,rt(H))},i.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<z?Math.floor(1e3/z):5},i.unstable_getCurrentPriorityLevel=function(){return _},i.unstable_getFirstCallbackNode=function(){return n(p)},i.unstable_next=function(z){switch(_){case 1:case 2:case 3:var oe=3;break;default:oe=_}var K=_;_=oe;try{return z()}finally{_=K}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(z,oe){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var K=_;_=z;try{return oe()}finally{_=K}},i.unstable_scheduleCallback=function(z,oe,K){var R=i.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?R+K:R):K=R,z){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=K+D,z={id:y++,callback:oe,priorityLevel:z,startTime:K,expirationTime:D,sortIndex:-1},K>R?(z.sortIndex=K,r(m,z),n(p)===null&&z===n(m)&&(b?(A(V),V=-1):b=!0,Ne(B,K-R))):(z.sortIndex=D,r(p,z),j||x||(j=!0,rt(H))),z},i.unstable_shouldYield=de,i.unstable_wrapCallback=function(z){var oe=_;return function(){var K=_;_=oe;try{return z.apply(this,arguments)}finally{_=K}}}})(kl)),kl}var vh;function Vg(){return vh||(vh=1,El.exports=zg()),El.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh;function Wg(){if(yh)return lt;yh=1;var i=nu(),r=Vg();function n(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var f=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,y={},w={};function _(e){return p.call(w,e)?!0:p.call(y,e)?!1:m.test(e)?w[e]=!0:(y[e]=!0,!1)}function x(e,t,s,l){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return l?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function j(e,t,s,l){if(t===null||typeof t>"u"||x(e,t,s,l))return!0;if(l)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function b(e,t,s,l,d,h,v){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=l,this.attributeNamespace=d,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=v}var E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){E[e]=new b(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];E[t]=new b(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){E[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){E[e]=new b(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){E[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){E[e]=new b(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){E[e]=new b(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){E[e]=new b(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){E[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)});var A=/[\-:]([a-z])/g;function L(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(A,L);E[t]=new b(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(A,L);E[t]=new b(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(A,L);E[t]=new b(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){E[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)}),E.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){E[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)});function T(e,t,s,l){var d=E.hasOwnProperty(t)?E[t]:null;(d!==null?d.type!==0:l||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(j(t,s,d,l)&&(s=null),l||d===null?_(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):d.mustUseProperty?e[d.propertyName]=s===null?d.type===3?!1:"":s:(t=d.attributeName,l=d.attributeNamespace,s===null?e.removeAttribute(t):(d=d.type,s=d===3||d===4&&s===!0?"":""+s,l?e.setAttributeNS(l,t,s):e.setAttribute(t,s))))}var B=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),Z=Symbol.for("react.portal"),ee=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),te=Symbol.for("react.profiler"),se=Symbol.for("react.provider"),de=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),Ie=Symbol.for("react.suspense"),tt=Symbol.for("react.suspense_list"),dt=Symbol.for("react.memo"),rt=Symbol.for("react.lazy"),Ne=Symbol.for("react.offscreen"),z=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=z&&e[z]||e["@@iterator"],typeof e=="function"?e:null)}var K=Object.assign,R;function D(e){if(R===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);R=t&&t[1]||""}return`
`+R+e}var le=!1;function ce(e,t){if(!e||le)return"";le=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(I){var l=I}Reflect.construct(e,[],t)}else{try{t.call()}catch(I){l=I}e.call(t.prototype)}else{try{throw Error()}catch(I){l=I}e()}}catch(I){if(I&&l&&typeof I.stack=="string"){for(var d=I.stack.split(`
`),h=l.stack.split(`
`),v=d.length-1,S=h.length-1;1<=v&&0<=S&&d[v]!==h[S];)S--;for(;1<=v&&0<=S;v--,S--)if(d[v]!==h[S]){if(v!==1||S!==1)do if(v--,S--,0>S||d[v]!==h[S]){var k=`
`+d[v].replace(" at new "," at ");return e.displayName&&k.includes("<anonymous>")&&(k=k.replace("<anonymous>",e.displayName)),k}while(1<=v&&0<=S);break}}}finally{le=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?D(e):""}function pe(e){switch(e.tag){case 5:return D(e.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return e=ce(e.type,!1),e;case 11:return e=ce(e.type.render,!1),e;case 1:return e=ce(e.type,!0),e;default:return""}}function me(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ee:return"Fragment";case Z:return"Portal";case te:return"Profiler";case V:return"StrictMode";case Ie:return"Suspense";case tt:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case de:return(e.displayName||"Context")+".Consumer";case se:return(e._context.displayName||"Context")+".Provider";case fe:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case dt:return t=e.displayName||null,t!==null?t:me(e.type)||"Memo";case rt:t=e._payload,e=e._init;try{return me(e(t))}catch{}}return null}function we(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return me(t);case 8:return t===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ve(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ke(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ht(e){var t=ke(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),l=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var d=s.get,h=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(v){l=""+v,h.call(this,v)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return l},setValue:function(v){l=""+v},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ds(e){e._valueTracker||(e._valueTracker=ht(e))}function yu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),l="";return e&&(l=ke(e)?e.checked?"true":"false":e.value),e=l,e!==s?(t.setValue(e),!0):!1}function Us(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Co(e,t){var s=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function wu(e,t){var s=t.defaultValue==null?"":t.defaultValue,l=t.checked!=null?t.checked:t.defaultChecked;s=ve(t.value!=null?t.value:s),e._wrapperState={initialChecked:l,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function _u(e,t){t=t.checked,t!=null&&T(e,"checked",t,!1)}function To(e,t){_u(e,t);var s=ve(t.value),l=t.type;if(s!=null)l==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(l==="submit"||l==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ro(e,t.type,s):t.hasOwnProperty("defaultValue")&&Ro(e,t.type,ve(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xu(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var l=t.type;if(!(l!=="submit"&&l!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function Ro(e,t,s){(t!=="number"||Us(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var Ln=Array.isArray;function Gr(e,t,s,l){if(e=e.options,t){t={};for(var d=0;d<s.length;d++)t["$"+s[d]]=!0;for(s=0;s<e.length;s++)d=t.hasOwnProperty("$"+e[s].value),e[s].selected!==d&&(e[s].selected=d),d&&l&&(e[s].defaultSelected=!0)}else{for(s=""+ve(s),t=null,d=0;d<e.length;d++){if(e[d].value===s){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function No(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(n(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Su(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(n(92));if(Ln(s)){if(1<s.length)throw Error(n(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:ve(s)}}function Eu(e,t){var s=ve(t.value),l=ve(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),l!=null&&(e.defaultValue=""+l)}function ku(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Oo(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ms,ju=(function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,l,d){MSApp.execUnsafeLocalFunction(function(){return e(t,s,l,d)})}:e})(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ms=Ms||document.createElement("div"),Ms.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ms.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function $n(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Fp=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(e){Fp.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dn[t]=Dn[e]})});function Cu(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||Dn.hasOwnProperty(e)&&Dn[e]?(""+t).trim():t+"px"}function Tu(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var l=s.indexOf("--")===0,d=Cu(s,t[s],l);s==="float"&&(s="cssFloat"),l?e.setProperty(s,d):e[s]=d}}var zp=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Po(e,t){if(t){if(zp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(n(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(n(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(n(61))}if(t.style!=null&&typeof t.style!="object")throw Error(n(62))}}function Ao(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Io=null;function Lo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var $o=null,Jr=null,Qr=null;function Ru(e){if(e=is(e)){if(typeof $o!="function")throw Error(n(280));var t=e.stateNode;t&&(t=li(t),$o(e.stateNode,e.type,t))}}function Nu(e){Jr?Qr?Qr.push(e):Qr=[e]:Jr=e}function Ou(){if(Jr){var e=Jr,t=Qr;if(Qr=Jr=null,Ru(e),t)for(e=0;e<t.length;e++)Ru(t[e])}}function Pu(e,t){return e(t)}function Au(){}var Do=!1;function Iu(e,t,s){if(Do)return e(t,s);Do=!0;try{return Pu(e,t,s)}finally{Do=!1,(Jr!==null||Qr!==null)&&(Au(),Ou())}}function Un(e,t){var s=e.stateNode;if(s===null)return null;var l=li(s);if(l===null)return null;s=l[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(n(231,t,typeof s));return s}var Uo=!1;if(f)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch{Uo=!1}function Vp(e,t,s,l,d,h,v,S,k){var I=Array.prototype.slice.call(arguments,3);try{t.apply(s,I)}catch(U){this.onError(U)}}var Bn=!1,Bs=null,Fs=!1,Mo=null,Wp={onError:function(e){Bn=!0,Bs=e}};function Hp(e,t,s,l,d,h,v,S,k){Bn=!1,Bs=null,Vp.apply(Wp,arguments)}function qp(e,t,s,l,d,h,v,S,k){if(Hp.apply(this,arguments),Bn){if(Bn){var I=Bs;Bn=!1,Bs=null}else throw Error(n(198));Fs||(Fs=!0,Mo=I)}}function jr(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function Lu(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $u(e){if(jr(e)!==e)throw Error(n(188))}function Kp(e){var t=e.alternate;if(!t){if(t=jr(e),t===null)throw Error(n(188));return t!==e?null:e}for(var s=e,l=t;;){var d=s.return;if(d===null)break;var h=d.alternate;if(h===null){if(l=d.return,l!==null){s=l;continue}break}if(d.child===h.child){for(h=d.child;h;){if(h===s)return $u(d),e;if(h===l)return $u(d),t;h=h.sibling}throw Error(n(188))}if(s.return!==l.return)s=d,l=h;else{for(var v=!1,S=d.child;S;){if(S===s){v=!0,s=d,l=h;break}if(S===l){v=!0,l=d,s=h;break}S=S.sibling}if(!v){for(S=h.child;S;){if(S===s){v=!0,s=h,l=d;break}if(S===l){v=!0,l=h,s=d;break}S=S.sibling}if(!v)throw Error(n(189))}}if(s.alternate!==l)throw Error(n(190))}if(s.tag!==3)throw Error(n(188));return s.stateNode.current===s?e:t}function Du(e){return e=Kp(e),e!==null?Uu(e):null}function Uu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Uu(e);if(t!==null)return t;e=e.sibling}return null}var Mu=r.unstable_scheduleCallback,Bu=r.unstable_cancelCallback,Gp=r.unstable_shouldYield,Jp=r.unstable_requestPaint,Pe=r.unstable_now,Qp=r.unstable_getCurrentPriorityLevel,Bo=r.unstable_ImmediatePriority,Fu=r.unstable_UserBlockingPriority,zs=r.unstable_NormalPriority,Yp=r.unstable_LowPriority,zu=r.unstable_IdlePriority,Vs=null,Dt=null;function Xp(e){if(Dt&&typeof Dt.onCommitFiberRoot=="function")try{Dt.onCommitFiberRoot(Vs,e,void 0,(e.current.flags&128)===128)}catch{}}var jt=Math.clz32?Math.clz32:tm,Zp=Math.log,em=Math.LN2;function tm(e){return e>>>=0,e===0?32:31-(Zp(e)/em|0)|0}var Ws=64,Hs=4194304;function Fn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function qs(e,t){var s=e.pendingLanes;if(s===0)return 0;var l=0,d=e.suspendedLanes,h=e.pingedLanes,v=s&268435455;if(v!==0){var S=v&~d;S!==0?l=Fn(S):(h&=v,h!==0&&(l=Fn(h)))}else v=s&~d,v!==0?l=Fn(v):h!==0&&(l=Fn(h));if(l===0)return 0;if(t!==0&&t!==l&&(t&d)===0&&(d=l&-l,h=t&-t,d>=h||d===16&&(h&4194240)!==0))return t;if((l&4)!==0&&(l|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=l;0<t;)s=31-jt(t),d=1<<s,l|=e[s],t&=~d;return l}function rm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nm(e,t){for(var s=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,h=e.pendingLanes;0<h;){var v=31-jt(h),S=1<<v,k=d[v];k===-1?((S&s)===0||(S&l)!==0)&&(d[v]=rm(S,t)):k<=t&&(e.expiredLanes|=S),h&=~S}}function Fo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Vu(){var e=Ws;return Ws<<=1,(Ws&4194240)===0&&(Ws=64),e}function zo(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function zn(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-jt(t),e[t]=s}function sm(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var l=e.eventTimes;for(e=e.expirationTimes;0<s;){var d=31-jt(s),h=1<<d;t[d]=0,l[d]=-1,e[d]=-1,s&=~h}}function Vo(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var l=31-jt(s),d=1<<l;d&t|e[l]&t&&(e[l]|=t),s&=~d}}var ye=0;function Wu(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Hu,Wo,qu,Ku,Gu,Ho=!1,Ks=[],nr=null,sr=null,ir=null,Vn=new Map,Wn=new Map,or=[],im="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ju(e,t){switch(e){case"focusin":case"focusout":nr=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":ir=null;break;case"pointerover":case"pointerout":Vn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wn.delete(t.pointerId)}}function Hn(e,t,s,l,d,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:s,eventSystemFlags:l,nativeEvent:h,targetContainers:[d]},t!==null&&(t=is(t),t!==null&&Wo(t)),e):(e.eventSystemFlags|=l,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function om(e,t,s,l,d){switch(t){case"focusin":return nr=Hn(nr,e,t,s,l,d),!0;case"dragenter":return sr=Hn(sr,e,t,s,l,d),!0;case"mouseover":return ir=Hn(ir,e,t,s,l,d),!0;case"pointerover":var h=d.pointerId;return Vn.set(h,Hn(Vn.get(h)||null,e,t,s,l,d)),!0;case"gotpointercapture":return h=d.pointerId,Wn.set(h,Hn(Wn.get(h)||null,e,t,s,l,d)),!0}return!1}function Qu(e){var t=Cr(e.target);if(t!==null){var s=jr(t);if(s!==null){if(t=s.tag,t===13){if(t=Lu(s),t!==null){e.blockedOn=t,Gu(e.priority,function(){qu(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gs(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ko(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var l=new s.constructor(s.type,s);Io=l,s.target.dispatchEvent(l),Io=null}else return t=is(s),t!==null&&Wo(t),e.blockedOn=s,!1;t.shift()}return!0}function Yu(e,t,s){Gs(e)&&s.delete(t)}function am(){Ho=!1,nr!==null&&Gs(nr)&&(nr=null),sr!==null&&Gs(sr)&&(sr=null),ir!==null&&Gs(ir)&&(ir=null),Vn.forEach(Yu),Wn.forEach(Yu)}function qn(e,t){e.blockedOn===t&&(e.blockedOn=null,Ho||(Ho=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,am)))}function Kn(e){function t(d){return qn(d,e)}if(0<Ks.length){qn(Ks[0],e);for(var s=1;s<Ks.length;s++){var l=Ks[s];l.blockedOn===e&&(l.blockedOn=null)}}for(nr!==null&&qn(nr,e),sr!==null&&qn(sr,e),ir!==null&&qn(ir,e),Vn.forEach(t),Wn.forEach(t),s=0;s<or.length;s++)l=or[s],l.blockedOn===e&&(l.blockedOn=null);for(;0<or.length&&(s=or[0],s.blockedOn===null);)Qu(s),s.blockedOn===null&&or.shift()}var Yr=B.ReactCurrentBatchConfig,Js=!0;function lm(e,t,s,l){var d=ye,h=Yr.transition;Yr.transition=null;try{ye=1,qo(e,t,s,l)}finally{ye=d,Yr.transition=h}}function um(e,t,s,l){var d=ye,h=Yr.transition;Yr.transition=null;try{ye=4,qo(e,t,s,l)}finally{ye=d,Yr.transition=h}}function qo(e,t,s,l){if(Js){var d=Ko(e,t,s,l);if(d===null)ca(e,t,l,Qs,s),Ju(e,l);else if(om(d,e,t,s,l))l.stopPropagation();else if(Ju(e,l),t&4&&-1<im.indexOf(e)){for(;d!==null;){var h=is(d);if(h!==null&&Hu(h),h=Ko(e,t,s,l),h===null&&ca(e,t,l,Qs,s),h===d)break;d=h}d!==null&&l.stopPropagation()}else ca(e,t,l,null,s)}}var Qs=null;function Ko(e,t,s,l){if(Qs=null,e=Lo(l),e=Cr(e),e!==null)if(t=jr(e),t===null)e=null;else if(s=t.tag,s===13){if(e=Lu(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qs=e,null}function Xu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qp()){case Bo:return 1;case Fu:return 4;case zs:case Yp:return 16;case zu:return 536870912;default:return 16}default:return 16}}var ar=null,Go=null,Ys=null;function Zu(){if(Ys)return Ys;var e,t=Go,s=t.length,l,d="value"in ar?ar.value:ar.textContent,h=d.length;for(e=0;e<s&&t[e]===d[e];e++);var v=s-e;for(l=1;l<=v&&t[s-l]===d[h-l];l++);return Ys=d.slice(e,1<l?1-l:void 0)}function Xs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Zs(){return!0}function ec(){return!1}function ft(e){function t(s,l,d,h,v){this._reactName=s,this._targetInst=d,this.type=l,this.nativeEvent=h,this.target=v,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(s=e[S],this[S]=s?s(h):h[S]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?Zs:ec,this.isPropagationStopped=ec,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Zs)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Zs)},persist:function(){},isPersistent:Zs}),t}var Xr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jo=ft(Xr),Gn=K({},Xr,{view:0,detail:0}),cm=ft(Gn),Qo,Yo,Jn,ei=K({},Gn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jn&&(Jn&&e.type==="mousemove"?(Qo=e.screenX-Jn.screenX,Yo=e.screenY-Jn.screenY):Yo=Qo=0,Jn=e),Qo)},movementY:function(e){return"movementY"in e?e.movementY:Yo}}),tc=ft(ei),dm=K({},ei,{dataTransfer:0}),hm=ft(dm),fm=K({},Gn,{relatedTarget:0}),Xo=ft(fm),pm=K({},Xr,{animationName:0,elapsedTime:0,pseudoElement:0}),mm=ft(pm),gm=K({},Xr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vm=ft(gm),ym=K({},Xr,{data:0}),rc=ft(ym),wm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_m={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=xm[e])?!!t[e]:!1}function Zo(){return Sm}var Em=K({},Gn,{key:function(e){if(e.key){var t=wm[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_m[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zo,charCode:function(e){return e.type==="keypress"?Xs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),km=ft(Em),bm=K({},ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),nc=ft(bm),jm=K({},Gn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zo}),Cm=ft(jm),Tm=K({},Xr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rm=ft(Tm),Nm=K({},ei,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Om=ft(Nm),Pm=[9,13,27,32],ea=f&&"CompositionEvent"in window,Qn=null;f&&"documentMode"in document&&(Qn=document.documentMode);var Am=f&&"TextEvent"in window&&!Qn,sc=f&&(!ea||Qn&&8<Qn&&11>=Qn),ic=" ",oc=!1;function ac(e,t){switch(e){case"keyup":return Pm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Zr=!1;function Im(e,t){switch(e){case"compositionend":return lc(t);case"keypress":return t.which!==32?null:(oc=!0,ic);case"textInput":return e=t.data,e===ic&&oc?null:e;default:return null}}function Lm(e,t){if(Zr)return e==="compositionend"||!ea&&ac(e,t)?(e=Zu(),Ys=Go=ar=null,Zr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sc&&t.locale!=="ko"?null:t.data;default:return null}}var $m={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$m[e.type]:t==="textarea"}function cc(e,t,s,l){Nu(l),t=ii(t,"onChange"),0<t.length&&(s=new Jo("onChange","change",null,s,l),e.push({event:s,listeners:t}))}var Yn=null,Xn=null;function Dm(e){Tc(e,0)}function ti(e){var t=sn(e);if(yu(t))return e}function Um(e,t){if(e==="change")return t}var dc=!1;if(f){var ta;if(f){var ra="oninput"in document;if(!ra){var hc=document.createElement("div");hc.setAttribute("oninput","return;"),ra=typeof hc.oninput=="function"}ta=ra}else ta=!1;dc=ta&&(!document.documentMode||9<document.documentMode)}function fc(){Yn&&(Yn.detachEvent("onpropertychange",pc),Xn=Yn=null)}function pc(e){if(e.propertyName==="value"&&ti(Xn)){var t=[];cc(t,Xn,e,Lo(e)),Iu(Dm,t)}}function Mm(e,t,s){e==="focusin"?(fc(),Yn=t,Xn=s,Yn.attachEvent("onpropertychange",pc)):e==="focusout"&&fc()}function Bm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return ti(Xn)}function Fm(e,t){if(e==="click")return ti(t)}function zm(e,t){if(e==="input"||e==="change")return ti(t)}function Vm(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ct=typeof Object.is=="function"?Object.is:Vm;function Zn(e,t){if(Ct(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),l=Object.keys(t);if(s.length!==l.length)return!1;for(l=0;l<s.length;l++){var d=s[l];if(!p.call(t,d)||!Ct(e[d],t[d]))return!1}return!0}function mc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function gc(e,t){var s=mc(e);e=0;for(var l;s;){if(s.nodeType===3){if(l=e+s.textContent.length,e<=t&&l>=t)return{node:s,offset:t-e};e=l}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=mc(s)}}function vc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function yc(){for(var e=window,t=Us();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Us(e.document)}return t}function na(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wm(e){var t=yc(),s=e.focusedElem,l=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&vc(s.ownerDocument.documentElement,s)){if(l!==null&&na(s)){if(t=l.start,e=l.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=s.textContent.length,h=Math.min(l.start,d);l=l.end===void 0?h:Math.min(l.end,d),!e.extend&&h>l&&(d=l,l=h,h=d),d=gc(s,h);var v=gc(s,l);d&&v&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==v.node||e.focusOffset!==v.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),h>l?(e.addRange(t),e.extend(v.node,v.offset)):(t.setEnd(v.node,v.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Hm=f&&"documentMode"in document&&11>=document.documentMode,en=null,sa=null,es=null,ia=!1;function wc(e,t,s){var l=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;ia||en==null||en!==Us(l)||(l=en,"selectionStart"in l&&na(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),es&&Zn(es,l)||(es=l,l=ii(sa,"onSelect"),0<l.length&&(t=new Jo("onSelect","select",null,t,s),e.push({event:t,listeners:l}),t.target=en)))}function ri(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var tn={animationend:ri("Animation","AnimationEnd"),animationiteration:ri("Animation","AnimationIteration"),animationstart:ri("Animation","AnimationStart"),transitionend:ri("Transition","TransitionEnd")},oa={},_c={};f&&(_c=document.createElement("div").style,"AnimationEvent"in window||(delete tn.animationend.animation,delete tn.animationiteration.animation,delete tn.animationstart.animation),"TransitionEvent"in window||delete tn.transitionend.transition);function ni(e){if(oa[e])return oa[e];if(!tn[e])return e;var t=tn[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in _c)return oa[e]=t[s];return e}var xc=ni("animationend"),Sc=ni("animationiteration"),Ec=ni("animationstart"),kc=ni("transitionend"),bc=new Map,jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function lr(e,t){bc.set(e,t),u(t,[e])}for(var aa=0;aa<jc.length;aa++){var la=jc[aa],qm=la.toLowerCase(),Km=la[0].toUpperCase()+la.slice(1);lr(qm,"on"+Km)}lr(xc,"onAnimationEnd"),lr(Sc,"onAnimationIteration"),lr(Ec,"onAnimationStart"),lr("dblclick","onDoubleClick"),lr("focusin","onFocus"),lr("focusout","onBlur"),lr(kc,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ts="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gm=new Set("cancel close invalid load scroll toggle".split(" ").concat(ts));function Cc(e,t,s){var l=e.type||"unknown-event";e.currentTarget=s,qp(l,t,void 0,e),e.currentTarget=null}function Tc(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var l=e[s],d=l.event;l=l.listeners;e:{var h=void 0;if(t)for(var v=l.length-1;0<=v;v--){var S=l[v],k=S.instance,I=S.currentTarget;if(S=S.listener,k!==h&&d.isPropagationStopped())break e;Cc(d,S,I),h=k}else for(v=0;v<l.length;v++){if(S=l[v],k=S.instance,I=S.currentTarget,S=S.listener,k!==h&&d.isPropagationStopped())break e;Cc(d,S,I),h=k}}}if(Fs)throw e=Mo,Fs=!1,Mo=null,e}function Se(e,t){var s=t[ga];s===void 0&&(s=t[ga]=new Set);var l=e+"__bubble";s.has(l)||(Rc(t,e,2,!1),s.add(l))}function ua(e,t,s){var l=0;t&&(l|=4),Rc(s,e,l,t)}var si="_reactListening"+Math.random().toString(36).slice(2);function rs(e){if(!e[si]){e[si]=!0,o.forEach(function(s){s!=="selectionchange"&&(Gm.has(s)||ua(s,!1,e),ua(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[si]||(t[si]=!0,ua("selectionchange",!1,t))}}function Rc(e,t,s,l){switch(Xu(t)){case 1:var d=lm;break;case 4:d=um;break;default:d=qo}s=d.bind(null,t,s,e),d=void 0,!Uo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(t,s,{capture:!0,passive:d}):e.addEventListener(t,s,!0):d!==void 0?e.addEventListener(t,s,{passive:d}):e.addEventListener(t,s,!1)}function ca(e,t,s,l,d){var h=l;if((t&1)===0&&(t&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===d||S.nodeType===8&&S.parentNode===d)break;if(v===4)for(v=l.return;v!==null;){var k=v.tag;if((k===3||k===4)&&(k=v.stateNode.containerInfo,k===d||k.nodeType===8&&k.parentNode===d))return;v=v.return}for(;S!==null;){if(v=Cr(S),v===null)return;if(k=v.tag,k===5||k===6){l=h=v;continue e}S=S.parentNode}}l=l.return}Iu(function(){var I=h,U=Lo(s),M=[];e:{var $=bc.get(e);if($!==void 0){var W=Jo,J=e;switch(e){case"keypress":if(Xs(s)===0)break e;case"keydown":case"keyup":W=km;break;case"focusin":J="focus",W=Xo;break;case"focusout":J="blur",W=Xo;break;case"beforeblur":case"afterblur":W=Xo;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=tc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=hm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=Cm;break;case xc:case Sc:case Ec:W=mm;break;case kc:W=Rm;break;case"scroll":W=cm;break;case"wheel":W=Om;break;case"copy":case"cut":case"paste":W=vm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=nc}var Q=(t&4)!==0,Ae=!Q&&e==="scroll",N=Q?$!==null?$+"Capture":null:$;Q=[];for(var C=I,O;C!==null;){O=C;var F=O.stateNode;if(O.tag===5&&F!==null&&(O=F,N!==null&&(F=Un(C,N),F!=null&&Q.push(ns(C,F,O)))),Ae)break;C=C.return}0<Q.length&&($=new W($,J,null,s,U),M.push({event:$,listeners:Q}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",W=e==="mouseout"||e==="pointerout",$&&s!==Io&&(J=s.relatedTarget||s.fromElement)&&(Cr(J)||J[Vt]))break e;if((W||$)&&($=U.window===U?U:($=U.ownerDocument)?$.defaultView||$.parentWindow:window,W?(J=s.relatedTarget||s.toElement,W=I,J=J?Cr(J):null,J!==null&&(Ae=jr(J),J!==Ae||J.tag!==5&&J.tag!==6)&&(J=null)):(W=null,J=I),W!==J)){if(Q=tc,F="onMouseLeave",N="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(Q=nc,F="onPointerLeave",N="onPointerEnter",C="pointer"),Ae=W==null?$:sn(W),O=J==null?$:sn(J),$=new Q(F,C+"leave",W,s,U),$.target=Ae,$.relatedTarget=O,F=null,Cr(U)===I&&(Q=new Q(N,C+"enter",J,s,U),Q.target=O,Q.relatedTarget=Ae,F=Q),Ae=F,W&&J)t:{for(Q=W,N=J,C=0,O=Q;O;O=rn(O))C++;for(O=0,F=N;F;F=rn(F))O++;for(;0<C-O;)Q=rn(Q),C--;for(;0<O-C;)N=rn(N),O--;for(;C--;){if(Q===N||N!==null&&Q===N.alternate)break t;Q=rn(Q),N=rn(N)}Q=null}else Q=null;W!==null&&Nc(M,$,W,Q,!1),J!==null&&Ae!==null&&Nc(M,Ae,J,Q,!0)}}e:{if($=I?sn(I):window,W=$.nodeName&&$.nodeName.toLowerCase(),W==="select"||W==="input"&&$.type==="file")var Y=Um;else if(uc($))if(dc)Y=zm;else{Y=Bm;var re=Mm}else(W=$.nodeName)&&W.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Y=Fm);if(Y&&(Y=Y(e,I))){cc(M,Y,s,U);break e}re&&re(e,$,I),e==="focusout"&&(re=$._wrapperState)&&re.controlled&&$.type==="number"&&Ro($,"number",$.value)}switch(re=I?sn(I):window,e){case"focusin":(uc(re)||re.contentEditable==="true")&&(en=re,sa=I,es=null);break;case"focusout":es=sa=en=null;break;case"mousedown":ia=!0;break;case"contextmenu":case"mouseup":case"dragend":ia=!1,wc(M,s,U);break;case"selectionchange":if(Hm)break;case"keydown":case"keyup":wc(M,s,U)}var ne;if(ea)e:{switch(e){case"compositionstart":var ae="onCompositionStart";break e;case"compositionend":ae="onCompositionEnd";break e;case"compositionupdate":ae="onCompositionUpdate";break e}ae=void 0}else Zr?ac(e,s)&&(ae="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(ae="onCompositionStart");ae&&(sc&&s.locale!=="ko"&&(Zr||ae!=="onCompositionStart"?ae==="onCompositionEnd"&&Zr&&(ne=Zu()):(ar=U,Go="value"in ar?ar.value:ar.textContent,Zr=!0)),re=ii(I,ae),0<re.length&&(ae=new rc(ae,e,null,s,U),M.push({event:ae,listeners:re}),ne?ae.data=ne:(ne=lc(s),ne!==null&&(ae.data=ne)))),(ne=Am?Im(e,s):Lm(e,s))&&(I=ii(I,"onBeforeInput"),0<I.length&&(U=new rc("onBeforeInput","beforeinput",null,s,U),M.push({event:U,listeners:I}),U.data=ne))}Tc(M,t)})}function ns(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ii(e,t){for(var s=t+"Capture",l=[];e!==null;){var d=e,h=d.stateNode;d.tag===5&&h!==null&&(d=h,h=Un(e,s),h!=null&&l.unshift(ns(e,h,d)),h=Un(e,t),h!=null&&l.push(ns(e,h,d))),e=e.return}return l}function rn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Nc(e,t,s,l,d){for(var h=t._reactName,v=[];s!==null&&s!==l;){var S=s,k=S.alternate,I=S.stateNode;if(k!==null&&k===l)break;S.tag===5&&I!==null&&(S=I,d?(k=Un(s,h),k!=null&&v.unshift(ns(s,k,S))):d||(k=Un(s,h),k!=null&&v.push(ns(s,k,S)))),s=s.return}v.length!==0&&e.push({event:t,listeners:v})}var Jm=/\r\n?/g,Qm=/\u0000|\uFFFD/g;function Oc(e){return(typeof e=="string"?e:""+e).replace(Jm,`
`).replace(Qm,"")}function oi(e,t,s){if(t=Oc(t),Oc(e)!==t&&s)throw Error(n(425))}function ai(){}var da=null,ha=null;function fa(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pa=typeof setTimeout=="function"?setTimeout:void 0,Ym=typeof clearTimeout=="function"?clearTimeout:void 0,Pc=typeof Promise=="function"?Promise:void 0,Xm=typeof queueMicrotask=="function"?queueMicrotask:typeof Pc<"u"?function(e){return Pc.resolve(null).then(e).catch(Zm)}:pa;function Zm(e){setTimeout(function(){throw e})}function ma(e,t){var s=t,l=0;do{var d=s.nextSibling;if(e.removeChild(s),d&&d.nodeType===8)if(s=d.data,s==="/$"){if(l===0){e.removeChild(d),Kn(t);return}l--}else s!=="$"&&s!=="$?"&&s!=="$!"||l++;s=d}while(s);Kn(t)}function ur(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Ac(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var nn=Math.random().toString(36).slice(2),Ut="__reactFiber$"+nn,ss="__reactProps$"+nn,Vt="__reactContainer$"+nn,ga="__reactEvents$"+nn,eg="__reactListeners$"+nn,tg="__reactHandles$"+nn;function Cr(e){var t=e[Ut];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Vt]||s[Ut]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Ac(e);e!==null;){if(s=e[Ut])return s;e=Ac(e)}return t}e=s,s=e.parentNode}return null}function is(e){return e=e[Ut]||e[Vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(n(33))}function li(e){return e[ss]||null}var va=[],on=-1;function cr(e){return{current:e}}function Ee(e){0>on||(e.current=va[on],va[on]=null,on--)}function _e(e,t){on++,va[on]=e.current,e.current=t}var dr={},Ke=cr(dr),nt=cr(!1),Tr=dr;function an(e,t){var s=e.type.contextTypes;if(!s)return dr;var l=e.stateNode;if(l&&l.__reactInternalMemoizedUnmaskedChildContext===t)return l.__reactInternalMemoizedMaskedChildContext;var d={},h;for(h in s)d[h]=t[h];return l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function st(e){return e=e.childContextTypes,e!=null}function ui(){Ee(nt),Ee(Ke)}function Ic(e,t,s){if(Ke.current!==dr)throw Error(n(168));_e(Ke,t),_e(nt,s)}function Lc(e,t,s){var l=e.stateNode;if(t=t.childContextTypes,typeof l.getChildContext!="function")return s;l=l.getChildContext();for(var d in l)if(!(d in t))throw Error(n(108,we(e)||"Unknown",d));return K({},s,l)}function ci(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||dr,Tr=Ke.current,_e(Ke,e),_e(nt,nt.current),!0}function $c(e,t,s){var l=e.stateNode;if(!l)throw Error(n(169));s?(e=Lc(e,t,Tr),l.__reactInternalMemoizedMergedChildContext=e,Ee(nt),Ee(Ke),_e(Ke,e)):Ee(nt),_e(nt,s)}var Wt=null,di=!1,ya=!1;function Dc(e){Wt===null?Wt=[e]:Wt.push(e)}function rg(e){di=!0,Dc(e)}function hr(){if(!ya&&Wt!==null){ya=!0;var e=0,t=ye;try{var s=Wt;for(ye=1;e<s.length;e++){var l=s[e];do l=l(!0);while(l!==null)}Wt=null,di=!1}catch(d){throw Wt!==null&&(Wt=Wt.slice(e+1)),Mu(Bo,hr),d}finally{ye=t,ya=!1}}return null}var ln=[],un=0,hi=null,fi=0,yt=[],wt=0,Rr=null,Ht=1,qt="";function Nr(e,t){ln[un++]=fi,ln[un++]=hi,hi=e,fi=t}function Uc(e,t,s){yt[wt++]=Ht,yt[wt++]=qt,yt[wt++]=Rr,Rr=e;var l=Ht;e=qt;var d=32-jt(l)-1;l&=~(1<<d),s+=1;var h=32-jt(t)+d;if(30<h){var v=d-d%5;h=(l&(1<<v)-1).toString(32),l>>=v,d-=v,Ht=1<<32-jt(t)+d|s<<d|l,qt=h+e}else Ht=1<<h|s<<d|l,qt=e}function wa(e){e.return!==null&&(Nr(e,1),Uc(e,1,0))}function _a(e){for(;e===hi;)hi=ln[--un],ln[un]=null,fi=ln[--un],ln[un]=null;for(;e===Rr;)Rr=yt[--wt],yt[wt]=null,qt=yt[--wt],yt[wt]=null,Ht=yt[--wt],yt[wt]=null}var pt=null,mt=null,be=!1,Tt=null;function Mc(e,t){var s=Et(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Bc(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,pt=e,mt=ur(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,pt=e,mt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=Rr!==null?{id:Ht,overflow:qt}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Et(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,pt=e,mt=null,!0):!1;default:return!1}}function xa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Sa(e){if(be){var t=mt;if(t){var s=t;if(!Bc(e,t)){if(xa(e))throw Error(n(418));t=ur(s.nextSibling);var l=pt;t&&Bc(e,t)?Mc(l,s):(e.flags=e.flags&-4097|2,be=!1,pt=e)}}else{if(xa(e))throw Error(n(418));e.flags=e.flags&-4097|2,be=!1,pt=e}}}function Fc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;pt=e}function pi(e){if(e!==pt)return!1;if(!be)return Fc(e),be=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!fa(e.type,e.memoizedProps)),t&&(t=mt)){if(xa(e))throw zc(),Error(n(418));for(;t;)Mc(e,t),t=ur(t.nextSibling)}if(Fc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(n(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){mt=ur(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}mt=null}}else mt=pt?ur(e.stateNode.nextSibling):null;return!0}function zc(){for(var e=mt;e;)e=ur(e.nextSibling)}function cn(){mt=pt=null,be=!1}function Ea(e){Tt===null?Tt=[e]:Tt.push(e)}var ng=B.ReactCurrentBatchConfig;function os(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(n(309));var l=s.stateNode}if(!l)throw Error(n(147,e));var d=l,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(v){var S=d.refs;v===null?delete S[h]:S[h]=v},t._stringRef=h,t)}if(typeof e!="string")throw Error(n(284));if(!s._owner)throw Error(n(290,e))}return e}function mi(e,t){throw e=Object.prototype.toString.call(t),Error(n(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Vc(e){var t=e._init;return t(e._payload)}function Wc(e){function t(N,C){if(e){var O=N.deletions;O===null?(N.deletions=[C],N.flags|=16):O.push(C)}}function s(N,C){if(!e)return null;for(;C!==null;)t(N,C),C=C.sibling;return null}function l(N,C){for(N=new Map;C!==null;)C.key!==null?N.set(C.key,C):N.set(C.index,C),C=C.sibling;return N}function d(N,C){return N=_r(N,C),N.index=0,N.sibling=null,N}function h(N,C,O){return N.index=O,e?(O=N.alternate,O!==null?(O=O.index,O<C?(N.flags|=2,C):O):(N.flags|=2,C)):(N.flags|=1048576,C)}function v(N){return e&&N.alternate===null&&(N.flags|=2),N}function S(N,C,O,F){return C===null||C.tag!==6?(C=pl(O,N.mode,F),C.return=N,C):(C=d(C,O),C.return=N,C)}function k(N,C,O,F){var Y=O.type;return Y===ee?U(N,C,O.props.children,F,O.key):C!==null&&(C.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===rt&&Vc(Y)===C.type)?(F=d(C,O.props),F.ref=os(N,C,O),F.return=N,F):(F=Mi(O.type,O.key,O.props,null,N.mode,F),F.ref=os(N,C,O),F.return=N,F)}function I(N,C,O,F){return C===null||C.tag!==4||C.stateNode.containerInfo!==O.containerInfo||C.stateNode.implementation!==O.implementation?(C=ml(O,N.mode,F),C.return=N,C):(C=d(C,O.children||[]),C.return=N,C)}function U(N,C,O,F,Y){return C===null||C.tag!==7?(C=Ur(O,N.mode,F,Y),C.return=N,C):(C=d(C,O),C.return=N,C)}function M(N,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return C=pl(""+C,N.mode,O),C.return=N,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case H:return O=Mi(C.type,C.key,C.props,null,N.mode,O),O.ref=os(N,null,C),O.return=N,O;case Z:return C=ml(C,N.mode,O),C.return=N,C;case rt:var F=C._init;return M(N,F(C._payload),O)}if(Ln(C)||oe(C))return C=Ur(C,N.mode,O,null),C.return=N,C;mi(N,C)}return null}function $(N,C,O,F){var Y=C!==null?C.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return Y!==null?null:S(N,C,""+O,F);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case H:return O.key===Y?k(N,C,O,F):null;case Z:return O.key===Y?I(N,C,O,F):null;case rt:return Y=O._init,$(N,C,Y(O._payload),F)}if(Ln(O)||oe(O))return Y!==null?null:U(N,C,O,F,null);mi(N,O)}return null}function W(N,C,O,F,Y){if(typeof F=="string"&&F!==""||typeof F=="number")return N=N.get(O)||null,S(C,N,""+F,Y);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case H:return N=N.get(F.key===null?O:F.key)||null,k(C,N,F,Y);case Z:return N=N.get(F.key===null?O:F.key)||null,I(C,N,F,Y);case rt:var re=F._init;return W(N,C,O,re(F._payload),Y)}if(Ln(F)||oe(F))return N=N.get(O)||null,U(C,N,F,Y,null);mi(C,F)}return null}function J(N,C,O,F){for(var Y=null,re=null,ne=C,ae=C=0,ze=null;ne!==null&&ae<O.length;ae++){ne.index>ae?(ze=ne,ne=null):ze=ne.sibling;var ge=$(N,ne,O[ae],F);if(ge===null){ne===null&&(ne=ze);break}e&&ne&&ge.alternate===null&&t(N,ne),C=h(ge,C,ae),re===null?Y=ge:re.sibling=ge,re=ge,ne=ze}if(ae===O.length)return s(N,ne),be&&Nr(N,ae),Y;if(ne===null){for(;ae<O.length;ae++)ne=M(N,O[ae],F),ne!==null&&(C=h(ne,C,ae),re===null?Y=ne:re.sibling=ne,re=ne);return be&&Nr(N,ae),Y}for(ne=l(N,ne);ae<O.length;ae++)ze=W(ne,N,ae,O[ae],F),ze!==null&&(e&&ze.alternate!==null&&ne.delete(ze.key===null?ae:ze.key),C=h(ze,C,ae),re===null?Y=ze:re.sibling=ze,re=ze);return e&&ne.forEach(function(xr){return t(N,xr)}),be&&Nr(N,ae),Y}function Q(N,C,O,F){var Y=oe(O);if(typeof Y!="function")throw Error(n(150));if(O=Y.call(O),O==null)throw Error(n(151));for(var re=Y=null,ne=C,ae=C=0,ze=null,ge=O.next();ne!==null&&!ge.done;ae++,ge=O.next()){ne.index>ae?(ze=ne,ne=null):ze=ne.sibling;var xr=$(N,ne,ge.value,F);if(xr===null){ne===null&&(ne=ze);break}e&&ne&&xr.alternate===null&&t(N,ne),C=h(xr,C,ae),re===null?Y=xr:re.sibling=xr,re=xr,ne=ze}if(ge.done)return s(N,ne),be&&Nr(N,ae),Y;if(ne===null){for(;!ge.done;ae++,ge=O.next())ge=M(N,ge.value,F),ge!==null&&(C=h(ge,C,ae),re===null?Y=ge:re.sibling=ge,re=ge);return be&&Nr(N,ae),Y}for(ne=l(N,ne);!ge.done;ae++,ge=O.next())ge=W(ne,N,ae,ge.value,F),ge!==null&&(e&&ge.alternate!==null&&ne.delete(ge.key===null?ae:ge.key),C=h(ge,C,ae),re===null?Y=ge:re.sibling=ge,re=ge);return e&&ne.forEach(function($g){return t(N,$g)}),be&&Nr(N,ae),Y}function Ae(N,C,O,F){if(typeof O=="object"&&O!==null&&O.type===ee&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case H:e:{for(var Y=O.key,re=C;re!==null;){if(re.key===Y){if(Y=O.type,Y===ee){if(re.tag===7){s(N,re.sibling),C=d(re,O.props.children),C.return=N,N=C;break e}}else if(re.elementType===Y||typeof Y=="object"&&Y!==null&&Y.$$typeof===rt&&Vc(Y)===re.type){s(N,re.sibling),C=d(re,O.props),C.ref=os(N,re,O),C.return=N,N=C;break e}s(N,re);break}else t(N,re);re=re.sibling}O.type===ee?(C=Ur(O.props.children,N.mode,F,O.key),C.return=N,N=C):(F=Mi(O.type,O.key,O.props,null,N.mode,F),F.ref=os(N,C,O),F.return=N,N=F)}return v(N);case Z:e:{for(re=O.key;C!==null;){if(C.key===re)if(C.tag===4&&C.stateNode.containerInfo===O.containerInfo&&C.stateNode.implementation===O.implementation){s(N,C.sibling),C=d(C,O.children||[]),C.return=N,N=C;break e}else{s(N,C);break}else t(N,C);C=C.sibling}C=ml(O,N.mode,F),C.return=N,N=C}return v(N);case rt:return re=O._init,Ae(N,C,re(O._payload),F)}if(Ln(O))return J(N,C,O,F);if(oe(O))return Q(N,C,O,F);mi(N,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,C!==null&&C.tag===6?(s(N,C.sibling),C=d(C,O),C.return=N,N=C):(s(N,C),C=pl(O,N.mode,F),C.return=N,N=C),v(N)):s(N,C)}return Ae}var dn=Wc(!0),Hc=Wc(!1),gi=cr(null),vi=null,hn=null,ka=null;function ba(){ka=hn=vi=null}function ja(e){var t=gi.current;Ee(gi),e._currentValue=t}function Ca(e,t,s){for(;e!==null;){var l=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,l!==null&&(l.childLanes|=t)):l!==null&&(l.childLanes&t)!==t&&(l.childLanes|=t),e===s)break;e=e.return}}function fn(e,t){vi=e,ka=hn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(it=!0),e.firstContext=null)}function _t(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},hn===null){if(vi===null)throw Error(n(308));hn=e,vi.dependencies={lanes:0,firstContext:e}}else hn=hn.next=e;return t}var Or=null;function Ta(e){Or===null?Or=[e]:Or.push(e)}function qc(e,t,s,l){var d=t.interleaved;return d===null?(s.next=s,Ta(t)):(s.next=d.next,d.next=s),t.interleaved=s,Kt(e,l)}function Kt(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var fr=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Gt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,s){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(he&2)!==0){var d=l.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),l.pending=t,Kt(e,s)}return d=l.interleaved,d===null?(t.next=t,Ta(l)):(t.next=d.next,d.next=t),l.interleaved=t,Kt(e,s)}function yi(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Vo(e,s)}}function Gc(e,t){var s=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,s===l)){var d=null,h=null;if(s=s.firstBaseUpdate,s!==null){do{var v={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};h===null?d=h=v:h=h.next=v,s=s.next}while(s!==null);h===null?d=h=t:h=h.next=t}else d=h=t;s={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:h,shared:l.shared,effects:l.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function wi(e,t,s,l){var d=e.updateQueue;fr=!1;var h=d.firstBaseUpdate,v=d.lastBaseUpdate,S=d.shared.pending;if(S!==null){d.shared.pending=null;var k=S,I=k.next;k.next=null,v===null?h=I:v.next=I,v=k;var U=e.alternate;U!==null&&(U=U.updateQueue,S=U.lastBaseUpdate,S!==v&&(S===null?U.firstBaseUpdate=I:S.next=I,U.lastBaseUpdate=k))}if(h!==null){var M=d.baseState;v=0,U=I=k=null,S=h;do{var $=S.lane,W=S.eventTime;if((l&$)===$){U!==null&&(U=U.next={eventTime:W,lane:0,tag:S.tag,payload:S.payload,callback:S.callback,next:null});e:{var J=e,Q=S;switch($=t,W=s,Q.tag){case 1:if(J=Q.payload,typeof J=="function"){M=J.call(W,M,$);break e}M=J;break e;case 3:J.flags=J.flags&-65537|128;case 0:if(J=Q.payload,$=typeof J=="function"?J.call(W,M,$):J,$==null)break e;M=K({},M,$);break e;case 2:fr=!0}}S.callback!==null&&S.lane!==0&&(e.flags|=64,$=d.effects,$===null?d.effects=[S]:$.push(S))}else W={eventTime:W,lane:$,tag:S.tag,payload:S.payload,callback:S.callback,next:null},U===null?(I=U=W,k=M):U=U.next=W,v|=$;if(S=S.next,S===null){if(S=d.shared.pending,S===null)break;$=S,S=$.next,$.next=null,d.lastBaseUpdate=$,d.shared.pending=null}}while(!0);if(U===null&&(k=M),d.baseState=k,d.firstBaseUpdate=I,d.lastBaseUpdate=U,t=d.shared.interleaved,t!==null){d=t;do v|=d.lane,d=d.next;while(d!==t)}else h===null&&(d.shared.lanes=0);Ir|=v,e.lanes=v,e.memoizedState=M}}function Jc(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var l=e[t],d=l.callback;if(d!==null){if(l.callback=null,l=s,typeof d!="function")throw Error(n(191,d));d.call(l)}}}var as={},Mt=cr(as),ls=cr(as),us=cr(as);function Pr(e){if(e===as)throw Error(n(174));return e}function Na(e,t){switch(_e(us,t),_e(ls,e),_e(Mt,as),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Oo(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Oo(t,e)}Ee(Mt),_e(Mt,t)}function pn(){Ee(Mt),Ee(ls),Ee(us)}function Qc(e){Pr(us.current);var t=Pr(Mt.current),s=Oo(t,e.type);t!==s&&(_e(ls,e),_e(Mt,s))}function Oa(e){ls.current===e&&(Ee(Mt),Ee(ls))}var Ce=cr(0);function _i(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pa=[];function Aa(){for(var e=0;e<Pa.length;e++)Pa[e]._workInProgressVersionPrimary=null;Pa.length=0}var xi=B.ReactCurrentDispatcher,Ia=B.ReactCurrentBatchConfig,Ar=0,Te=null,Ue=null,Be=null,Si=!1,cs=!1,ds=0,sg=0;function Ge(){throw Error(n(321))}function La(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!Ct(e[s],t[s]))return!1;return!0}function $a(e,t,s,l,d,h){if(Ar=h,Te=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xi.current=e===null||e.memoizedState===null?lg:ug,e=s(l,d),cs){h=0;do{if(cs=!1,ds=0,25<=h)throw Error(n(301));h+=1,Be=Ue=null,t.updateQueue=null,xi.current=cg,e=s(l,d)}while(cs)}if(xi.current=bi,t=Ue!==null&&Ue.next!==null,Ar=0,Be=Ue=Te=null,Si=!1,t)throw Error(n(300));return e}function Da(){var e=ds!==0;return ds=0,e}function Bt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Te.memoizedState=Be=e:Be=Be.next=e,Be}function xt(){if(Ue===null){var e=Te.alternate;e=e!==null?e.memoizedState:null}else e=Ue.next;var t=Be===null?Te.memoizedState:Be.next;if(t!==null)Be=t,Ue=e;else{if(e===null)throw Error(n(310));Ue=e,e={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Be===null?Te.memoizedState=Be=e:Be=Be.next=e}return Be}function hs(e,t){return typeof t=="function"?t(e):t}function Ua(e){var t=xt(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var l=Ue,d=l.baseQueue,h=s.pending;if(h!==null){if(d!==null){var v=d.next;d.next=h.next,h.next=v}l.baseQueue=d=h,s.pending=null}if(d!==null){h=d.next,l=l.baseState;var S=v=null,k=null,I=h;do{var U=I.lane;if((Ar&U)===U)k!==null&&(k=k.next={lane:0,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null}),l=I.hasEagerState?I.eagerState:e(l,I.action);else{var M={lane:U,action:I.action,hasEagerState:I.hasEagerState,eagerState:I.eagerState,next:null};k===null?(S=k=M,v=l):k=k.next=M,Te.lanes|=U,Ir|=U}I=I.next}while(I!==null&&I!==h);k===null?v=l:k.next=S,Ct(l,t.memoizedState)||(it=!0),t.memoizedState=l,t.baseState=v,t.baseQueue=k,s.lastRenderedState=l}if(e=s.interleaved,e!==null){d=e;do h=d.lane,Te.lanes|=h,Ir|=h,d=d.next;while(d!==e)}else d===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Ma(e){var t=xt(),s=t.queue;if(s===null)throw Error(n(311));s.lastRenderedReducer=e;var l=s.dispatch,d=s.pending,h=t.memoizedState;if(d!==null){s.pending=null;var v=d=d.next;do h=e(h,v.action),v=v.next;while(v!==d);Ct(h,t.memoizedState)||(it=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),s.lastRenderedState=h}return[h,l]}function Yc(){}function Xc(e,t){var s=Te,l=xt(),d=t(),h=!Ct(l.memoizedState,d);if(h&&(l.memoizedState=d,it=!0),l=l.queue,Ba(td.bind(null,s,l,e),[e]),l.getSnapshot!==t||h||Be!==null&&Be.memoizedState.tag&1){if(s.flags|=2048,fs(9,ed.bind(null,s,l,d,t),void 0,null),Fe===null)throw Error(n(349));(Ar&30)!==0||Zc(s,t,d)}return d}function Zc(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function ed(e,t,s,l){t.value=s,t.getSnapshot=l,rd(t)&&nd(e)}function td(e,t,s){return s(function(){rd(t)&&nd(e)})}function rd(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!Ct(e,s)}catch{return!0}}function nd(e){var t=Kt(e,1);t!==null&&Pt(t,e,1,-1)}function sd(e){var t=Bt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hs,lastRenderedState:e},t.queue=e,e=e.dispatch=ag.bind(null,Te,e),[t.memoizedState,e]}function fs(e,t,s,l){return e={tag:e,create:t,destroy:s,deps:l,next:null},t=Te.updateQueue,t===null?(t={lastEffect:null,stores:null},Te.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(l=s.next,s.next=e,e.next=l,t.lastEffect=e)),e}function id(){return xt().memoizedState}function Ei(e,t,s,l){var d=Bt();Te.flags|=e,d.memoizedState=fs(1|t,s,void 0,l===void 0?null:l)}function ki(e,t,s,l){var d=xt();l=l===void 0?null:l;var h=void 0;if(Ue!==null){var v=Ue.memoizedState;if(h=v.destroy,l!==null&&La(l,v.deps)){d.memoizedState=fs(t,s,h,l);return}}Te.flags|=e,d.memoizedState=fs(1|t,s,h,l)}function od(e,t){return Ei(8390656,8,e,t)}function Ba(e,t){return ki(2048,8,e,t)}function ad(e,t){return ki(4,2,e,t)}function ld(e,t){return ki(4,4,e,t)}function ud(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function cd(e,t,s){return s=s!=null?s.concat([e]):null,ki(4,4,ud.bind(null,t,e),s)}function Fa(){}function dd(e,t){var s=xt();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&La(t,l[1])?l[0]:(s.memoizedState=[e,t],e)}function hd(e,t){var s=xt();t=t===void 0?null:t;var l=s.memoizedState;return l!==null&&t!==null&&La(t,l[1])?l[0]:(e=e(),s.memoizedState=[e,t],e)}function fd(e,t,s){return(Ar&21)===0?(e.baseState&&(e.baseState=!1,it=!0),e.memoizedState=s):(Ct(s,t)||(s=Vu(),Te.lanes|=s,Ir|=s,e.baseState=!0),t)}function ig(e,t){var s=ye;ye=s!==0&&4>s?s:4,e(!0);var l=Ia.transition;Ia.transition={};try{e(!1),t()}finally{ye=s,Ia.transition=l}}function pd(){return xt().memoizedState}function og(e,t,s){var l=yr(e);if(s={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null},md(e))gd(t,s);else if(s=qc(e,t,s,l),s!==null){var d=Ze();Pt(s,e,l,d),vd(s,t,l)}}function ag(e,t,s){var l=yr(e),d={lane:l,action:s,hasEagerState:!1,eagerState:null,next:null};if(md(e))gd(t,d);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var v=t.lastRenderedState,S=h(v,s);if(d.hasEagerState=!0,d.eagerState=S,Ct(S,v)){var k=t.interleaved;k===null?(d.next=d,Ta(t)):(d.next=k.next,k.next=d),t.interleaved=d;return}}catch{}finally{}s=qc(e,t,d,l),s!==null&&(d=Ze(),Pt(s,e,l,d),vd(s,t,l))}}function md(e){var t=e.alternate;return e===Te||t!==null&&t===Te}function gd(e,t){cs=Si=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function vd(e,t,s){if((s&4194240)!==0){var l=t.lanes;l&=e.pendingLanes,s|=l,t.lanes=s,Vo(e,s)}}var bi={readContext:_t,useCallback:Ge,useContext:Ge,useEffect:Ge,useImperativeHandle:Ge,useInsertionEffect:Ge,useLayoutEffect:Ge,useMemo:Ge,useReducer:Ge,useRef:Ge,useState:Ge,useDebugValue:Ge,useDeferredValue:Ge,useTransition:Ge,useMutableSource:Ge,useSyncExternalStore:Ge,useId:Ge,unstable_isNewReconciler:!1},lg={readContext:_t,useCallback:function(e,t){return Bt().memoizedState=[e,t===void 0?null:t],e},useContext:_t,useEffect:od,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Ei(4194308,4,ud.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Ei(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ei(4,2,e,t)},useMemo:function(e,t){var s=Bt();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var l=Bt();return t=s!==void 0?s(t):t,l.memoizedState=l.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},l.queue=e,e=e.dispatch=og.bind(null,Te,e),[l.memoizedState,e]},useRef:function(e){var t=Bt();return e={current:e},t.memoizedState=e},useState:sd,useDebugValue:Fa,useDeferredValue:function(e){return Bt().memoizedState=e},useTransition:function(){var e=sd(!1),t=e[0];return e=ig.bind(null,e[1]),Bt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var l=Te,d=Bt();if(be){if(s===void 0)throw Error(n(407));s=s()}else{if(s=t(),Fe===null)throw Error(n(349));(Ar&30)!==0||Zc(l,t,s)}d.memoizedState=s;var h={value:s,getSnapshot:t};return d.queue=h,od(td.bind(null,l,h,e),[e]),l.flags|=2048,fs(9,ed.bind(null,l,h,s,t),void 0,null),s},useId:function(){var e=Bt(),t=Fe.identifierPrefix;if(be){var s=qt,l=Ht;s=(l&~(1<<32-jt(l)-1)).toString(32)+s,t=":"+t+"R"+s,s=ds++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=sg++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ug={readContext:_t,useCallback:dd,useContext:_t,useEffect:Ba,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:ld,useMemo:hd,useReducer:Ua,useRef:id,useState:function(){return Ua(hs)},useDebugValue:Fa,useDeferredValue:function(e){var t=xt();return fd(t,Ue.memoizedState,e)},useTransition:function(){var e=Ua(hs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Yc,useSyncExternalStore:Xc,useId:pd,unstable_isNewReconciler:!1},cg={readContext:_t,useCallback:dd,useContext:_t,useEffect:Ba,useImperativeHandle:cd,useInsertionEffect:ad,useLayoutEffect:ld,useMemo:hd,useReducer:Ma,useRef:id,useState:function(){return Ma(hs)},useDebugValue:Fa,useDeferredValue:function(e){var t=xt();return Ue===null?t.memoizedState=e:fd(t,Ue.memoizedState,e)},useTransition:function(){var e=Ma(hs)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Yc,useSyncExternalStore:Xc,useId:pd,unstable_isNewReconciler:!1};function Rt(e,t){if(e&&e.defaultProps){t=K({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}function za(e,t,s,l){t=e.memoizedState,s=s(l,t),s=s==null?t:K({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var ji={isMounted:function(e){return(e=e._reactInternals)?jr(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var l=Ze(),d=yr(e),h=Gt(l,d);h.payload=t,s!=null&&(h.callback=s),t=pr(e,h,d),t!==null&&(Pt(t,e,d,l),yi(t,e,d))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var l=Ze(),d=yr(e),h=Gt(l,d);h.tag=1,h.payload=t,s!=null&&(h.callback=s),t=pr(e,h,d),t!==null&&(Pt(t,e,d,l),yi(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Ze(),l=yr(e),d=Gt(s,l);d.tag=2,t!=null&&(d.callback=t),t=pr(e,d,l),t!==null&&(Pt(t,e,l,s),yi(t,e,l))}};function yd(e,t,s,l,d,h,v){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,h,v):t.prototype&&t.prototype.isPureReactComponent?!Zn(s,l)||!Zn(d,h):!0}function wd(e,t,s){var l=!1,d=dr,h=t.contextType;return typeof h=="object"&&h!==null?h=_t(h):(d=st(t)?Tr:Ke.current,l=t.contextTypes,h=(l=l!=null)?an(e,d):dr),t=new t(s,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ji,e.stateNode=t,t._reactInternals=e,l&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=h),t}function _d(e,t,s,l){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,l),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,l),t.state!==e&&ji.enqueueReplaceState(t,t.state,null)}function Va(e,t,s,l){var d=e.stateNode;d.props=s,d.state=e.memoizedState,d.refs={},Ra(e);var h=t.contextType;typeof h=="object"&&h!==null?d.context=_t(h):(h=st(t)?Tr:Ke.current,d.context=an(e,h)),d.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(za(e,t,h,s),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&ji.enqueueReplaceState(d,d.state,null),wi(e,s,d,l),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function mn(e,t){try{var s="",l=t;do s+=pe(l),l=l.return;while(l);var d=s}catch(h){d=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:d,digest:null}}function Wa(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function Ha(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var dg=typeof WeakMap=="function"?WeakMap:Map;function xd(e,t,s){s=Gt(-1,s),s.tag=3,s.payload={element:null};var l=t.value;return s.callback=function(){Ai||(Ai=!0,ol=l),Ha(e,t)},s}function Sd(e,t,s){s=Gt(-1,s),s.tag=3;var l=e.type.getDerivedStateFromError;if(typeof l=="function"){var d=t.value;s.payload=function(){return l(d)},s.callback=function(){Ha(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(s.callback=function(){Ha(e,t),typeof l!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var v=t.stack;this.componentDidCatch(t.value,{componentStack:v!==null?v:""})}),s}function Ed(e,t,s){var l=e.pingCache;if(l===null){l=e.pingCache=new dg;var d=new Set;l.set(t,d)}else d=l.get(t),d===void 0&&(d=new Set,l.set(t,d));d.has(s)||(d.add(s),e=bg.bind(null,e,t,s),t.then(e,e))}function kd(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bd(e,t,s,l,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=Gt(-1,1),t.tag=2,pr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var hg=B.ReactCurrentOwner,it=!1;function Xe(e,t,s,l){t.child=e===null?Hc(t,null,s,l):dn(t,e.child,s,l)}function jd(e,t,s,l,d){s=s.render;var h=t.ref;return fn(t,d),l=$a(e,t,s,l,h,d),s=Da(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(be&&s&&wa(t),t.flags|=1,Xe(e,t,l,d),t.child)}function Cd(e,t,s,l,d){if(e===null){var h=s.type;return typeof h=="function"&&!fl(h)&&h.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=h,Td(e,t,h,l,d)):(e=Mi(s.type,null,l,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&d)===0){var v=h.memoizedProps;if(s=s.compare,s=s!==null?s:Zn,s(v,l)&&e.ref===t.ref)return Jt(e,t,d)}return t.flags|=1,e=_r(h,l),e.ref=t.ref,e.return=t,t.child=e}function Td(e,t,s,l,d){if(e!==null){var h=e.memoizedProps;if(Zn(h,l)&&e.ref===t.ref)if(it=!1,t.pendingProps=l=h,(e.lanes&d)!==0)(e.flags&131072)!==0&&(it=!0);else return t.lanes=e.lanes,Jt(e,t,d)}return qa(e,t,s,l,d)}function Rd(e,t,s){var l=t.pendingProps,d=l.children,h=e!==null?e.memoizedState:null;if(l.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(vn,gt),gt|=s;else{if((s&1073741824)===0)return e=h!==null?h.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_e(vn,gt),gt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},l=h!==null?h.baseLanes:s,_e(vn,gt),gt|=l}else h!==null?(l=h.baseLanes|s,t.memoizedState=null):l=s,_e(vn,gt),gt|=l;return Xe(e,t,d,s),t.child}function Nd(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function qa(e,t,s,l,d){var h=st(s)?Tr:Ke.current;return h=an(t,h),fn(t,d),s=$a(e,t,s,l,h,d),l=Da(),e!==null&&!it?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,Jt(e,t,d)):(be&&l&&wa(t),t.flags|=1,Xe(e,t,s,d),t.child)}function Od(e,t,s,l,d){if(st(s)){var h=!0;ci(t)}else h=!1;if(fn(t,d),t.stateNode===null)Ti(e,t),wd(t,s,l),Va(t,s,l,d),l=!0;else if(e===null){var v=t.stateNode,S=t.memoizedProps;v.props=S;var k=v.context,I=s.contextType;typeof I=="object"&&I!==null?I=_t(I):(I=st(s)?Tr:Ke.current,I=an(t,I));var U=s.getDerivedStateFromProps,M=typeof U=="function"||typeof v.getSnapshotBeforeUpdate=="function";M||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==l||k!==I)&&_d(t,v,l,I),fr=!1;var $=t.memoizedState;v.state=$,wi(t,l,v,d),k=t.memoizedState,S!==l||$!==k||nt.current||fr?(typeof U=="function"&&(za(t,s,U,l),k=t.memoizedState),(S=fr||yd(t,s,S,l,$,k,I))?(M||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(t.flags|=4194308)):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=l,t.memoizedState=k),v.props=l,v.state=k,v.context=I,l=S):(typeof v.componentDidMount=="function"&&(t.flags|=4194308),l=!1)}else{v=t.stateNode,Kc(e,t),S=t.memoizedProps,I=t.type===t.elementType?S:Rt(t.type,S),v.props=I,M=t.pendingProps,$=v.context,k=s.contextType,typeof k=="object"&&k!==null?k=_t(k):(k=st(s)?Tr:Ke.current,k=an(t,k));var W=s.getDerivedStateFromProps;(U=typeof W=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(S!==M||$!==k)&&_d(t,v,l,k),fr=!1,$=t.memoizedState,v.state=$,wi(t,l,v,d);var J=t.memoizedState;S!==M||$!==J||nt.current||fr?(typeof W=="function"&&(za(t,s,W,l),J=t.memoizedState),(I=fr||yd(t,s,I,l,$,J,k)||!1)?(U||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(l,J,k),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(l,J,k)),typeof v.componentDidUpdate=="function"&&(t.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof v.componentDidUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),t.memoizedProps=l,t.memoizedState=J),v.props=l,v.state=J,v.context=k,l=I):(typeof v.componentDidUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&$===e.memoizedState||(t.flags|=1024),l=!1)}return Ka(e,t,s,l,h,d)}function Ka(e,t,s,l,d,h){Nd(e,t);var v=(t.flags&128)!==0;if(!l&&!v)return d&&$c(t,s,!1),Jt(e,t,h);l=t.stateNode,hg.current=t;var S=v&&typeof s.getDerivedStateFromError!="function"?null:l.render();return t.flags|=1,e!==null&&v?(t.child=dn(t,e.child,null,h),t.child=dn(t,null,S,h)):Xe(e,t,S,h),t.memoizedState=l.state,d&&$c(t,s,!0),t.child}function Pd(e){var t=e.stateNode;t.pendingContext?Ic(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ic(e,t.context,!1),Na(e,t.containerInfo)}function Ad(e,t,s,l,d){return cn(),Ea(d),t.flags|=256,Xe(e,t,s,l),t.child}var Ga={dehydrated:null,treeContext:null,retryLane:0};function Ja(e){return{baseLanes:e,cachePool:null,transitions:null}}function Id(e,t,s){var l=t.pendingProps,d=Ce.current,h=!1,v=(t.flags&128)!==0,S;if((S=v)||(S=e!==null&&e.memoizedState===null?!1:(d&2)!==0),S?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),_e(Ce,d&1),e===null)return Sa(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(v=l.children,e=l.fallback,h?(l=t.mode,h=t.child,v={mode:"hidden",children:v},(l&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=v):h=Bi(v,l,0,null),e=Ur(e,l,s,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Ja(s),t.memoizedState=Ga,e):Qa(t,v));if(d=e.memoizedState,d!==null&&(S=d.dehydrated,S!==null))return fg(e,t,v,l,S,d,s);if(h){h=l.fallback,v=t.mode,d=e.child,S=d.sibling;var k={mode:"hidden",children:l.children};return(v&1)===0&&t.child!==d?(l=t.child,l.childLanes=0,l.pendingProps=k,t.deletions=null):(l=_r(d,k),l.subtreeFlags=d.subtreeFlags&14680064),S!==null?h=_r(S,h):(h=Ur(h,v,s,null),h.flags|=2),h.return=t,l.return=t,l.sibling=h,t.child=l,l=h,h=t.child,v=e.child.memoizedState,v=v===null?Ja(s):{baseLanes:v.baseLanes|s,cachePool:null,transitions:v.transitions},h.memoizedState=v,h.childLanes=e.childLanes&~s,t.memoizedState=Ga,l}return h=e.child,e=h.sibling,l=_r(h,{mode:"visible",children:l.children}),(t.mode&1)===0&&(l.lanes=s),l.return=t,l.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=l,t.memoizedState=null,l}function Qa(e,t){return t=Bi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ci(e,t,s,l){return l!==null&&Ea(l),dn(t,e.child,null,s),e=Qa(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function fg(e,t,s,l,d,h,v){if(s)return t.flags&256?(t.flags&=-257,l=Wa(Error(n(422))),Ci(e,t,v,l)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=l.fallback,d=t.mode,l=Bi({mode:"visible",children:l.children},d,0,null),h=Ur(h,d,v,null),h.flags|=2,l.return=t,h.return=t,l.sibling=h,t.child=l,(t.mode&1)!==0&&dn(t,e.child,null,v),t.child.memoizedState=Ja(v),t.memoizedState=Ga,h);if((t.mode&1)===0)return Ci(e,t,v,null);if(d.data==="$!"){if(l=d.nextSibling&&d.nextSibling.dataset,l)var S=l.dgst;return l=S,h=Error(n(419)),l=Wa(h,l,void 0),Ci(e,t,v,l)}if(S=(v&e.childLanes)!==0,it||S){if(l=Fe,l!==null){switch(v&-v){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(l.suspendedLanes|v))!==0?0:d,d!==0&&d!==h.retryLane&&(h.retryLane=d,Kt(e,d),Pt(l,e,d,-1))}return hl(),l=Wa(Error(n(421))),Ci(e,t,v,l)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=jg.bind(null,e),d._reactRetry=t,null):(e=h.treeContext,mt=ur(d.nextSibling),pt=t,be=!0,Tt=null,e!==null&&(yt[wt++]=Ht,yt[wt++]=qt,yt[wt++]=Rr,Ht=e.id,qt=e.overflow,Rr=t),t=Qa(t,l.children),t.flags|=4096,t)}function Ld(e,t,s){e.lanes|=t;var l=e.alternate;l!==null&&(l.lanes|=t),Ca(e.return,t,s)}function Ya(e,t,s,l,d){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:l,tail:s,tailMode:d}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=l,h.tail=s,h.tailMode=d)}function $d(e,t,s){var l=t.pendingProps,d=l.revealOrder,h=l.tail;if(Xe(e,t,l.children,s),l=Ce.current,(l&2)!==0)l=l&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ld(e,s,t);else if(e.tag===19)Ld(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}if(_e(Ce,l),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(s=t.child,d=null;s!==null;)e=s.alternate,e!==null&&_i(e)===null&&(d=s),s=s.sibling;s=d,s===null?(d=t.child,t.child=null):(d=s.sibling,s.sibling=null),Ya(t,!1,d,s,h);break;case"backwards":for(s=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&_i(e)===null){t.child=d;break}e=d.sibling,d.sibling=s,s=d,d=e}Ya(t,!0,s,null,h);break;case"together":Ya(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ti(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),Ir|=t.lanes,(s&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(n(153));if(t.child!==null){for(e=t.child,s=_r(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=_r(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function pg(e,t,s){switch(t.tag){case 3:Pd(t),cn();break;case 5:Qc(t);break;case 1:st(t.type)&&ci(t);break;case 4:Na(t,t.stateNode.containerInfo);break;case 10:var l=t.type._context,d=t.memoizedProps.value;_e(gi,l._currentValue),l._currentValue=d;break;case 13:if(l=t.memoizedState,l!==null)return l.dehydrated!==null?(_e(Ce,Ce.current&1),t.flags|=128,null):(s&t.child.childLanes)!==0?Id(e,t,s):(_e(Ce,Ce.current&1),e=Jt(e,t,s),e!==null?e.sibling:null);_e(Ce,Ce.current&1);break;case 19:if(l=(s&t.childLanes)!==0,(e.flags&128)!==0){if(l)return $d(e,t,s);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),_e(Ce,Ce.current),l)break;return null;case 22:case 23:return t.lanes=0,Rd(e,t,s)}return Jt(e,t,s)}var Dd,Xa,Ud,Md;Dd=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},Xa=function(){},Ud=function(e,t,s,l){var d=e.memoizedProps;if(d!==l){e=t.stateNode,Pr(Mt.current);var h=null;switch(s){case"input":d=Co(e,d),l=Co(e,l),h=[];break;case"select":d=K({},d,{value:void 0}),l=K({},l,{value:void 0}),h=[];break;case"textarea":d=No(e,d),l=No(e,l),h=[];break;default:typeof d.onClick!="function"&&typeof l.onClick=="function"&&(e.onclick=ai)}Po(s,l);var v;s=null;for(I in d)if(!l.hasOwnProperty(I)&&d.hasOwnProperty(I)&&d[I]!=null)if(I==="style"){var S=d[I];for(v in S)S.hasOwnProperty(v)&&(s||(s={}),s[v]="")}else I!=="dangerouslySetInnerHTML"&&I!=="children"&&I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&I!=="autoFocus"&&(a.hasOwnProperty(I)?h||(h=[]):(h=h||[]).push(I,null));for(I in l){var k=l[I];if(S=d!=null?d[I]:void 0,l.hasOwnProperty(I)&&k!==S&&(k!=null||S!=null))if(I==="style")if(S){for(v in S)!S.hasOwnProperty(v)||k&&k.hasOwnProperty(v)||(s||(s={}),s[v]="");for(v in k)k.hasOwnProperty(v)&&S[v]!==k[v]&&(s||(s={}),s[v]=k[v])}else s||(h||(h=[]),h.push(I,s)),s=k;else I==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,S=S?S.__html:void 0,k!=null&&S!==k&&(h=h||[]).push(I,k)):I==="children"?typeof k!="string"&&typeof k!="number"||(h=h||[]).push(I,""+k):I!=="suppressContentEditableWarning"&&I!=="suppressHydrationWarning"&&(a.hasOwnProperty(I)?(k!=null&&I==="onScroll"&&Se("scroll",e),h||S===k||(h=[])):(h=h||[]).push(I,k))}s&&(h=h||[]).push("style",s);var I=h;(t.updateQueue=I)&&(t.flags|=4)}},Md=function(e,t,s,l){s!==l&&(t.flags|=4)};function ps(e,t){if(!be)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var l=null;s!==null;)s.alternate!==null&&(l=s),s=s.sibling;l===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Je(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,l=0;if(t)for(var d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags&14680064,l|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)s|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=s,t}function mg(e,t,s){var l=t.pendingProps;switch(_a(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Je(t),null;case 1:return st(t.type)&&ui(),Je(t),null;case 3:return l=t.stateNode,pn(),Ee(nt),Ee(Ke),Aa(),l.pendingContext&&(l.context=l.pendingContext,l.pendingContext=null),(e===null||e.child===null)&&(pi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Tt!==null&&(ul(Tt),Tt=null))),Xa(e,t),Je(t),null;case 5:Oa(t);var d=Pr(us.current);if(s=t.type,e!==null&&t.stateNode!=null)Ud(e,t,s,l,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!l){if(t.stateNode===null)throw Error(n(166));return Je(t),null}if(e=Pr(Mt.current),pi(t)){l=t.stateNode,s=t.type;var h=t.memoizedProps;switch(l[Ut]=t,l[ss]=h,e=(t.mode&1)!==0,s){case"dialog":Se("cancel",l),Se("close",l);break;case"iframe":case"object":case"embed":Se("load",l);break;case"video":case"audio":for(d=0;d<ts.length;d++)Se(ts[d],l);break;case"source":Se("error",l);break;case"img":case"image":case"link":Se("error",l),Se("load",l);break;case"details":Se("toggle",l);break;case"input":wu(l,h),Se("invalid",l);break;case"select":l._wrapperState={wasMultiple:!!h.multiple},Se("invalid",l);break;case"textarea":Su(l,h),Se("invalid",l)}Po(s,h),d=null;for(var v in h)if(h.hasOwnProperty(v)){var S=h[v];v==="children"?typeof S=="string"?l.textContent!==S&&(h.suppressHydrationWarning!==!0&&oi(l.textContent,S,e),d=["children",S]):typeof S=="number"&&l.textContent!==""+S&&(h.suppressHydrationWarning!==!0&&oi(l.textContent,S,e),d=["children",""+S]):a.hasOwnProperty(v)&&S!=null&&v==="onScroll"&&Se("scroll",l)}switch(s){case"input":Ds(l),xu(l,h,!0);break;case"textarea":Ds(l),ku(l);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(l.onclick=ai)}l=d,t.updateQueue=l,l!==null&&(t.flags|=4)}else{v=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bu(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=v.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof l.is=="string"?e=v.createElement(s,{is:l.is}):(e=v.createElement(s),s==="select"&&(v=e,l.multiple?v.multiple=!0:l.size&&(v.size=l.size))):e=v.createElementNS(e,s),e[Ut]=t,e[ss]=l,Dd(e,t,!1,!1),t.stateNode=e;e:{switch(v=Ao(s,l),s){case"dialog":Se("cancel",e),Se("close",e),d=l;break;case"iframe":case"object":case"embed":Se("load",e),d=l;break;case"video":case"audio":for(d=0;d<ts.length;d++)Se(ts[d],e);d=l;break;case"source":Se("error",e),d=l;break;case"img":case"image":case"link":Se("error",e),Se("load",e),d=l;break;case"details":Se("toggle",e),d=l;break;case"input":wu(e,l),d=Co(e,l),Se("invalid",e);break;case"option":d=l;break;case"select":e._wrapperState={wasMultiple:!!l.multiple},d=K({},l,{value:void 0}),Se("invalid",e);break;case"textarea":Su(e,l),d=No(e,l),Se("invalid",e);break;default:d=l}Po(s,d),S=d;for(h in S)if(S.hasOwnProperty(h)){var k=S[h];h==="style"?Tu(e,k):h==="dangerouslySetInnerHTML"?(k=k?k.__html:void 0,k!=null&&ju(e,k)):h==="children"?typeof k=="string"?(s!=="textarea"||k!=="")&&$n(e,k):typeof k=="number"&&$n(e,""+k):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(a.hasOwnProperty(h)?k!=null&&h==="onScroll"&&Se("scroll",e):k!=null&&T(e,h,k,v))}switch(s){case"input":Ds(e),xu(e,l,!1);break;case"textarea":Ds(e),ku(e);break;case"option":l.value!=null&&e.setAttribute("value",""+ve(l.value));break;case"select":e.multiple=!!l.multiple,h=l.value,h!=null?Gr(e,!!l.multiple,h,!1):l.defaultValue!=null&&Gr(e,!!l.multiple,l.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=ai)}switch(s){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}}l&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Je(t),null;case 6:if(e&&t.stateNode!=null)Md(e,t,e.memoizedProps,l);else{if(typeof l!="string"&&t.stateNode===null)throw Error(n(166));if(s=Pr(us.current),Pr(Mt.current),pi(t)){if(l=t.stateNode,s=t.memoizedProps,l[Ut]=t,(h=l.nodeValue!==s)&&(e=pt,e!==null))switch(e.tag){case 3:oi(l.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oi(l.nodeValue,s,(e.mode&1)!==0)}h&&(t.flags|=4)}else l=(s.nodeType===9?s:s.ownerDocument).createTextNode(l),l[Ut]=t,t.stateNode=l}return Je(t),null;case 13:if(Ee(Ce),l=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(be&&mt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)zc(),cn(),t.flags|=98560,h=!1;else if(h=pi(t),l!==null&&l.dehydrated!==null){if(e===null){if(!h)throw Error(n(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(n(317));h[Ut]=t}else cn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Je(t),h=!1}else Tt!==null&&(ul(Tt),Tt=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=s,t):(l=l!==null,l!==(e!==null&&e.memoizedState!==null)&&l&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ce.current&1)!==0?Me===0&&(Me=3):hl())),t.updateQueue!==null&&(t.flags|=4),Je(t),null);case 4:return pn(),Xa(e,t),e===null&&rs(t.stateNode.containerInfo),Je(t),null;case 10:return ja(t.type._context),Je(t),null;case 17:return st(t.type)&&ui(),Je(t),null;case 19:if(Ee(Ce),h=t.memoizedState,h===null)return Je(t),null;if(l=(t.flags&128)!==0,v=h.rendering,v===null)if(l)ps(h,!1);else{if(Me!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(v=_i(e),v!==null){for(t.flags|=128,ps(h,!1),l=v.updateQueue,l!==null&&(t.updateQueue=l,t.flags|=4),t.subtreeFlags=0,l=s,s=t.child;s!==null;)h=s,e=l,h.flags&=14680066,v=h.alternate,v===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=v.childLanes,h.lanes=v.lanes,h.child=v.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=v.memoizedProps,h.memoizedState=v.memoizedState,h.updateQueue=v.updateQueue,h.type=v.type,e=v.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return _e(Ce,Ce.current&1|2),t.child}e=e.sibling}h.tail!==null&&Pe()>yn&&(t.flags|=128,l=!0,ps(h,!1),t.lanes=4194304)}else{if(!l)if(e=_i(v),e!==null){if(t.flags|=128,l=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),ps(h,!0),h.tail===null&&h.tailMode==="hidden"&&!v.alternate&&!be)return Je(t),null}else 2*Pe()-h.renderingStartTime>yn&&s!==1073741824&&(t.flags|=128,l=!0,ps(h,!1),t.lanes=4194304);h.isBackwards?(v.sibling=t.child,t.child=v):(s=h.last,s!==null?s.sibling=v:t.child=v,h.last=v)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Pe(),t.sibling=null,s=Ce.current,_e(Ce,l?s&1|2:s&1),t):(Je(t),null);case 22:case 23:return dl(),l=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==l&&(t.flags|=8192),l&&(t.mode&1)!==0?(gt&1073741824)!==0&&(Je(t),t.subtreeFlags&6&&(t.flags|=8192)):Je(t),null;case 24:return null;case 25:return null}throw Error(n(156,t.tag))}function gg(e,t){switch(_a(t),t.tag){case 1:return st(t.type)&&ui(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pn(),Ee(nt),Ee(Ke),Aa(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Oa(t),null;case 13:if(Ee(Ce),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(n(340));cn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ee(Ce),null;case 4:return pn(),null;case 10:return ja(t.type._context),null;case 22:case 23:return dl(),null;case 24:return null;default:return null}}var Ri=!1,Qe=!1,vg=typeof WeakSet=="function"?WeakSet:Set,q=null;function gn(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(l){Oe(e,t,l)}else s.current=null}function Za(e,t,s){try{s()}catch(l){Oe(e,t,l)}}var Bd=!1;function yg(e,t){if(da=Js,e=yc(),na(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var l=s.getSelection&&s.getSelection();if(l&&l.rangeCount!==0){s=l.anchorNode;var d=l.anchorOffset,h=l.focusNode;l=l.focusOffset;try{s.nodeType,h.nodeType}catch{s=null;break e}var v=0,S=-1,k=-1,I=0,U=0,M=e,$=null;t:for(;;){for(var W;M!==s||d!==0&&M.nodeType!==3||(S=v+d),M!==h||l!==0&&M.nodeType!==3||(k=v+l),M.nodeType===3&&(v+=M.nodeValue.length),(W=M.firstChild)!==null;)$=M,M=W;for(;;){if(M===e)break t;if($===s&&++I===d&&(S=v),$===h&&++U===l&&(k=v),(W=M.nextSibling)!==null)break;M=$,$=M.parentNode}M=W}s=S===-1||k===-1?null:{start:S,end:k}}else s=null}s=s||{start:0,end:0}}else s=null;for(ha={focusedElem:e,selectionRange:s},Js=!1,q=t;q!==null;)if(t=q,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,q=e;else for(;q!==null;){t=q;try{var J=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(J!==null){var Q=J.memoizedProps,Ae=J.memoizedState,N=t.stateNode,C=N.getSnapshotBeforeUpdate(t.elementType===t.type?Q:Rt(t.type,Q),Ae);N.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(F){Oe(t,t.return,F)}if(e=t.sibling,e!==null){e.return=t.return,q=e;break}q=t.return}return J=Bd,Bd=!1,J}function ms(e,t,s){var l=t.updateQueue;if(l=l!==null?l.lastEffect:null,l!==null){var d=l=l.next;do{if((d.tag&e)===e){var h=d.destroy;d.destroy=void 0,h!==void 0&&Za(t,s,h)}d=d.next}while(d!==l)}}function Ni(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var l=s.create;s.destroy=l()}s=s.next}while(s!==t)}}function el(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function Fd(e){var t=e.alternate;t!==null&&(e.alternate=null,Fd(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Ut],delete t[ss],delete t[ga],delete t[eg],delete t[tg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function zd(e){return e.tag===5||e.tag===3||e.tag===4}function Vd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||zd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function tl(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=ai));else if(l!==4&&(e=e.child,e!==null))for(tl(e,t,s),e=e.sibling;e!==null;)tl(e,t,s),e=e.sibling}function rl(e,t,s){var l=e.tag;if(l===5||l===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(l!==4&&(e=e.child,e!==null))for(rl(e,t,s),e=e.sibling;e!==null;)rl(e,t,s),e=e.sibling}var Ve=null,Nt=!1;function mr(e,t,s){for(s=s.child;s!==null;)Wd(e,t,s),s=s.sibling}function Wd(e,t,s){if(Dt&&typeof Dt.onCommitFiberUnmount=="function")try{Dt.onCommitFiberUnmount(Vs,s)}catch{}switch(s.tag){case 5:Qe||gn(s,t);case 6:var l=Ve,d=Nt;Ve=null,mr(e,t,s),Ve=l,Nt=d,Ve!==null&&(Nt?(e=Ve,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Ve.removeChild(s.stateNode));break;case 18:Ve!==null&&(Nt?(e=Ve,s=s.stateNode,e.nodeType===8?ma(e.parentNode,s):e.nodeType===1&&ma(e,s),Kn(e)):ma(Ve,s.stateNode));break;case 4:l=Ve,d=Nt,Ve=s.stateNode.containerInfo,Nt=!0,mr(e,t,s),Ve=l,Nt=d;break;case 0:case 11:case 14:case 15:if(!Qe&&(l=s.updateQueue,l!==null&&(l=l.lastEffect,l!==null))){d=l=l.next;do{var h=d,v=h.destroy;h=h.tag,v!==void 0&&((h&2)!==0||(h&4)!==0)&&Za(s,t,v),d=d.next}while(d!==l)}mr(e,t,s);break;case 1:if(!Qe&&(gn(s,t),l=s.stateNode,typeof l.componentWillUnmount=="function"))try{l.props=s.memoizedProps,l.state=s.memoizedState,l.componentWillUnmount()}catch(S){Oe(s,t,S)}mr(e,t,s);break;case 21:mr(e,t,s);break;case 22:s.mode&1?(Qe=(l=Qe)||s.memoizedState!==null,mr(e,t,s),Qe=l):mr(e,t,s);break;default:mr(e,t,s)}}function Hd(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new vg),t.forEach(function(l){var d=Cg.bind(null,e,l);s.has(l)||(s.add(l),l.then(d,d))})}}function Ot(e,t){var s=t.deletions;if(s!==null)for(var l=0;l<s.length;l++){var d=s[l];try{var h=e,v=t,S=v;e:for(;S!==null;){switch(S.tag){case 5:Ve=S.stateNode,Nt=!1;break e;case 3:Ve=S.stateNode.containerInfo,Nt=!0;break e;case 4:Ve=S.stateNode.containerInfo,Nt=!0;break e}S=S.return}if(Ve===null)throw Error(n(160));Wd(h,v,d),Ve=null,Nt=!1;var k=d.alternate;k!==null&&(k.return=null),d.return=null}catch(I){Oe(d,t,I)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qd(t,e),t=t.sibling}function qd(e,t){var s=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ot(t,e),Ft(e),l&4){try{ms(3,e,e.return),Ni(3,e)}catch(Q){Oe(e,e.return,Q)}try{ms(5,e,e.return)}catch(Q){Oe(e,e.return,Q)}}break;case 1:Ot(t,e),Ft(e),l&512&&s!==null&&gn(s,s.return);break;case 5:if(Ot(t,e),Ft(e),l&512&&s!==null&&gn(s,s.return),e.flags&32){var d=e.stateNode;try{$n(d,"")}catch(Q){Oe(e,e.return,Q)}}if(l&4&&(d=e.stateNode,d!=null)){var h=e.memoizedProps,v=s!==null?s.memoizedProps:h,S=e.type,k=e.updateQueue;if(e.updateQueue=null,k!==null)try{S==="input"&&h.type==="radio"&&h.name!=null&&_u(d,h),Ao(S,v);var I=Ao(S,h);for(v=0;v<k.length;v+=2){var U=k[v],M=k[v+1];U==="style"?Tu(d,M):U==="dangerouslySetInnerHTML"?ju(d,M):U==="children"?$n(d,M):T(d,U,M,I)}switch(S){case"input":To(d,h);break;case"textarea":Eu(d,h);break;case"select":var $=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!h.multiple;var W=h.value;W!=null?Gr(d,!!h.multiple,W,!1):$!==!!h.multiple&&(h.defaultValue!=null?Gr(d,!!h.multiple,h.defaultValue,!0):Gr(d,!!h.multiple,h.multiple?[]:"",!1))}d[ss]=h}catch(Q){Oe(e,e.return,Q)}}break;case 6:if(Ot(t,e),Ft(e),l&4){if(e.stateNode===null)throw Error(n(162));d=e.stateNode,h=e.memoizedProps;try{d.nodeValue=h}catch(Q){Oe(e,e.return,Q)}}break;case 3:if(Ot(t,e),Ft(e),l&4&&s!==null&&s.memoizedState.isDehydrated)try{Kn(t.containerInfo)}catch(Q){Oe(e,e.return,Q)}break;case 4:Ot(t,e),Ft(e);break;case 13:Ot(t,e),Ft(e),d=e.child,d.flags&8192&&(h=d.memoizedState!==null,d.stateNode.isHidden=h,!h||d.alternate!==null&&d.alternate.memoizedState!==null||(il=Pe())),l&4&&Hd(e);break;case 22:if(U=s!==null&&s.memoizedState!==null,e.mode&1?(Qe=(I=Qe)||U,Ot(t,e),Qe=I):Ot(t,e),Ft(e),l&8192){if(I=e.memoizedState!==null,(e.stateNode.isHidden=I)&&!U&&(e.mode&1)!==0)for(q=e,U=e.child;U!==null;){for(M=q=U;q!==null;){switch($=q,W=$.child,$.tag){case 0:case 11:case 14:case 15:ms(4,$,$.return);break;case 1:gn($,$.return);var J=$.stateNode;if(typeof J.componentWillUnmount=="function"){l=$,s=$.return;try{t=l,J.props=t.memoizedProps,J.state=t.memoizedState,J.componentWillUnmount()}catch(Q){Oe(l,s,Q)}}break;case 5:gn($,$.return);break;case 22:if($.memoizedState!==null){Jd(M);continue}}W!==null?(W.return=$,q=W):Jd(M)}U=U.sibling}e:for(U=null,M=e;;){if(M.tag===5){if(U===null){U=M;try{d=M.stateNode,I?(h=d.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(S=M.stateNode,k=M.memoizedProps.style,v=k!=null&&k.hasOwnProperty("display")?k.display:null,S.style.display=Cu("display",v))}catch(Q){Oe(e,e.return,Q)}}}else if(M.tag===6){if(U===null)try{M.stateNode.nodeValue=I?"":M.memoizedProps}catch(Q){Oe(e,e.return,Q)}}else if((M.tag!==22&&M.tag!==23||M.memoizedState===null||M===e)&&M.child!==null){M.child.return=M,M=M.child;continue}if(M===e)break e;for(;M.sibling===null;){if(M.return===null||M.return===e)break e;U===M&&(U=null),M=M.return}U===M&&(U=null),M.sibling.return=M.return,M=M.sibling}}break;case 19:Ot(t,e),Ft(e),l&4&&Hd(e);break;case 21:break;default:Ot(t,e),Ft(e)}}function Ft(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(zd(s)){var l=s;break e}s=s.return}throw Error(n(160))}switch(l.tag){case 5:var d=l.stateNode;l.flags&32&&($n(d,""),l.flags&=-33);var h=Vd(e);rl(e,h,d);break;case 3:case 4:var v=l.stateNode.containerInfo,S=Vd(e);tl(e,S,v);break;default:throw Error(n(161))}}catch(k){Oe(e,e.return,k)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function wg(e,t,s){q=e,Kd(e)}function Kd(e,t,s){for(var l=(e.mode&1)!==0;q!==null;){var d=q,h=d.child;if(d.tag===22&&l){var v=d.memoizedState!==null||Ri;if(!v){var S=d.alternate,k=S!==null&&S.memoizedState!==null||Qe;S=Ri;var I=Qe;if(Ri=v,(Qe=k)&&!I)for(q=d;q!==null;)v=q,k=v.child,v.tag===22&&v.memoizedState!==null?Qd(d):k!==null?(k.return=v,q=k):Qd(d);for(;h!==null;)q=h,Kd(h),h=h.sibling;q=d,Ri=S,Qe=I}Gd(e)}else(d.subtreeFlags&8772)!==0&&h!==null?(h.return=d,q=h):Gd(e)}}function Gd(e){for(;q!==null;){var t=q;if((t.flags&8772)!==0){var s=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Qe||Ni(5,t);break;case 1:var l=t.stateNode;if(t.flags&4&&!Qe)if(s===null)l.componentDidMount();else{var d=t.elementType===t.type?s.memoizedProps:Rt(t.type,s.memoizedProps);l.componentDidUpdate(d,s.memoizedState,l.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&Jc(t,h,l);break;case 3:var v=t.updateQueue;if(v!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Jc(t,v,s)}break;case 5:var S=t.stateNode;if(s===null&&t.flags&4){s=S;var k=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":k.autoFocus&&s.focus();break;case"img":k.src&&(s.src=k.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var I=t.alternate;if(I!==null){var U=I.memoizedState;if(U!==null){var M=U.dehydrated;M!==null&&Kn(M)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}Qe||t.flags&512&&el(t)}catch($){Oe(t,t.return,$)}}if(t===e){q=null;break}if(s=t.sibling,s!==null){s.return=t.return,q=s;break}q=t.return}}function Jd(e){for(;q!==null;){var t=q;if(t===e){q=null;break}var s=t.sibling;if(s!==null){s.return=t.return,q=s;break}q=t.return}}function Qd(e){for(;q!==null;){var t=q;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Ni(4,t)}catch(k){Oe(t,s,k)}break;case 1:var l=t.stateNode;if(typeof l.componentDidMount=="function"){var d=t.return;try{l.componentDidMount()}catch(k){Oe(t,d,k)}}var h=t.return;try{el(t)}catch(k){Oe(t,h,k)}break;case 5:var v=t.return;try{el(t)}catch(k){Oe(t,v,k)}}}catch(k){Oe(t,t.return,k)}if(t===e){q=null;break}var S=t.sibling;if(S!==null){S.return=t.return,q=S;break}q=t.return}}var _g=Math.ceil,Oi=B.ReactCurrentDispatcher,nl=B.ReactCurrentOwner,St=B.ReactCurrentBatchConfig,he=0,Fe=null,Le=null,We=0,gt=0,vn=cr(0),Me=0,gs=null,Ir=0,Pi=0,sl=0,vs=null,ot=null,il=0,yn=1/0,Qt=null,Ai=!1,ol=null,gr=null,Ii=!1,vr=null,Li=0,ys=0,al=null,$i=-1,Di=0;function Ze(){return(he&6)!==0?Pe():$i!==-1?$i:$i=Pe()}function yr(e){return(e.mode&1)===0?1:(he&2)!==0&&We!==0?We&-We:ng.transition!==null?(Di===0&&(Di=Vu()),Di):(e=ye,e!==0||(e=window.event,e=e===void 0?16:Xu(e.type)),e)}function Pt(e,t,s,l){if(50<ys)throw ys=0,al=null,Error(n(185));zn(e,s,l),((he&2)===0||e!==Fe)&&(e===Fe&&((he&2)===0&&(Pi|=s),Me===4&&wr(e,We)),at(e,l),s===1&&he===0&&(t.mode&1)===0&&(yn=Pe()+500,di&&hr()))}function at(e,t){var s=e.callbackNode;nm(e,t);var l=qs(e,e===Fe?We:0);if(l===0)s!==null&&Bu(s),e.callbackNode=null,e.callbackPriority=0;else if(t=l&-l,e.callbackPriority!==t){if(s!=null&&Bu(s),t===1)e.tag===0?rg(Xd.bind(null,e)):Dc(Xd.bind(null,e)),Xm(function(){(he&6)===0&&hr()}),s=null;else{switch(Wu(l)){case 1:s=Bo;break;case 4:s=Fu;break;case 16:s=zs;break;case 536870912:s=zu;break;default:s=zs}s=oh(s,Yd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function Yd(e,t){if($i=-1,Di=0,(he&6)!==0)throw Error(n(327));var s=e.callbackNode;if(wn()&&e.callbackNode!==s)return null;var l=qs(e,e===Fe?We:0);if(l===0)return null;if((l&30)!==0||(l&e.expiredLanes)!==0||t)t=Ui(e,l);else{t=l;var d=he;he|=2;var h=eh();(Fe!==e||We!==t)&&(Qt=null,yn=Pe()+500,$r(e,t));do try{Eg();break}catch(S){Zd(e,S)}while(!0);ba(),Oi.current=h,he=d,Le!==null?t=0:(Fe=null,We=0,t=Me)}if(t!==0){if(t===2&&(d=Fo(e),d!==0&&(l=d,t=ll(e,d))),t===1)throw s=gs,$r(e,0),wr(e,l),at(e,Pe()),s;if(t===6)wr(e,l);else{if(d=e.current.alternate,(l&30)===0&&!xg(d)&&(t=Ui(e,l),t===2&&(h=Fo(e),h!==0&&(l=h,t=ll(e,h))),t===1))throw s=gs,$r(e,0),wr(e,l),at(e,Pe()),s;switch(e.finishedWork=d,e.finishedLanes=l,t){case 0:case 1:throw Error(n(345));case 2:Dr(e,ot,Qt);break;case 3:if(wr(e,l),(l&130023424)===l&&(t=il+500-Pe(),10<t)){if(qs(e,0)!==0)break;if(d=e.suspendedLanes,(d&l)!==l){Ze(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=pa(Dr.bind(null,e,ot,Qt),t);break}Dr(e,ot,Qt);break;case 4:if(wr(e,l),(l&4194240)===l)break;for(t=e.eventTimes,d=-1;0<l;){var v=31-jt(l);h=1<<v,v=t[v],v>d&&(d=v),l&=~h}if(l=d,l=Pe()-l,l=(120>l?120:480>l?480:1080>l?1080:1920>l?1920:3e3>l?3e3:4320>l?4320:1960*_g(l/1960))-l,10<l){e.timeoutHandle=pa(Dr.bind(null,e,ot,Qt),l);break}Dr(e,ot,Qt);break;case 5:Dr(e,ot,Qt);break;default:throw Error(n(329))}}}return at(e,Pe()),e.callbackNode===s?Yd.bind(null,e):null}function ll(e,t){var s=vs;return e.current.memoizedState.isDehydrated&&($r(e,t).flags|=256),e=Ui(e,t),e!==2&&(t=ot,ot=s,t!==null&&ul(t)),e}function ul(e){ot===null?ot=e:ot.push.apply(ot,e)}function xg(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var l=0;l<s.length;l++){var d=s[l],h=d.getSnapshot;d=d.value;try{if(!Ct(h(),d))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function wr(e,t){for(t&=~sl,t&=~Pi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-jt(t),l=1<<s;e[s]=-1,t&=~l}}function Xd(e){if((he&6)!==0)throw Error(n(327));wn();var t=qs(e,0);if((t&1)===0)return at(e,Pe()),null;var s=Ui(e,t);if(e.tag!==0&&s===2){var l=Fo(e);l!==0&&(t=l,s=ll(e,l))}if(s===1)throw s=gs,$r(e,0),wr(e,t),at(e,Pe()),s;if(s===6)throw Error(n(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dr(e,ot,Qt),at(e,Pe()),null}function cl(e,t){var s=he;he|=1;try{return e(t)}finally{he=s,he===0&&(yn=Pe()+500,di&&hr())}}function Lr(e){vr!==null&&vr.tag===0&&(he&6)===0&&wn();var t=he;he|=1;var s=St.transition,l=ye;try{if(St.transition=null,ye=1,e)return e()}finally{ye=l,St.transition=s,he=t,(he&6)===0&&hr()}}function dl(){gt=vn.current,Ee(vn)}function $r(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,Ym(s)),Le!==null)for(s=Le.return;s!==null;){var l=s;switch(_a(l),l.tag){case 1:l=l.type.childContextTypes,l!=null&&ui();break;case 3:pn(),Ee(nt),Ee(Ke),Aa();break;case 5:Oa(l);break;case 4:pn();break;case 13:Ee(Ce);break;case 19:Ee(Ce);break;case 10:ja(l.type._context);break;case 22:case 23:dl()}s=s.return}if(Fe=e,Le=e=_r(e.current,null),We=gt=t,Me=0,gs=null,sl=Pi=Ir=0,ot=vs=null,Or!==null){for(t=0;t<Or.length;t++)if(s=Or[t],l=s.interleaved,l!==null){s.interleaved=null;var d=l.next,h=s.pending;if(h!==null){var v=h.next;h.next=d,l.next=v}s.pending=l}Or=null}return e}function Zd(e,t){do{var s=Le;try{if(ba(),xi.current=bi,Si){for(var l=Te.memoizedState;l!==null;){var d=l.queue;d!==null&&(d.pending=null),l=l.next}Si=!1}if(Ar=0,Be=Ue=Te=null,cs=!1,ds=0,nl.current=null,s===null||s.return===null){Me=1,gs=t,Le=null;break}e:{var h=e,v=s.return,S=s,k=t;if(t=We,S.flags|=32768,k!==null&&typeof k=="object"&&typeof k.then=="function"){var I=k,U=S,M=U.tag;if((U.mode&1)===0&&(M===0||M===11||M===15)){var $=U.alternate;$?(U.updateQueue=$.updateQueue,U.memoizedState=$.memoizedState,U.lanes=$.lanes):(U.updateQueue=null,U.memoizedState=null)}var W=kd(v);if(W!==null){W.flags&=-257,bd(W,v,S,h,t),W.mode&1&&Ed(h,I,t),t=W,k=I;var J=t.updateQueue;if(J===null){var Q=new Set;Q.add(k),t.updateQueue=Q}else J.add(k);break e}else{if((t&1)===0){Ed(h,I,t),hl();break e}k=Error(n(426))}}else if(be&&S.mode&1){var Ae=kd(v);if(Ae!==null){(Ae.flags&65536)===0&&(Ae.flags|=256),bd(Ae,v,S,h,t),Ea(mn(k,S));break e}}h=k=mn(k,S),Me!==4&&(Me=2),vs===null?vs=[h]:vs.push(h),h=v;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var N=xd(h,k,t);Gc(h,N);break e;case 1:S=k;var C=h.type,O=h.stateNode;if((h.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(gr===null||!gr.has(O)))){h.flags|=65536,t&=-t,h.lanes|=t;var F=Sd(h,S,t);Gc(h,F);break e}}h=h.return}while(h!==null)}rh(s)}catch(Y){t=Y,Le===s&&s!==null&&(Le=s=s.return);continue}break}while(!0)}function eh(){var e=Oi.current;return Oi.current=bi,e===null?bi:e}function hl(){(Me===0||Me===3||Me===2)&&(Me=4),Fe===null||(Ir&268435455)===0&&(Pi&268435455)===0||wr(Fe,We)}function Ui(e,t){var s=he;he|=2;var l=eh();(Fe!==e||We!==t)&&(Qt=null,$r(e,t));do try{Sg();break}catch(d){Zd(e,d)}while(!0);if(ba(),he=s,Oi.current=l,Le!==null)throw Error(n(261));return Fe=null,We=0,Me}function Sg(){for(;Le!==null;)th(Le)}function Eg(){for(;Le!==null&&!Gp();)th(Le)}function th(e){var t=ih(e.alternate,e,gt);e.memoizedProps=e.pendingProps,t===null?rh(e):Le=t,nl.current=null}function rh(e){var t=e;do{var s=t.alternate;if(e=t.return,(t.flags&32768)===0){if(s=mg(s,t,gt),s!==null){Le=s;return}}else{if(s=gg(s,t),s!==null){s.flags&=32767,Le=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Me=6,Le=null;return}}if(t=t.sibling,t!==null){Le=t;return}Le=t=e}while(t!==null);Me===0&&(Me=5)}function Dr(e,t,s){var l=ye,d=St.transition;try{St.transition=null,ye=1,kg(e,t,s,l)}finally{St.transition=d,ye=l}return null}function kg(e,t,s,l){do wn();while(vr!==null);if((he&6)!==0)throw Error(n(327));s=e.finishedWork;var d=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(n(177));e.callbackNode=null,e.callbackPriority=0;var h=s.lanes|s.childLanes;if(sm(e,h),e===Fe&&(Le=Fe=null,We=0),(s.subtreeFlags&2064)===0&&(s.flags&2064)===0||Ii||(Ii=!0,oh(zs,function(){return wn(),null})),h=(s.flags&15990)!==0,(s.subtreeFlags&15990)!==0||h){h=St.transition,St.transition=null;var v=ye;ye=1;var S=he;he|=4,nl.current=null,yg(e,s),qd(s,e),Wm(ha),Js=!!da,ha=da=null,e.current=s,wg(s),Jp(),he=S,ye=v,St.transition=h}else e.current=s;if(Ii&&(Ii=!1,vr=e,Li=d),h=e.pendingLanes,h===0&&(gr=null),Xp(s.stateNode),at(e,Pe()),t!==null)for(l=e.onRecoverableError,s=0;s<t.length;s++)d=t[s],l(d.value,{componentStack:d.stack,digest:d.digest});if(Ai)throw Ai=!1,e=ol,ol=null,e;return(Li&1)!==0&&e.tag!==0&&wn(),h=e.pendingLanes,(h&1)!==0?e===al?ys++:(ys=0,al=e):ys=0,hr(),null}function wn(){if(vr!==null){var e=Wu(Li),t=St.transition,s=ye;try{if(St.transition=null,ye=16>e?16:e,vr===null)var l=!1;else{if(e=vr,vr=null,Li=0,(he&6)!==0)throw Error(n(331));var d=he;for(he|=4,q=e.current;q!==null;){var h=q,v=h.child;if((q.flags&16)!==0){var S=h.deletions;if(S!==null){for(var k=0;k<S.length;k++){var I=S[k];for(q=I;q!==null;){var U=q;switch(U.tag){case 0:case 11:case 15:ms(8,U,h)}var M=U.child;if(M!==null)M.return=U,q=M;else for(;q!==null;){U=q;var $=U.sibling,W=U.return;if(Fd(U),U===I){q=null;break}if($!==null){$.return=W,q=$;break}q=W}}}var J=h.alternate;if(J!==null){var Q=J.child;if(Q!==null){J.child=null;do{var Ae=Q.sibling;Q.sibling=null,Q=Ae}while(Q!==null)}}q=h}}if((h.subtreeFlags&2064)!==0&&v!==null)v.return=h,q=v;else e:for(;q!==null;){if(h=q,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:ms(9,h,h.return)}var N=h.sibling;if(N!==null){N.return=h.return,q=N;break e}q=h.return}}var C=e.current;for(q=C;q!==null;){v=q;var O=v.child;if((v.subtreeFlags&2064)!==0&&O!==null)O.return=v,q=O;else e:for(v=C;q!==null;){if(S=q,(S.flags&2048)!==0)try{switch(S.tag){case 0:case 11:case 15:Ni(9,S)}}catch(Y){Oe(S,S.return,Y)}if(S===v){q=null;break e}var F=S.sibling;if(F!==null){F.return=S.return,q=F;break e}q=S.return}}if(he=d,hr(),Dt&&typeof Dt.onPostCommitFiberRoot=="function")try{Dt.onPostCommitFiberRoot(Vs,e)}catch{}l=!0}return l}finally{ye=s,St.transition=t}}return!1}function nh(e,t,s){t=mn(s,t),t=xd(e,t,1),e=pr(e,t,1),t=Ze(),e!==null&&(zn(e,1,t),at(e,t))}function Oe(e,t,s){if(e.tag===3)nh(e,e,s);else for(;t!==null;){if(t.tag===3){nh(t,e,s);break}else if(t.tag===1){var l=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(gr===null||!gr.has(l))){e=mn(s,e),e=Sd(t,e,1),t=pr(t,e,1),e=Ze(),t!==null&&(zn(t,1,e),at(t,e));break}}t=t.return}}function bg(e,t,s){var l=e.pingCache;l!==null&&l.delete(t),t=Ze(),e.pingedLanes|=e.suspendedLanes&s,Fe===e&&(We&s)===s&&(Me===4||Me===3&&(We&130023424)===We&&500>Pe()-il?$r(e,0):sl|=s),at(e,t)}function sh(e,t){t===0&&((e.mode&1)===0?t=1:(t=Hs,Hs<<=1,(Hs&130023424)===0&&(Hs=4194304)));var s=Ze();e=Kt(e,t),e!==null&&(zn(e,t,s),at(e,s))}function jg(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),sh(e,s)}function Cg(e,t){var s=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(s=d.retryLane);break;case 19:l=e.stateNode;break;default:throw Error(n(314))}l!==null&&l.delete(t),sh(e,s)}var ih;ih=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||nt.current)it=!0;else{if((e.lanes&s)===0&&(t.flags&128)===0)return it=!1,pg(e,t,s);it=(e.flags&131072)!==0}else it=!1,be&&(t.flags&1048576)!==0&&Uc(t,fi,t.index);switch(t.lanes=0,t.tag){case 2:var l=t.type;Ti(e,t),e=t.pendingProps;var d=an(t,Ke.current);fn(t,s),d=$a(null,t,l,e,d,s);var h=Da();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,st(l)?(h=!0,ci(t)):h=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,Ra(t),d.updater=ji,t.stateNode=d,d._reactInternals=t,Va(t,l,e,s),t=Ka(null,t,l,!0,h,s)):(t.tag=0,be&&h&&wa(t),Xe(null,t,d,s),t=t.child),t;case 16:l=t.elementType;e:{switch(Ti(e,t),e=t.pendingProps,d=l._init,l=d(l._payload),t.type=l,d=t.tag=Rg(l),e=Rt(l,e),d){case 0:t=qa(null,t,l,e,s);break e;case 1:t=Od(null,t,l,e,s);break e;case 11:t=jd(null,t,l,e,s);break e;case 14:t=Cd(null,t,l,Rt(l.type,e),s);break e}throw Error(n(306,l,""))}return t;case 0:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),qa(e,t,l,d,s);case 1:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Od(e,t,l,d,s);case 3:e:{if(Pd(t),e===null)throw Error(n(387));l=t.pendingProps,h=t.memoizedState,d=h.element,Kc(e,t),wi(t,l,null,s);var v=t.memoizedState;if(l=v.element,h.isDehydrated)if(h={element:l,isDehydrated:!1,cache:v.cache,pendingSuspenseBoundaries:v.pendingSuspenseBoundaries,transitions:v.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){d=mn(Error(n(423)),t),t=Ad(e,t,l,s,d);break e}else if(l!==d){d=mn(Error(n(424)),t),t=Ad(e,t,l,s,d);break e}else for(mt=ur(t.stateNode.containerInfo.firstChild),pt=t,be=!0,Tt=null,s=Hc(t,null,l,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(cn(),l===d){t=Jt(e,t,s);break e}Xe(e,t,l,s)}t=t.child}return t;case 5:return Qc(t),e===null&&Sa(t),l=t.type,d=t.pendingProps,h=e!==null?e.memoizedProps:null,v=d.children,fa(l,d)?v=null:h!==null&&fa(l,h)&&(t.flags|=32),Nd(e,t),Xe(e,t,v,s),t.child;case 6:return e===null&&Sa(t),null;case 13:return Id(e,t,s);case 4:return Na(t,t.stateNode.containerInfo),l=t.pendingProps,e===null?t.child=dn(t,null,l,s):Xe(e,t,l,s),t.child;case 11:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),jd(e,t,l,d,s);case 7:return Xe(e,t,t.pendingProps,s),t.child;case 8:return Xe(e,t,t.pendingProps.children,s),t.child;case 12:return Xe(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(l=t.type._context,d=t.pendingProps,h=t.memoizedProps,v=d.value,_e(gi,l._currentValue),l._currentValue=v,h!==null)if(Ct(h.value,v)){if(h.children===d.children&&!nt.current){t=Jt(e,t,s);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var S=h.dependencies;if(S!==null){v=h.child;for(var k=S.firstContext;k!==null;){if(k.context===l){if(h.tag===1){k=Gt(-1,s&-s),k.tag=2;var I=h.updateQueue;if(I!==null){I=I.shared;var U=I.pending;U===null?k.next=k:(k.next=U.next,U.next=k),I.pending=k}}h.lanes|=s,k=h.alternate,k!==null&&(k.lanes|=s),Ca(h.return,s,t),S.lanes|=s;break}k=k.next}}else if(h.tag===10)v=h.type===t.type?null:h.child;else if(h.tag===18){if(v=h.return,v===null)throw Error(n(341));v.lanes|=s,S=v.alternate,S!==null&&(S.lanes|=s),Ca(v,s,t),v=h.sibling}else v=h.child;if(v!==null)v.return=h;else for(v=h;v!==null;){if(v===t){v=null;break}if(h=v.sibling,h!==null){h.return=v.return,v=h;break}v=v.return}h=v}Xe(e,t,d.children,s),t=t.child}return t;case 9:return d=t.type,l=t.pendingProps.children,fn(t,s),d=_t(d),l=l(d),t.flags|=1,Xe(e,t,l,s),t.child;case 14:return l=t.type,d=Rt(l,t.pendingProps),d=Rt(l.type,d),Cd(e,t,l,d,s);case 15:return Td(e,t,t.type,t.pendingProps,s);case 17:return l=t.type,d=t.pendingProps,d=t.elementType===l?d:Rt(l,d),Ti(e,t),t.tag=1,st(l)?(e=!0,ci(t)):e=!1,fn(t,s),wd(t,l,d),Va(t,l,d,s),Ka(null,t,l,!0,e,s);case 19:return $d(e,t,s);case 22:return Rd(e,t,s)}throw Error(n(156,t.tag))};function oh(e,t){return Mu(e,t)}function Tg(e,t,s,l){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Et(e,t,s,l){return new Tg(e,t,s,l)}function fl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Rg(e){if(typeof e=="function")return fl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fe)return 11;if(e===dt)return 14}return 2}function _r(e,t){var s=e.alternate;return s===null?(s=Et(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Mi(e,t,s,l,d,h){var v=2;if(l=e,typeof e=="function")fl(e)&&(v=1);else if(typeof e=="string")v=5;else e:switch(e){case ee:return Ur(s.children,d,h,t);case V:v=8,d|=8;break;case te:return e=Et(12,s,t,d|2),e.elementType=te,e.lanes=h,e;case Ie:return e=Et(13,s,t,d),e.elementType=Ie,e.lanes=h,e;case tt:return e=Et(19,s,t,d),e.elementType=tt,e.lanes=h,e;case Ne:return Bi(s,d,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case se:v=10;break e;case de:v=9;break e;case fe:v=11;break e;case dt:v=14;break e;case rt:v=16,l=null;break e}throw Error(n(130,e==null?e:typeof e,""))}return t=Et(v,s,t,d),t.elementType=e,t.type=l,t.lanes=h,t}function Ur(e,t,s,l){return e=Et(7,e,l,t),e.lanes=s,e}function Bi(e,t,s,l){return e=Et(22,e,l,t),e.elementType=Ne,e.lanes=s,e.stateNode={isHidden:!1},e}function pl(e,t,s){return e=Et(6,e,null,t),e.lanes=s,e}function ml(e,t,s){return t=Et(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ng(e,t,s,l,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zo(0),this.expirationTimes=zo(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zo(0),this.identifierPrefix=l,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function gl(e,t,s,l,d,h,v,S,k){return e=new Ng(e,t,s,S,k),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Et(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:l,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(h),e}function Og(e,t,s){var l=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Z,key:l==null?null:""+l,children:e,containerInfo:t,implementation:s}}function ah(e){if(!e)return dr;e=e._reactInternals;e:{if(jr(e)!==e||e.tag!==1)throw Error(n(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(st(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(n(171))}if(e.tag===1){var s=e.type;if(st(s))return Lc(e,s,t)}return t}function lh(e,t,s,l,d,h,v,S,k){return e=gl(s,l,!0,e,d,h,v,S,k),e.context=ah(null),s=e.current,l=Ze(),d=yr(s),h=Gt(l,d),h.callback=t??null,pr(s,h,d),e.current.lanes=d,zn(e,d,l),at(e,l),e}function Fi(e,t,s,l){var d=t.current,h=Ze(),v=yr(d);return s=ah(s),t.context===null?t.context=s:t.pendingContext=s,t=Gt(h,v),t.payload={element:e},l=l===void 0?null:l,l!==null&&(t.callback=l),e=pr(d,t,v),e!==null&&(Pt(e,d,v,h),yi(e,d,v)),v}function zi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uh(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function vl(e,t){uh(e,t),(e=e.alternate)&&uh(e,t)}function Pg(){return null}var ch=typeof reportError=="function"?reportError:function(e){console.error(e)};function yl(e){this._internalRoot=e}Vi.prototype.render=yl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(n(409));Fi(e,t,null,null)},Vi.prototype.unmount=yl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Lr(function(){Fi(null,e,null,null)}),t[Vt]=null}};function Vi(e){this._internalRoot=e}Vi.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ku();e={blockedOn:null,target:e,priority:t};for(var s=0;s<or.length&&t!==0&&t<or[s].priority;s++);or.splice(s,0,e),s===0&&Qu(e)}};function wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wi(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function dh(){}function Ag(e,t,s,l,d){if(d){if(typeof l=="function"){var h=l;l=function(){var I=zi(v);h.call(I)}}var v=lh(t,l,e,0,null,!1,!1,"",dh);return e._reactRootContainer=v,e[Vt]=v.current,rs(e.nodeType===8?e.parentNode:e),Lr(),v}for(;d=e.lastChild;)e.removeChild(d);if(typeof l=="function"){var S=l;l=function(){var I=zi(k);S.call(I)}}var k=gl(e,0,!1,null,null,!1,!1,"",dh);return e._reactRootContainer=k,e[Vt]=k.current,rs(e.nodeType===8?e.parentNode:e),Lr(function(){Fi(t,k,s,l)}),k}function Hi(e,t,s,l,d){var h=s._reactRootContainer;if(h){var v=h;if(typeof d=="function"){var S=d;d=function(){var k=zi(v);S.call(k)}}Fi(t,v,e,d)}else v=Ag(s,t,e,d,l);return zi(v)}Hu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=Fn(t.pendingLanes);s!==0&&(Vo(t,s|1),at(t,Pe()),(he&6)===0&&(yn=Pe()+500,hr()))}break;case 13:Lr(function(){var l=Kt(e,1);if(l!==null){var d=Ze();Pt(l,e,1,d)}}),vl(e,1)}},Wo=function(e){if(e.tag===13){var t=Kt(e,134217728);if(t!==null){var s=Ze();Pt(t,e,134217728,s)}vl(e,134217728)}},qu=function(e){if(e.tag===13){var t=yr(e),s=Kt(e,t);if(s!==null){var l=Ze();Pt(s,e,t,l)}vl(e,t)}},Ku=function(){return ye},Gu=function(e,t){var s=ye;try{return ye=e,t()}finally{ye=s}},$o=function(e,t,s){switch(t){case"input":if(To(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var l=s[t];if(l!==e&&l.form===e.form){var d=li(l);if(!d)throw Error(n(90));yu(l),To(l,d)}}}break;case"textarea":Eu(e,s);break;case"select":t=s.value,t!=null&&Gr(e,!!s.multiple,t,!1)}},Pu=cl,Au=Lr;var Ig={usingClientEntryPoint:!1,Events:[is,sn,li,Nu,Ou,cl]},ws={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lg={bundleType:ws.bundleType,version:ws.version,rendererPackageName:ws.rendererPackageName,rendererConfig:ws.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Du(e),e===null?null:e.stateNode},findFiberByHostInstance:ws.findFiberByHostInstance||Pg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qi.isDisabled&&qi.supportsFiber)try{Vs=qi.inject(Lg),Dt=qi}catch{}}return lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ig,lt.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wl(t))throw Error(n(200));return Og(e,t,null,s)},lt.createRoot=function(e,t){if(!wl(e))throw Error(n(299));var s=!1,l="",d=ch;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(l=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=gl(e,1,!1,null,null,s,!1,l,d),e[Vt]=t.current,rs(e.nodeType===8?e.parentNode:e),new yl(t)},lt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(n(188)):(e=Object.keys(e).join(","),Error(n(268,e)));return e=Du(t),e=e===null?null:e.stateNode,e},lt.flushSync=function(e){return Lr(e)},lt.hydrate=function(e,t,s){if(!Wi(t))throw Error(n(200));return Hi(null,e,t,!0,s)},lt.hydrateRoot=function(e,t,s){if(!wl(e))throw Error(n(405));var l=s!=null&&s.hydratedSources||null,d=!1,h="",v=ch;if(s!=null&&(s.unstable_strictMode===!0&&(d=!0),s.identifierPrefix!==void 0&&(h=s.identifierPrefix),s.onRecoverableError!==void 0&&(v=s.onRecoverableError)),t=lh(t,null,e,1,s??null,d,!1,h,v),e[Vt]=t.current,rs(e),l)for(e=0;e<l.length;e++)s=l[e],d=s._getVersion,d=d(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,d]:t.mutableSourceEagerHydrationData.push(s,d);return new Vi(t)},lt.render=function(e,t,s){if(!Wi(t))throw Error(n(200));return Hi(null,e,t,!1,s)},lt.unmountComponentAtNode=function(e){if(!Wi(e))throw Error(n(40));return e._reactRootContainer?(Lr(function(){Hi(null,null,e,!1,function(){e._reactRootContainer=null,e[Vt]=null})}),!0):!1},lt.unstable_batchedUpdates=cl,lt.unstable_renderSubtreeIntoContainer=function(e,t,s,l){if(!Wi(s))throw Error(n(200));if(e==null||e._reactInternals===void 0)throw Error(n(38));return Hi(e,t,s,!1,l)},lt.version="18.3.1-next-f1338f8080-20240426",lt}var wh;function Hg(){if(wh)return Sl.exports;wh=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(r){console.error(r)}}return i(),Sl.exports=Wg(),Sl.exports}var _h;function qg(){if(_h)return Ki;_h=1;var i=Hg();return Ki.createRoot=i.createRoot,Ki.hydrateRoot=i.hydrateRoot,Ki}var Kg=qg();const Gg=ru(Kg);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var xh="popstate";function Jg(i={}){function r(a,u){let{pathname:c="/",search:f="",hash:p=""}=Kr(a.location.hash.substring(1));return!c.startsWith("/")&&!c.startsWith(".")&&(c="/"+c),$l("",{pathname:c,search:f,hash:p},u.state&&u.state.usr||null,u.state&&u.state.key||"default")}function n(a,u){let c=a.document.querySelector("base"),f="";if(c&&c.getAttribute("href")){let p=a.location.href,m=p.indexOf("#");f=m===-1?p:p.slice(0,m)}return f+"#"+(typeof u=="string"?u:Ts(u))}function o(a,u){bt(a.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(u)})`)}return Yg(r,n,o,i)}function Re(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}function bt(i,r){if(!i){typeof console<"u"&&console.warn(r);try{throw new Error(r)}catch{}}}function Qg(){return Math.random().toString(36).substring(2,10)}function Sh(i,r){return{usr:i.state,key:i.key,idx:r}}function $l(i,r,n=null,o){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof r=="string"?Kr(r):r,state:n,key:r&&r.key||o||Qg()}}function Ts({pathname:i="/",search:r="",hash:n=""}){return r&&r!=="?"&&(i+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Kr(i){let r={};if(i){let n=i.indexOf("#");n>=0&&(r.hash=i.substring(n),i=i.substring(0,n));let o=i.indexOf("?");o>=0&&(r.search=i.substring(o),i=i.substring(0,o)),i&&(r.pathname=i)}return r}function Yg(i,r,n,o={}){let{window:a=document.defaultView,v5Compat:u=!1}=o,c=a.history,f="POP",p=null,m=y();m==null&&(m=0,c.replaceState({...c.state,idx:m},""));function y(){return(c.state||{idx:null}).idx}function w(){f="POP";let E=y(),A=E==null?null:E-m;m=E,p&&p({action:f,location:b.location,delta:A})}function _(E,A){f="PUSH";let L=$l(b.location,E,A);n&&n(L,E),m=y()+1;let T=Sh(L,m),B=b.createHref(L);try{c.pushState(T,"",B)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;a.location.assign(B)}u&&p&&p({action:f,location:b.location,delta:1})}function x(E,A){f="REPLACE";let L=$l(b.location,E,A);n&&n(L,E),m=y();let T=Sh(L,m),B=b.createHref(L);c.replaceState(T,"",B),u&&p&&p({action:f,location:b.location,delta:0})}function j(E){return Xg(E)}let b={get action(){return f},get location(){return i(a,c)},listen(E){if(p)throw new Error("A history only accepts one active listener");return a.addEventListener(xh,w),p=E,()=>{a.removeEventListener(xh,w),p=null}},createHref(E){return r(a,E)},createURL:j,encodeLocation(E){let A=j(E);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:_,replace:x,go(E){return c.go(E)}};return b}function Xg(i,r=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Re(n,"No window.location.(origin|href) available to create URL");let o=typeof i=="string"?i:Ts(i);return o=o.replace(/ $/,"%20"),!r&&o.startsWith("//")&&(o=n+o),new URL(o,n)}function nf(i,r,n="/"){return Zg(i,r,n,!1)}function Zg(i,r,n,o){let a=typeof r=="string"?Kr(r):r,u=er(a.pathname||"/",n);if(u==null)return null;let c=sf(i);ev(c);let f=null;for(let p=0;f==null&&p<c.length;++p){let m=dv(u);f=uv(c[p],m,o)}return f}function sf(i,r=[],n=[],o="",a=!1){let u=(c,f,p=a,m)=>{let y={relativePath:m===void 0?c.path||"":m,caseSensitive:c.caseSensitive===!0,childrenIndex:f,route:c};if(y.relativePath.startsWith("/")){if(!y.relativePath.startsWith(o)&&p)return;Re(y.relativePath.startsWith(o),`Absolute route path "${y.relativePath}" nested under path "${o}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(o.length)}let w=Zt([o,y.relativePath]),_=n.concat(y);c.children&&c.children.length>0&&(Re(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${w}".`),sf(c.children,r,_,w,p)),!(c.path==null&&!c.index)&&r.push({path:w,score:av(w,c.index),routesMeta:_})};return i.forEach((c,f)=>{var p;if(c.path===""||!((p=c.path)!=null&&p.includes("?")))u(c,f);else for(let m of of(c.path))u(c,f,!0,m)}),r}function of(i){let r=i.split("/");if(r.length===0)return[];let[n,...o]=r,a=n.endsWith("?"),u=n.replace(/\?$/,"");if(o.length===0)return a?[u,""]:[u];let c=of(o.join("/")),f=[];return f.push(...c.map(p=>p===""?u:[u,p].join("/"))),a&&f.push(...c),f.map(p=>i.startsWith("/")&&p===""?"/":p)}function ev(i){i.sort((r,n)=>r.score!==n.score?n.score-r.score:lv(r.routesMeta.map(o=>o.childrenIndex),n.routesMeta.map(o=>o.childrenIndex)))}var tv=/^:[\w-]+$/,rv=3,nv=2,sv=1,iv=10,ov=-2,Eh=i=>i==="*";function av(i,r){let n=i.split("/"),o=n.length;return n.some(Eh)&&(o+=ov),r&&(o+=nv),n.filter(a=>!Eh(a)).reduce((a,u)=>a+(tv.test(u)?rv:u===""?sv:iv),o)}function lv(i,r){return i.length===r.length&&i.slice(0,-1).every((o,a)=>o===r[a])?i[i.length-1]-r[r.length-1]:0}function uv(i,r,n=!1){let{routesMeta:o}=i,a={},u="/",c=[];for(let f=0;f<o.length;++f){let p=o[f],m=f===o.length-1,y=u==="/"?r:r.slice(u.length)||"/",w=co({path:p.relativePath,caseSensitive:p.caseSensitive,end:m},y),_=p.route;if(!w&&m&&n&&!o[o.length-1].route.index&&(w=co({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!w)return null;Object.assign(a,w.params),c.push({params:a,pathname:Zt([u,w.pathname]),pathnameBase:gv(Zt([u,w.pathnameBase])),route:_}),w.pathnameBase!=="/"&&(u=Zt([u,w.pathnameBase]))}return c}function co(i,r){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,o]=cv(i.path,i.caseSensitive,i.end),a=r.match(n);if(!a)return null;let u=a[0],c=u.replace(/(.)\/+$/,"$1"),f=a.slice(1);return{params:o.reduce((m,{paramName:y,isOptional:w},_)=>{if(y==="*"){let j=f[_]||"";c=u.slice(0,u.length-j.length).replace(/(.)\/+$/,"$1")}const x=f[_];return w&&!x?m[y]=void 0:m[y]=(x||"").replace(/%2F/g,"/"),m},{}),pathname:u,pathnameBase:c,pattern:i}}function cv(i,r=!1,n=!0){bt(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let o=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,f,p)=>(o.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(o.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,r?void 0:"i"),o]}function dv(i){try{return i.split("/").map(r=>decodeURIComponent(r).replace(/\//g,"%2F")).join("/")}catch(r){return bt(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${r}).`),i}}function er(i,r){if(r==="/")return i;if(!i.toLowerCase().startsWith(r.toLowerCase()))return null;let n=r.endsWith("/")?r.length-1:r.length,o=i.charAt(n);return o&&o!=="/"?null:i.slice(n)||"/"}var hv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,fv=i=>hv.test(i);function pv(i,r="/"){let{pathname:n,search:o="",hash:a=""}=typeof i=="string"?Kr(i):i,u;if(n)if(fv(n))u=n;else{if(n.includes("//")){let c=n;n=n.replace(/\/\/+/g,"/"),bt(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${n}`)}n.startsWith("/")?u=kh(n.substring(1),"/"):u=kh(n,r)}else u=r;return{pathname:u,search:vv(o),hash:yv(a)}}function kh(i,r){let n=r.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function bl(i,r,n,o){return`Cannot include a '${i}' character in a manually specified \`to.${r}\` field [${JSON.stringify(o)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function mv(i){return i.filter((r,n)=>n===0||r.route.path&&r.route.path.length>0)}function af(i){let r=mv(i);return r.map((n,o)=>o===r.length-1?n.pathname:n.pathnameBase)}function lf(i,r,n,o=!1){let a;typeof i=="string"?a=Kr(i):(a={...i},Re(!a.pathname||!a.pathname.includes("?"),bl("?","pathname","search",a)),Re(!a.pathname||!a.pathname.includes("#"),bl("#","pathname","hash",a)),Re(!a.search||!a.search.includes("#"),bl("#","search","hash",a)));let u=i===""||a.pathname==="",c=u?"/":a.pathname,f;if(c==null)f=n;else{let w=r.length-1;if(!o&&c.startsWith("..")){let _=c.split("/");for(;_[0]==="..";)_.shift(),w-=1;a.pathname=_.join("/")}f=w>=0?r[w]:"/"}let p=pv(a,f),m=c&&c!=="/"&&c.endsWith("/"),y=(u||c===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(m||y)&&(p.pathname+="/"),p}var Zt=i=>i.join("/").replace(/\/\/+/g,"/"),gv=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),vv=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,yv=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function wv(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function _v(i){return i.map(r=>r.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var uf=["POST","PUT","PATCH","DELETE"];new Set(uf);var xv=["GET",...uf];new Set(xv);var On=P.createContext(null);On.displayName="DataRouter";var xo=P.createContext(null);xo.displayName="DataRouterState";P.createContext(!1);var cf=P.createContext({isTransitioning:!1});cf.displayName="ViewTransition";var Sv=P.createContext(new Map);Sv.displayName="Fetchers";var Ev=P.createContext(null);Ev.displayName="Await";var $t=P.createContext(null);$t.displayName="Navigation";var Ps=P.createContext(null);Ps.displayName="Location";var tr=P.createContext({outlet:null,matches:[],isDataRoute:!1});tr.displayName="Route";var su=P.createContext(null);su.displayName="RouteError";function kv(i,{relative:r}={}){Re(As(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:o}=P.useContext($t),{hash:a,pathname:u,search:c}=Is(i,{relative:r}),f=u;return n!=="/"&&(f=u==="/"?n:Zt([n,u])),o.createHref({pathname:f,search:c,hash:a})}function As(){return P.useContext(Ps)!=null}function br(){return Re(As(),"useLocation() may be used only in the context of a <Router> component."),P.useContext(Ps).location}var df="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function hf(i){P.useContext($t).static||P.useLayoutEffect(i)}function bv(){let{isDataRoute:i}=P.useContext(tr);return i?Uv():jv()}function jv(){Re(As(),"useNavigate() may be used only in the context of a <Router> component.");let i=P.useContext(On),{basename:r,navigator:n}=P.useContext($t),{matches:o}=P.useContext(tr),{pathname:a}=br(),u=JSON.stringify(af(o)),c=P.useRef(!1);return hf(()=>{c.current=!0}),P.useCallback((p,m={})=>{if(bt(c.current,df),!c.current)return;if(typeof p=="number"){n.go(p);return}let y=lf(p,JSON.parse(u),a,m.relative==="path");i==null&&r!=="/"&&(y.pathname=y.pathname==="/"?r:Zt([r,y.pathname])),(m.replace?n.replace:n.push)(y,m.state,m)},[r,n,u,a,i])}P.createContext(null);function Is(i,{relative:r}={}){let{matches:n}=P.useContext(tr),{pathname:o}=br(),a=JSON.stringify(af(n));return P.useMemo(()=>lf(i,JSON.parse(a),o,r==="path"),[i,a,o,r])}function Cv(i,r){return ff(i,r)}function ff(i,r,n,o,a){var L;Re(As(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=P.useContext($t),{matches:c}=P.useContext(tr),f=c[c.length-1],p=f?f.params:{},m=f?f.pathname:"/",y=f?f.pathnameBase:"/",w=f&&f.route;{let T=w&&w.path||"";pf(m,!w||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${m}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let _=br(),x;if(r){let T=typeof r=="string"?Kr(r):r;Re(y==="/"||((L=T.pathname)==null?void 0:L.startsWith(y)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${y}" but pathname "${T.pathname}" was given in the \`location\` prop.`),x=T}else x=_;let j=x.pathname||"/",b=j;if(y!=="/"){let T=y.replace(/^\//,"").split("/");b="/"+j.replace(/^\//,"").split("/").slice(T.length).join("/")}let E=nf(i,{pathname:b});bt(w||E!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),bt(E==null||E[E.length-1].route.element!==void 0||E[E.length-1].route.Component!==void 0||E[E.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=Pv(E&&E.map(T=>Object.assign({},T,{params:Object.assign({},p,T.params),pathname:Zt([y,u.encodeLocation?u.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?y:Zt([y,u.encodeLocation?u.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),c,n,o,a);return r&&A?P.createElement(Ps.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},A):A}function Tv(){let i=Dv(),r=wv(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,o="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:o},u={padding:"2px 4px",backgroundColor:o},c=null;return console.error("Error handled by React Router default ErrorBoundary:",i),c=P.createElement(P.Fragment,null,P.createElement("p",null," Hey developer "),P.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",P.createElement("code",{style:u},"ErrorBoundary")," or"," ",P.createElement("code",{style:u},"errorElement")," prop on your route.")),P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},r),n?P.createElement("pre",{style:a},n):null,c)}var Rv=P.createElement(Tv,null),Nv=class extends P.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,r){return r.location!==i.location||r.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:r.error,location:r.location,revalidation:i.revalidation||r.revalidation}}componentDidCatch(i,r){this.props.onError?this.props.onError(i,r):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?P.createElement(tr.Provider,{value:this.props.routeContext},P.createElement(su.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Ov({routeContext:i,match:r,children:n}){let o=P.useContext(On);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),P.createElement(tr.Provider,{value:i},n)}function Pv(i,r=[],n=null,o=null,a=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(r.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,c=n==null?void 0:n.errors;if(c!=null){let y=u.findIndex(w=>w.route.id&&(c==null?void 0:c[w.route.id])!==void 0);Re(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),u=u.slice(0,Math.min(u.length,y+1))}let f=!1,p=-1;if(n)for(let y=0;y<u.length;y++){let w=u[y];if((w.route.HydrateFallback||w.route.hydrateFallbackElement)&&(p=y),w.route.id){let{loaderData:_,errors:x}=n,j=w.route.loader&&!_.hasOwnProperty(w.route.id)&&(!x||x[w.route.id]===void 0);if(w.route.lazy||j){f=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}let m=n&&o?(y,w)=>{var _,x;o(y,{location:n.location,params:((x=(_=n.matches)==null?void 0:_[0])==null?void 0:x.params)??{},unstable_pattern:_v(n.matches),errorInfo:w})}:void 0;return u.reduceRight((y,w,_)=>{let x,j=!1,b=null,E=null;n&&(x=c&&w.route.id?c[w.route.id]:void 0,b=w.route.errorElement||Rv,f&&(p<0&&_===0?(pf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),j=!0,E=null):p===_&&(j=!0,E=w.route.hydrateFallbackElement||null)));let A=r.concat(u.slice(0,_+1)),L=()=>{let T;return x?T=b:j?T=E:w.route.Component?T=P.createElement(w.route.Component,null):w.route.element?T=w.route.element:T=y,P.createElement(Ov,{match:w,routeContext:{outlet:y,matches:A,isDataRoute:n!=null},children:T})};return n&&(w.route.ErrorBoundary||w.route.errorElement||_===0)?P.createElement(Nv,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:L(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:m}):L()},null)}function iu(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Av(i){let r=P.useContext(On);return Re(r,iu(i)),r}function Iv(i){let r=P.useContext(xo);return Re(r,iu(i)),r}function Lv(i){let r=P.useContext(tr);return Re(r,iu(i)),r}function ou(i){let r=Lv(i),n=r.matches[r.matches.length-1];return Re(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function $v(){return ou("useRouteId")}function Dv(){var o;let i=P.useContext(su),r=Iv("useRouteError"),n=ou("useRouteError");return i!==void 0?i:(o=r.errors)==null?void 0:o[n]}function Uv(){let{router:i}=Av("useNavigate"),r=ou("useNavigate"),n=P.useRef(!1);return hf(()=>{n.current=!0}),P.useCallback(async(a,u={})=>{bt(n.current,df),n.current&&(typeof a=="number"?await i.navigate(a):await i.navigate(a,{fromRouteId:r,...u}))},[i,r])}var bh={};function pf(i,r,n){!r&&!bh[i]&&(bh[i]=!0,bt(!1,n))}P.memo(Mv);function Mv({routes:i,future:r,state:n,unstable_onError:o}){return ff(i,void 0,n,o,r)}function kn(i){Re(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Bv({basename:i="/",children:r=null,location:n,navigationType:o="POP",navigator:a,static:u=!1,unstable_useTransitions:c}){Re(!As(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let f=i.replace(/^\/*/,"/"),p=P.useMemo(()=>({basename:f,navigator:a,static:u,unstable_useTransitions:c,future:{}}),[f,a,u,c]);typeof n=="string"&&(n=Kr(n));let{pathname:m="/",search:y="",hash:w="",state:_=null,key:x="default"}=n,j=P.useMemo(()=>{let b=er(m,f);return b==null?null:{location:{pathname:b,search:y,hash:w,state:_,key:x},navigationType:o}},[f,m,y,w,_,x,o]);return bt(j!=null,`<Router basename="${f}"> is not able to match the URL "${m}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),j==null?null:P.createElement($t.Provider,{value:p},P.createElement(Ps.Provider,{children:r,value:j}))}function Fv({children:i,location:r}){return Cv(Dl(i),r)}function Dl(i,r=[]){let n=[];return P.Children.forEach(i,(o,a)=>{if(!P.isValidElement(o))return;let u=[...r,a];if(o.type===P.Fragment){n.push.apply(n,Dl(o.props.children,u));return}Re(o.type===kn,`[${typeof o.type=="string"?o.type:o.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Re(!o.props.index||!o.props.children,"An index route cannot have child routes.");let c={id:o.props.id||u.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,middleware:o.props.middleware,loader:o.props.loader,action:o.props.action,hydrateFallbackElement:o.props.hydrateFallbackElement,HydrateFallback:o.props.HydrateFallback,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.hasErrorBoundary===!0||o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(c.children=Dl(o.props.children,u)),n.push(c)}),n}var so="get",io="application/x-www-form-urlencoded";function So(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function zv(i){return So(i)&&i.tagName.toLowerCase()==="button"}function Vv(i){return So(i)&&i.tagName.toLowerCase()==="form"}function Wv(i){return So(i)&&i.tagName.toLowerCase()==="input"}function Hv(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function qv(i,r){return i.button===0&&(!r||r==="_self")&&!Hv(i)}var Gi=null;function Kv(){if(Gi===null)try{new FormData(document.createElement("form"),0),Gi=!1}catch{Gi=!0}return Gi}var Gv=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jl(i){return i!=null&&!Gv.has(i)?(bt(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${io}"`),null):i}function Jv(i,r){let n,o,a,u,c;if(Vv(i)){let f=i.getAttribute("action");o=f?er(f,r):null,n=i.getAttribute("method")||so,a=jl(i.getAttribute("enctype"))||io,u=new FormData(i)}else if(zv(i)||Wv(i)&&(i.type==="submit"||i.type==="image")){let f=i.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=i.getAttribute("formaction")||f.getAttribute("action");if(o=p?er(p,r):null,n=i.getAttribute("formmethod")||f.getAttribute("method")||so,a=jl(i.getAttribute("formenctype"))||jl(f.getAttribute("enctype"))||io,u=new FormData(f,i),!Kv()){let{name:m,type:y,value:w}=i;if(y==="image"){let _=m?`${m}.`:"";u.append(`${_}x`,"0"),u.append(`${_}y`,"0")}else m&&u.append(m,w)}}else{if(So(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=so,o=null,a=io,c=i}return u&&a==="text/plain"&&(c=u,u=void 0),{action:o,method:n.toLowerCase(),encType:a,formData:u,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function au(i,r){if(i===!1||i===null||typeof i>"u")throw new Error(r)}function Qv(i,r,n){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return o.pathname==="/"?o.pathname=`_root.${n}`:r&&er(o.pathname,r)==="/"?o.pathname=`${r.replace(/\/$/,"")}/_root.${n}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${n}`,o}async function Yv(i,r){if(i.id in r)return r[i.id];try{let n=await import(i.module);return r[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Xv(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function Zv(i,r,n){let o=await Promise.all(i.map(async a=>{let u=r.routes[a.route.id];if(u){let c=await Yv(u,n);return c.links?c.links():[]}return[]}));return ny(o.flat(1).filter(Xv).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function jh(i,r,n,o,a,u){let c=(p,m)=>n[m]?p.route.id!==n[m].route.id:!0,f=(p,m)=>{var y;return n[m].pathname!==p.pathname||((y=n[m].route.path)==null?void 0:y.endsWith("*"))&&n[m].params["*"]!==p.params["*"]};return u==="assets"?r.filter((p,m)=>c(p,m)||f(p,m)):u==="data"?r.filter((p,m)=>{var w;let y=o.routes[p.route.id];if(!y||!y.hasLoader)return!1;if(c(p,m)||f(p,m))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(i,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function ey(i,r,{includeHydrateFallback:n}={}){return ty(i.map(o=>{let a=r.routes[o.route.id];if(!a)return[];let u=[a.module];return a.clientActionModule&&(u=u.concat(a.clientActionModule)),a.clientLoaderModule&&(u=u.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(u=u.concat(a.hydrateFallbackModule)),a.imports&&(u=u.concat(a.imports)),u}).flat(1))}function ty(i){return[...new Set(i)]}function ry(i){let r={},n=Object.keys(i).sort();for(let o of n)r[o]=i[o];return r}function ny(i,r){let n=new Set;return new Set(r),i.reduce((o,a)=>{let u=JSON.stringify(ry(a));return n.has(u)||(n.add(u),o.push({key:u,link:a})),o},[])}function mf(){let i=P.useContext(On);return au(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function sy(){let i=P.useContext(xo);return au(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var lu=P.createContext(void 0);lu.displayName="FrameworkContext";function gf(){let i=P.useContext(lu);return au(i,"You must render this element inside a <HydratedRouter> element"),i}function iy(i,r){let n=P.useContext(lu),[o,a]=P.useState(!1),[u,c]=P.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:m,onMouseLeave:y,onTouchStart:w}=r,_=P.useRef(null);P.useEffect(()=>{if(i==="render"&&c(!0),i==="viewport"){let b=A=>{A.forEach(L=>{c(L.isIntersecting)})},E=new IntersectionObserver(b,{threshold:.5});return _.current&&E.observe(_.current),()=>{E.disconnect()}}},[i]),P.useEffect(()=>{if(o){let b=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(b)}}},[o]);let x=()=>{a(!0)},j=()=>{a(!1),c(!1)};return n?i!=="intent"?[u,_,{}]:[u,_,{onFocus:xs(f,x),onBlur:xs(p,j),onMouseEnter:xs(m,x),onMouseLeave:xs(y,j),onTouchStart:xs(w,x)}]:[!1,_,{}]}function xs(i,r){return n=>{i&&i(n),n.defaultPrevented||r(n)}}function oy({page:i,...r}){let{router:n}=mf(),o=P.useMemo(()=>nf(n.routes,i,n.basename),[n.routes,i,n.basename]);return o?P.createElement(ly,{page:i,matches:o,...r}):null}function ay(i){let{manifest:r,routeModules:n}=gf(),[o,a]=P.useState([]);return P.useEffect(()=>{let u=!1;return Zv(i,r,n).then(c=>{u||a(c)}),()=>{u=!0}},[i,r,n]),o}function ly({page:i,matches:r,...n}){let o=br(),{manifest:a,routeModules:u}=gf(),{basename:c}=mf(),{loaderData:f,matches:p}=sy(),m=P.useMemo(()=>jh(i,r,p,a,o,"data"),[i,r,p,a,o]),y=P.useMemo(()=>jh(i,r,p,a,o,"assets"),[i,r,p,a,o]),w=P.useMemo(()=>{if(i===o.pathname+o.search+o.hash)return[];let j=new Set,b=!1;if(r.forEach(A=>{var T;let L=a.routes[A.route.id];!L||!L.hasLoader||(!m.some(B=>B.route.id===A.route.id)&&A.route.id in f&&((T=u[A.route.id])!=null&&T.shouldRevalidate)||L.hasClientLoader?b=!0:j.add(A.route.id))}),j.size===0)return[];let E=Qv(i,c,"data");return b&&j.size>0&&E.searchParams.set("_routes",r.filter(A=>j.has(A.route.id)).map(A=>A.route.id).join(",")),[E.pathname+E.search]},[c,f,o,a,m,r,i,u]),_=P.useMemo(()=>ey(y,a),[y,a]),x=ay(y);return P.createElement(P.Fragment,null,w.map(j=>P.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...n})),_.map(j=>P.createElement("link",{key:j,rel:"modulepreload",href:j,...n})),x.map(({key:j,link:b})=>P.createElement("link",{key:j,nonce:n.nonce,...b})))}function uy(...i){return r=>{i.forEach(n=>{typeof n=="function"?n(r):n!=null&&(n.current=r)})}}var vf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{vf&&(window.__reactRouterVersion="7.10.1")}catch{}function cy({basename:i,children:r,unstable_useTransitions:n,window:o}){let a=P.useRef();a.current==null&&(a.current=Jg({window:o,v5Compat:!0}));let u=a.current,[c,f]=P.useState({action:u.action,location:u.location}),p=P.useCallback(m=>{n===!1?f(m):P.startTransition(()=>f(m))},[n]);return P.useLayoutEffect(()=>u.listen(p),[u,p]),P.createElement(Bv,{basename:i,children:r,location:c.location,navigationType:c.action,navigator:u,unstable_useTransitions:n===!0})}var yf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kr=P.forwardRef(function({onClick:r,discover:n="render",prefetch:o="none",relative:a,reloadDocument:u,replace:c,state:f,target:p,to:m,preventScrollReset:y,viewTransition:w,..._},x){let{basename:j,unstable_useTransitions:b}=P.useContext($t),E=typeof m=="string"&&yf.test(m),A,L=!1;if(typeof m=="string"&&E&&(A=m,vf))try{let se=new URL(window.location.href),de=m.startsWith("//")?new URL(se.protocol+m):new URL(m),fe=er(de.pathname,j);de.origin===se.origin&&fe!=null?m=fe+de.search+de.hash:L=!0}catch{bt(!1,`<Link to="${m}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let T=kv(m,{relative:a}),[B,H,Z]=iy(o,_),ee=py(m,{replace:c,state:f,target:p,preventScrollReset:y,relative:a,viewTransition:w,unstable_useTransitions:b});function V(se){r&&r(se),se.defaultPrevented||ee(se)}let te=P.createElement("a",{..._,...Z,href:A||T,onClick:L||u?r:V,ref:uy(x,H),target:p,"data-discover":!E&&n==="render"?"true":void 0});return B&&!E?P.createElement(P.Fragment,null,te,P.createElement(oy,{page:T})):te});kr.displayName="Link";var dy=P.forwardRef(function({"aria-current":r="page",caseSensitive:n=!1,className:o="",end:a=!1,style:u,to:c,viewTransition:f,children:p,...m},y){let w=Is(c,{relative:m.relative}),_=br(),x=P.useContext(xo),{navigator:j,basename:b}=P.useContext($t),E=x!=null&&wy(w)&&f===!0,A=j.encodeLocation?j.encodeLocation(w).pathname:w.pathname,L=_.pathname,T=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(L=L.toLowerCase(),T=T?T.toLowerCase():null,A=A.toLowerCase()),T&&b&&(T=er(T,b)||T);const B=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let H=L===A||!a&&L.startsWith(A)&&L.charAt(B)==="/",Z=T!=null&&(T===A||!a&&T.startsWith(A)&&T.charAt(A.length)==="/"),ee={isActive:H,isPending:Z,isTransitioning:E},V=H?r:void 0,te;typeof o=="function"?te=o(ee):te=[o,H?"active":null,Z?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let se=typeof u=="function"?u(ee):u;return P.createElement(kr,{...m,"aria-current":V,className:te,ref:y,style:se,to:c,viewTransition:f},typeof p=="function"?p(ee):p)});dy.displayName="NavLink";var hy=P.forwardRef(({discover:i="render",fetcherKey:r,navigate:n,reloadDocument:o,replace:a,state:u,method:c=so,action:f,onSubmit:p,relative:m,preventScrollReset:y,viewTransition:w,..._},x)=>{let{unstable_useTransitions:j}=P.useContext($t),b=vy(),E=yy(f,{relative:m}),A=c.toLowerCase()==="get"?"get":"post",L=typeof f=="string"&&yf.test(f),T=B=>{if(p&&p(B),B.defaultPrevented)return;B.preventDefault();let H=B.nativeEvent.submitter,Z=(H==null?void 0:H.getAttribute("formmethod"))||c,ee=()=>b(H||B.currentTarget,{fetcherKey:r,method:Z,navigate:n,replace:a,state:u,relative:m,preventScrollReset:y,viewTransition:w});j&&n!==!1?P.startTransition(()=>ee()):ee()};return P.createElement("form",{ref:x,method:A,action:E,onSubmit:o?p:T,..._,"data-discover":!L&&i==="render"?"true":void 0})});hy.displayName="Form";function fy(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wf(i){let r=P.useContext(On);return Re(r,fy(i)),r}function py(i,{target:r,replace:n,state:o,preventScrollReset:a,relative:u,viewTransition:c,unstable_useTransitions:f}={}){let p=bv(),m=br(),y=Is(i,{relative:u});return P.useCallback(w=>{if(qv(w,r)){w.preventDefault();let _=n!==void 0?n:Ts(m)===Ts(y),x=()=>p(i,{replace:_,state:o,preventScrollReset:a,relative:u,viewTransition:c});f?P.startTransition(()=>x()):x()}},[m,p,y,n,o,r,i,a,u,c,f])}var my=0,gy=()=>`__${String(++my)}__`;function vy(){let{router:i}=wf("useSubmit"),{basename:r}=P.useContext($t),n=$v(),o=i.fetch,a=i.navigate;return P.useCallback(async(u,c={})=>{let{action:f,method:p,encType:m,formData:y,body:w}=Jv(u,r);if(c.navigate===!1){let _=c.fetcherKey||gy();await o(_,n,c.action||f,{preventScrollReset:c.preventScrollReset,formData:y,body:w,formMethod:c.method||p,formEncType:c.encType||m,flushSync:c.flushSync})}else await a(c.action||f,{preventScrollReset:c.preventScrollReset,formData:y,body:w,formMethod:c.method||p,formEncType:c.encType||m,replace:c.replace,state:c.state,fromRouteId:n,flushSync:c.flushSync,viewTransition:c.viewTransition})},[o,a,r,n])}function yy(i,{relative:r}={}){let{basename:n}=P.useContext($t),o=P.useContext(tr);Re(o,"useFormAction must be used inside a RouteContext");let[a]=o.matches.slice(-1),u={...Is(i||".",{relative:r})},c=br();if(i==null){u.search=c.search;let f=new URLSearchParams(u.search),p=f.getAll("index");if(p.some(y=>y==="")){f.delete("index"),p.filter(w=>w).forEach(w=>f.append("index",w));let y=f.toString();u.search=y?`?${y}`:""}}return(!i||i===".")&&a.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Zt([n,u.pathname])),Ts(u)}function wy(i,{relative:r}={}){let n=P.useContext(cf);Re(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:o}=wf("useViewTransitionState"),a=Is(i,{relative:r});if(!n.isTransitioning)return!1;let u=er(n.currentLocation.pathname,o)||n.currentLocation.pathname,c=er(n.nextLocation.pathname,o)||n.nextLocation.pathname;return co(a.pathname,c)!=null||co(a.pathname,u)!=null}const _f="https://portal.umoja.network/api/2.0/admin",xf="MWY3M2M4ODUzY2FiYzg3ZTI0MjIyOWE5NDU1NDg4MDE6MWU2MTM4NzAwMjA0MjlmNjM3NzRjYmYwZjU5ZGIxMTY=",Sf=[{id:"cust_1",first_name:"John",last_name:"Doe",email:"john@example.com",phone:"555-0101"},{id:"cust_2",first_name:"Jane",last_name:"Smith",email:"jane@test.com",phone:"555-0102"},{id:"cust_3",first_name:"Alice",last_name:"Johnson",email:"alice@company.net",phone:"555-0103"}],bs=[{id:"inv_1",deviceId:"DEV-001",status:"assigned",customer_id:"cust_1",model:"Router X1"},{id:"inv_2",deviceId:"DEV-002",status:"in_stock",customer_id:null,model:"Router X1"},{id:"inv_3",deviceId:"DEV-003",status:"assigned",customer_id:"cust_2",model:"Modem Z2"},{id:"inv_4",deviceId:"DEV-004",status:"returned",customer_id:null,model:"Modem Z2"},{id:"inv_5",deviceId:"DEV-005",status:"in_stock",customer_id:null,model:"Router X1"}];class _y{constructor(){this.token=xf}setToken(r){this.token=r}async fetch(r,n={}){const o={"Content-Type":"application/json",Authorization:`Basic ${this.token}`,...n.headers},a=await fetch(`${_f}${r}`,{...n,headers:o});if(!a.ok){const u=await a.text();throw new Error(`API Error ${a.status}: ${u}`)}return a.json()}async getCustomers(){try{if(!this.token)throw new Error("No token provided");const r=await this.fetch("/customers/customer");return(Array.isArray(r)?r:r.data||[]).map(o=>({...o,id:o.id,customer_Id:o.customer_Id||o.customerId||o.id,first_name:o.first_name||"",last_name:o.last_name||"",name:o.name||"",email:o.email||"",phone:o.phone||""}))}catch(r){throw console.warn("Failed to fetch customers (likely auth), falling back to empty/mock",r),r}}async getCustomer(r){try{if(!this.token)throw new Error("No token provided");const n=await this.fetch(`/customers/customer/${r}`),o=n.data||n;return o?{id:o.id,customer_Id:o.customer_Id||o.customerId||o.id,first_name:o.first_name||"",last_name:o.last_name||"",name:o.name||"",email:o.email||"",phone:o.phone||""}:null}catch(n){return console.warn(`Failed to fetch customer ${r}`,n),null}}async getInventory(){try{if(!this.token)throw new Error("No token provided");const r=await this.fetch("/inventory/items");return(Array.isArray(r)?r:r.data||[]).map(o=>{const a=o.iccid||o.ICCID||o.Iccid,u=o.imei||o.IMEI||o.Imei,c=o.barcode||o.Barcode||o.bar_code,f=o.serial_number||o.serialNumber||o.sn||o.SN||o.serial,p=a||c||f||u||o.deviceId||o.device_id||o.id;return{id:o.id||p,deviceId:p,status:o.status,customer_id:o.customer_id||o.customerId||o.customer_Id,model:o.model||o.type||o.description,type:o.type,iccid:a,imei:u,barcode:c,serialNumber:f}})}catch(r){throw console.warn("Failed to fetch inventory",r),r}}async returnDevice(r){if(!this.token)throw new Error("Token required for transaction");await this.fetch(`/inventory/items/${r}`,{method:"PUT",body:JSON.stringify({status:"returned"})})}async assignDevice(r,n){if(!this.token)throw new Error("Token required for transaction");await this.fetch(`/inventory/items/${r}`,{method:"PUT",body:JSON.stringify({customer_id:n,status:"assigned"})})}async disableCustomer(r){if(!this.token)throw new Error("Token required for transaction");await this.fetch(`/customers/customer/${r}`,{method:"PUT",body:JSON.stringify({status:"disabled"})})}}const kt=new _y;var Yt={},Ji={},Ul=function(i,r){return Ul=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},Ul(i,r)};function Ef(i,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");Ul(i,r);function n(){this.constructor=i}i.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}var ho=function(){return ho=Object.assign||function(r){for(var n,o=1,a=arguments.length;o<a;o++){n=arguments[o];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(r[u]=n[u])}return r},ho.apply(this,arguments)};function Pn(i,r){var n={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&r.indexOf(o)<0&&(n[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)r.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(n[o[a]]=i[o[a]]);return n}function kf(i,r,n,o){var a=arguments.length,u=a<3?r:o===null?o=Object.getOwnPropertyDescriptor(r,n):o,c;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")u=Reflect.decorate(i,r,n,o);else for(var f=i.length-1;f>=0;f--)(c=i[f])&&(u=(a<3?c(u):a>3?c(r,n,u):c(r,n))||u);return a>3&&u&&Object.defineProperty(r,n,u),u}function bf(i,r){return function(n,o){r(n,o,i)}}function jf(i,r,n,o,a,u){function c(A){if(A!==void 0&&typeof A!="function")throw new TypeError("Function expected");return A}for(var f=o.kind,p=f==="getter"?"get":f==="setter"?"set":"value",m=!r&&i?o.static?i:i.prototype:null,y=r||(m?Object.getOwnPropertyDescriptor(m,o.name):{}),w,_=!1,x=n.length-1;x>=0;x--){var j={};for(var b in o)j[b]=b==="access"?{}:o[b];for(var b in o.access)j.access[b]=o.access[b];j.addInitializer=function(A){if(_)throw new TypeError("Cannot add initializers after decoration has completed");u.push(c(A||null))};var E=(0,n[x])(f==="accessor"?{get:y.get,set:y.set}:y[p],j);if(f==="accessor"){if(E===void 0)continue;if(E===null||typeof E!="object")throw new TypeError("Object expected");(w=c(E.get))&&(y.get=w),(w=c(E.set))&&(y.set=w),(w=c(E.init))&&a.unshift(w)}else(w=c(E))&&(f==="field"?a.unshift(w):y[p]=w)}m&&Object.defineProperty(m,o.name,y),_=!0}function Cf(i,r,n){for(var o=arguments.length>2,a=0;a<r.length;a++)n=o?r[a].call(i,n):r[a].call(i);return o?n:void 0}function Tf(i){return typeof i=="symbol"?i:"".concat(i)}function Rf(i,r,n){return typeof r=="symbol"&&(r=r.description?"[".concat(r.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",r):r})}function Nf(i,r){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,r)}function G(i,r,n,o){function a(u){return u instanceof n?u:new n(function(c){c(u)})}return new(n||(n=Promise))(function(u,c){function f(y){try{m(o.next(y))}catch(w){c(w)}}function p(y){try{m(o.throw(y))}catch(w){c(w)}}function m(y){y.done?u(y.value):a(y.value).then(f,p)}m((o=o.apply(i,r||[])).next())})}function Of(i,r){var n={label:0,sent:function(){if(u[0]&1)throw u[1];return u[1]},trys:[],ops:[]},o,a,u,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=f(0),c.throw=f(1),c.return=f(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(m){return function(y){return p([m,y])}}function p(m){if(o)throw new TypeError("Generator is already executing.");for(;c&&(c=0,m[0]&&(n=0)),n;)try{if(o=1,a&&(u=m[0]&2?a.return:m[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,m[1])).done)return u;switch(a=0,u&&(m=[m[0]&2,u.value]),m[0]){case 0:case 1:u=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,a=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(u=n.trys,!(u=u.length>0&&u[u.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!u||m[1]>u[0]&&m[1]<u[3])){n.label=m[1];break}if(m[0]===6&&n.label<u[1]){n.label=u[1],u=m;break}if(u&&n.label<u[2]){n.label=u[2],n.ops.push(m);break}u[2]&&n.ops.pop(),n.trys.pop();continue}m=r.call(i,n)}catch(y){m=[6,y],a=0}finally{o=u=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Eo=Object.create?(function(i,r,n,o){o===void 0&&(o=n);var a=Object.getOwnPropertyDescriptor(r,n);(!a||("get"in a?!r.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return r[n]}}),Object.defineProperty(i,o,a)}):(function(i,r,n,o){o===void 0&&(o=n),i[o]=r[n]});function Pf(i,r){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(r,n)&&Eo(r,i,n)}function fo(i){var r=typeof Symbol=="function"&&Symbol.iterator,n=r&&i[r],o=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&o>=i.length&&(i=void 0),{value:i&&i[o++],done:!i}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function uu(i,r){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var o=n.call(i),a,u=[],c;try{for(;(r===void 0||r-- >0)&&!(a=o.next()).done;)u.push(a.value)}catch(f){c={error:f}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(c)throw c.error}}return u}function Af(){for(var i=[],r=0;r<arguments.length;r++)i=i.concat(uu(arguments[r]));return i}function If(){for(var i=0,r=0,n=arguments.length;r<n;r++)i+=arguments[r].length;for(var o=Array(i),a=0,r=0;r<n;r++)for(var u=arguments[r],c=0,f=u.length;c<f;c++,a++)o[a]=u[c];return o}function Lf(i,r,n){if(n||arguments.length===2)for(var o=0,a=r.length,u;o<a;o++)(u||!(o in r))&&(u||(u=Array.prototype.slice.call(r,0,o)),u[o]=r[o]);return i.concat(u||Array.prototype.slice.call(r))}function Rn(i){return this instanceof Rn?(this.v=i,this):new Rn(i)}function $f(i,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(i,r||[]),a,u=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",c),a[Symbol.asyncIterator]=function(){return this},a;function c(x){return function(j){return Promise.resolve(j).then(x,w)}}function f(x,j){o[x]&&(a[x]=function(b){return new Promise(function(E,A){u.push([x,b,E,A])>1||p(x,b)})},j&&(a[x]=j(a[x])))}function p(x,j){try{m(o[x](j))}catch(b){_(u[0][3],b)}}function m(x){x.value instanceof Rn?Promise.resolve(x.value.v).then(y,w):_(u[0][2],x)}function y(x){p("next",x)}function w(x){p("throw",x)}function _(x,j){x(j),u.shift(),u.length&&p(u[0][0],u[0][1])}}function Df(i){var r,n;return r={},o("next"),o("throw",function(a){throw a}),o("return"),r[Symbol.iterator]=function(){return this},r;function o(a,u){r[a]=i[a]?function(c){return(n=!n)?{value:Rn(i[a](c)),done:!1}:u?u(c):c}:u}}function Uf(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i[Symbol.asyncIterator],n;return r?r.call(i):(i=typeof fo=="function"?fo(i):i[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(u){n[u]=i[u]&&function(c){return new Promise(function(f,p){c=i[u](c),a(f,p,c.done,c.value)})}}function a(u,c,f,p){Promise.resolve(p).then(function(m){u({value:m,done:f})},c)}}function Mf(i,r){return Object.defineProperty?Object.defineProperty(i,"raw",{value:r}):i.raw=r,i}var xy=Object.create?(function(i,r){Object.defineProperty(i,"default",{enumerable:!0,value:r})}):function(i,r){i.default=r},Ml=function(i){return Ml=Object.getOwnPropertyNames||function(r){var n=[];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[n.length]=o);return n},Ml(i)};function Bf(i){if(i&&i.__esModule)return i;var r={};if(i!=null)for(var n=Ml(i),o=0;o<n.length;o++)n[o]!=="default"&&Eo(r,i,n[o]);return xy(r,i),r}function Ff(i){return i&&i.__esModule?i:{default:i}}function zf(i,r,n,o){if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?i!==r||!o:!r.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?o:n==="a"?o.call(i):o?o.value:r.get(i)}function Vf(i,r,n,o,a){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?i!==r||!a:!r.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?a.call(i,n):a?a.value=n:r.set(i,n),n}function Wf(i,r){if(r===null||typeof r!="object"&&typeof r!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?r===i:i.has(r)}function Hf(i,r,n){if(r!=null){if(typeof r!="object"&&typeof r!="function")throw new TypeError("Object expected.");var o,a;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");o=r[Symbol.asyncDispose]}if(o===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");o=r[Symbol.dispose],n&&(a=o)}if(typeof o!="function")throw new TypeError("Object not disposable.");a&&(o=function(){try{a.call(this)}catch(u){return Promise.reject(u)}}),i.stack.push({value:r,dispose:o,async:n})}else n&&i.stack.push({async:!0});return r}var Sy=typeof SuppressedError=="function"?SuppressedError:function(i,r,n){var o=new Error(n);return o.name="SuppressedError",o.error=i,o.suppressed=r,o};function qf(i){function r(u){i.error=i.hasError?new Sy(u,i.error,"An error was suppressed during disposal."):u,i.hasError=!0}var n,o=0;function a(){for(;n=i.stack.pop();)try{if(!n.async&&o===1)return o=0,i.stack.push(n),Promise.resolve().then(a);if(n.dispose){var u=n.dispose.call(n.value);if(n.async)return o|=2,Promise.resolve(u).then(a,function(c){return r(c),a()})}else o|=1}catch(c){r(c)}if(o===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return a()}function Kf(i,r){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,o,a,u,c){return o?r?".jsx":".js":a&&(!u||!c)?n:a+u+"."+c.toLowerCase()+"js"}):i}const Ey={__extends:Ef,__assign:ho,__rest:Pn,__decorate:kf,__param:bf,__esDecorate:jf,__runInitializers:Cf,__propKey:Tf,__setFunctionName:Rf,__metadata:Nf,__awaiter:G,__generator:Of,__createBinding:Eo,__exportStar:Pf,__values:fo,__read:uu,__spread:Af,__spreadArrays:If,__spreadArray:Lf,__await:Rn,__asyncGenerator:$f,__asyncDelegator:Df,__asyncValues:Uf,__makeTemplateObject:Mf,__importStar:Bf,__importDefault:Ff,__classPrivateFieldGet:zf,__classPrivateFieldSet:Vf,__classPrivateFieldIn:Wf,__addDisposableResource:Hf,__disposeResources:qf,__rewriteRelativeImportExtension:Kf},ky=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Hf,get __assign(){return ho},__asyncDelegator:Df,__asyncGenerator:$f,__asyncValues:Uf,__await:Rn,__awaiter:G,__classPrivateFieldGet:zf,__classPrivateFieldIn:Wf,__classPrivateFieldSet:Vf,__createBinding:Eo,__decorate:kf,__disposeResources:qf,__esDecorate:jf,__exportStar:Pf,__extends:Ef,__generator:Of,__importDefault:Ff,__importStar:Bf,__makeTemplateObject:Mf,__metadata:Nf,__param:bf,__propKey:Tf,__read:uu,__rest:Pn,__rewriteRelativeImportExtension:Kf,__runInitializers:Cf,__setFunctionName:Rf,__spread:Af,__spreadArray:Lf,__spreadArrays:If,__values:fo,default:Ey},Symbol.toStringTag,{value:"Module"})),by=i=>i?(...r)=>i(...r):(...r)=>fetch(...r);let ko=class extends Error{constructor(r,n="FunctionsError",o){super(r),this.name=n,this.context=o}},Gf=class extends ko{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}},Bl=class extends ko{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}},Fl=class extends ko{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}};var po;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(po||(po={}));class jy{constructor(r,{headers:n={},customFetch:o,region:a=po.Any}={}){this.url=r,this.headers=n,this.region=a,this.fetch=by(o)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return G(this,arguments,void 0,function*(n,o={}){var a;let u,c;try{const{headers:f,method:p,body:m,signal:y,timeout:w}=o;let _={},{region:x}=o;x||(x=this.region);const j=new URL(`${this.url}/${n}`);x&&x!=="any"&&(_["x-region"]=x,j.searchParams.set("forceFunctionRegion",x));let b;m&&(f&&!Object.prototype.hasOwnProperty.call(f,"Content-Type")||!f)?typeof Blob<"u"&&m instanceof Blob||m instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",b=m):typeof m=="string"?(_["Content-Type"]="text/plain",b=m):typeof FormData<"u"&&m instanceof FormData?b=m:(_["Content-Type"]="application/json",b=JSON.stringify(m)):b=m;let E=y;w&&(c=new AbortController,u=setTimeout(()=>c.abort(),w),y?(E=c.signal,y.addEventListener("abort",()=>c.abort())):E=c.signal);const A=yield this.fetch(j.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),f),body:b,signal:E}).catch(H=>{throw new Gf(H)}),L=A.headers.get("x-relay-error");if(L&&L==="true")throw new Bl(A);if(!A.ok)throw new Fl(A);let T=((a=A.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),B;return T==="application/json"?B=yield A.json():T==="application/octet-stream"||T==="application/pdf"?B=yield A.blob():T==="text/event-stream"?B=A:T==="multipart/form-data"?B=yield A.formData():B=yield A.text(),{data:B,error:null,response:A}}catch(f){return{data:null,error:f,response:f instanceof Fl||f instanceof Bl?f.context:void 0}}finally{u&&clearTimeout(u)}})}}const Cy=Object.freeze(Object.defineProperty({__proto__:null,get FunctionRegion(){return po},FunctionsClient:jy,FunctionsError:ko,FunctionsFetchError:Gf,FunctionsHttpError:Fl,FunctionsRelayError:Bl},Symbol.toStringTag,{value:"Module"})),Jf=Os(Cy);var Ye={};const An=Os(ky);var Qi={},Yi={},Xi={},Zi={},eo={},to={},Ch;function Qf(){if(Ch)return to;Ch=1,Object.defineProperty(to,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return to.default=i,to}var Th;function Yf(){if(Th)return eo;Th=1,Object.defineProperty(eo,"__esModule",{value:!0});const r=An.__importDefault(Qf());let n=class{constructor(a){var u,c;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(c=a.isMaybeSingle)!==null&&c!==void 0?c:!1,a.fetch?this.fetch=a.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const c=this.fetch;let f=c(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var m,y,w,_;let x=null,j=null,b=null,E=p.status,A=p.statusText;if(p.ok){if(this.method!=="HEAD"){const H=await p.text();H===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((m=this.headers.get("Accept"))===null||m===void 0)&&m.includes("application/vnd.pgrst.plan+text"))?j=H:j=JSON.parse(H))}const T=(y=this.headers.get("Prefer"))===null||y===void 0?void 0:y.match(/count=(exact|planned|estimated)/),B=(w=p.headers.get("content-range"))===null||w===void 0?void 0:w.split("/");T&&B&&B.length>1&&(b=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(j)&&(j.length>1?(x={code:"PGRST116",details:`Results contain ${j.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},j=null,b=null,E=406,A="Not Acceptable"):j.length===1?j=j[0]:j=null)}else{const T=await p.text();try{x=JSON.parse(T),Array.isArray(x)&&p.status===404&&(j=[],x=null,E=200,A="OK")}catch{p.status===404&&T===""?(E=204,A="No Content"):x={message:T}}if(x&&this.isMaybeSingle&&(!((_=x==null?void 0:x.details)===null||_===void 0)&&_.includes("0 rows"))&&(x=null,E=200,A="OK"),x&&this.shouldThrowOnError)throw new r.default(x)}return{error:x,data:j,count:b,status:E,statusText:A}});return this.shouldThrowOnError||(f=f.catch(p=>{var m,y,w,_,x,j;let b="";const E=p==null?void 0:p.cause;if(E){const A=(m=E==null?void 0:E.message)!==null&&m!==void 0?m:"",L=(y=E==null?void 0:E.code)!==null&&y!==void 0?y:"";b=`${(w=p==null?void 0:p.name)!==null&&w!==void 0?w:"FetchError"}: ${p==null?void 0:p.message}`,b+=`

Caused by: ${(_=E==null?void 0:E.name)!==null&&_!==void 0?_:"Error"}: ${A}`,L&&(b+=` (${L})`),E!=null&&E.stack&&(b+=`
${E.stack}`)}else b=(x=p==null?void 0:p.stack)!==null&&x!==void 0?x:"";return{error:{message:`${(j=p==null?void 0:p.name)!==null&&j!==void 0?j:"FetchError"}: ${p==null?void 0:p.message}`,details:b,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),f.then(a,u)}returns(){return this}overrideTypes(){return this}};return eo.default=n,eo}var Rh;function Xf(){if(Rh)return Zi;Rh=1,Object.defineProperty(Zi,"__esModule",{value:!0});const r=An.__importDefault(Yf());let n=class extends r.default{select(a){let u=!1;const c=(a??"*").split("").map(f=>/\s/.test(f)&&!u?"":(f==='"'&&(u=!u),f)).join("");return this.url.searchParams.set("select",c),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:u=!0,nullsFirst:c,foreignTable:f,referencedTable:p=f}={}){const m=p?`${p}.order`:"order",y=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${y?`${y},`:""}${a}.${u?"asc":"desc"}${c===void 0?"":c?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:u,referencedTable:c=u}={}){const f=typeof c>"u"?"limit":`${c}.limit`;return this.url.searchParams.set(f,`${a}`),this}range(a,u,{foreignTable:c,referencedTable:f=c}={}){const p=typeof f>"u"?"offset":`${f}.offset`,m=typeof f>"u"?"limit":`${f}.limit`;return this.url.searchParams.set(p,`${a}`),this.url.searchParams.set(m,`${u-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:u=!1,settings:c=!1,buffers:f=!1,wal:p=!1,format:m="text"}={}){var y;const w=[a?"analyze":null,u?"verbose":null,c?"settings":null,f?"buffers":null,p?"wal":null].filter(Boolean).join("|"),_=(y=this.headers.get("Accept"))!==null&&y!==void 0?y:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${_}"; options=${w};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}};return Zi.default=n,Zi}var Nh;function cu(){if(Nh)return Xi;Nh=1,Object.defineProperty(Xi,"__esModule",{value:!0});const r=An.__importDefault(Xf()),n=new RegExp("[,()]");let o=class extends r.default{eq(u,c){return this.url.searchParams.append(u,`eq.${c}`),this}neq(u,c){return this.url.searchParams.append(u,`neq.${c}`),this}gt(u,c){return this.url.searchParams.append(u,`gt.${c}`),this}gte(u,c){return this.url.searchParams.append(u,`gte.${c}`),this}lt(u,c){return this.url.searchParams.append(u,`lt.${c}`),this}lte(u,c){return this.url.searchParams.append(u,`lte.${c}`),this}like(u,c){return this.url.searchParams.append(u,`like.${c}`),this}likeAllOf(u,c){return this.url.searchParams.append(u,`like(all).{${c.join(",")}}`),this}likeAnyOf(u,c){return this.url.searchParams.append(u,`like(any).{${c.join(",")}}`),this}ilike(u,c){return this.url.searchParams.append(u,`ilike.${c}`),this}ilikeAllOf(u,c){return this.url.searchParams.append(u,`ilike(all).{${c.join(",")}}`),this}ilikeAnyOf(u,c){return this.url.searchParams.append(u,`ilike(any).{${c.join(",")}}`),this}regexMatch(u,c){return this.url.searchParams.append(u,`match.${c}`),this}regexIMatch(u,c){return this.url.searchParams.append(u,`imatch.${c}`),this}is(u,c){return this.url.searchParams.append(u,`is.${c}`),this}isDistinct(u,c){return this.url.searchParams.append(u,`isdistinct.${c}`),this}in(u,c){const f=Array.from(new Set(c)).map(p=>typeof p=="string"&&n.test(p)?`"${p}"`:`${p}`).join(",");return this.url.searchParams.append(u,`in.(${f})`),this}contains(u,c){return typeof c=="string"?this.url.searchParams.append(u,`cs.${c}`):Array.isArray(c)?this.url.searchParams.append(u,`cs.{${c.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(c)}`),this}containedBy(u,c){return typeof c=="string"?this.url.searchParams.append(u,`cd.${c}`):Array.isArray(c)?this.url.searchParams.append(u,`cd.{${c.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(c)}`),this}rangeGt(u,c){return this.url.searchParams.append(u,`sr.${c}`),this}rangeGte(u,c){return this.url.searchParams.append(u,`nxl.${c}`),this}rangeLt(u,c){return this.url.searchParams.append(u,`sl.${c}`),this}rangeLte(u,c){return this.url.searchParams.append(u,`nxr.${c}`),this}rangeAdjacent(u,c){return this.url.searchParams.append(u,`adj.${c}`),this}overlaps(u,c){return typeof c=="string"?this.url.searchParams.append(u,`ov.${c}`):this.url.searchParams.append(u,`ov.{${c.join(",")}}`),this}textSearch(u,c,{config:f,type:p}={}){let m="";p==="plain"?m="pl":p==="phrase"?m="ph":p==="websearch"&&(m="w");const y=f===void 0?"":`(${f})`;return this.url.searchParams.append(u,`${m}fts${y}.${c}`),this}match(u){return Object.entries(u).forEach(([c,f])=>{this.url.searchParams.append(c,`eq.${f}`)}),this}not(u,c,f){return this.url.searchParams.append(u,`not.${c}.${f}`),this}or(u,{foreignTable:c,referencedTable:f=c}={}){const p=f?`${f}.or`:"or";return this.url.searchParams.append(p,`(${u})`),this}filter(u,c,f){return this.url.searchParams.append(u,`${c}.${f}`),this}};return Xi.default=o,Xi}var Oh;function Zf(){if(Oh)return Yi;Oh=1,Object.defineProperty(Yi,"__esModule",{value:!0});const r=An.__importDefault(cu());let n=class{constructor(a,{headers:u={},schema:c,fetch:f}){this.url=a,this.headers=new Headers(u),this.schema=c,this.fetch=f}select(a,u){const{head:c=!1,count:f}=u??{},p=c?"HEAD":"GET";let m=!1;const y=(a??"*").split("").map(w=>/\s/.test(w)&&!m?"":(w==='"'&&(m=!m),w)).join("");return this.url.searchParams.set("select",y),f&&this.headers.append("Prefer",`count=${f}`),new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:u,defaultToNull:c=!0}={}){var f;const p="POST";if(u&&this.headers.append("Prefer",`count=${u}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const m=a.reduce((y,w)=>y.concat(Object.keys(w)),[]);if(m.length>0){const y=[...new Set(m)].map(w=>`"${w}"`);this.url.searchParams.set("columns",y.join(","))}}return new r.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}upsert(a,{onConflict:u,ignoreDuplicates:c=!1,count:f,defaultToNull:p=!0}={}){var m;const y="POST";if(this.headers.append("Prefer",`resolution=${c?"ignore":"merge"}-duplicates`),u!==void 0&&this.url.searchParams.set("on_conflict",u),f&&this.headers.append("Prefer",`count=${f}`),p||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const w=a.reduce((_,x)=>_.concat(Object.keys(x)),[]);if(w.length>0){const _=[...new Set(w)].map(x=>`"${x}"`);this.url.searchParams.set("columns",_.join(","))}}return new r.default({method:y,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(a,{count:u}={}){var c;const f="PATCH";return u&&this.headers.append("Prefer",`count=${u}`),new r.default({method:f,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(c=this.fetch)!==null&&c!==void 0?c:fetch})}delete({count:a}={}){var u;const c="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new r.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}};return Yi.default=n,Yi}var Ph;function Ty(){if(Ph)return Qi;Ph=1,Object.defineProperty(Qi,"__esModule",{value:!0});const i=An,r=i.__importDefault(Zf()),n=i.__importDefault(cu());let o=class ep{constructor(u,{headers:c={},schema:f,fetch:p}={}){this.url=u,this.headers=new Headers(c),this.schemaName=f,this.fetch=p}from(u){if(!u||typeof u!="string"||u.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");const c=new URL(`${this.url}/${u}`);return new r.default(c,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(u){return new ep(this.url,{headers:this.headers,schema:u,fetch:this.fetch})}rpc(u,c={},{head:f=!1,get:p=!1,count:m}={}){var y;let w;const _=new URL(`${this.url}/rpc/${u}`);let x;f||p?(w=f?"HEAD":"GET",Object.entries(c).filter(([b,E])=>E!==void 0).map(([b,E])=>[b,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([b,E])=>{_.searchParams.append(b,E)})):(w="POST",x=c);const j=new Headers(this.headers);return m&&j.set("Prefer",`count=${m}`),new n.default({method:w,url:_,headers:j,schema:this.schemaName,body:x,fetch:(y=this.fetch)!==null&&y!==void 0?y:fetch})}};return Qi.default=o,Qi}var Ah;function tp(){if(Ah)return Ye;Ah=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const i=An,r=i.__importDefault(Ty());Ye.PostgrestClient=r.default;const n=i.__importDefault(Zf());Ye.PostgrestQueryBuilder=n.default;const o=i.__importDefault(cu());Ye.PostgrestFilterBuilder=o.default;const a=i.__importDefault(Xf());Ye.PostgrestTransformBuilder=a.default;const u=i.__importDefault(Yf());Ye.PostgrestBuilder=u.default;const c=i.__importDefault(Qf());return Ye.PostgrestError=c.default,Ye.default={PostgrestClient:r.default,PostgrestQueryBuilder:n.default,PostgrestFilterBuilder:o.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:u.default,PostgrestError:c.default},Ye}class rp{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const o=n.node,a=parseInt(o.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let n=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(n+=`

Suggested solution: ${r.workaround}`),new Error(n)}static createWebSocket(r,n){const o=this.getWebSocketConstructor();return new o(r,n)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const Ry="2.86.2",Ny=`realtime-js/${Ry}`,np="1.0.0",Oy="2.0.0",Ih=np,zl=1e4,Py=1e3,Ay=100;var Wr;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(Wr||(Wr={}));var $e;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})($e||($e={}));var Lt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Lt||(Lt={}));var Vl;(function(i){i.websocket="websocket"})(Vl||(Vl={}));var Hr;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Hr||(Hr={}));class Iy{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,n){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(r));let o=[r.join_ref,r.ref,r.topic,r.event,r.payload];return n(JSON.stringify(o))}_binaryEncodeUserBroadcastPush(r){var n;return this._isArrayBuffer((n=r.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var n,o;const a=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,a)}_encodeJsonUserBroadcastPush(r){var n,o;const a=(o=(n=r.payload)===null||n===void 0?void 0:n.payload)!==null&&o!==void 0?o:{},c=new TextEncoder().encode(JSON.stringify(a)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,c)}_encodeUserBroadcastPush(r,n,o){var a,u;const c=r.topic,f=(a=r.ref)!==null&&a!==void 0?a:"",p=(u=r.join_ref)!==null&&u!==void 0?u:"",m=r.payload.event,y=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},w=Object.keys(y).length===0?"":JSON.stringify(y);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(f.length>255)throw new Error(`ref length ${f.length} exceeds maximum of 255`);if(c.length>255)throw new Error(`topic length ${c.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`userEvent length ${m.length} exceeds maximum of 255`);if(w.length>255)throw new Error(`metadata length ${w.length} exceeds maximum of 255`);const _=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+f.length+c.length+m.length+w.length,x=new ArrayBuffer(this.HEADER_LENGTH+_);let j=new DataView(x),b=0;j.setUint8(b++,this.KINDS.userBroadcastPush),j.setUint8(b++,p.length),j.setUint8(b++,f.length),j.setUint8(b++,c.length),j.setUint8(b++,m.length),j.setUint8(b++,w.length),j.setUint8(b++,n),Array.from(p,A=>j.setUint8(b++,A.charCodeAt(0))),Array.from(f,A=>j.setUint8(b++,A.charCodeAt(0))),Array.from(c,A=>j.setUint8(b++,A.charCodeAt(0))),Array.from(m,A=>j.setUint8(b++,A.charCodeAt(0))),Array.from(w,A=>j.setUint8(b++,A.charCodeAt(0)));var E=new Uint8Array(x.byteLength+o.byteLength);return E.set(new Uint8Array(x),0),E.set(new Uint8Array(o),x.byteLength),E.buffer}decode(r,n){if(this._isArrayBuffer(r)){let o=this._binaryDecode(r);return n(o)}if(typeof r=="string"){const o=JSON.parse(r),[a,u,c,f,p]=o;return n({join_ref:a,ref:u,topic:c,event:f,payload:p})}return n({})}_binaryDecode(r){const n=new DataView(r),o=n.getUint8(0),a=new TextDecoder;switch(o){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,n,a)}}_decodeUserBroadcast(r,n,o){const a=n.getUint8(1),u=n.getUint8(2),c=n.getUint8(3),f=n.getUint8(4);let p=this.HEADER_LENGTH+4;const m=o.decode(r.slice(p,p+a));p=p+a;const y=o.decode(r.slice(p,p+u));p=p+u;const w=o.decode(r.slice(p,p+c));p=p+c;const _=r.slice(p,r.byteLength),x=f===this.JSON_ENCODING?JSON.parse(o.decode(_)):_,j={type:this.BROADCAST_EVENT,event:y,payload:x};return c>0&&(j.meta=JSON.parse(w)),{join_ref:null,ref:null,topic:m,event:this.BROADCAST_EVENT,payload:j}}_isArrayBuffer(r){var n;return r instanceof ArrayBuffer||((n=r==null?void 0:r.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(r,n){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([o])=>n.includes(o)))}}class sp{constructor(r,n){this.callback=r,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var xe;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(xe||(xe={}));const Lh=(i,r,n={})=>{var o;const a=(o=n.skipTypes)!==null&&o!==void 0?o:[];return r?Object.keys(r).reduce((u,c)=>(u[c]=Ly(c,i,r,a),u),{}):{}},Ly=(i,r,n,o)=>{const a=r.find(f=>f.name===i),u=a==null?void 0:a.type,c=n[i];return u&&!o.includes(u)?ip(u,c):Wl(c)},ip=(i,r)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return My(r,n)}switch(i){case xe.bool:return $y(r);case xe.float4:case xe.float8:case xe.int2:case xe.int4:case xe.int8:case xe.numeric:case xe.oid:return Dy(r);case xe.json:case xe.jsonb:return Uy(r);case xe.timestamp:return By(r);case xe.abstime:case xe.date:case xe.daterange:case xe.int4range:case xe.int8range:case xe.money:case xe.reltime:case xe.text:case xe.time:case xe.timestamptz:case xe.timetz:case xe.tsrange:case xe.tstzrange:return Wl(r);default:return Wl(r)}},Wl=i=>i,$y=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},Dy=i=>{if(typeof i=="string"){const r=parseFloat(i);if(!Number.isNaN(r))return r}return i},Uy=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(r){return console.log(`JSON parse error: ${r}`),i}return i},My=(i,r)=>{if(typeof i!="string")return i;const n=i.length-1,o=i[n];if(i[0]==="{"&&o==="}"){let u;const c=i.slice(1,n);try{u=JSON.parse("["+c+"]")}catch{u=c?c.split(","):[]}return u.map(f=>ip(r,f))}return i},By=i=>typeof i=="string"?i.replace(" ","T"):i,op=i=>{const r=new URL(i);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Cl{constructor(r,n,o={},a=zl){this.channel=r,this.event=n,this.payload=o,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,n){var o;return this._hasReceived(r)&&n((o=this.receivedResp)===null||o===void 0?void 0:o.response),this.recHooks.push({status:r,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:n}){this.recHooks.filter(o=>o.status===r).forEach(o=>o.callback(n))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Hl;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(Hl||(Hl={}));let ap=class oo{constructor(r,n){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const o=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},a=>{const{onJoin:u,onLeave:c,onSync:f}=this.caller;this.joinRef=this.channel._joinRef(),this.state=oo.syncState(this.state,a,u,c),this.pendingDiffs.forEach(p=>{this.state=oo.syncDiff(this.state,p,u,c)}),this.pendingDiffs=[],f()}),this.channel._on(o.diff,{},a=>{const{onJoin:u,onLeave:c,onSync:f}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=oo.syncDiff(this.state,a,u,c),f())}),this.onJoin((a,u,c)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:u,newPresences:c})}),this.onLeave((a,u,c)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:u,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,n,o,a){const u=this.cloneDeep(r),c=this.transformState(n),f={},p={};return this.map(u,(m,y)=>{c[m]||(p[m]=y)}),this.map(c,(m,y)=>{const w=u[m];if(w){const _=y.map(E=>E.presence_ref),x=w.map(E=>E.presence_ref),j=y.filter(E=>x.indexOf(E.presence_ref)<0),b=w.filter(E=>_.indexOf(E.presence_ref)<0);j.length>0&&(f[m]=j),b.length>0&&(p[m]=b)}else f[m]=y}),this.syncDiff(u,{joins:f,leaves:p},o,a)}static syncDiff(r,n,o,a){const{joins:u,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return o||(o=()=>{}),a||(a=()=>{}),this.map(u,(f,p)=>{var m;const y=(m=r[f])!==null&&m!==void 0?m:[];if(r[f]=this.cloneDeep(p),y.length>0){const w=r[f].map(x=>x.presence_ref),_=y.filter(x=>w.indexOf(x.presence_ref)<0);r[f].unshift(..._)}o(f,y,p)}),this.map(c,(f,p)=>{let m=r[f];if(!m)return;const y=p.map(w=>w.presence_ref);m=m.filter(w=>y.indexOf(w.presence_ref)<0),r[f]=m,a(f,m,p),m.length===0&&delete r[f]}),r}static map(r,n){return Object.getOwnPropertyNames(r).map(o=>n(o,r[o]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((n,o)=>{const a=r[o];return"metas"in a?n[o]=a.metas.map(u=>(u.presence_ref=u.phx_ref,delete u.phx_ref,delete u.phx_ref_prev,u)):n[o]=a,n},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ql;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(ql||(ql={}));var Cn;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(Cn||(Cn={}));var zt;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(zt||(zt={}));const Fy=$e;let lp=class up{constructor(r,n={config:{}},o){var a,u;if(this.topic=r,this.params=n,this.socket=o,this.bindings={},this.state=$e.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Cl(this,Lt.join,this.params,this.timeout),this.rejoinTimer=new sp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=$e.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(c=>c.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=$e.closed,this.socket._remove(this)}),this._onError(c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=$e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=$e.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",c=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,c),this.state=$e.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Lt.reply,{},(c,f)=>{this._trigger(this._replyEventName(f),c)}),this.presence=new ap(this),this.broadcastEndpointURL=op(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((u=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||u===void 0)&&u.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,n=this.timeout){var o,a,u;if(this.socket.isConnected()||this.socket.connect(),this.state==$e.closed){const{config:{broadcast:c,presence:f,private:p}}=this.params,m=(a=(o=this.bindings.postgres_changes)===null||o===void 0?void 0:o.map(x=>x.filter))!==null&&a!==void 0?a:[],y=!!this.bindings[Cn.PRESENCE]&&this.bindings[Cn.PRESENCE].length>0||((u=this.params.config.presence)===null||u===void 0?void 0:u.enabled)===!0,w={},_={broadcast:c,presence:Object.assign(Object.assign({},f),{enabled:y}),postgres_changes:m,private:p};this.socket.accessTokenValue&&(w.access_token=this.socket.accessTokenValue),this._onError(x=>r==null?void 0:r(zt.CHANNEL_ERROR,x)),this._onClose(()=>r==null?void 0:r(zt.CLOSED)),this.updateJoinPayload(Object.assign({config:_},w)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:x})=>{var j;if(this.socket.setAuth(),x===void 0){r==null||r(zt.SUBSCRIBED);return}else{const b=this.bindings.postgres_changes,E=(j=b==null?void 0:b.length)!==null&&j!==void 0?j:0,A=[];for(let L=0;L<E;L++){const T=b[L],{filter:{event:B,schema:H,table:Z,filter:ee}}=T,V=x&&x[L];if(V&&V.event===B&&V.schema===H&&V.table===Z&&V.filter===ee)A.push(Object.assign(Object.assign({},T),{id:V.id}));else{this.unsubscribe(),this.state=$e.errored,r==null||r(zt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=A,r&&r(zt.SUBSCRIBED);return}}).receive("error",x=>{this.state=$e.errored,r==null||r(zt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(x).join(", ")||"error")))}).receive("timeout",()=>{r==null||r(zt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,n={}){return await this.send({type:"presence",event:"track",payload:r},n.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,n,o){return this.state===$e.joined&&r===Cn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(r,n,o)}async httpSend(r,n,o={}){var a;const u=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const c={method:"POST",headers:{Authorization:u,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:n,private:this.private}]})},f=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(a=o.timeout)!==null&&a!==void 0?a:this.timeout);if(f.status===202)return{success:!0};let p=f.statusText;try{const m=await f.json();p=m.error||m.message||p}catch{}return Promise.reject(new Error(p))}async send(r,n={}){var o,a;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:u,payload:c}=r,p={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:u,payload:c,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(o=n.timeout)!==null&&o!==void 0?o:this.timeout);return await((a=m.body)===null||a===void 0?void 0:a.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(u=>{var c,f,p;const m=this._push(r.type,r,n.timeout||this.timeout);r.type==="broadcast"&&!(!((p=(f=(c=this.params)===null||c===void 0?void 0:c.config)===null||f===void 0?void 0:f.broadcast)===null||p===void 0)&&p.ack)&&u("ok"),m.receive("ok",()=>u("ok")),m.receive("error",()=>u("error")),m.receive("timeout",()=>u("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=$e.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Lt.close,"leave",this._joinRef())};this.joinPush.destroy();let o=null;return new Promise(a=>{o=new Cl(this,Lt.leave,{},r),o.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),o.send(),this._canPush()||o.trigger("ok",{})}).finally(()=>{o==null||o.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=$e.closed,this.bindings={}}async _fetchWithTimeout(r,n,o){const a=new AbortController,u=setTimeout(()=>a.abort(),o),c=await this.socket.fetch(r,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(u),c}_push(r,n,o=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Cl(this,r,n,o);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Ay){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(r,n,o){return n}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,n,o){var a,u;const c=r.toLocaleLowerCase(),{close:f,error:p,leave:m,join:y}=Lt;if(o&&[f,p,m,y].indexOf(c)>=0&&o!==this._joinRef())return;let _=this._onMessage(c,n,o);if(n&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(x=>{var j,b,E;return((j=x.filter)===null||j===void 0?void 0:j.event)==="*"||((E=(b=x.filter)===null||b===void 0?void 0:b.event)===null||E===void 0?void 0:E.toLocaleLowerCase())===c}).map(x=>x.callback(_,o)):(u=this.bindings[c])===null||u===void 0||u.filter(x=>{var j,b,E,A,L,T;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in x){const B=x.id,H=(j=x.filter)===null||j===void 0?void 0:j.event;return B&&((b=n.ids)===null||b===void 0?void 0:b.includes(B))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((E=n.data)===null||E===void 0?void 0:E.type.toLocaleLowerCase()))}else{const B=(L=(A=x==null?void 0:x.filter)===null||A===void 0?void 0:A.event)===null||L===void 0?void 0:L.toLocaleLowerCase();return B==="*"||B===((T=n==null?void 0:n.event)===null||T===void 0?void 0:T.toLocaleLowerCase())}else return x.type.toLocaleLowerCase()===c}).map(x=>{if(typeof _=="object"&&"ids"in _){const j=_.data,{schema:b,table:E,commit_timestamp:A,type:L,errors:T}=j;_=Object.assign(Object.assign({},{schema:b,table:E,commit_timestamp:A,eventType:L,new:{},old:{},errors:T}),this._getPayloadRecords(j))}x.callback(_,o)})}_isClosed(){return this.state===$e.closed}_isJoined(){return this.state===$e.joined}_isJoining(){return this.state===$e.joining}_isLeaving(){return this.state===$e.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,n,o){const a=r.toLocaleLowerCase(),u={type:a,filter:n,callback:o};return this.bindings[a]?this.bindings[a].push(u):this.bindings[a]=[u],this}_off(r,n){const o=r.toLocaleLowerCase();return this.bindings[o]&&(this.bindings[o]=this.bindings[o].filter(a=>{var u;return!(((u=a.type)===null||u===void 0?void 0:u.toLocaleLowerCase())===o&&up.isEqual(a.filter,n))})),this}static isEqual(r,n){if(Object.keys(r).length!==Object.keys(n).length)return!1;for(const o in r)if(r[o]!==n[o])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Lt.close,{},r)}_onError(r){this._on(Lt.error,{},n=>r(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=$e.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const n={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(n.new=Lh(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(n.old=Lh(r.columns,r.old_record)),n}};const Tl=()=>{},ro={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zy=[1e3,2e3,5e3,1e4],Vy=1e4,Wy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;let Hy=class{constructor(r,n){var o;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zl,this.transport=null,this.heartbeatIntervalMs=ro.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Tl,this.ref=0,this.reconnectTimer=null,this.vsn=Ih,this.logger=Tl,this.conn=null,this.sendBuffer=[],this.serializer=new Iy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>a?(...u)=>a(...u):(...u)=>fetch(...u),!(!((o=n==null?void 0:n.params)===null||o===void 0)&&o.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${r}/${Vl.websocket}`,this.httpEndpoint=op(r),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=rp.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const n=r.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const o=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(o),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const n=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const r=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,n,o){this.logger(r,n,o)}connectionState(){switch(this.conn&&this.conn.readyState){case Wr.connecting:return Hr.Connecting;case Wr.open:return Hr.Open;case Wr.closing:return Hr.Closing;default:return Hr.Closed}}isConnected(){return this.connectionState()===Hr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,n={config:{}}){const o=`realtime:${r}`,a=this.getChannels().find(u=>u.topic===o);if(a)return a;{const u=new lp(`realtime:${r}`,n,this);return this.channels.push(u),u}}push(r){const{topic:n,event:o,payload:a,ref:u}=r,c=()=>{this.encode(r,f=>{var p;(p=this.conn)===null||p===void 0||p.send(f)})};this.log("push",`${n} ${o} (${u})`,a),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Py,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},ro.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let n=this.channels.find(o=>o.topic===r&&(o._isJoined()||o._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${r}"`),n.unsubscribe())}_remove(r){this.channels=this.channels.filter(n=>n.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:o,event:a,payload:u,ref:c}=n,f=c?`(${c})`:"",p=u.status||"";this.log("receive",`${p} ${o} ${a} ${f}`.trim(),u),this.channels.filter(m=>m._isMember(o)).forEach(m=>m._trigger(a,u,c)),this._triggerStateCallbacks("message",n)})}_clearTimer(r){var n;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Wr.open||this.conn.readyState===Wr.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(r){var n;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r)}_triggerChanError(){this.channels.forEach(r=>r._trigger(Lt.error))}_appendParams(r,n){if(Object.keys(n).length===0)return r;const o=r.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${r}${o}${a}`}_workerObjectUrl(r){let n;if(r)n=r;else{const o=new Blob([Wy],{type:"application/javascript"});n=URL.createObjectURL(o)}return n}_setConnectionState(r,n=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(r=null){let n;r?n=r:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const a={access_token:n,version:Ny};n&&o.updateJoinPayload(a),o.joinedOnce&&o._isJoined()&&o._push(Lt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${r}`,n)})}_triggerStateCallbacks(r,n){try{this.stateChangeCallbacks[r].forEach(o=>{try{o(n)}catch(a){this.log("error",`error in ${r} callback`,a)}})}catch(o){this.log("error",`error triggering ${r} callbacks`,o)}}_setupReconnectionTimer(){this.reconnectTimer=new sp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ro.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var n,o,a,u,c,f,p,m,y,w,_,x;switch(this.transport=(n=r==null?void 0:r.transport)!==null&&n!==void 0?n:null,this.timeout=(o=r==null?void 0:r.timeout)!==null&&o!==void 0?o:zl,this.heartbeatIntervalMs=(a=r==null?void 0:r.heartbeatIntervalMs)!==null&&a!==void 0?a:ro.HEARTBEAT_INTERVAL,this.worker=(u=r==null?void 0:r.worker)!==null&&u!==void 0?u:!1,this.accessToken=(c=r==null?void 0:r.accessToken)!==null&&c!==void 0?c:null,this.heartbeatCallback=(f=r==null?void 0:r.heartbeatCallback)!==null&&f!==void 0?f:Tl,this.vsn=(p=r==null?void 0:r.vsn)!==null&&p!==void 0?p:Ih,r!=null&&r.params&&(this.params=r.params),r!=null&&r.logger&&(this.logger=r.logger),(r!=null&&r.logLevel||r!=null&&r.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(m=r==null?void 0:r.reconnectAfterMs)!==null&&m!==void 0?m:(j=>zy[j-1]||Vy),this.vsn){case np:this.encode=(y=r==null?void 0:r.encode)!==null&&y!==void 0?y:((j,b)=>b(JSON.stringify(j))),this.decode=(w=r==null?void 0:r.decode)!==null&&w!==void 0?w:((j,b)=>b(JSON.parse(j)));break;case Oy:this.encode=(_=r==null?void 0:r.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(x=r==null?void 0:r.decode)!==null&&x!==void 0?x:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r==null?void 0:r.workerUrl}}};const qy=Object.freeze(Object.defineProperty({__proto__:null,REALTIME_CHANNEL_STATES:Fy,get REALTIME_LISTEN_TYPES(){return Cn},get REALTIME_POSTGRES_CHANGES_LISTEN_EVENT(){return ql},get REALTIME_PRESENCE_LISTEN_EVENTS(){return Hl},get REALTIME_SUBSCRIBE_STATES(){return zt},RealtimeChannel:lp,RealtimeClient:Hy,RealtimePresence:ap,WebSocketFactory:rp},Symbol.toStringTag,{value:"Module"})),cp=Os(qy);class Ls extends Error{constructor(r){super(r),this.__isStorageError=!0,this.name="StorageError"}}function je(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class dp extends Ls{constructor(r,n,o){super(r),this.name="StorageApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class mo extends Ls{constructor(r,n){super(r),this.name="StorageUnknownError",this.originalError=n}}const du=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),Ky=()=>Response,Kl=i=>{if(Array.isArray(i))return i.map(n=>Kl(n));if(typeof i=="function"||i!==Object(i))return i;const r={};return Object.entries(i).forEach(([n,o])=>{const a=n.replace(/([-_][a-z])/gi,u=>u.toUpperCase().replace(/[-_]/g,""));r[a]=Kl(o)}),r},Gy=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},Jy=i=>!i||typeof i!="string"||i.length===0||i.length>100||i.trim()!==i||i.includes("/")||i.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(i),Rl=i=>{var r;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(r=i.error)===null||r===void 0?void 0:r.message)||JSON.stringify(i)},Qy=(i,r,n)=>G(void 0,void 0,void 0,function*(){const o=yield Ky();i instanceof o&&!(n!=null&&n.noResolveJson)?i.json().then(a=>{const u=i.status||500,c=(a==null?void 0:a.statusCode)||u+"";r(new dp(Rl(a),u,c))}).catch(a=>{r(new mo(Rl(a),a))}):r(new mo(Rl(i),i))}),Yy=(i,r,n,o)=>{const a={method:i,headers:(r==null?void 0:r.headers)||{}};return i==="GET"||!o?a:(Gy(o)?(a.headers=Object.assign({"Content-Type":"application/json"},r==null?void 0:r.headers),a.body=JSON.stringify(o)):a.body=o,r!=null&&r.duplex&&(a.duplex=r.duplex),Object.assign(Object.assign({},a),n))};function $s(i,r,n,o,a,u){return G(this,void 0,void 0,function*(){return new Promise((c,f)=>{i(n,Yy(r,o,a,u)).then(p=>{if(!p.ok)throw p;return o!=null&&o.noResolveJson?p:p.json()}).then(p=>c(p)).catch(p=>Qy(p,f,o))})})}function Rs(i,r,n,o){return G(this,void 0,void 0,function*(){return $s(i,"GET",r,n,o)})}function It(i,r,n,o,a){return G(this,void 0,void 0,function*(){return $s(i,"POST",r,o,a,n)})}function Gl(i,r,n,o,a){return G(this,void 0,void 0,function*(){return $s(i,"PUT",r,o,a,n)})}function Xy(i,r,n,o){return G(this,void 0,void 0,function*(){return $s(i,"HEAD",r,Object.assign(Object.assign({},n),{noResolveJson:!0}),o)})}function hu(i,r,n,o,a){return G(this,void 0,void 0,function*(){return $s(i,"DELETE",r,o,a,n)})}class Zy{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n}then(r,n){return this.execute().then(r,n)}execute(){return G(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(je(r))return{data:null,error:r};throw r}})}}var hp;class e0{constructor(r,n){this.downloadFn=r,this.shouldThrowOnError=n,this[hp]="BlobDownloadBuilder",this.promise=null}asStream(){return new Zy(this.downloadFn,this.shouldThrowOnError)}then(r,n){return this.getPromise().then(r,n)}catch(r){return this.getPromise().catch(r)}finally(r){return this.getPromise().finally(r)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return G(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(je(r))return{data:null,error:r};throw r}})}}hp=Symbol.toStringTag;const t0={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},$h={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class r0{constructor(r,n={},o,a){this.shouldThrowOnError=!1,this.url=r,this.headers=n,this.bucketId=o,this.fetch=du(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(r,n,o,a){return G(this,void 0,void 0,function*(){try{let u;const c=Object.assign(Object.assign({},$h),a);let f=Object.assign(Object.assign({},this.headers),r==="POST"&&{"x-upsert":String(c.upsert)});const p=c.metadata;typeof Blob<"u"&&o instanceof Blob?(u=new FormData,u.append("cacheControl",c.cacheControl),p&&u.append("metadata",this.encodeMetadata(p)),u.append("",o)):typeof FormData<"u"&&o instanceof FormData?(u=o,u.has("cacheControl")||u.append("cacheControl",c.cacheControl),p&&!u.has("metadata")&&u.append("metadata",this.encodeMetadata(p))):(u=o,f["cache-control"]=`max-age=${c.cacheControl}`,f["content-type"]=c.contentType,p&&(f["x-metadata"]=this.toBase64(this.encodeMetadata(p))),(typeof ReadableStream<"u"&&u instanceof ReadableStream||u&&typeof u=="object"&&"pipe"in u&&typeof u.pipe=="function")&&!c.duplex&&(c.duplex="half")),a!=null&&a.headers&&(f=Object.assign(Object.assign({},f),a.headers));const m=this._removeEmptyFolders(n),y=this._getFinalPath(m),w=yield(r=="PUT"?Gl:It)(this.fetch,`${this.url}/object/${y}`,u,Object.assign({headers:f},c!=null&&c.duplex?{duplex:c.duplex}:{}));return{data:{path:m,id:w.Id,fullPath:w.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(je(u))return{data:null,error:u};throw u}})}upload(r,n,o){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",r,n,o)})}uploadToSignedUrl(r,n,o,a){return G(this,void 0,void 0,function*(){const u=this._removeEmptyFolders(r),c=this._getFinalPath(u),f=new URL(this.url+`/object/upload/sign/${c}`);f.searchParams.set("token",n);try{let p;const m=Object.assign({upsert:$h.upsert},a),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&o instanceof Blob?(p=new FormData,p.append("cacheControl",m.cacheControl),p.append("",o)):typeof FormData<"u"&&o instanceof FormData?(p=o,p.append("cacheControl",m.cacheControl)):(p=o,y["cache-control"]=`max-age=${m.cacheControl}`,y["content-type"]=m.contentType);const w=yield Gl(this.fetch,f.toString(),p,{headers:y});return{data:{path:u,fullPath:w.Key},error:null}}catch(p){if(this.shouldThrowOnError)throw p;if(je(p))return{data:null,error:p};throw p}})}createSignedUploadUrl(r,n){return G(this,void 0,void 0,function*(){try{let o=this._getFinalPath(r);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const u=yield It(this.fetch,`${this.url}/object/upload/sign/${o}`,{},{headers:a}),c=new URL(this.url+u.url),f=c.searchParams.get("token");if(!f)throw new Ls("No token returned by API");return{data:{signedUrl:c.toString(),path:r,token:f},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(je(o))return{data:null,error:o};throw o}})}update(r,n,o){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",r,n,o)})}move(r,n,o){return G(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(je(a))return{data:null,error:a};throw a}})}copy(r,n,o){return G(this,void 0,void 0,function*(){try{return{data:{path:(yield It(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:r,destinationKey:n,destinationBucket:o==null?void 0:o.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(je(a))return{data:null,error:a};throw a}})}createSignedUrl(r,n,o){return G(this,void 0,void 0,function*(){try{let a=this._getFinalPath(r),u=yield It(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},o!=null&&o.transform?{transform:o.transform}:{}),{headers:this.headers});const c=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return u={signedUrl:encodeURI(`${this.url}${u.signedURL}${c}`)},{data:u,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(je(a))return{data:null,error:a};throw a}})}createSignedUrls(r,n,o){return G(this,void 0,void 0,function*(){try{const a=yield It(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:r},{headers:this.headers}),u=o!=null&&o.download?`&download=${o.download===!0?"":o.download}`:"";return{data:a.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${u}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(je(a))return{data:null,error:a};throw a}})}download(r,n){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",u=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=u?`?${u}`:"",f=this._getFinalPath(r),p=()=>Rs(this.fetch,`${this.url}/${a}/${f}${c}`,{headers:this.headers,noResolveJson:!0});return new e0(p,this.shouldThrowOnError)}info(r){return G(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{const o=yield Rs(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Kl(o),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(je(o))return{data:null,error:o};throw o}})}exists(r){return G(this,void 0,void 0,function*(){const n=this._getFinalPath(r);try{return yield Xy(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(je(o)&&o instanceof mo){const a=o.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:o}}throw o}})}getPublicUrl(r,n){const o=this._getFinalPath(r),a=[],u=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";u!==""&&a.push(u);const f=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",p=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});p!==""&&a.push(p);let m=a.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${f}/public/${o}${m}`)}}}remove(r){return G(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}list(r,n,o){return G(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},t0),n),{prefix:r||""});return{data:yield It(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},o),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(je(a))return{data:null,error:a};throw a}})}listV2(r,n){return G(this,void 0,void 0,function*(){try{const o=Object.assign({},r);return{data:yield It(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,o,{headers:this.headers},n),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(je(o))return{data:null,error:o};throw o}})}encodeMetadata(r){return JSON.stringify(r)}toBase64(r){return typeof Buffer<"u"?Buffer.from(r).toString("base64"):btoa(r)}_getFinalPath(r){return`${this.bucketId}/${r.replace(/^\/+/,"")}`}_removeEmptyFolders(r){return r.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(r){const n=[];return r.width&&n.push(`width=${r.width}`),r.height&&n.push(`height=${r.height}`),r.resize&&n.push(`resize=${r.resize}`),r.format&&n.push(`format=${r.format}`),r.quality&&n.push(`quality=${r.quality}`),n.join("&")}}const fp="2.86.2",pp={"X-Client-Info":`storage-js/${fp}`};class n0{constructor(r,n={},o,a){this.shouldThrowOnError=!1;const u=new URL(r);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(u.hostname)&&!u.hostname.includes("storage.supabase.")&&(u.hostname=u.hostname.replace("supabase.","storage.supabase.")),this.url=u.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pp),n),this.fetch=du(o)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(r){return G(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(r);return{data:yield Rs(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}getBucket(r){return G(this,void 0,void 0,function*(){try{return{data:yield Rs(this.fetch,`${this.url}/bucket/${r}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}createBucket(r){return G(this,arguments,void 0,function*(n,o={public:!1}){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:o.type,public:o.public,file_size_limit:o.fileSizeLimit,allowed_mime_types:o.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(je(a))return{data:null,error:a};throw a}})}updateBucket(r,n){return G(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket/${r}`,{id:r,name:r,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(je(o))return{data:null,error:o};throw o}})}emptyBucket(r){return G(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket/${r}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}deleteBucket(r){return G(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(r){const n={};return r&&("limit"in r&&(n.limit=String(r.limit)),"offset"in r&&(n.offset=String(r.offset)),r.search&&(n.search=r.search),r.sortColumn&&(n.sortColumn=r.sortColumn),r.sortOrder&&(n.sortOrder=r.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}var Ns=class extends Error{constructor(i,r){var n;super(i),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&((n=r.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function s0(i,r,n){const o=new URL(r,i);if(n)for(const[a,u]of Object.entries(n))u!==void 0&&o.searchParams.set(a,u);return o.toString()}async function i0(i){return!i||i.type==="none"?{}:i.type==="bearer"?{Authorization:`Bearer ${i.token}`}:i.type==="header"?{[i.name]:i.value}:i.type==="custom"?await i.getHeaders():{}}function o0(i){const r=i.fetchImpl??globalThis.fetch;return{async request({method:n,path:o,query:a,body:u,headers:c}){const f=s0(i.baseUrl,o,a),p=await i0(i.auth),m=await r(f,{method:n,headers:{...u?{"Content-Type":"application/json"}:{},...p,...c},body:u?JSON.stringify(u):void 0}),y=await m.text(),w=(m.headers.get("content-type")||"").includes("application/json"),_=w&&y?JSON.parse(y):y;if(!m.ok){const x=w?_:void 0,j=x==null?void 0:x.error;throw new Ns((j==null?void 0:j.message)??`Request failed with status ${m.status}`,{status:m.status,icebergType:j==null?void 0:j.type,icebergCode:j==null?void 0:j.code,details:x})}return{status:m.status,headers:m.headers,data:_}}}}function no(i){return i.join("")}var a0=class{constructor(i,r=""){this.client=i,this.prefix=r}async listNamespaces(i){const r=i?{parent:no(i.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(o=>({namespace:o}))}async createNamespace(i,r){const n={namespace:i.namespace,properties:r==null?void 0:r.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(i){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${no(i.namespace)}`})}async loadNamespaceMetadata(i){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${no(i.namespace)}`})).data.properties}}async namespaceExists(i){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${no(i.namespace)}`}),!0}catch(r){if(r instanceof Ns&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(i,r){try{return await this.createNamespace(i,r)}catch(n){if(n instanceof Ns&&n.status===409)return;throw n}}};function _n(i){return i.join("")}var l0=class{constructor(i,r="",n){this.client=i,this.prefix=r,this.accessDelegation=n}async listTables(i){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_n(i.namespace)}/tables`})).data.identifiers}async createTable(i,r){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_n(i.namespace)}/tables`,body:r,headers:n})).data.metadata}async updateTable(i,r){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${_n(i.namespace)}/tables/${i.name}`,body:r});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(i,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${_n(i.namespace)}/tables/${i.name}`,query:{purgeRequested:String((r==null?void 0:r.purge)??!1)}})}async loadTable(i){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${_n(i.namespace)}/tables/${i.name}`,headers:r})).data.metadata}async tableExists(i){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${_n(i.namespace)}/tables/${i.name}`,headers:r}),!0}catch(n){if(n instanceof Ns&&n.status===404)return!1;throw n}}async createTableIfNotExists(i,r){try{return await this.createTable(i,r)}catch(n){if(n instanceof Ns&&n.status===409)return await this.loadTable({namespace:i.namespace,name:r.name});throw n}}},u0=class{constructor(i){var o;let r="v1";i.catalogName&&(r+=`/${i.catalogName}`);const n=i.baseUrl.endsWith("/")?i.baseUrl:`${i.baseUrl}/`;this.client=o0({baseUrl:n,auth:i.auth,fetchImpl:i.fetch}),this.accessDelegation=(o=i.accessDelegation)==null?void 0:o.join(","),this.namespaceOps=new a0(this.client,r),this.tableOps=new l0(this.client,r,this.accessDelegation)}async listNamespaces(i){return this.namespaceOps.listNamespaces(i)}async createNamespace(i,r){return this.namespaceOps.createNamespace(i,r)}async dropNamespace(i){await this.namespaceOps.dropNamespace(i)}async loadNamespaceMetadata(i){return this.namespaceOps.loadNamespaceMetadata(i)}async listTables(i){return this.tableOps.listTables(i)}async createTable(i,r){return this.tableOps.createTable(i,r)}async updateTable(i,r){return this.tableOps.updateTable(i,r)}async dropTable(i,r){await this.tableOps.dropTable(i,r)}async loadTable(i){return this.tableOps.loadTable(i)}async namespaceExists(i){return this.namespaceOps.namespaceExists(i)}async tableExists(i){return this.tableOps.tableExists(i)}async createNamespaceIfNotExists(i,r){return this.namespaceOps.createNamespaceIfNotExists(i,r)}async createTableIfNotExists(i,r){return this.tableOps.createTableIfNotExists(i,r)}};class mp{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},pp),n),this.fetch=du(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return G(this,void 0,void 0,function*(){try{return{data:yield It(this.fetch,`${this.url}/bucket`,{name:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}listBuckets(r){return G(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(r==null?void 0:r.limit)!==void 0&&n.set("limit",r.limit.toString()),(r==null?void 0:r.offset)!==void 0&&n.set("offset",r.offset.toString()),r!=null&&r.sortColumn&&n.set("sortColumn",r.sortColumn),r!=null&&r.sortOrder&&n.set("sortOrder",r.sortOrder),r!=null&&r.search&&n.set("search",r.search);const o=n.toString(),a=o?`${this.url}/bucket?${o}`:`${this.url}/bucket`;return{data:yield Rs(this.fetch,a,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}deleteBucket(r){return G(this,void 0,void 0,function*(){try{return{data:yield hu(this.fetch,`${this.url}/bucket/${r}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(je(n))return{data:null,error:n};throw n}})}from(r){if(!Jy(r))throw new Ls("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");return new u0({baseUrl:this.url,catalogName:r,auth:{type:"custom",getHeaders:()=>G(this,void 0,void 0,function*(){return this.headers})},fetch:this.fetch})}}const fu={"X-Client-Info":`storage-js/${fp}`,"Content-Type":"application/json"};class pu extends Error{constructor(r){super(r),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function ct(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class ao extends pu{constructor(r,n,o){super(r),this.name="StorageVectorsApiError",this.status=n,this.statusCode=o}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class gp extends pu{constructor(r,n){super(r),this.name="StorageVectorsUnknownError",this.originalError=n}}var Jl;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(Jl||(Jl={}));const bo=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),c0=()=>Response,vp=i=>{if(typeof i!="object"||i===null)return!1;const r=Object.getPrototypeOf(i);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},d0=i=>Array.from(new Float32Array(i)),h0=(i,r)=>{if(r!==void 0&&i.float32.length!==r)throw new Error(`Vector dimension mismatch: expected ${r}, got ${i.float32.length}`)},Dh=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),f0=(i,r,n)=>G(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(n!=null&&n.noResolveJson)){const a=i.status||500,u=i;if(typeof u.json=="function")u.json().then(c=>{const f=(c==null?void 0:c.statusCode)||(c==null?void 0:c.code)||a+"";r(new ao(Dh(c),a,f))}).catch(()=>{const c=a+"",f=u.statusText||`HTTP ${a} error`;r(new ao(f,a,c))});else{const c=a+"",f=u.statusText||`HTTP ${a} error`;r(new ao(f,a,c))}}else r(new gp(Dh(i),i))}),p0=(i,r,n,o)=>{const a={method:i,headers:(r==null?void 0:r.headers)||{}};return o?(vp(o)?(a.headers=Object.assign({"Content-Type":"application/json"},r==null?void 0:r.headers),a.body=JSON.stringify(o)):a.body=o,Object.assign(Object.assign({},a),n)):a};function m0(i,r,n,o,a,u){return G(this,void 0,void 0,function*(){return new Promise((c,f)=>{i(n,p0(r,o,a,u)).then(p=>{if(!p.ok)throw p;if(o!=null&&o.noResolveJson)return p;const m=p.headers.get("content-type");return!m||!m.includes("application/json")?{}:p.json()}).then(p=>c(p)).catch(p=>f0(p,f,o))})})}function vt(i,r,n,o,a){return G(this,void 0,void 0,function*(){return m0(i,"POST",r,o,a,n)})}class yp{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),n),this.fetch=bo(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(r){return G(this,void 0,void 0,function*(){try{return{data:(yield vt(this.fetch,`${this.url}/CreateIndex`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}getIndex(r,n){return G(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ct(o))return{data:null,error:o};throw o}})}listIndexes(r){return G(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/ListIndexes`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}deleteIndex(r,n){return G(this,void 0,void 0,function*(){try{return{data:(yield vt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:r,indexName:n},{headers:this.headers}))||{},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ct(o))return{data:null,error:o};throw o}})}}class wp{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),n),this.fetch=bo(o)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(r){return G(this,void 0,void 0,function*(){try{if(r.vectors.length<1||r.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield vt(this.fetch,`${this.url}/PutVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}getVectors(r){return G(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/GetVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}listVectors(r){return G(this,void 0,void 0,function*(){try{if(r.segmentCount!==void 0){if(r.segmentCount<1||r.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(r.segmentIndex!==void 0&&(r.segmentIndex<0||r.segmentIndex>=r.segmentCount))throw new Error(`segmentIndex must be between 0 and ${r.segmentCount-1}`)}return{data:yield vt(this.fetch,`${this.url}/ListVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}queryVectors(r){return G(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/QueryVectors`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}deleteVectors(r){return G(this,void 0,void 0,function*(){try{if(r.keys.length<1||r.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield vt(this.fetch,`${this.url}/DeleteVectors`,r,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}}class _p{constructor(r,n={},o){this.shouldThrowOnError=!1,this.url=r.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},fu),n),this.fetch=bo(o)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(r){return G(this,void 0,void 0,function*(){try{return{data:(yield vt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}getBucket(r){return G(this,void 0,void 0,function*(){try{return{data:yield vt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}listBuckets(){return G(this,arguments,void 0,function*(r={}){try{return{data:yield vt(this.fetch,`${this.url}/ListVectorBuckets`,r,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}deleteBucket(r){return G(this,void 0,void 0,function*(){try{return{data:(yield vt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ct(n))return{data:null,error:n};throw n}})}}class xp extends _p{constructor(r,n={}){super(r,n.headers||{},n.fetch)}from(r){return new Sp(this.url,this.headers,r,this.fetch)}createBucket(r){const n=Object.create(null,{createBucket:{get:()=>super.createBucket}});return G(this,void 0,void 0,function*(){return n.createBucket.call(this,r)})}getBucket(r){const n=Object.create(null,{getBucket:{get:()=>super.getBucket}});return G(this,void 0,void 0,function*(){return n.getBucket.call(this,r)})}listBuckets(){const r=Object.create(null,{listBuckets:{get:()=>super.listBuckets}});return G(this,arguments,void 0,function*(n={}){return r.listBuckets.call(this,n)})}deleteBucket(r){const n=Object.create(null,{deleteBucket:{get:()=>super.deleteBucket}});return G(this,void 0,void 0,function*(){return n.deleteBucket.call(this,r)})}}class Sp extends yp{constructor(r,n,o,a){super(r,n,a),this.vectorBucketName=o}createIndex(r){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return G(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const r=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return G(this,arguments,void 0,function*(n={}){return r.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(r){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return G(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,r)})}deleteIndex(r){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return G(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,r)})}index(r){return new Ep(this.url,this.headers,this.vectorBucketName,r,this.fetch)}}class Ep extends wp{constructor(r,n,o,a,u){super(r,n,u),this.vectorBucketName=o,this.indexName=a}putVectors(r){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return G(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(r){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return G(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const r=Object.create(null,{listVectors:{get:()=>super.listVectors}});return G(this,arguments,void 0,function*(n={}){return r.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(r){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return G(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(r){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return G(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class g0 extends n0{constructor(r,n={},o,a){super(r,n,o,a)}from(r){return new r0(this.url,this.headers,r,this.fetch)}get vectors(){return new xp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mp(this.url+"/iceberg",this.headers,this.fetch)}}const v0=Object.freeze(Object.defineProperty({__proto__:null,StorageAnalyticsClient:mp,StorageApiError:dp,StorageClient:g0,StorageError:Ls,StorageUnknownError:mo,StorageVectorsApiError:ao,StorageVectorsClient:xp,StorageVectorsError:pu,get StorageVectorsErrorCode(){return Jl},StorageVectorsUnknownError:gp,VectorBucketApi:_p,VectorBucketScope:Sp,VectorDataApi:wp,VectorIndexApi:yp,VectorIndexScope:Ep,isPlainObject:vp,isStorageError:je,isStorageVectorsError:ct,normalizeToFloat32:d0,resolveFetch:bo,resolveResponse:c0,validateVectorDimension:h0},Symbol.toStringTag,{value:"Module"})),y0=Os(v0);var Nl={},Ss={},Uh;function w0(){return Uh||(Uh=1,Object.defineProperty(Ss,"__esModule",{value:!0}),Ss.version=void 0,Ss.version="2.86.2"),Ss}var Mh;function _0(){return Mh||(Mh=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.DEFAULT_REALTIME_OPTIONS=i.DEFAULT_AUTH_OPTIONS=i.DEFAULT_DB_OPTIONS=i.DEFAULT_GLOBAL_OPTIONS=i.DEFAULT_HEADERS=void 0;const r=w0();let n="";typeof Deno<"u"?n="deno":typeof document<"u"?n="web":typeof navigator<"u"&&navigator.product==="ReactNative"?n="react-native":n="node",i.DEFAULT_HEADERS={"X-Client-Info":`supabase-js-${n}/${r.version}`},i.DEFAULT_GLOBAL_OPTIONS={headers:i.DEFAULT_HEADERS},i.DEFAULT_DB_OPTIONS={schema:"public"},i.DEFAULT_AUTH_OPTIONS={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},i.DEFAULT_REALTIME_OPTIONS={}})(Nl)),Nl}var Ol={},Bh;function x0(){return Bh||(Bh=1,(function(i){Object.defineProperty(i,"__esModule",{value:!0}),i.fetchWithAuth=i.resolveHeadersConstructor=i.resolveFetch=void 0;const r=a=>a?(...u)=>a(...u):(...u)=>fetch(...u);i.resolveFetch=r;const n=()=>Headers;i.resolveHeadersConstructor=n;const o=(a,u,c)=>{const f=(0,i.resolveFetch)(c),p=(0,i.resolveHeadersConstructor)();return async(m,y)=>{var w;const _=(w=await u())!==null&&w!==void 0?w:a;let x=new p(y==null?void 0:y.headers);return x.has("apikey")||x.set("apikey",a),x.has("Authorization")||x.set("Authorization",`Bearer ${_}`),f(m,Object.assign(Object.assign({},y),{headers:x}))}};i.fetchWithAuth=o})(Ol)),Ol}var Xt={},Fh;function S0(){if(Fh)return Xt;Fh=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.isBrowser=void 0,Xt.uuid=i,Xt.ensureTrailingSlash=r,Xt.applySettingDefaults=o,Xt.validateSupabaseUrl=a;function i(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var c=Math.random()*16|0,f=u=="x"?c:c&3|8;return f.toString(16)})}function r(u){return u.endsWith("/")?u:u+"/"}const n=()=>typeof window<"u";Xt.isBrowser=n;function o(u,c){var f,p;const{db:m,auth:y,realtime:w,global:_}=u,{db:x,auth:j,realtime:b,global:E}=c,A={db:Object.assign(Object.assign({},x),m),auth:Object.assign(Object.assign({},j),y),realtime:Object.assign(Object.assign({},b),w),storage:{},global:Object.assign(Object.assign(Object.assign({},E),_),{headers:Object.assign(Object.assign({},(f=E==null?void 0:E.headers)!==null&&f!==void 0?f:{}),(p=_==null?void 0:_.headers)!==null&&p!==void 0?p:{})}),accessToken:async()=>""};return u.accessToken?A.accessToken=u.accessToken:delete A.accessToken,A}function a(u){const c=u==null?void 0:u.trim();if(!c)throw new Error("supabaseUrl is required.");if(!c.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(r(c))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}return Xt}var Es={};const kp="2.86.2",bn=30*1e3,Ql=3,Pl=Ql*bn,E0="http://localhost:9999",k0="supabase.auth.token",b0={"X-Client-Info":`gotrue-js/${kp}`},Yl="X-Supabase-Api-Version",bp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},j0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,C0=600*1e3;let Nn=class extends Error{constructor(r,n,o){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=o}};function X(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}let jp=class extends Nn{constructor(r,n,o){super(r,n,o),this.name="AuthApiError",this.status=n,this.code=o}};function Cp(i){return X(i)&&i.name==="AuthApiError"}let Sr=class extends Nn{constructor(r,n){super(r),this.name="AuthUnknownError",this.originalError=n}},rr=class extends Nn{constructor(r,n,o,a){super(r,o,a),this.name=n,this.status=o}},ut=class extends rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Tp(i){return X(i)&&i.name==="AuthSessionMissingError"}let Fr=class extends rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},js=class extends rr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}},Cs=class extends rr{constructor(r,n=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function Rp(i){return X(i)&&i.name==="AuthImplicitGrantRedirectError"}let Xl=class extends rr{constructor(r,n=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},go=class extends rr{constructor(r,n){super(r,"AuthRetryableFetchError",n,void 0)}};function lo(i){return X(i)&&i.name==="AuthRetryableFetchError"}let Zl=class extends rr{constructor(r,n,o){super(r,"AuthWeakPasswordError",n,"weak_password"),this.reasons=o}};function T0(i){return X(i)&&i.name==="AuthWeakPasswordError"}let vo=class extends rr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}};const yo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),zh=` 	
\r=`.split(""),R0=(()=>{const i=new Array(128);for(let r=0;r<i.length;r+=1)i[r]=-1;for(let r=0;r<zh.length;r+=1)i[zh[r].charCodeAt(0)]=-2;for(let r=0;r<yo.length;r+=1)i[yo[r].charCodeAt(0)]=r;return i})();function Vh(i,r,n){if(i!==null)for(r.queue=r.queue<<8|i,r.queuedBits+=8;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(yo[o]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const o=r.queue>>r.queuedBits-6&63;n(yo[o]),r.queuedBits-=6}}function Np(i,r,n){const o=R0[i];if(o>-1)for(r.queue=r.queue<<6|o,r.queuedBits+=6;r.queuedBits>=8;)n(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(o===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Wh(i){const r=[],n=c=>{r.push(String.fromCodePoint(c))},o={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},u=c=>{P0(c,o,n)};for(let c=0;c<i.length;c+=1)Np(i.charCodeAt(c),a,u);return r.join("")}function N0(i,r){if(i<=127){r(i);return}else if(i<=2047){r(192|i>>6),r(128|i&63);return}else if(i<=65535){r(224|i>>12),r(128|i>>6&63),r(128|i&63);return}else if(i<=1114111){r(240|i>>18),r(128|i>>12&63),r(128|i>>6&63),r(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function O0(i,r){for(let n=0;n<i.length;n+=1){let o=i.charCodeAt(n);if(o>55295&&o<=56319){const a=(o-55296)*1024&65535;o=(i.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}N0(o,r)}}function P0(i,r,n){if(r.utf8seq===0){if(i<=127){n(i);return}for(let o=1;o<6;o+=1)if((i>>7-o&1)===0){r.utf8seq=o;break}if(r.utf8seq===2)r.codepoint=i&31;else if(r.utf8seq===3)r.codepoint=i&15;else if(r.utf8seq===4)r.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|i&63,r.utf8seq-=1,r.utf8seq===0&&n(r.codepoint)}}function Tn(i){const r=[],n={queue:0,queuedBits:0},o=a=>{r.push(a)};for(let a=0;a<i.length;a+=1)Np(i.charCodeAt(a),n,o);return new Uint8Array(r)}function A0(i){const r=[];return O0(i,n=>r.push(n)),new Uint8Array(r)}function qr(i){const r=[],n={queue:0,queuedBits:0},o=a=>{r.push(a)};return i.forEach(a=>Vh(a,n,o)),Vh(null,n,o),r.join("")}function I0(i){return Math.round(Date.now()/1e3)+i}function L0(){return Symbol("auth-callback")}const qe=()=>typeof window<"u"&&typeof document<"u",Mr={tested:!1,writable:!1},Op=()=>{if(!qe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mr.tested)return Mr.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Mr.tested=!0,Mr.writable=!0}catch{Mr.tested=!0,Mr.writable=!1}return Mr.writable};function $0(i){const r={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,u)=>{r[u]=a})}catch{}return n.searchParams.forEach((o,a)=>{r[a]=o}),r}const Pp=i=>i?(...r)=>i(...r):(...r)=>fetch(...r),D0=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",jn=async(i,r,n)=>{await i.setItem(r,JSON.stringify(n))},Br=async(i,r)=>{const n=await i.getItem(r);if(!n)return null;try{return JSON.parse(n)}catch{return n}},He=async(i,r)=>{await i.removeItem(r)};class jo{constructor(){this.promise=new jo.promiseConstructor((r,n)=>{this.resolve=r,this.reject=n})}}jo.promiseConstructor=Promise;function Al(i){const r=i.split(".");if(r.length!==3)throw new vo("Invalid JWT structure");for(let o=0;o<r.length;o++)if(!j0.test(r[o]))throw new vo("JWT not in base64url format");return{header:JSON.parse(Wh(r[0])),payload:JSON.parse(Wh(r[1])),signature:Tn(r[2]),raw:{header:r[0],payload:r[1]}}}async function U0(i){return await new Promise(r=>{setTimeout(()=>r(null),i)})}function M0(i,r){return new Promise((o,a)=>{(async()=>{for(let u=0;u<1/0;u++)try{const c=await i(u);if(!r(u,null,c)){o(c);return}}catch(c){if(!r(u,c)){a(c);return}}})()})}function B0(i){return("0"+i.toString(16)).substr(-2)}function F0(){const r=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",o=n.length;let a="";for(let u=0;u<56;u++)a+=n.charAt(Math.floor(Math.random()*o));return a}return crypto.getRandomValues(r),Array.from(r,B0).join("")}async function z0(i){const n=new TextEncoder().encode(i),o=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(o);return Array.from(a).map(u=>String.fromCharCode(u)).join("")}async function V0(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await z0(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function xn(i,r,n=!1){const o=F0();let a=o;n&&(a+="/PASSWORD_RECOVERY"),await jn(i,`${r}-code-verifier`,a);const u=await V0(o);return[u,o===u?"plain":"s256"]}const W0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function H0(i){const r=i.headers.get(Yl);if(!r||!r.match(W0))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function q0(i){if(!i)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(i<=r)throw new Error("JWT has expired")}function K0(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const G0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Sn(i){if(!G0.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Il(){const i={};return new Proxy(i,{get:(r,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const o=n.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function J0(i,r){return new Proxy(i,{get:(n,o,a)=>{if(o==="__isInsecureUserWarningProxy")return!0;if(typeof o=="symbol"){const u=o.toString();if(u==="Symbol(Symbol.toPrimitive)"||u==="Symbol(Symbol.toStringTag)"||u==="Symbol(util.inspect.custom)"||u==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,o,a)}return!r.value&&typeof o=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(n,o,a)}})}function Hh(i){return JSON.parse(JSON.stringify(i))}const zr=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Q0=[502,503,504];async function qh(i){var r;if(!D0(i))throw new go(zr(i),0);if(Q0.includes(i.status))throw new go(zr(i),i.status);let n;try{n=await i.json()}catch(u){throw new Sr(zr(u),u)}let o;const a=H0(i);if(a&&a.getTime()>=bp["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?o=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(o=n.error_code),o){if(o==="weak_password")throw new Zl(zr(n),i.status,((r=n.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(o==="session_not_found")throw new ut}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((u,c)=>u&&typeof c=="string",!0))throw new Zl(zr(n),i.status,n.weak_password.reasons);throw new jp(zr(n),i.status||500,o)}const Y0=(i,r,n,o)=>{const a={method:i,headers:(r==null?void 0:r.headers)||{}};return i==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r==null?void 0:r.headers),a.body=JSON.stringify(o),Object.assign(Object.assign({},a),n))};async function ie(i,r,n,o){var a;const u=Object.assign({},o==null?void 0:o.headers);u[Yl]||(u[Yl]=bp["2024-01-01"].name),o!=null&&o.jwt&&(u.Authorization=`Bearer ${o.jwt}`);const c=(a=o==null?void 0:o.query)!==null&&a!==void 0?a:{};o!=null&&o.redirectTo&&(c.redirect_to=o.redirectTo);const f=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",p=await X0(i,r,n+f,{headers:u,noResolveJson:o==null?void 0:o.noResolveJson},{},o==null?void 0:o.body);return o!=null&&o.xform?o==null?void 0:o.xform(p):{data:Object.assign({},p),error:null}}async function X0(i,r,n,o,a,u){const c=Y0(r,o,a,u);let f;try{f=await i(n,Object.assign({},c))}catch(p){throw console.error(p),new go(zr(p),0)}if(f.ok||await qh(f),o!=null&&o.noResolveJson)return f;try{return await f.json()}catch(p){await qh(p)}}function At(i){var r;let n=null;tw(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=I0(i.expires_in)));const o=(r=i.user)!==null&&r!==void 0?r:i;return{data:{session:n,user:o},error:null}}function Kh(i){const r=At(i);return!r.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,o)=>n&&typeof o=="string",!0)&&(r.data.weak_password=i.weak_password),r}function Er(i){var r;return{data:{user:(r=i.user)!==null&&r!==void 0?r:i},error:null}}function Z0(i){return{data:i,error:null}}function ew(i){const{action_link:r,email_otp:n,hashed_token:o,redirect_to:a,verification_type:u}=i,c=Pn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),f={action_link:r,email_otp:n,hashed_token:o,redirect_to:a,verification_type:u},p=Object.assign({},c);return{data:{properties:f,user:p},error:null}}function Gh(i){return i}function tw(i){return i.access_token&&i.refresh_token&&i.expires_in}const uo=["global","local","others"];let mu=class{constructor({url:r="",headers:n={},fetch:o}){this.url=r,this.headers=n,this.fetch=Pp(o),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,n=uo[0]){if(uo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${uo.join(", ")}`);try{return await ie(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(o){if(X(o))return{data:null,error:o};throw o}}async inviteUserByEmail(r,n={}){try{return await ie(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Er})}catch(o){if(X(o))return{data:{user:null},error:o};throw o}}async generateLink(r){try{const{options:n}=r,o=Pn(r,["options"]),a=Object.assign(Object.assign({},o),n);return"newEmail"in o&&(a.new_email=o==null?void 0:o.newEmail,delete a.newEmail),await ie(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:ew,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(X(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(r){try{return await ie(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:Er})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async listUsers(r){var n,o,a,u,c,f,p;try{const m={nextPage:null,lastPage:0,total:0},y=await ie(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r==null?void 0:r.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(a=r==null?void 0:r.perPage)===null||a===void 0?void 0:a.toString())!==null&&u!==void 0?u:""},xform:Gh});if(y.error)throw y.error;const w=await y.json(),_=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(j.split(";")[1].split("=")[1]);m[`${E}Page`]=b}),m.total=parseInt(_)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(X(m))return{data:{users:[]},error:m};throw m}}async getUserById(r){Sn(r);try{return await ie(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:Er})}catch(n){if(X(n))return{data:{user:null},error:n};throw n}}async updateUserById(r,n){Sn(r);try{return await ie(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:n,headers:this.headers,xform:Er})}catch(o){if(X(o))return{data:{user:null},error:o};throw o}}async deleteUser(r,n=!1){Sn(r);try{return await ie(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:n},xform:Er})}catch(o){if(X(o))return{data:{user:null},error:o};throw o}}async _listFactors(r){Sn(r.userId);try{const{data:n,error:o}=await ie(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:o}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _deleteFactor(r){Sn(r.userId),Sn(r.id);try{return{data:await ie(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _listOAuthClients(r){var n,o,a,u,c,f,p;try{const m={nextPage:null,lastPage:0,total:0},y=await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(o=(n=r==null?void 0:r.page)===null||n===void 0?void 0:n.toString())!==null&&o!==void 0?o:"",per_page:(u=(a=r==null?void 0:r.perPage)===null||a===void 0?void 0:a.toString())!==null&&u!==void 0?u:""},xform:Gh});if(y.error)throw y.error;const w=await y.json(),_=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,x=(p=(f=y.headers.get("link"))===null||f===void 0?void 0:f.split(","))!==null&&p!==void 0?p:[];return x.length>0&&(x.forEach(j=>{const b=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),E=JSON.parse(j.split(";")[1].split("=")[1]);m[`${E}Page`]=b}),m.total=parseInt(_)),{data:Object.assign(Object.assign({},w),m),error:null}}catch(m){if(X(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(r){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _getOAuthClient(r){try{return await ie(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}async _updateOAuthClient(r,n){try{return await ie(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:n,headers:this.headers,xform:o=>({data:o,error:null})})}catch(o){if(X(o))return{data:null,error:o};throw o}}async _deleteOAuthClient(r){try{return await ie(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(X(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(r){try{return await ie(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(X(n))return{data:null,error:n};throw n}}};function Jh(i={}){return{getItem:r=>i[r]||null,setItem:(r,n)=>{i[r]=n},removeItem:r=>{delete i[r]}}}const Vr={debug:!!(globalThis&&Op()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class gu extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}let Ap=class extends gu{};class rw extends gu{}async function Ip(i,r,n){Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,r);const o=new globalThis.AbortController;return r>0&&setTimeout(()=>{o.abort(),Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},r),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:o.signal},async a=>{if(a){Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,a.name);try{return await n()}finally{Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,a.name)}}else{if(r===0)throw Vr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new Ap(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(Vr.debug)try{const u=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(u,null,"  "))}catch(u){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",u)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}const Qh={};async function nw(i,r,n){var o;const a=(o=Qh[i])!==null&&o!==void 0?o:Promise.resolve(),u=Promise.race([a.catch(()=>null),r>=0?new Promise((c,f)=>{setTimeout(()=>{f(new rw(`Acquring process lock with name "${i}" timed out`))},r)}):null].filter(c=>c)).catch(c=>{if(c&&c.isAcquireTimeout)throw c;return null}).then(async()=>await n());return Qh[i]=u.catch(async c=>{if(c&&c.isAcquireTimeout)return await a,null;throw c}),await u}function sw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Lp(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function iw(i){return parseInt(i,16)}function ow(i){const r=new TextEncoder().encode(i);return"0x"+Array.from(r,o=>o.toString(16).padStart(2,"0")).join("")}function aw(i){var r;const{chainId:n,domain:o,expirationTime:a,issuedAt:u=new Date,nonce:c,notBefore:f,requestId:p,resources:m,scheme:y,uri:w,version:_}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!o)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(c&&c.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${c}`);if(!w)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((r=i.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const x=Lp(i.address),j=y?`${y}://${o}`:o,b=i.statement?`${i.statement}
`:"",E=`${j} wants you to sign in with your Ethereum account:
${x}

${b}`;let A=`URI: ${w}
Version: ${_}
Chain ID: ${n}${c?`
Nonce: ${c}`:""}
Issued At: ${u.toISOString()}`;if(a&&(A+=`
Expiration Time: ${a.toISOString()}`),f&&(A+=`
Not Before: ${f.toISOString()}`),p&&(A+=`
Request ID: ${p}`),m){let L=`
Resources:`;for(const T of m){if(!T||typeof T!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${T}`);L+=`
- ${T}`}A+=L}return`${E}
${A}`}class De extends Error{constructor({message:r,code:n,cause:o,name:a}){var u;super(r,{cause:o}),this.__isWebAuthnError=!0,this.name=(u=a??(o instanceof Error?o.name:void 0))!==null&&u!==void 0?u:"Unknown Error",this.code=n}}class wo extends De{constructor(r,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:r}),this.name="WebAuthnUnknownError",this.originalError=n}}function lw({error:i,options:r}){var n,o,a;const{publicKey:u}=r;if(!u)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new De({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=u.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new De({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(r.mediation==="conditional"&&((o=u.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new De({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((a=u.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new De({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new De({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new De({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return u.pubKeyCredParams.filter(f=>f.type==="public-key").length===0?new De({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new De({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const c=window.location.hostname;if($p(c)){if(u.rp.id!==c)return new De({message:`The RP ID "${u.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new De({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(u.user.id.byteLength<1||u.user.id.byteLength>64)return new De({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new De({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new De({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function uw({error:i,options:r}){const{publicKey:n}=r;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(r.signal instanceof AbortSignal)return new De({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new De({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const o=window.location.hostname;if($p(o)){if(n.rpId!==o)return new De({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new De({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new De({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new De({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class cw{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const dw=new cw;function hw(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:r,user:n,excludeCredentials:o}=i,a=Pn(i,["challenge","user","excludeCredentials"]),u=Tn(r).buffer,c=Object.assign(Object.assign({},n),{id:Tn(n.id).buffer}),f=Object.assign(Object.assign({},a),{challenge:u,user:c});if(o&&o.length>0){f.excludeCredentials=new Array(o.length);for(let p=0;p<o.length;p++){const m=o[p];f.excludeCredentials[p]=Object.assign(Object.assign({},m),{id:Tn(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return f}function fw(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:r,allowCredentials:n}=i,o=Pn(i,["challenge","allowCredentials"]),a=Tn(r).buffer,u=Object.assign(Object.assign({},o),{challenge:a});if(n&&n.length>0){u.allowCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const f=n[c];u.allowCredentials[c]=Object.assign(Object.assign({},f),{id:Tn(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return u}function pw(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:qr(new Uint8Array(i.response.attestationObject)),clientDataJSON:qr(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function mw(i){var r;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,o=i.getClientExtensionResults(),a=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:qr(new Uint8Array(a.authenticatorData)),clientDataJSON:qr(new Uint8Array(a.clientDataJSON)),signature:qr(new Uint8Array(a.signature)),userHandle:a.userHandle?qr(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:o,authenticatorAttachment:(r=n.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function $p(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Yh(){var i,r;return!!(qe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((r=navigator==null?void 0:navigator.credentials)===null||r===void 0?void 0:r.get)=="function")}async function gw(i){try{const r=await navigator.credentials.create(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new wo("Browser returned unexpected credential type",r)}:{data:null,error:new wo("Empty credential response",r)}}catch(r){return{data:null,error:lw({error:r,options:i})}}}async function vw(i){try{const r=await navigator.credentials.get(i);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new wo("Browser returned unexpected credential type",r)}:{data:null,error:new wo("Empty credential response",r)}}catch(r){return{data:null,error:uw({error:r,options:i})}}}const yw={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},ww={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function _o(...i){const r=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),n=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),o={};for(const a of i)if(a)for(const u in a){const c=a[u];if(c!==void 0)if(Array.isArray(c))o[u]=c;else if(n(c))o[u]=c;else if(r(c)){const f=o[u];r(f)?o[u]=_o(f,c):o[u]=_o(c)}else o[u]=c}return o}function _w(i,r){return _o(yw,i,r||{})}function xw(i,r){return _o(ww,i,r||{})}class Sw{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:n,friendlyName:o,signal:a},u){try{const{data:c,error:f}=await this.client.mfa.challenge({factorId:r,webauthn:n});if(!c)return{data:null,error:f};const p=a??dw.createNewAbortSignal();if(c.webauthn.type==="create"){const{user:m}=c.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${o}`),m.displayName||(m.displayName=m.name)}switch(c.webauthn.type){case"create":{const m=_w(c.webauthn.credential_options.publicKey,u==null?void 0:u.create),{data:y,error:w}=await gw({publicKey:m,signal:p});return y?{data:{factorId:r,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}case"request":{const m=xw(c.webauthn.credential_options.publicKey,u==null?void 0:u.request),{data:y,error:w}=await vw(Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:m,signal:p}));return y?{data:{factorId:r,challengeId:c.id,webauthn:{type:c.webauthn.type,credential_response:y}},error:null}:{data:null,error:w}}}}catch(c){return X(c)?{data:null,error:c}:{data:null,error:new Sr("Unexpected error in challenge",c)}}}async _verify({challengeId:r,factorId:n,webauthn:o}){return this.client.mfa.verify({factorId:n,challengeId:r,webauthn:o})}async _authenticate({factorId:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},u){if(!n)return{data:null,error:new Nn("rpId is required for WebAuthn authentication")};try{if(!Yh())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this.challenge({factorId:r,webauthn:{rpId:n,rpOrigins:o},signal:a},{request:u});if(!c)return{data:null,error:f};const{webauthn:p}=c;return this._verify({factorId:r,challengeId:c.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:o,credential_response:p.credential_response}})}catch(c){return X(c)?{data:null,error:c}:{data:null,error:new Sr("Unexpected error in authenticate",c)}}}async _register({friendlyName:r,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:o=typeof window<"u"?[window.location.origin]:void 0,signal:a}={}},u){if(!n)return{data:null,error:new Nn("rpId is required for WebAuthn registration")};try{if(!Yh())return{data:null,error:new Sr("Browser does not support WebAuthn",null)};const{data:c,error:f}=await this._enroll({friendlyName:r});if(!c)return await this.client.mfa.listFactors().then(y=>{var w;return(w=y.data)===null||w===void 0?void 0:w.all.find(_=>_.factor_type==="webauthn"&&_.friendly_name===r&&_.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:f};const{data:p,error:m}=await this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:n,rpOrigins:o},signal:a},{create:u});return p?this._verify({factorId:c.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:o,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:m}}catch(c){return X(c)?{data:null,error:c}:{data:null,error:new Sr("Unexpected error in register",c)}}}}sw();const Ew={url:E0,storageKey:k0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:b0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Xh(i,r,n){return await n()}const En={};let vu=class eu{get jwks(){var r,n;return(n=(r=En[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(r){En[this.storageKey]=Object.assign(Object.assign({},En[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,n;return(n=(r=En[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){En[this.storageKey]=Object.assign(Object.assign({},En[this.storageKey]),{cachedAt:r})}constructor(r){var n,o,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const u=Object.assign(Object.assign({},Ew),r);if(this.storageKey=u.storageKey,this.instanceID=(n=eu.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,eu.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!u.debug,typeof u.debug=="function"&&(this.logger=u.debug),this.instanceID>0&&qe()){const c=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(c),this.logDebugMessages&&console.trace(c)}if(this.persistSession=u.persistSession,this.autoRefreshToken=u.autoRefreshToken,this.admin=new mu({url:u.url,headers:u.headers,fetch:u.fetch}),this.url=u.url,this.headers=u.headers,this.fetch=Pp(u.fetch),this.lock=u.lock||Xh,this.detectSessionInUrl=u.detectSessionInUrl,this.flowType=u.flowType,this.hasCustomAuthorizationHeader=u.hasCustomAuthorizationHeader,this.throwOnError=u.throwOnError,u.lock?this.lock=u.lock:qe()&&(!((o=globalThis==null?void 0:globalThis.navigator)===null||o===void 0)&&o.locks)?this.lock=Ip:this.lock=Xh,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Sw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(u.storage?this.storage=u.storage:Op()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jh(this.memoryStorage)),u.userStorage&&(this.userStorage=u.userStorage)):(this.memoryStorage={},this.storage=Jh(this.memoryStorage)),qe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(c){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",c)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",async c=>{this._debug("received broadcast notification from other tab or client",c),await this._notifyAllSubscribers(c.data.event,c.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${kp}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let n={},o="none";if(qe()&&(n=$0(window.location.href),this._isImplicitGrantCallback(n)?o="implicit":await this._isPKCECallback(n)&&(o="pkce")),qe()&&this.detectSessionInUrl&&o!=="none"){const{data:a,error:u}=await this._getSessionFromURL(n,o);if(u){if(this._debug("#_initialize()","error detecting session from URL",u),Rp(u)){const p=(r=u.details)===null||r===void 0?void 0:r.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:u}}return await this._removeSession(),{error:u}}const{session:c,redirectType:f}=a;return this._debug("#_initialize()","detected session in URL",c,"redirect type",f),await this._saveSession(c),setTimeout(async()=>{f==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return X(n)?this._returnResult({error:n}):this._returnResult({error:new Sr("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var n,o,a;try{const u=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(o=(n=r==null?void 0:r.options)===null||n===void 0?void 0:n.data)!==null&&o!==void 0?o:{},gotrue_meta_security:{captcha_token:(a=r==null?void 0:r.options)===null||a===void 0?void 0:a.captchaToken}},xform:At}),{data:c,error:f}=u;if(f||!c)return this._returnResult({data:{user:null,session:null},error:f});const p=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signUp(r){var n,o,a;try{let u;if("email"in r){const{email:y,password:w,options:_}=r;let x=null,j=null;this.flowType==="pkce"&&([x,j]=await xn(this.storage,this.storageKey)),u=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:_==null?void 0:_.emailRedirectTo,body:{email:y,password:w,data:(n=_==null?void 0:_.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken},code_challenge:x,code_challenge_method:j},xform:At})}else if("phone"in r){const{phone:y,password:w,options:_}=r;u=await ie(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(o=_==null?void 0:_.data)!==null&&o!==void 0?o:{},channel:(a=_==null?void 0:_.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:_==null?void 0:_.captchaToken}},xform:At})}else throw new js("You must provide either an email or phone number and a password");const{data:c,error:f}=u;if(f||!c)return await He(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:f});const p=c.session,m=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(u){if(await He(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:{user:null,session:null},error:u});throw u}}async signInWithPassword(r){try{let n;if("email"in r){const{email:u,password:c,options:f}=r;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:u,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Kh})}else if("phone"in r){const{phone:u,password:c,options:f}=r;n=await ie(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:u,password:c,gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Kh})}else throw new js("You must provide either an email or phone number and a password");const{data:o,error:a}=n;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!o||!o.session||!o.user){const u=new Fr;return this._returnResult({data:{user:null,session:null},error:u})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign({user:o.user,session:o.session},o.weak_password?{weakPassword:o.weak_password}:null),error:a})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(r){var n,o,a,u;return await this._handleProviderSignIn(r.provider,{redirectTo:(n=r.options)===null||n===void 0?void 0:n.redirectTo,scopes:(o=r.options)===null||o===void 0?void 0:o.scopes,queryParams:(a=r.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(u=r.options)===null||u===void 0?void 0:u.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:n}=r;switch(n){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(r){var n,o,a,u,c,f,p,m,y,w,_;let x,j;if("message"in r)x=r.message,j=r.signature;else{const{chain:b,wallet:E,statement:A,options:L}=r;let T;if(qe())if(typeof E=="object")T=E;else{const te=window;if("ethereum"in te&&typeof te.ethereum=="object"&&"request"in te.ethereum&&typeof te.ethereum.request=="function")T=te.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof E!="object"||!(L!=null&&L.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");T=E}const B=new URL((n=L==null?void 0:L.url)!==null&&n!==void 0?n:window.location.href),H=await T.request({method:"eth_requestAccounts"}).then(te=>te).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!H||H.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const Z=Lp(H[0]);let ee=(o=L==null?void 0:L.signInWithEthereum)===null||o===void 0?void 0:o.chainId;if(!ee){const te=await T.request({method:"eth_chainId"});ee=iw(te)}const V={domain:B.host,address:Z,statement:A,uri:B.href,version:"1",chainId:ee,nonce:(a=L==null?void 0:L.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(c=(u=L==null?void 0:L.signInWithEthereum)===null||u===void 0?void 0:u.issuedAt)!==null&&c!==void 0?c:new Date,expirationTime:(f=L==null?void 0:L.signInWithEthereum)===null||f===void 0?void 0:f.expirationTime,notBefore:(p=L==null?void 0:L.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(m=L==null?void 0:L.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(y=L==null?void 0:L.signInWithEthereum)===null||y===void 0?void 0:y.resources};x=aw(V),j=await T.request({method:"personal_sign",params:[ow(x),Z]})}try{const{data:b,error:E}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:x,signature:j},!((w=r.options)===null||w===void 0)&&w.captchaToken?{gotrue_meta_security:{captcha_token:(_=r.options)===null||_===void 0?void 0:_.captchaToken}}:null),xform:At});if(E)throw E;if(!b||!b.session||!b.user){const A=new Fr;return this._returnResult({data:{user:null,session:null},error:A})}return b.session&&(await this._saveSession(b.session),await this._notifyAllSubscribers("SIGNED_IN",b.session)),this._returnResult({data:Object.assign({},b),error:E})}catch(b){if(X(b))return this._returnResult({data:{user:null,session:null},error:b});throw b}}async signInWithSolana(r){var n,o,a,u,c,f,p,m,y,w,_,x;let j,b;if("message"in r)j=r.message,b=r.signature;else{const{chain:E,wallet:A,statement:L,options:T}=r;let B;if(qe())if(typeof A=="object")B=A;else{const Z=window;if("solana"in Z&&typeof Z.solana=="object"&&("signIn"in Z.solana&&typeof Z.solana.signIn=="function"||"signMessage"in Z.solana&&typeof Z.solana.signMessage=="function"))B=Z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!(T!=null&&T.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=A}const H=new URL((n=T==null?void 0:T.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in B&&B.signIn){const Z=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},T==null?void 0:T.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),L?{statement:L}:null));let ee;if(Array.isArray(Z)&&Z[0]&&typeof Z[0]=="object")ee=Z[0];else if(Z&&typeof Z=="object"&&"signedMessage"in Z&&"signature"in Z)ee=Z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)j=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),b=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${H.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...L?["",L,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(a=(o=T==null?void 0:T.signInWithSolana)===null||o===void 0?void 0:o.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((u=T==null?void 0:T.signInWithSolana)===null||u===void 0)&&u.notBefore?[`Not Before: ${T.signInWithSolana.notBefore}`]:[],...!((c=T==null?void 0:T.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${T.signInWithSolana.expirationTime}`]:[],...!((f=T==null?void 0:T.signInWithSolana)===null||f===void 0)&&f.chainId?[`Chain ID: ${T.signInWithSolana.chainId}`]:[],...!((p=T==null?void 0:T.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${T.signInWithSolana.nonce}`]:[],...!((m=T==null?void 0:T.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${T.signInWithSolana.requestId}`]:[],...!((w=(y=T==null?void 0:T.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...T.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);const Z=await B.signMessage(new TextEncoder().encode(j),"utf8");if(!Z||!(Z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");b=Z}}try{const{data:E,error:A}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:qr(b)},!((_=r.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(x=r.options)===null||x===void 0?void 0:x.captchaToken}}:null),xform:At});if(A)throw A;if(!E||!E.session||!E.user){const L=new Fr;return this._returnResult({data:{user:null,session:null},error:L})}return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),this._returnResult({data:Object.assign({},E),error:A})}catch(E){if(X(E))return this._returnResult({data:{user:null,session:null},error:E});throw E}}async _exchangeCodeForSession(r){const n=await Br(this.storage,`${this.storageKey}-code-verifier`),[o,a]=(n??"").split("/");try{const{data:u,error:c}=await ie(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:o},xform:At});if(await He(this.storage,`${this.storageKey}-code-verifier`),c)throw c;if(!u||!u.session||!u.user){const f=new Fr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:f})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:Object.assign(Object.assign({},u),{redirectType:a??null}),error:c})}catch(u){if(await He(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:{user:null,session:null,redirectType:null},error:u});throw u}}async signInWithIdToken(r){try{const{options:n,provider:o,token:a,access_token:u,nonce:c}=r,f=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:o,id_token:a,access_token:u,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:At}),{data:p,error:m}=f;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!p||!p.session||!p.user){const y=new Fr;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:m})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(r){var n,o,a,u,c;try{if("email"in r){const{email:f,options:p}=r;let m=null,y=null;this.flowType==="pkce"&&([m,y]=await xn(this.storage,this.storageKey));const{error:w}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:f,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(o=p==null?void 0:p.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:m,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:w})}if("phone"in r){const{phone:f,options:p}=r,{data:m,error:y}=await ie(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:f,data:(a=p==null?void 0:p.data)!==null&&a!==void 0?a:{},create_user:(u=p==null?void 0:p.shouldCreateUser)!==null&&u!==void 0?u:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(c=p==null?void 0:p.channel)!==null&&c!==void 0?c:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:y})}throw new js("You must provide either an email or phone number.")}catch(f){if(await He(this.storage,`${this.storageKey}-code-verifier`),X(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async verifyOtp(r){var n,o;try{let a,u;"options"in r&&(a=(n=r.options)===null||n===void 0?void 0:n.redirectTo,u=(o=r.options)===null||o===void 0?void 0:o.captchaToken);const{data:c,error:f}=await ie(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:u}}),redirectTo:a,xform:At});if(f)throw f;if(!c)throw new Error("An error occurred on token verification.");const p=c.session,m=c.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:m,session:p},error:null})}catch(a){if(X(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async signInWithSSO(r){var n,o,a,u,c;try{let f=null,p=null;this.flowType==="pkce"&&([f,p]=await xn(this.storage,this.storageKey));const m=await ie(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(o=(n=r.options)===null||n===void 0?void 0:n.redirectTo)!==null&&o!==void 0?o:void 0}),!((a=r==null?void 0:r.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:f,code_challenge_method:p}),headers:this.headers,xform:Z0});return!((u=m.data)===null||u===void 0)&&u.url&&qe()&&!(!((c=r.options)===null||c===void 0)&&c.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(f){if(await He(this.storage,`${this.storageKey}-code-verifier`),X(f))return this._returnResult({data:null,error:f});throw f}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;if(o)throw o;if(!n)throw new ut;const{error:a}=await ie(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:a})})}catch(r){if(X(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const n=`${this.url}/resend`;if("email"in r){const{email:o,type:a,options:u}=r,{error:c}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{email:o,type:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},redirectTo:u==null?void 0:u.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:c})}else if("phone"in r){const{phone:o,type:a,options:u}=r,{data:c,error:f}=await ie(this.fetch,"POST",n,{headers:this.headers,body:{phone:o,type:a,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:f})}throw new js("You must provide either an email or phone number and a type")}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(r,n){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const o=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await o,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const o=n();for(this.pendingInLock.push((async()=>{try{await o}catch{}})()),await o;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await o}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await r(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const n=await Br(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?r=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const o=r.expires_at?r.expires_at*1e3-Date.now()<Pl:!1;if(this._debug("#__loadSession()",`session has${o?"":" not"} expired`,"expires_at",r.expires_at),!o){if(this.userStorage){const c=await Br(this.userStorage,this.storageKey+"-user");c!=null&&c.user?r.user=c.user:r.user=Il()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const c={value:this.suppressGetSessionWarning};r.user=J0(r.user,c),c.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:a,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{session:null},error:u}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(r){try{return r?await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:Er}):await this._useSession(async n=>{var o,a,u;const{data:c,error:f}=n;if(f)throw f;return!(!((o=c.session)===null||o===void 0)&&o.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new ut}:await ie(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(u=(a=c.session)===null||a===void 0?void 0:a.access_token)!==null&&u!==void 0?u:void 0,xform:Er})})}catch(n){if(X(n))return Tp(n)&&(await this._removeSession(),await He(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(r,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(r,n))}async _updateUser(r,n={}){try{return await this._useSession(async o=>{const{data:a,error:u}=o;if(u)throw u;if(!a.session)throw new ut;const c=a.session;let f=null,p=null;this.flowType==="pkce"&&r.email!=null&&([f,p]=await xn(this.storage,this.storageKey));const{data:m,error:y}=await ie(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:f,code_challenge_method:p}),jwt:c.access_token,xform:Er});if(y)throw y;return c.user=m.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})})}catch(o){if(await He(this.storage,`${this.storageKey}-code-verifier`),X(o))return this._returnResult({data:{user:null},error:o});throw o}}async setSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new ut;const n=Date.now()/1e3;let o=n,a=!0,u=null;const{payload:c}=Al(r.access_token);if(c.exp&&(o=c.exp,a=o<=n),a){const{data:f,error:p}=await this._callRefreshToken(r.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!f)return{data:{user:null,session:null},error:null};u=f}else{const{data:f,error:p}=await this._getUser(r.access_token);if(p)throw p;u={access_token:r.access_token,refresh_token:r.refresh_token,user:f.user,token_type:"bearer",expires_in:o-n,expires_at:o},await this._saveSession(u),await this._notifyAllSubscribers("SIGNED_IN",u)}return this._returnResult({data:{user:u.user,session:u},error:null})}catch(n){if(X(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async n=>{var o;if(!r){const{data:c,error:f}=n;if(f)throw f;r=(o=c.session)!==null&&o!==void 0?o:void 0}if(!(r!=null&&r.refresh_token))throw new ut;const{data:a,error:u}=await this._callRefreshToken(r.refresh_token);return u?this._returnResult({data:{user:null,session:null},error:u}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(X(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(r,n){try{if(!qe())throw new Cs("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Cs(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Xl("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Cs("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Xl("No code detected.");const{data:L,error:T}=await this._exchangeCodeForSession(r.code);if(T)throw T;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:L.session,redirectType:null},error:null}}const{provider_token:o,provider_refresh_token:a,access_token:u,refresh_token:c,expires_in:f,expires_at:p,token_type:m}=r;if(!u||!f||!c||!m)throw new Cs("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(f);let _=y+w;p&&(_=parseInt(p));const x=_-y;x*1e3<=bn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${x}s, should have been closer to ${w}s`);const j=_-w;y-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,_,y):y-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,_,y);const{data:b,error:E}=await this._getUser(u);if(E)throw E;const A={provider_token:o,provider_refresh_token:a,access_token:u,expires_in:w,expires_at:_,refresh_token:c,token_type:m,user:b.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:r.type},error:null})}catch(o){if(X(o))return this._returnResult({data:{session:null,redirectType:null},error:o});throw o}}_isImplicitGrantCallback(r){return!!(r.access_token||r.error_description)}async _isPKCECallback(r){const n=await Br(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&n)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async n=>{var o;const{data:a,error:u}=n;if(u)return this._returnResult({error:u});const c=(o=a.session)===null||o===void 0?void 0:o.access_token;if(c){const{error:f}=await this.admin.signOut(c,r);if(f&&!(Cp(f)&&(f.status===404||f.status===401||f.status===403)))return this._returnResult({error:f})}return r!=="others"&&(await this._removeSession(),await He(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const n=L0(),o={id:n,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,o),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:o}}}async _emitInitialSession(r){return await this._useSession(async n=>{var o,a;try{const{data:{session:u},error:c}=n;if(c)throw c;await((o=this.stateChangeEmitters.get(r))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",u)),this._debug("INITIAL_SESSION","callback id",r,"session",u)}catch(u){await((a=this.stateChangeEmitters.get(r))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",u),console.error(u)}})}async resetPasswordForEmail(r,n={}){let o=null,a=null;this.flowType==="pkce"&&([o,a]=await xn(this.storage,this.storageKey,!0));try{return await ie(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:o,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(u){if(await He(this.storage,`${this.storageKey}-code-verifier`),X(u))return this._returnResult({data:null,error:u});throw u}}async getUserIdentities(){var r;try{const{data:n,error:o}=await this.getUser();if(o)throw o;return this._returnResult({data:{identities:(r=n.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var n;try{const{data:o,error:a}=await this._useSession(async u=>{var c,f,p,m,y;const{data:w,error:_}=u;if(_)throw _;const x=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(c=r.options)===null||c===void 0?void 0:c.redirectTo,scopes:(f=r.options)===null||f===void 0?void 0:f.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await ie(this.fetch,"GET",x,{headers:this.headers,jwt:(y=(m=w.session)===null||m===void 0?void 0:m.access_token)!==null&&y!==void 0?y:void 0})});if(a)throw a;return qe()&&!(!((n=r.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(o==null?void 0:o.url),this._returnResult({data:{provider:r.provider,url:o==null?void 0:o.url},error:null})}catch(o){if(X(o))return this._returnResult({data:{provider:r.provider,url:null},error:o});throw o}}async linkIdentityIdToken(r){return await this._useSession(async n=>{var o;try{const{error:a,data:{session:u}}=n;if(a)throw a;const{options:c,provider:f,token:p,access_token:m,nonce:y}=r,w=await ie(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(o=u==null?void 0:u.access_token)!==null&&o!==void 0?o:void 0,body:{provider:f,id_token:p,access_token:m,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:At}),{data:_,error:x}=w;return x?this._returnResult({data:{user:null,session:null},error:x}):!_||!_.session||!_.user?this._returnResult({data:{user:null,session:null},error:new Fr}):(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("USER_UPDATED",_.session)),this._returnResult({data:_,error:x}))}catch(a){if(await He(this.storage,`${this.storageKey}-code-verifier`),X(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}async unlinkIdentity(r){try{return await this._useSession(async n=>{var o,a;const{data:u,error:c}=n;if(c)throw c;return await ie(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(r){const n=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(n,"begin");try{const o=Date.now();return await M0(async a=>(a>0&&await U0(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ie(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:At})),(a,u)=>{const c=200*Math.pow(2,a);return u&&lo(u)&&Date.now()+c-o<bn})}catch(o){if(this._debug(n,"error",o),X(o))return this._returnResult({data:{session:null,user:null},error:o});throw o}finally{this._debug(n,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,n){const o=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",n,"url",o),qe()&&!n.skipBrowserRedirect&&window.location.assign(o),{data:{provider:r,url:o},error:null}}async _recoverAndRefresh(){var r,n;const o="#_recoverAndRefresh()";this._debug(o,"begin");try{const a=await Br(this.storage,this.storageKey);if(a&&this.userStorage){let c=await Br(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:a.user},await jn(this.userStorage,this.storageKey+"-user",c)),a.user=(r=c==null?void 0:c.user)!==null&&r!==void 0?r:Il()}else if(a&&!a.user&&!a.user){const c=await Br(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(a.user=c.user,await He(this.storage,this.storageKey+"-user"),await jn(this.storage,this.storageKey,a)):a.user=Il()}if(this._debug(o,"session from storage",a),!this._isValidSession(a)){this._debug(o,"session is not valid"),a!==null&&await this._removeSession();return}const u=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Pl;if(this._debug(o,`session has${u?"":" not"} expired with margin of ${Pl}s`),u){if(this.autoRefreshToken&&a.refresh_token){const{error:c}=await this._callRefreshToken(a.refresh_token);c&&(console.error(c),lo(c)||(this._debug(o,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:f}=await this._getUser(a.access_token);!f&&(c!=null&&c.user)?(a.user=c.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(o,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(o,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(o,"error",a),console.error(a);return}finally{this._debug(o,"end")}}async _callRefreshToken(r){var n,o;if(!r)throw new ut;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new jo;const{data:u,error:c}=await this._refreshAccessToken(r);if(c)throw c;if(!u.session)throw new ut;await this._saveSession(u.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",u.session);const f={data:u.session,error:null};return this.refreshingDeferred.resolve(f),f}catch(u){if(this._debug(a,"error",u),X(u)){const c={data:null,error:u};return lo(u)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(o=this.refreshingDeferred)===null||o===void 0||o.reject(u),u}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(r,n,o=!0){const a=`#_notifyAllSubscribers(${r})`;this._debug(a,"begin",n,`broadcast = ${o}`);try{this.broadcastChannel&&o&&this.broadcastChannel.postMessage({event:r,session:n});const u=[],c=Array.from(this.stateChangeEmitters.values()).map(async f=>{try{await f.callback(r,n)}catch(p){u.push(p)}});if(await Promise.all(c),u.length>0){for(let f=0;f<u.length;f+=1)console.error(u[f]);throw u[0]}}finally{this._debug(a,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await He(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},r),o=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!o&&n.user&&await jn(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const u=Hh(a);await jn(this.storage,this.storageKey,u)}else{const a=Hh(n);await jn(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await He(this.storage,this.storageKey),await He(this.storage,this.storageKey+"-code-verifier"),await He(this.storage,this.storageKey+"-user"),this.userStorage&&await He(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&qe()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",r)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),bn);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async n=>{const{data:{session:o}}=n;if(!o||!o.refresh_token||!o.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((o.expires_at*1e3-r)/bn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${bn}ms, refresh threshold is ${Ql} ticks`),a<=Ql&&await this._callRefreshToken(o.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof gu)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!qe()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const n=`#_onVisibilityChanged(${r})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,n,o){const a=[`provider=${encodeURIComponent(n)}`];if(o!=null&&o.redirectTo&&a.push(`redirect_to=${encodeURIComponent(o.redirectTo)}`),o!=null&&o.scopes&&a.push(`scopes=${encodeURIComponent(o.scopes)}`),this.flowType==="pkce"){const[u,c]=await xn(this.storage,this.storageKey),f=new URLSearchParams({code_challenge:`${encodeURIComponent(u)}`,code_challenge_method:`${encodeURIComponent(c)}`});a.push(f.toString())}if(o!=null&&o.queryParams){const u=new URLSearchParams(o.queryParams);a.push(u.toString())}return o!=null&&o.skipBrowserRedirect&&a.push(`skip_http_redirect=${o.skipBrowserRedirect}`),`${r}?${a.join("&")}`}async _unenroll(r){try{return await this._useSession(async n=>{var o;const{data:a,error:u}=n;return u?this._returnResult({data:null,error:u}):await ie(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(r){try{return await this._useSession(async n=>{var o,a;const{data:u,error:c}=n;if(c)return this._returnResult({data:null,error:c});const f=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:p,error:m}=await ie(this.fetch,"POST",`${this.url}/factors`,{body:f,headers:this.headers,jwt:(o=u==null?void 0:u.session)===null||o===void 0?void 0:o.access_token});return m?this._returnResult({data:null,error:m}):(r.factorType==="totp"&&p.type==="totp"&&(!((a=p==null?void 0:p.totp)===null||a===void 0)&&a.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _verify(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:a,error:u}=n;if(u)return this._returnResult({data:null,error:u});const c=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?pw(r.webauthn.credential_response):mw(r.webauthn.credential_response)})}:{code:r.code}),{data:f,error:p}=await ie(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:c,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+f.expires_in},f)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",f),this._returnResult({data:f,error:p}))})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(r){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var o;const{data:a,error:u}=n;if(u)return this._returnResult({data:null,error:u});const c=await ie(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(o=a==null?void 0:a.session)===null||o===void 0?void 0:o.access_token});if(c.error)return c;const{data:f}=c;if(f.type!=="webauthn")return{data:f,error:null};switch(f.webauthn.type){case"create":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:hw(f.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},f),{webauthn:Object.assign(Object.assign({},f.webauthn),{credential_options:Object.assign(Object.assign({},f.webauthn.credential_options),{publicKey:fw(f.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(r){const{data:n,error:o}=await this._challenge({factorId:r.factorId});return o?this._returnResult({data:null,error:o}):await this._verify({factorId:r.factorId,challengeId:n.id,code:r.code})}async _listFactors(){var r;const{data:{user:n},error:o}=await this.getUser();if(o)return{data:null,error:o};const a={all:[],phone:[],totp:[],webauthn:[]};for(const u of(r=n==null?void 0:n.factors)!==null&&r!==void 0?r:[])a.all.push(u),u.status==="verified"&&a[u.factor_type].push(u);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){var r,n;const{data:{session:o},error:a}=await this.getSession();if(a)return this._returnResult({data:null,error:a});if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:u}=Al(o.access_token);let c=null;u.aal&&(c=u.aal);let f=c;((n=(r=o.user.factors)===null||r===void 0?void 0:r.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(f="aal2");const m=u.amr||[];return{data:{currentLevel:c,nextLevel:f,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async n=>{const{data:{session:o},error:a}=n;return a?this._returnResult({data:null,error:a}):o?await ie(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:o.access_token,xform:u=>({data:u,error:null})}):this._returnResult({data:null,error:new ut})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:a},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!a)return this._returnResult({data:null,error:new ut});const c=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&qe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(X(o))return this._returnResult({data:null,error:o});throw o}}async _denyAuthorization(r,n){try{return await this._useSession(async o=>{const{data:{session:a},error:u}=o;if(u)return this._returnResult({data:null,error:u});if(!a)return this._returnResult({data:null,error:new ut});const c=await ie(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:f=>({data:f,error:null})});return c.data&&c.data.redirect_url&&qe()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(c.data.redirect_url),c})}catch(o){if(X(o))return this._returnResult({data:null,error:o});throw o}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:n},error:o}=r;return o?this._returnResult({data:null,error:o}):n?await ie(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new ut})})}catch(r){if(X(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async n=>{const{data:{session:o},error:a}=n;return a?this._returnResult({data:null,error:a}):o?(await ie(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:o.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new ut})})}catch(n){if(X(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(r,n={keys:[]}){let o=n.keys.find(f=>f.kid===r);if(o)return o;const a=Date.now();if(o=this.jwks.keys.find(f=>f.kid===r),o&&this.jwks_cached_at+C0>a)return o;const{data:u,error:c}=await ie(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!u.keys||u.keys.length===0||(this.jwks=u,this.jwks_cached_at=a,o=u.keys.find(f=>f.kid===r),!o)?null:o}async getClaims(r,n={}){try{let o=r;if(!o){const{data:x,error:j}=await this.getSession();if(j||!x.session)return this._returnResult({data:null,error:j});o=x.session.access_token}const{header:a,payload:u,signature:c,raw:{header:f,payload:p}}=Al(o);n!=null&&n.allowExpired||q0(u.exp);const m=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:x}=await this.getUser(o);if(x)throw x;return{data:{claims:u,header:a,signature:c},error:null}}const y=K0(a.alg),w=await crypto.subtle.importKey("jwk",m,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,c,A0(`${f}.${p}`)))throw new vo("Invalid JWT signature");return{data:{claims:u,header:a,signature:c},error:null}}catch(o){if(X(o))return this._returnResult({data:null,error:o});throw o}}};vu.nextInstanceID={};const kw=mu,bw=vu,jw=Object.freeze(Object.defineProperty({__proto__:null,AuthAdminApi:kw,AuthApiError:jp,AuthClient:bw,AuthError:Nn,AuthImplicitGrantRedirectError:Cs,AuthInvalidCredentialsError:js,AuthInvalidJwtError:vo,AuthInvalidTokenResponseError:Fr,AuthPKCEGrantCodeExchangeError:Xl,AuthRetryableFetchError:go,AuthSessionMissingError:ut,AuthUnknownError:Sr,AuthWeakPasswordError:Zl,CustomAuthError:rr,GoTrueAdminApi:mu,GoTrueClient:vu,NavigatorLockAcquireTimeoutError:Ap,SIGN_OUT_SCOPES:uo,isAuthApiError:Cp,isAuthError:X,isAuthImplicitGrantRedirectError:Rp,isAuthRetryableFetchError:lo,isAuthSessionMissingError:Tp,isAuthWeakPasswordError:T0,lockInternals:Vr,navigatorLock:Ip,processLock:nw},Symbol.toStringTag,{value:"Module"})),Dp=Os(jw);var Zh;function Cw(){if(Zh)return Es;Zh=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.SupabaseAuthClient=void 0;const i=Dp;let r=class extends i.AuthClient{constructor(o){super(o)}};return Es.SupabaseAuthClient=r,Es}var ef;function tf(){if(ef)return Ji;ef=1,Object.defineProperty(Ji,"__esModule",{value:!0});const i=Jf,r=tp(),n=cp,o=y0,a=_0(),u=x0(),c=S0(),f=Cw();class p{constructor(y,w,_){var x,j,b;this.supabaseUrl=y,this.supabaseKey=w;const E=(0,c.validateSupabaseUrl)(y);if(!w)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",E),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",E),this.storageUrl=new URL("storage/v1",E),this.functionsUrl=new URL("functions/v1",E);const A=`sb-${E.hostname.split(".")[0]}-auth-token`,L={db:a.DEFAULT_DB_OPTIONS,realtime:a.DEFAULT_REALTIME_OPTIONS,auth:Object.assign(Object.assign({},a.DEFAULT_AUTH_OPTIONS),{storageKey:A}),global:a.DEFAULT_GLOBAL_OPTIONS},T=(0,c.applySettingDefaults)(_??{},L);this.storageKey=(x=T.auth.storageKey)!==null&&x!==void 0?x:"",this.headers=(j=T.global.headers)!==null&&j!==void 0?j:{},T.accessToken?(this.accessToken=T.accessToken,this.auth=new Proxy({},{get:(B,H)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(H)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((b=T.auth)!==null&&b!==void 0?b:{},this.headers,T.global.fetch),this.fetch=(0,u.fetchWithAuth)(w,this._getAccessToken.bind(this),T.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},T.realtime)),this.accessToken&&this.accessToken().then(B=>this.realtime.setAuth(B)).catch(B=>console.warn("Failed to set initial Realtime auth token:",B)),this.rest=new r.PostgrestClient(new URL("rest/v1",E).href,{headers:this.headers,schema:T.db.schema,fetch:this.fetch}),this.storage=new o.StorageClient(this.storageUrl.href,this.headers,this.fetch,_==null?void 0:_.storage),T.accessToken||this._listenForAuthEvents()}get functions(){return new i.FunctionsClient(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(y){return this.rest.from(y)}schema(y){return this.rest.schema(y)}rpc(y,w={},_={head:!1,get:!1,count:void 0}){return this.rest.rpc(y,w,_)}channel(y,w={config:{}}){return this.realtime.channel(y,w)}getChannels(){return this.realtime.getChannels()}removeChannel(y){return this.realtime.removeChannel(y)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var y,w;if(this.accessToken)return await this.accessToken();const{data:_}=await this.auth.getSession();return(w=(y=_.session)===null||y===void 0?void 0:y.access_token)!==null&&w!==void 0?w:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:y,persistSession:w,detectSessionInUrl:_,storage:x,userStorage:j,storageKey:b,flowType:E,lock:A,debug:L,throwOnError:T},B,H){const Z={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new f.SupabaseAuthClient({url:this.authUrl.href,headers:Object.assign(Object.assign({},Z),B),storageKey:b,autoRefreshToken:y,persistSession:w,detectSessionInUrl:_,storage:x,userStorage:j,flowType:E,lock:A,debug:L,throwOnError:T,fetch:H,hasCustomAuthorizationHeader:Object.keys(this.headers).some(ee=>ee.toLowerCase()==="authorization")})}_initRealtimeClient(y){return new n.RealtimeClient(this.realtimeUrl.href,Object.assign(Object.assign({},y),{params:Object.assign({apikey:this.supabaseKey},y==null?void 0:y.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((w,_)=>{this._handleTokenChanged(w,"CLIENT",_==null?void 0:_.access_token)})}_handleTokenChanged(y,w,_){(y==="TOKEN_REFRESHED"||y==="SIGNED_IN")&&this.changedAccessToken!==_?(this.changedAccessToken=_,this.realtime.setAuth(_)):y==="SIGNED_OUT"&&(this.realtime.setAuth(),w=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}return Ji.default=p,Ji}var rf;function Tw(){return rf||(rf=1,(function(i){var r=Yt&&Yt.__createBinding||(Object.create?(function(y,w,_,x){x===void 0&&(x=_);var j=Object.getOwnPropertyDescriptor(w,_);(!j||("get"in j?!w.__esModule:j.writable||j.configurable))&&(j={enumerable:!0,get:function(){return w[_]}}),Object.defineProperty(y,x,j)}):(function(y,w,_,x){x===void 0&&(x=_),y[x]=w[_]})),n=Yt&&Yt.__exportStar||function(y,w){for(var _ in y)_!=="default"&&!Object.prototype.hasOwnProperty.call(w,_)&&r(w,y,_)},o=Yt&&Yt.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(i,"__esModule",{value:!0}),i.createClient=i.SupabaseClient=i.FunctionRegion=i.FunctionsError=i.FunctionsRelayError=i.FunctionsFetchError=i.FunctionsHttpError=i.PostgrestError=void 0;const a=o(tf());n(Dp,i);var u=tp();Object.defineProperty(i,"PostgrestError",{enumerable:!0,get:function(){return u.PostgrestError}});var c=Jf;Object.defineProperty(i,"FunctionsHttpError",{enumerable:!0,get:function(){return c.FunctionsHttpError}}),Object.defineProperty(i,"FunctionsFetchError",{enumerable:!0,get:function(){return c.FunctionsFetchError}}),Object.defineProperty(i,"FunctionsRelayError",{enumerable:!0,get:function(){return c.FunctionsRelayError}}),Object.defineProperty(i,"FunctionsError",{enumerable:!0,get:function(){return c.FunctionsError}}),Object.defineProperty(i,"FunctionRegion",{enumerable:!0,get:function(){return c.FunctionRegion}}),n(cp,i);var f=tf();Object.defineProperty(i,"SupabaseClient",{enumerable:!0,get:function(){return o(f).default}});const p=(y,w,_)=>new a.default(y,w,_);i.createClient=p;function m(){if(typeof window<"u"||typeof process>"u")return!1;const y=process.version;if(y==null)return!1;const w=y.match(/^v(\d+)\./);return w?parseInt(w[1],10)<=18:!1}m()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217")})(Yt)),Yt}var Up=Tw();const Mp=ru(Up),Rw=Dg({__proto__:null,default:Mp},[Up]),{PostgrestError:y_,FunctionsHttpError:w_,FunctionsFetchError:__,FunctionsRelayError:x_,FunctionsError:S_,FunctionRegion:E_,SupabaseClient:k_,createClient:Nw,GoTrueAdminApi:b_,GoTrueClient:j_,AuthAdminApi:C_,AuthClient:T_,navigatorLock:R_,NavigatorLockAcquireTimeoutError:N_,lockInternals:O_,processLock:P_,SIGN_OUT_SCOPES:A_,AuthError:I_,AuthApiError:L_,AuthUnknownError:$_,CustomAuthError:D_,AuthSessionMissingError:U_,AuthInvalidTokenResponseError:M_,AuthInvalidCredentialsError:B_,AuthImplicitGrantRedirectError:F_,AuthPKCEGrantCodeExchangeError:z_,AuthRetryableFetchError:V_,AuthWeakPasswordError:W_,AuthInvalidJwtError:H_,isAuthError:q_,isAuthApiError:K_,isAuthSessionMissingError:G_,isAuthImplicitGrantRedirectError:J_,isAuthRetryableFetchError:Q_,isAuthWeakPasswordError:Y_,RealtimePresence:X_,RealtimeChannel:Z_,RealtimeClient:ex,REALTIME_LISTEN_TYPES:tx,REALTIME_POSTGRES_CHANGES_LISTEN_EVENT:rx,REALTIME_PRESENCE_LISTEN_EVENTS:nx,REALTIME_SUBSCRIBE_STATES:sx,REALTIME_CHANNEL_STATES:ix}=Mp||Rw,Ow="https://suqmfxgohxxcyuorpelo.supabase.co",Pw="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1cW1meGdvaHh4Y3l1b3JwZWxvIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2NDc1NDI0NiwiZXhwIjoyMDgwMzMwMjQ2fQ.yO530DU8-gWPCY4uoTqiQeO55T_UxKsFy8PXKXWj56I",In=Nw(Ow,Pw,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}}),Aw=async(i,r)=>{try{const{data:n,error:o}=await In.from("Admin").select("*").eq("phone",i).eq("password",r).limit(1);if(o)return console.error("Login verification failed:",o.message),{success:!1,error:o.message};if(!n||n.length===0)return{success:!1,error:"Invalid phone number or password."};const a=n[0],u=a.admin_id,c=a.name??a.Name??"Admin";return u==null?(console.error("User found but 'admin_id' column is missing or null on the record.",a),{success:!1,error:"Account configuration error: missing admin_id."}):{success:!0,name:c,id:String(u)}}catch(n){return console.error("Unexpected login error:",n),{success:!1,error:n.message||"An unexpected network error occurred."}}},Ll=async i=>{const{error:r}=await In.from("Swap_History").insert([i]);if(r)throw console.error("Failed to record swap history:",r.message),new Error(`History logging failed: ${r.message}`)},Iw=async i=>{try{const{data:r,error:n}=await In.from("Swap_History").select("*").eq("admin_id",i).order("Date",{ascending:!1});if(n)throw n;return r||[]}catch(r){throw console.error("Error fetching history:",r.message),r}},Lw=async i=>{console.log("Attempting to insert Collection Record:",i);const{error:r}=await In.from("Collection_History").insert([i]);if(r)throw console.error("Failed to record collection history. Supabase Error:",r),new Error(`Database Insert Failed: ${r.message} (${r.code})`)},$w=async i=>{try{const{data:r,error:n}=await In.from("Collection_History").select("*").eq("Agent",i).order("Date",{ascending:!1});if(n)throw n;return r||[]}catch(r){throw console.error("Error fetching collection history:",r.message),r}},Dw=async()=>{try{const{data:i,error:r}=await In.from("Collection_History").select("*").order("Date",{ascending:!0});if(r)throw r;return i||[]}catch(i){throw console.error("Error fetching all collection history:",i.message),i}},et=({children:i,variant:r="primary",isLoading:n,className:o="",disabled:a,...u})=>{const c="px-4 py-2 rounded-lg font-medium transition-all duration-200 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",f={primary:"bg-pink-600 text-white hover:bg-pink-700 shadow-sm shadow-pink-200",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 shadow-sm",danger:"bg-red-600 text-white hover:bg-red-700 shadow-sm",ghost:"bg-transparent text-pink-600 hover:bg-pink-50"};return g.jsxs("button",{className:`${c} ${f[r]} ${o}`,disabled:a||n,...u,children:[n?g.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin mr-2"}):null,i]})},tu=({onScan:i,label:r="Scan Device ID",placeholder:n="Click to focus & scan..."})=>{const[o,a]=P.useState(""),[u,c]=P.useState(!1),f=P.useRef(null),p=P.useRef(null);P.useEffect(()=>{var w;(w=p.current)==null||w.focus()},[]);const m=w=>{w.preventDefault(),o.trim()&&(i(o.trim()),a(""))};P.useEffect(()=>{let w=null;return u&&navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(_=>{w=_,f.current&&(f.current.srcObject=w)}).catch(_=>console.error("Camera error:",_)),()=>{w&&w.getTracks().forEach(_=>_.stop())}},[u]);const y=()=>{const w=["DEV-002","DEV-005","DEV-008","DEV-NEW-99"],_=w[Math.floor(Math.random()*w.length)];i(_),c(!1)};return g.jsxs("div",{className:"w-full space-y-4",children:[g.jsxs("div",{className:"flex justify-between items-end",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),g.jsx("button",{onClick:()=>c(!u),type:"button",className:"text-sm text-cyan-600 hover:text-cyan-800 font-medium transition-colors",children:u?"Close Camera":"Use Camera"})]}),u?g.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden aspect-video shadow-lg",children:[g.jsx("video",{ref:f,autoPlay:!0,playsInline:!0,className:"w-full h-full object-cover opacity-80"}),g.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:g.jsx("div",{className:"w-64 h-32 border-2 border-cyan-400 rounded-lg animate-pulse bg-white/5 backdrop-blur-sm flex flex-col items-center justify-center text-white/80",children:g.jsx("span",{className:"text-xs uppercase tracking-widest mb-2 font-medium",children:"Align Barcode"})})}),g.jsx("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center",children:g.jsx(et,{onClick:y,variant:"primary",type:"button",className:"bg-cyan-600 hover:bg-cyan-700 border-none",children:"[DEMO] Simulate Scan"})})]}):g.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[g.jsxs("div",{className:"relative flex-1",children:[g.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:g.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),g.jsx("input",{ref:p,type:"text",value:o,onChange:w=>a(w.target.value),className:"block w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 transition-colors shadow-sm outline-none",placeholder:n})]}),g.jsx(et,{type:"submit",disabled:!o,className:"h-full",children:"Enter"})]}),g.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[g.jsx("span",{className:"inline-block w-4 h-4 bg-gray-100 border rounded text-center leading-none font-mono",children:""}),"Press Enter or use a handheld scanner"]})]})},Uw=({hasToken:i,adminId:r,adminName:n,onOpenSettings:o})=>{const[a,u]=P.useState({step:"select-customer",selectedCustomer:null,oldDevice:null,newDevice:null}),[c,f]=P.useState([]),[p,m]=P.useState([]),[y,w]=P.useState(!1),[_,x]=P.useState(null),[j,b]=P.useState(""),[E,A]=P.useState([]),L=async()=>{w(!0),x(null);try{let V=[];i?V=await kt.getCustomers():(await new Promise(de=>setTimeout(de,600)),V=Sf),f(V);const te=j.toLowerCase(),se=V.filter(de=>{var fe,Ie,tt,dt;return((fe=de.name)==null?void 0:fe.toLowerCase().includes(te))||((Ie=de.first_name)==null?void 0:Ie.toLowerCase().includes(te))||((tt=de.last_name)==null?void 0:tt.toLowerCase().includes(te))||((dt=de.email)==null?void 0:dt.toLowerCase().includes(te))});A(se)}catch(V){x(V.message||"Failed to fetch customers")}finally{w(!1)}},T=async V=>{w(!0);try{let te=[];i?te=await kt.getInventory():te=bs;const se=te.filter(de=>de.customer_id===V.id&&de.status==="assigned");m(se),u(de=>({...de,selectedCustomer:V,step:"select-old-device"}))}catch{x("Could not fetch customer inventory")}finally{w(!1)}},B=V=>{u(te=>({...te,oldDevice:V,step:"scan-new-device"}))},H=async V=>{w(!0),x(null);try{let te=[];i?te=await kt.getInventory():(await new Promise(Ie=>setTimeout(Ie,800)),bs.find(Ie=>Ie.deviceId===V)?te=bs:te=[...bs,{id:"new_gen",deviceId:V,status:"in_stock",customer_id:void 0,model:"Gen 3 Device"}]);const se=V.trim().toLowerCase(),de=te.find(fe=>String(fe.deviceId).trim().toLowerCase()===se||String(fe.id).trim().toLowerCase()===se||fe.iccid&&String(fe.iccid).trim().toLowerCase()===se||fe.imei&&String(fe.imei).trim().toLowerCase()===se||fe.barcode&&String(fe.barcode).trim().toLowerCase()===se||fe.serialNumber&&String(fe.serialNumber).trim().toLowerCase()===se);if(!de)throw new Error(`Device with Barcode/ID ${V} not found in inventory.`);if(de.status==="assigned"&&de.customer_id)throw new Error(`Device ${de.deviceId} is already assigned to another customer.`);if(de.status==="defective")throw new Error(`Device ${de.deviceId} is marked as defective.`);u(fe=>({...fe,newDevice:de,step:"confirm"}))}catch(te){if(x(te.message),a.selectedCustomer&&a.oldDevice&&r){const se=parseInt(r,10),de=!isNaN(se)&&se!==0?se:r;Ll({Customer_ID:a.selectedCustomer.customer_Id||a.selectedCustomer.id,Customer_Name:`${a.selectedCustomer.first_name||""} ${a.selectedCustomer.last_name||""}`.trim()||a.selectedCustomer.name||"Unknown",admin_id:de,Admin_Name:n,Old_Device:a.oldDevice.barcode||a.oldDevice.deviceId,New_Device:V,Date:new Date().toISOString(),status:te.message}).catch(fe=>console.error("Failed to log validation error to history:",fe))}}finally{w(!1)}},Z=async()=>{if(!a.oldDevice||!a.newDevice||!a.selectedCustomer)return;if(!r||r==="undefined"){alert("Session Error: Admin ID missing. Please refresh the page or log out and log in again.");return}w(!0);const te=(()=>{const se=parseInt(r,10);return!isNaN(se)&&se!==0?se:r})();try{if(!i)await new Promise(se=>setTimeout(se,2e3));else{await kt.returnDevice(a.oldDevice.id);const se=a.selectedCustomer.customer_Id||a.selectedCustomer.id;await kt.assignDevice(a.newDevice.id,se),await Ll({Customer_ID:se,Customer_Name:`${a.selectedCustomer.first_name||""} ${a.selectedCustomer.last_name||""}`.trim()||a.selectedCustomer.name||"Unknown",admin_id:te,Admin_Name:n,Old_Device:a.oldDevice.barcode||a.oldDevice.deviceId,New_Device:a.newDevice.barcode||a.newDevice.deviceId,Date:new Date().toISOString(),status:"success"})}alert(`Swap Successful!
Old Device Returned: ${a.oldDevice.deviceId}
New Device Assigned: ${a.newDevice.deviceId}

Transaction logged to history.`),u({step:"select-customer",selectedCustomer:null,oldDevice:null,newDevice:null}),b(""),A([]),f([])}catch(se){try{await Ll({Customer_ID:a.selectedCustomer.customer_Id||a.selectedCustomer.id,Customer_Name:`${a.selectedCustomer.first_name||""} ${a.selectedCustomer.last_name||""}`.trim()||a.selectedCustomer.name||"Unknown",admin_id:te,Admin_Name:n,Old_Device:a.oldDevice.barcode||a.oldDevice.deviceId,New_Device:a.newDevice.barcode||a.newDevice.deviceId,Date:new Date().toISOString(),status:se.message||"Unknown Error"})}catch(de){console.error("Failed to log failure record to DB",de)}se.message&&se.message.includes("foreign key constraint")?x(`Database Error: Your login session ID (${r}) does not match an active Admin record. Please Log Out and Sign In again.`):x(`Swap failed: ${se.message}`)}finally{w(!1)}},ee=()=>g.jsxs("div",{className:"flex items-center text-sm mb-8 overflow-x-auto pb-2",children:[g.jsxs("div",{className:`flex items-center ${a.step==="select-customer"?"text-pink-600 font-bold":"text-gray-500"}`,children:[g.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${a.step==="select-customer"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"1"}),"Find Customer"]}),g.jsx("div",{className:"mx-4 text-gray-300",children:"/"}),g.jsxs("div",{className:`flex items-center ${a.step==="select-old-device"?"text-pink-600 font-bold":"text-gray-500"}`,children:[g.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${a.step==="select-old-device"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"2"}),"Select Old"]}),g.jsx("div",{className:"mx-4 text-gray-300",children:"/"}),g.jsxs("div",{className:`flex items-center ${a.step==="scan-new-device"?"text-pink-600 font-bold":"text-gray-500"}`,children:[g.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${a.step==="scan-new-device"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"3"}),"Scan New"]}),g.jsx("div",{className:"mx-4 text-gray-300",children:"/"}),g.jsxs("div",{className:`flex items-center ${a.step==="confirm"?"text-pink-600 font-bold":"text-gray-500"}`,children:[g.jsx("span",{className:`w-6 h-6 rounded-full border flex items-center justify-center mr-2 text-xs ${a.step==="confirm"?"border-pink-600 bg-pink-50":"border-gray-300"}`,children:"4"}),"Confirm"]})]});return g.jsxs("div",{children:[ee(),_&&g.jsxs("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6 rounded-r-lg flex justify-between items-center",children:[g.jsxs("div",{className:"flex",children:[g.jsx("div",{className:"flex-shrink-0",children:g.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),g.jsx("div",{className:"ml-3",children:g.jsx("p",{className:"text-sm text-red-700",children:_})})]}),g.jsx("button",{onClick:()=>x(null),className:"text-red-500 hover:text-red-700",children:""})]}),a.step==="select-customer"&&g.jsx("div",{className:"max-w-2xl mx-auto",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Find Customer"}),g.jsx("p",{className:"text-gray-500 mb-6",children:"Search by name, email, or customer ID to begin the swap process."}),g.jsxs("div",{className:"flex gap-2 mb-6",children:[g.jsx("input",{type:"text",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all",placeholder:"Search customers...",value:j,onChange:V=>b(V.target.value),onKeyDown:V=>V.key==="Enter"&&L()}),g.jsx(et,{onClick:L,isLoading:y,children:"Search"})]}),g.jsxs("div",{className:"space-y-2",children:[E.length>0?E.map(V=>g.jsxs("div",{className:"p-4 border rounded-lg hover:border-pink-500 hover:bg-pink-50 cursor-pointer transition-all flex justify-between items-center group",onClick:()=>T(V),children:[g.jsxs("div",{children:[g.jsxs("p",{className:"font-medium text-gray-900",children:[V.first_name," ",V.last_name," ",V.name]}),g.jsx("p",{className:"text-sm text-gray-500",children:V.email})]}),g.jsx("div",{className:"text-pink-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"Select "})]},V.id)):j&&!y&&g.jsx("div",{className:"text-center text-gray-500 py-8",children:"No customers found."}),!i&&!y&&E.length===0&&g.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[g.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Using Mock Data Mode"}),g.jsx(et,{variant:"secondary",onClick:()=>{b("John"),L()},children:'Try Searching "John"'}),g.jsx("p",{className:"text-xs text-gray-400 mt-2 cursor-pointer hover:underline",onClick:o,children:"Or Configure API Token"})]})]})]})}),a.step==="select-old-device"&&a.selectedCustomer&&g.jsx("div",{className:"max-w-2xl mx-auto",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[g.jsxs("div",{className:"flex justify-between items-start mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Select Device to Return"}),g.jsxs("p",{className:"text-gray-500",children:["Which device is ",a.selectedCustomer.first_name||a.selectedCustomer.name," returning?"]})]}),g.jsx(et,{variant:"secondary",onClick:()=>u(V=>({...V,step:"select-customer"})),children:"Change Customer"})]}),p.length===0?g.jsxs("div",{className:"text-center py-12 bg-yellow-50 rounded-lg border border-yellow-100",children:[g.jsx("p",{className:"text-yellow-800 font-medium mb-2",children:"No assigned devices found"}),g.jsx("p",{className:"text-sm text-yellow-600",children:"This customer has no active inventory assigned."})]}):g.jsx("div",{className:"grid gap-3",children:p.map(V=>g.jsxs("div",{onClick:()=>B(V),className:"p-4 border border-gray-200 rounded-lg flex justify-between items-center cursor-pointer hover:border-red-400 hover:bg-red-50 transition-all group",children:[g.jsxs("div",{className:"flex items-center gap-4",children:[g.jsx("div",{className:"w-10 h-10 bg-gray-100 rounded-full flex items-center justify-center text-gray-500 group-hover:bg-white",children:g.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z"})})}),g.jsxs("div",{children:[g.jsx("p",{className:"font-bold text-gray-900 text-lg",children:V.deviceId||"No Barcode"}),V.model&&g.jsx("p",{className:"text-sm text-gray-500",children:V.model}),!V.model&&g.jsx("p",{className:"text-xs text-gray-400",children:"Standard Device"})]})]}),g.jsx("div",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Active"})]},V.id))})]})}),a.step==="scan-new-device"&&a.oldDevice&&g.jsx("div",{className:"max-w-2xl mx-auto",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-8",children:[g.jsxs("div",{className:"mb-6 pb-6 border-b border-gray-100",children:[g.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-1",children:[g.jsx("span",{children:"Returning:"}),g.jsx("span",{className:"font-mono bg-red-100 text-red-700 px-2 rounded",children:a.oldDevice.deviceId})]}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan New Device"}),g.jsx("p",{className:"text-gray-500",children:"Scan the barcode (ICCID/IMEI/Serial) of the replacement unit."})]}),g.jsx(tu,{onScan:H}),y&&g.jsx("p",{className:"text-center text-pink-600 mt-4 animate-pulse",children:"Verifying inventory..."}),g.jsx("div",{className:"mt-6 pt-6 border-t border-gray-100 flex justify-between",children:g.jsx(et,{variant:"secondary",onClick:()=>u(V=>({...V,step:"select-old-device"})),children:"Back"})})]})}),a.step==="confirm"&&a.oldDevice&&a.newDevice&&a.selectedCustomer&&g.jsxs("div",{className:"max-w-3xl mx-auto",children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Confirm Swap Transaction"}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[g.jsxs("div",{className:"bg-white p-6 rounded-xl border border-red-200 shadow-sm relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:g.jsx("svg",{className:"w-24 h-24 text-red-500",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),g.jsx("h3",{className:"text-red-600 font-bold uppercase tracking-wider text-sm mb-4",children:"Inbound (Return)"}),g.jsxs("div",{className:"space-y-3 relative z-10",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Device Barcode"}),g.jsx("p",{className:"text-xl font-mono font-bold text-gray-900",children:a.oldDevice.deviceId})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Current Status"}),g.jsx("p",{className:"text-gray-700",children:a.oldDevice.status})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"New Status"}),g.jsx("p",{className:"text-red-600 font-bold",children:"Returned"})]})]})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl border border-green-200 shadow-sm relative overflow-hidden",children:[g.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-10",children:g.jsx("svg",{className:"w-24 h-24 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),g.jsx("h3",{className:"text-green-600 font-bold uppercase tracking-wider text-sm mb-4",children:"Outbound (Assign)"}),g.jsxs("div",{className:"space-y-3 relative z-10",children:[g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Device Barcode"}),g.jsx("p",{className:"text-xl font-mono font-bold text-gray-900",children:a.newDevice.deviceId})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"Customer"}),g.jsxs("p",{className:"text-gray-900 font-medium",children:[a.selectedCustomer.first_name," ",a.selectedCustomer.last_name]}),g.jsx("p",{className:"text-xs text-gray-400",children:a.selectedCustomer.id})]}),g.jsxs("div",{children:[g.jsx("label",{className:"text-xs text-gray-500",children:"New Status"}),g.jsx("p",{className:"text-green-600 font-bold",children:"Assigned"})]})]})]})]}),g.jsxs("div",{className:"flex justify-between items-center bg-gray-50 p-6 rounded-xl",children:[g.jsx(et,{variant:"secondary",onClick:()=>u(V=>({...V,step:"scan-new-device"})),children:"Back"}),g.jsxs("div",{className:"flex gap-4",children:[!i&&g.jsx("p",{className:"text-xs text-orange-500 self-center max-w-[200px] text-right",children:"Running in demo mode (simulated API calls)."}),g.jsx(et,{onClick:Z,isLoading:y,className:"w-48 shadow-lg shadow-pink-200",children:"Confirm Swap"})]})]})]})]})},Mw=({onLoginSuccess:i})=>{const[r,n]=P.useState(""),[o,a]=P.useState(""),[u,c]=P.useState(!1),[f,p]=P.useState(null),m=async y=>{if(y.preventDefault(),!(!r||!o)){c(!0),p(null);try{const w=await Aw(r,o);w.success&&w.name&&w.id?i(w.name,w.id):p(w.error||"Invalid phone number or password.")}catch(w){p(w.message||"An error occurred during login. Please try again.")}finally{c(!1)}}};return g.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:g.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 border border-gray-100",children:[g.jsxs("div",{className:"flex flex-col items-center mb-8",children:[g.jsx("img",{src:"https://thabisot33.github.io/logo/Umoja%20Logo%20Web_320x86_png.png",alt:"Umoja Logo",className:"h-16 w-auto mb-4"}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Admin Login"}),g.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Please sign in to access inventory swap."})]}),f&&g.jsxs("div",{className:"mb-4 p-3 bg-red-50 text-red-600 text-sm rounded-lg border border-red-100 flex items-center",children:[g.jsx("svg",{className:"w-4 h-4 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:g.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),f]}),g.jsxs("form",{onSubmit:m,className:"space-y-6",children:[g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),g.jsx("input",{type:"text",value:r,onChange:y=>n(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all",placeholder:"Enter your phone number",required:!0})]}),g.jsxs("div",{children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),g.jsx("input",{type:"password",value:o,onChange:y=>a(y.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all",placeholder:"Enter your password",required:!0})]}),g.jsx(et,{type:"submit",isLoading:u,className:"w-full shadow-lg shadow-pink-200",children:"Sign In"})]}),g.jsx("div",{className:"mt-6 text-center text-xs text-gray-400",children:"Umoja Inventory System v2.0"})]})})},Bw=({adminId:i,adminName:r})=>{const[n,o]=P.useState("swap"),[a,u]=P.useState([]),[c,f]=P.useState([]),[p,m]=P.useState(!0),[y,w]=P.useState(null);return P.useEffect(()=>{i&&(async()=>{if(n==="swap")try{m(!0),w(null);const x=parseInt(i,10),j=!isNaN(x)&&x!==0?x:i,b=await Iw(j);u(b)}catch{w("Failed to load swap history.")}finally{m(!1)}})()},[i,n]),P.useEffect(()=>{r&&(async()=>{if(n==="collection")try{m(!0),w(null);const x=await $w(r);f(x)}catch{w("Failed to load collection history.")}finally{m(!1)}})()},[r,n]),g.jsxs("div",{className:"max-w-6xl mx-auto",children:[g.jsxs("div",{className:"flex justify-between items-center mb-6",children:[g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Transaction History"}),g.jsx("p",{className:"text-gray-500",children:"View records of your device swaps and collections."})]}),g.jsx(kr,{to:"/",className:"bg-white border border-gray-300 text-gray-700 hover:bg-gray-50 px-4 py-2 rounded-lg font-medium shadow-sm transition-colors",children:" Back to Dashboard"})]}),g.jsx("div",{className:"border-b border-gray-200 mb-6",children:g.jsxs("nav",{className:"-mb-px flex space-x-8",children:[g.jsx("button",{onClick:()=>o("swap"),className:`
              whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${n==="swap"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:"Swap History"}),g.jsx("button",{onClick:()=>o("collection"),className:`
              whitespace-nowrap pb-4 px-1 border-b-2 font-medium text-sm transition-colors
              ${n==="collection"?"border-cyan-500 text-cyan-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
            `,children:"Collection History"})]})}),p?g.jsx("div",{className:"flex justify-center py-12",children:g.jsx("span",{className:`w-8 h-8 border-4 rounded-full animate-spin ${n==="swap"?"border-pink-200 border-t-pink-600":"border-cyan-200 border-t-cyan-600"}`})}):y?g.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-100",children:y}):g.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:g.jsxs("div",{className:"overflow-x-auto",children:[n==="swap"&&g.jsx(g.Fragment,{children:a.length===0?g.jsx("div",{className:"p-12 text-center text-gray-500",children:"No swap records found."}):g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Returned"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map((_,x)=>g.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.Date).toLocaleString()}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.Customer_Name}),g.jsx("div",{className:"text-xs text-gray-400 font-mono",children:_.Customer_ID})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 font-mono",children:_.Old_Device})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:g.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800 font-mono",children:_.New_Device})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.status==="success"?g.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Success"}):g.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800 max-w-[200px] truncate",title:_.status,children:"Failed"})})]},x))})]})}),n==="collection"&&g.jsx(g.Fragment,{children:c.length===0?g.jsx("div",{className:"p-12 text-center text-gray-500",children:"No collection records found."}):g.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[g.jsx("thead",{className:"bg-gray-50",children:g.jsxs("tr",{children:[g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Router"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SIM"}),g.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Province"})]})}),g.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map((_,x)=>g.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(_.Date).toLocaleString()}),g.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[g.jsx("div",{className:"text-sm font-medium text-gray-900",children:_["Full Name"]}),g.jsx("div",{className:"text-xs text-gray-400 font-mono",children:_["Customer ID"]||"-"})]}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.Barcode?g.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-pink-100 text-pink-800 font-mono",children:_.Barcode}):g.jsx("span",{className:"text-gray-300",children:"-"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.SIM?g.jsx("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-cyan-100 text-cyan-800 font-mono",children:_.SIM}):g.jsx("span",{className:"text-gray-300",children:"-"})}),g.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:_.Province})]},x))})]})})]})})]})},Fw=({hasToken:i,adminName:r})=>{const[n,o]=P.useState(!1),[a,u]=P.useState([]),[c,f]=P.useState(null),[p,m]=P.useState(null),y=(b,E,A)=>{u(L=>[{id:Math.random().toString(36).substr(2,9),timestamp:new Date,message:b,type:E,details:A},...L])},w=async b=>{let E=[];i?E=await kt.getInventory():(await new Promise(T=>setTimeout(T,600)),E=bs);const A=b.trim().toLowerCase(),L=E.find(T=>String(T.deviceId).trim().toLowerCase()===A||String(T.id).trim().toLowerCase()===A||T.iccid&&String(T.iccid).trim().toLowerCase()===A||T.imei&&String(T.imei).trim().toLowerCase()===A||T.barcode&&String(T.barcode).trim().toLowerCase()===A||T.serialNumber&&String(T.serialNumber).trim().toLowerCase()===A);if(!L)throw new Error(`Device ${b} not found in inventory.`);return L},_=async b=>{o(!0);try{const E=await w(b);if(!!E.iccid||E.model&&E.model.toLowerCase().includes("sim"))throw new Error(`Scanned item (${E.deviceId}) appears to be a SIM, not a Router.`);f(E)}catch(E){y(`Router Scan Error: ${E.message}`,"error")}finally{o(!1)}},x=async b=>{o(!0);try{const E=await w(b);m(E)}catch(E){y(`SIM Scan Error: ${E.message}`,"error")}finally{o(!1)}},j=async()=>{if(!c&&!p)return;o(!0);let b="",E="Unknown",A=c?c.barcode||c.deviceId:"",L=p?p.barcode||p.deviceId:"";c&&c.customer_id?b=c.customer_id:p&&p.customer_id&&(b=p.customer_id);try{if(b)if(i){const H=await kt.getCustomer(b);H&&(E=`${H.first_name||""} ${H.last_name||""}`.trim()||H.name||"Unknown")}else{const H=Sf.find(Z=>Z.id===b);H&&(E=`${H.first_name} ${H.last_name}`)}c&&(y(`Processing Router: ${c.deviceId}...`,"info"),i&&await kt.returnDevice(c.id),y(`Router (${c.deviceId}) marked as RETURNED.`,"success"),c.customer_id?(i&&await kt.disableCustomer(c.customer_id),y(`Customer (ID: ${c.customer_id}) status set to DISABLED.`,"success")):y(`No customer linked to Router ${c.deviceId}.`,"info")),p&&(y(`Processing SIM: ${p.deviceId}...`,"info"),i&&await kt.returnDevice(p.id),y(`SIM (${p.deviceId}) marked as RETURNED.`,"success"));const T=r;let B="Gauteng";(T==="Neo"||T==="Ngoako David Railo")&&(B="Limpopo"),await Lw({"Customer ID":b||"N/A","Full Name":E,Barcode:A,SIM:L,Agent:T,Province:B,Date:new Date().toISOString()}),y("Transaction logged to Collection History.","success"),f(null),m(null),y("Collection transaction completed successfully.","success")}catch(T){y("Transaction Failed","error",T.message)}finally{o(!1)}};return g.jsxs("div",{className:"max-w-5xl mx-auto",children:[g.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[g.jsx("div",{className:"p-3 bg-pink-100 rounded-full text-pink-600",children:g.jsx("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),g.jsxs("div",{children:[g.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Device Collection"}),g.jsx("p",{className:"text-gray-500",children:"Scan items to return them to inventory and disable associated customer accounts."})]})]}),g.jsxs("div",{className:"grid lg:grid-cols-3 gap-8 items-start",children:[g.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[g.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-6 transition-all ${c?"border-green-200 bg-green-50":"border-gray-200"}`,children:[g.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[g.jsx("span",{className:"w-6 h-6 rounded-full bg-pink-100 text-pink-600 text-xs flex items-center justify-center",children:"1"}),"Router / CPE"]}),c?g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-green-700 font-bold mb-1",children:" Router Identified"}),g.jsx("p",{className:"text-xl font-mono text-gray-900",children:c.deviceId}),g.jsx("p",{className:"text-sm text-gray-500",children:c.model||"Unknown Model"}),c.customer_id&&g.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:["Customer ID: ",c.customer_id," (Will be disabled)"]})]}),g.jsx(et,{variant:"secondary",onClick:()=>f(null),className:"text-sm",children:"Remove"})]}):g.jsx(tu,{onScan:_,label:"Scan Router Barcode",placeholder:"Focus here to scan router..."})]}),g.jsxs("div",{className:`bg-white rounded-xl shadow-sm border p-6 transition-all ${p?"border-green-200 bg-green-50":"border-gray-200"}`,children:[g.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center gap-2",children:[g.jsx("span",{className:"w-6 h-6 rounded-full bg-cyan-100 text-cyan-600 text-xs flex items-center justify-center",children:"2"}),"SIM Card"]}),p?g.jsxs("div",{className:"flex justify-between items-center",children:[g.jsxs("div",{children:[g.jsx("p",{className:"text-sm text-green-700 font-bold mb-1",children:" SIM Identified"}),g.jsx("p",{className:"text-xl font-mono text-gray-900",children:p.deviceId}),g.jsxs("p",{className:"text-sm text-gray-500",children:["ICCID: ",p.iccid||"N/A"]})]}),g.jsx(et,{variant:"secondary",onClick:()=>m(null),className:"text-sm",children:"Remove"})]}):g.jsx(tu,{onScan:x,label:"Scan SIM Barcode",placeholder:"Focus here to scan SIM..."})]}),g.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200 flex justify-between items-center",children:[g.jsx("div",{className:"text-sm text-gray-500",children:!c&&!p?"Scan at least one item to proceed.":"Ready to process collection."}),g.jsx(et,{onClick:j,disabled:!c&&!p||n,isLoading:n,className:"w-48 shadow-lg shadow-pink-200",children:"Confirm Collection"})]})]}),g.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden lg:h-[600px] flex flex-col",children:[g.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex justify-between items-center",children:[g.jsx("h3",{className:"font-semibold text-gray-700",children:"Activity Log"}),g.jsx(et,{variant:"ghost",onClick:()=>u([]),disabled:a.length===0,className:"text-xs",children:"Clear"})]}),g.jsx("div",{className:"flex-1 overflow-y-auto p-0",children:a.length===0?g.jsxs("div",{className:"p-8 text-center text-gray-400 text-sm mt-12",children:[g.jsx("div",{className:"mb-2",children:""}),"No activity yet.",g.jsx("br",{}),"Scan a device to begin."]}):g.jsx("div",{className:"divide-y divide-gray-100",children:a.map(b=>g.jsxs("div",{className:"p-4 flex gap-3 hover:bg-gray-50 transition-colors",children:[g.jsxs("div",{className:"flex-shrink-0 mt-1.5",children:[b.type==="success"&&g.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 ring-2 ring-green-100"}),b.type==="error"&&g.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 ring-2 ring-red-100"}),b.type==="info"&&g.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 ring-2 ring-blue-100"})]}),g.jsxs("div",{className:"flex-1 min-w-0",children:[g.jsx("p",{className:`text-sm font-medium break-words ${b.type==="error"?"text-red-700":"text-gray-900"}`,children:b.message}),b.details&&g.jsx("p",{className:"text-xs text-gray-500 mt-1 break-words",children:b.details}),g.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:b.timestamp.toLocaleTimeString()})]})]},b.id))})})]})]})]})},zw=({userName:i})=>g.jsxs("div",{className:"max-w-4xl mx-auto",children:[g.jsxs("div",{className:"text-center mb-12",children:[g.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome, ",g.jsx("span",{className:"text-pink-600",children:i})]}),g.jsx("p",{className:"text-gray-500",children:"What would you like to manage today?"})]}),g.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[g.jsxs(kr,{to:"/swap",className:"group bg-white rounded-2xl shadow-sm border border-gray-200 p-8 hover:shadow-xl hover:border-pink-300 transition-all duration-300 text-center",children:[g.jsx("div",{className:"w-20 h-20 bg-pink-50 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-pink-100 transition-colors",children:g.jsx("svg",{className:"w-10 h-10 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Swap Device"}),g.jsx("p",{className:"text-gray-500 text-sm",children:"Return an old device and assign a new one to a customer."}),g.jsx("div",{className:"mt-8",children:g.jsx("span",{className:"text-pink-600 font-medium group-hover:underline underline-offset-4",children:"Start Swap "})})]}),g.jsxs(kr,{to:"/collection",className:"group bg-white rounded-2xl shadow-sm border border-gray-200 p-8 hover:shadow-xl hover:border-cyan-300 transition-all duration-300 text-center",children:[g.jsx("div",{className:"w-20 h-20 bg-cyan-50 rounded-full flex items-center justify-center mx-auto mb-6 group-hover:bg-cyan-100 transition-colors",children:g.jsx("svg",{className:"w-10 h-10 text-cyan-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:g.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),g.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Device Collection"}),g.jsx("p",{className:"text-gray-500 text-sm",children:"Collect returned Routers and SIMs, and update customer status."}),g.jsx("div",{className:"mt-8",children:g.jsx("span",{className:"text-cyan-600 font-medium group-hover:underline underline-offset-4",children:"Start Collection "})})]})]}),g.jsx("div",{className:"mt-12 text-center",children:g.jsx(kr,{to:"/history",className:"text-sm text-gray-400 hover:text-gray-600 transition-colors",children:"View My Transaction History"})})]}),Vw=()=>{const[i,r]=P.useState([]),[n,o]=P.useState(!0),[a,u]=P.useState(null),[c,f]=P.useState("Initializing...");if(P.useEffect(()=>{(async()=>{try{o(!0);const x=await Dw();f(`Loaded ${x.length} records.`),console.log("Raw Records:",x);const j=new Map;x.forEach(E=>{const A=E.Date||E.date||E.created_at,L=E.Province||E.province;if(!A)return;const T=String(A).replace(" ","T"),B=new Date(T);if(isNaN(B.getTime()))return;const H=B.toLocaleString("default",{month:"short"}),Z=B.getFullYear(),ee=`${H} ${Z}`,V=Z*100+B.getMonth();j.has(ee)||j.set(ee,{label:ee,Gauteng:0,Limpopo:0,sortKey:V});const te=j.get(ee),se=String(L||"").trim().toLowerCase();se.includes("gauteng")?te.Gauteng+=1:se.includes("limpopo")?te.Limpopo+=1:te.Gauteng+=1});const b=Array.from(j.values()).sort((E,A)=>E.sortKey-A.sortKey);console.log("Chart Data:",b),r(b)}catch(x){console.error("Stats Error:",x),u("Failed to load data."),f(`Error: ${x.message}`)}finally{o(!1)}})()},[]),n)return g.jsx("div",{className:"flex justify-center items-center h-96",children:g.jsx("div",{className:"w-10 h-10 border-4 border-pink-200 border-t-pink-600 rounded-full animate-spin"})});if(a)return g.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg border border-red-100 max-w-2xl mx-auto mt-8",children:a});const p=i.reduce((_,x)=>_+x.Gauteng,0),m=i.reduce((_,x)=>_+x.Limpopo,0),y=p+m,w=Math.max(...i.map(_=>Math.max(_.Gauteng,_.Limpopo)),5);return g.jsxs("div",{className:"max-w-6xl mx-auto space-y-8 pb-12",children:[g.jsxs("div",{className:"text-center mb-8",children:[g.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Collection Statistics"}),g.jsx("p",{className:"text-gray-500",children:"Monthly breakdown by province"}),g.jsx("p",{className:"text-xs text-gray-400 mt-2 font-mono bg-gray-100 inline-block px-2 py-1 rounded",children:c})]}),g.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-200",children:[g.jsxs("div",{className:"flex justify-between items-center mb-8",children:[g.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Collections per Month"}),g.jsxs("div",{className:"flex gap-4 text-sm",children:[g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 bg-pink-500 rounded"}),g.jsx("span",{children:"Gauteng"})]}),g.jsxs("div",{className:"flex items-center gap-2",children:[g.jsx("div",{className:"w-3 h-3 bg-cyan-500 rounded"}),g.jsx("span",{children:"Limpopo"})]})]})]}),i.length===0?g.jsx("div",{className:"h-64 flex flex-col items-center justify-center bg-gray-50 rounded border border-dashed border-gray-300 text-gray-400",children:g.jsx("p",{children:"No data found."})}):g.jsxs("div",{className:"relative h-80 w-full border-b border-l border-gray-200 bg-gray-50/50",children:[g.jsx("div",{className:"absolute inset-0 flex flex-col justify-between pointer-events-none",children:[1,.75,.5,.25,0].map(_=>g.jsx("div",{className:"w-full border-t border-gray-200 relative h-0",children:g.jsx("span",{className:"absolute -left-8 -top-2 text-xs text-gray-400 w-6 text-right",children:Math.round(w*_)})},_))}),g.jsx("div",{className:"absolute inset-0 flex items-end justify-around px-4 pt-4 pb-0",children:i.map(_=>g.jsxs("div",{className:"flex flex-col items-center gap-2 w-24 h-full justify-end group",children:[g.jsxs("div",{className:"flex gap-1 w-full justify-center items-end h-full",children:[g.jsx("div",{className:"w-1/2 bg-pink-500 rounded-t shadow-sm transition-all duration-500 relative hover:bg-pink-400",style:{height:`${_.Gauteng/w*100}%`,minHeight:"4px"},children:g.jsxs("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:["GP: ",_.Gauteng]})}),g.jsx("div",{className:"w-1/2 bg-cyan-500 rounded-t shadow-sm transition-all duration-500 relative hover:bg-cyan-400",style:{height:`${_.Limpopo/w*100}%`,minHeight:"4px"},children:g.jsxs("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 bg-gray-800 text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap z-10",children:["LP: ",_.Limpopo]})})]}),g.jsxs("div",{className:"mt-2 text-xs font-medium text-gray-600 text-center leading-tight",children:[_.label.split(" ")[0],g.jsx("span",{className:"block text-[10px] text-gray-400",children:_.label.split(" ")[1]})]})]},_.label))})]})]}),g.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-pink-100",children:[g.jsx("p",{className:"text-xs font-bold text-pink-600 uppercase tracking-wider",children:"Total Gauteng"}),g.jsx("p",{className:"text-3xl font-extrabold text-gray-900 mt-2",children:p})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-cyan-100",children:[g.jsx("p",{className:"text-xs font-bold text-cyan-600 uppercase tracking-wider",children:"Total Limpopo"}),g.jsx("p",{className:"text-3xl font-extrabold text-gray-900 mt-2",children:m})]}),g.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-200",children:[g.jsx("p",{className:"text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Grand Total"}),g.jsx("p",{className:"text-3xl font-extrabold text-gray-900 mt-2",children:y})]})]})]})},Ww=({onClose:i,onSave:r})=>{const[n,o]=P.useState("");return P.useEffect(()=>{const a=localStorage.getItem("umoja_token");o(a||xf)},[]),g.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm",children:g.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6 m-4 animate-in fade-in zoom-in duration-200",children:[g.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"System Configuration"}),g.jsxs("div",{className:"mb-4",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"API Endpoint"}),g.jsx("div",{className:"p-2 bg-gray-100 rounded text-xs font-mono text-gray-600 break-all",children:_f}),g.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Defined in system constants."})]}),g.jsxs("div",{className:"mb-6",children:[g.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Admin Basic Token"}),g.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg p-2 focus:ring-2 focus:ring-pink-500 focus:border-pink-500 outline-none transition-all font-mono text-xs",placeholder:"Base64 encoded string",value:n,onChange:a=>o(a.target.value)}),g.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Required to authenticate API requests. Please enter your Basic Auth hash (Base64)."})]}),g.jsxs("div",{className:"flex justify-end gap-3",children:[g.jsx(et,{variant:"secondary",onClick:i,children:"Cancel"}),g.jsx(et,{onClick:()=>r(n),children:"Save Configuration"})]})]})})},ks=({to:i,children:r})=>{const o=br().pathname===i;return g.jsx(kr,{to:i,className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${o?"bg-pink-50 text-pink-700":"text-gray-500 hover:text-gray-900 hover:bg-gray-50"}`,children:r})},Hw=({userName:i,adminId:r,handleLogout:n,setShowSettings:o,hasToken:a})=>g.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[g.jsx("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:g.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:g.jsxs("div",{className:"flex justify-between h-16",children:[g.jsxs("div",{className:"flex",children:[g.jsxs(kr,{to:"/",className:"flex-shrink-0 flex items-center gap-2 mr-6 hover:opacity-80 transition-opacity",children:[g.jsx("img",{src:"https://umoja.network/wp-content/uploads/2023/10/Umoja-Logo-1.png",alt:"Umoja Logo",className:"h-10 w-auto",onError:u=>{var c;u.target.style.display="none",(c=u.target.nextElementSibling)==null||c.classList.remove("hidden")}}),g.jsx("span",{className:"hidden font-bold text-2xl text-pink-600 tracking-tight font-serif italic",children:"Umoja"})]}),g.jsxs("div",{className:"hidden sm:flex sm:space-x-2 items-center",children:[g.jsx(ks,{to:"/",children:"Dashboard"}),g.jsx(ks,{to:"/swap",children:"Swap Device"}),g.jsx(ks,{to:"/collection",children:"Device Collection"}),g.jsx(ks,{to:"/stats",children:"Statistics"}),g.jsx(ks,{to:"/history",children:"My History"})]})]}),g.jsxs("div",{className:"flex items-center space-x-4",children:[i&&g.jsxs("span",{className:"text-sm font-medium text-gray-700 hidden md:block",children:["Welcome, ",g.jsx("span",{className:"text-pink-600",children:i})]}),g.jsx("button",{onClick:n,className:"text-sm font-medium text-gray-500 hover:text-pink-600 transition-colors",children:"Logout"})]})]})})}),g.jsx("main",{className:"flex-1 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full",children:g.jsxs(Fv,{children:[g.jsx(kn,{path:"/",element:g.jsx(zw,{userName:i})}),g.jsx(kn,{path:"/swap",element:g.jsx(Uw,{hasToken:a,adminId:r,adminName:i,onOpenSettings:()=>o(!0)})}),g.jsx(kn,{path:"/collection",element:g.jsx(Fw,{hasToken:a,adminName:i})}),g.jsx(kn,{path:"/stats",element:g.jsx(Vw,{})}),g.jsx(kn,{path:"/history",element:g.jsx(Bw,{adminId:r,adminName:i})})]})})]}),qw=()=>{const[i,r]=P.useState(!1),[n,o]=P.useState(!0),[a,u]=P.useState(!1),[c,f]=P.useState(!0),[p,m]=P.useState(""),[y,w]=P.useState("");P.useEffect(()=>{const b=localStorage.getItem("umoja_token");b&&kt.setToken(b);const E=localStorage.getItem("umoja_auth_session"),A=localStorage.getItem("umoja_auth_name"),L=localStorage.getItem("umoja_auth_id");E==="true"&&(L&&L!=="undefined"&&L!=="null"?(u(!0),A&&m(A),w(L)):(console.warn("Session found but no valid Admin ID. Forcing logout."),j())),f(!1)},[]);const _=b=>{localStorage.setItem("umoja_token",b),kt.setToken(b),o(!0),r(!1)},x=(b,E)=>{localStorage.setItem("umoja_auth_session","true"),localStorage.setItem("umoja_auth_name",b),localStorage.setItem("umoja_auth_id",E),m(b),w(E),u(!0)},j=()=>{localStorage.removeItem("umoja_auth_session"),localStorage.removeItem("umoja_auth_name"),localStorage.removeItem("umoja_auth_id"),m(""),w(""),u(!1)};return c?g.jsx("div",{className:"min-h-screen flex items-center justify-center text-pink-600",children:"Loading..."}):a?g.jsxs(cy,{children:[g.jsx(Hw,{userName:p,adminId:y,handleLogout:j,setShowSettings:r,hasToken:n}),i&&g.jsx(Ww,{onClose:()=>r(!1),onSave:_})]}):g.jsx(Mw,{onLoginSuccess:x})},Bp=document.getElementById("root");if(!Bp)throw new Error("Could not find root element to mount to");const Kw=Gg.createRoot(Bp);Kw.render(g.jsx(Fg.StrictMode,{children:g.jsx(qw,{})}));
